<!-- style -->
<link rel="import" href="../../styles/common-style.html">

<!-- behavior -->
<link rel="import" href="../../behaviors/common-computes.html">
<link rel="import" href="../../behaviors/db-using.html">
<link rel="import" href="../../behaviors/translating.html">
<link rel="import" href="../../behaviors/page-like.html">

<!-- custom-elements -->

<!-- element -->
<dom-module id="page-print-invoice">
  <template>

    <!-- style -->

    <style is="custom-style" include="common-style">
      .limiting-container {
        margin-top: 10px;
      }
      
      .external-card-title {
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
        color: #777777;
      }
      
      .info-card {
        @apply(--layout-vertical);
        /*@apply(--layout-center);*/
        margin-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
        padding-bottom: 20px;
      }
      
      .info-card .row {
        margin-left: 10px;
        /*margin-right: 10px;*/
        margin-top: 10px;
      }
      
      .info-card .hr {
        margin-left: 20px;
        margin-right: 20px;
        height: 1px;
        /*width: 100px;*/
        background: #dddddd;
      }
      
      .info-card .row .modifier {
        font-size: 14px;
        background: #000000;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
      }
      
      .info-card .row .modifier.online {
        background: #757575;
      }
      
      .info-card .row .modifier.local-only {
        background: #039BE5;
      }
      
      .info-card .row .modifier.locally-updated {
        background: #009688;
      }
      
      .info-card .row .modifier.imported {
        background: #4CAF50;
      }
      
      .info-row {
        margin-top: 10px;
      }
      
      .top-info-row {
        margin-top: 10px;
        margin-bottom: 10px;
      }
      
      .serial-number {
        background: #37474F;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: bold;
        display: inline-block;
        font-size: 14px;
      }
      
      .address1 {
        margin-right: 10px;
      }
      
      .name {
        margin-left: 5px;
        font-size: 24px;
      }
      
      .email {
        margin-left: 5px;
        font-size: 14px;
      }
      
      .phone {
        margin-left: 5px;
      }
      
      .val {
        text-decoration: underline;
      }
      
      .account-box {
        --iron-icon-width: 96px;
        --iron-icon-height: 96px;
      }

      .limiting-container {
        margin-top: 10px;
      }
      
      .limiting-container {
        max-width: 210mm;
        min-height: 230mm;
        /*min-height: 297mm;*/
      }
      
      .document {
        font-family: 'Times New Roman';
        background: white;
      }
      
      .document-title {
        font-size: 20px;
        font-weight: bold;
      }
      
      @media print {
        .limiting-container {
          /*margin-top: -60px;*/
          /*border: 1px solid black;*/
        }
      }
      
      .collection {
        color: red;
        background: grey;
      }
      
      .document-header {
        padding-left: 10px;
        padding-right: 10px;
      }
      
      .document-header .logo {
        max-width: 128px;
        max-height: 128px;
      }
      
      .horiline {
        width: 100%;
        height: 0px;
        /*background: black;*/
        border: 1px solid black;
        margin-bottom: 6px;
      }
      
      .leftSide {
        margin-left: 6px;
      }
      
      .leftSideLine1 {
        font-size: 24px;
      }
      
      .rightSideLine1 {
        font-size: 22px;
      }
      .item{
        padding: 10px;
        border: 1px solid grey;
      }
    </style>

    <!-- local DOM -->

    <div class="master-container">

      <div class="limiting-container document">

        <template is="dom-if" if="{{!isVisitValid}}">
          Visit invalid
        </template>

        <template is="dom-if" if="{{!isPatientValid}}">
          Patient invalid
        </template>

        <!-- editing visit - start -->
        <template is="dom-if" if="{{$and(isVisitValid, isPatientValid)}}">

        <div class="document-header horizontal layout center">

            <template is="dom-if" if="[[settings.printDecoration.logoDataUri]]">
              <img class="logo" src="[[settings.printDecoration.logoDataUri]]" alt="">
            </template>

            <div class="leftSide vertical layout">
              <div class="leftSideLine1">[[settings.printDecoration.leftSideLine1]]</div>
              <div class="leftSideLine2">[[settings.printDecoration.leftSideLine2]]</div>
              <div class="leftSideLine3">[[settings.printDecoration.leftSideLine3]]</div>
            </div>
            <div class="flex"></div>
            <div class="rightSide vertical layout end">
              <div class="rightSideLine1">[[settings.printDecoration.rightSideLine1]]</div>
              <div class="rightSideLine2">[[settings.printDecoration.rightSideLine2]]</div>
              <div class="rightSideLine3">[[settings.printDecoration.rightSideLine3]]</div>
            </div>
          </div>



          <div class="horiline"></div>

          <div class="document-header horizontal layout center">
            <template is="dom-if" if="[[!patient.isForOrganizationOnly]]">
              Name: {{patient.name}} <br>
              Age :[[_computeAge(patient.dob)]] years <br>
              Allergy : <br>
              Blood Group : <br>
            </template>
            <template is="dom-if" if="[[patient.isForOrganizationOnly]]">
              Name: REDACTED FOR CONFIDENTIALITY <br>
              Age : REDACTED FOR CONFIDENTIALITY  <br>
              Allergy : <br>
              Blood Group : <br>
            </template>
          </div>
          
          <div class="horiline"></div>
          <!--Invoice Starts -->
          <div class="invoice document-header">
            
            <div class="horizontal layout row">
              <div class="flex x-end key">Serial:</div>
              <div class="flex val">[[invoice.serial]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Name of Institution:</div>
              <div class="flex val">[[invoice.data.nameOfInstitution]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Name of Patient:</div>
              <div class="flex val">[[invoice.data.nameOfPatient]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Name of Billing Person:</div>
              <div class="flex val">[[invoice.data.billingPersonsName]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Service Rendered:</div>
              <div class="flex val">[[$fromListOrCustom(serviceRenderedOptionList, invoice.data.serviceRenderedSelectedIndex, invoice.data.customServiceRendered)]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Source of the patient:</div>
              <div class="flex val">[[$fromListOrCustom(sourceOfPatientOptionList, invoice.data.sourceOfPatientSelectedIndex, invoice.data.customSourceOfPatient)]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Date Performed:</div>
              <div class="flex val">[[invoice.data.datePerformed]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Date Due:</div>
              <div class="flex val">[[invoice.data.dateDue]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Time From:</div>
              <div class="flex val">[[invoice.data.timeFrom]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Time To:</div>
              <div class="flex val">[[invoice.data.timeTo]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Comments:</div>
              <div class="flex val">[[invoice.data.comments]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Fee Paid On:</div>
              <div class="flex val">[[invoice.data.feePaidOn]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Fee Paid By:</div>
              <div class="flex val">[[$fromListOrCustom(feePaidByOptionList, invoice.data.feePaidBySelectedIndex, invoice.data.customSourceOfPatient)]]</div>
            </div>

            <div class="horizontal layout row">
              <hr class="flex" />
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Fee Billed:</div>
              <div class="flex val">[[invoice.data.feeBilledAmount]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Fee Paid:</div>
              <div class="flex val">[[invoice.data.feePaidAmount]]</div>
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Fee Remaining:</div>
              <div class="flex val">[[$calculateRemaining(invoice.data.feePaidAmount, invoice.data.feeBilledAmount, invoice.data.isCleared)]]</div>
            </div>

            <div class="horizontal layout row">
              <hr class="flex" />
            </div>

            <div class="horizontal layout row">
              <div class="flex x-end key">Payment Status</div>
              <div class="flex val">[[$toReadbleStatus(invoice.data.paymentStatus)]]</div>
            </div>

          </div>


        </template>
        <div class="sp-2"></div>
        <div class="horizontal layout center center-justified p-horizontal-16">
          <div class="type body italic"><strong>printed by: </strong>[[user.name]]</div>
        </div>

      </div>

    </div>

  </template>
  <script src="page-print-invoice.coffee-compiled.js"></script>
</dom-module>


