<!-- iron-* -->
<!-- paper-* -->
<link rel="import" href="../../bower-assets/paper-button/paper-button.html">
<link rel="import" href="../../bower-assets/paper-card/paper-card.html">
<link rel="import" href="../../bower-assets/paper-input/paper-input.html">
<link rel="import" href="../../bower-assets/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower-assets/paper-menu/paper-menu.html">
<link rel="import" href="../../bower-assets/paper-item/paper-item.html">
<link rel="import" href="../../bower-assets/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../../bower-assets/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower-assets/paper-icon-button/paper-icon-button.html">

<link rel="import" href="../../bower-assets/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower-assets/paper-item/paper-item.html">
<link rel="import" href="../../bower-assets/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower-assets/paper-input/paper-input.html"
<link rel="import" href="../../bower-assets/paper-card/paper-card.html">
<link rel="import" href="../../bower-assets/paper-button/paper-button.html">

<!-- ELEMENTS -->
<link rel="import" href="element-patient-details.html">
<link rel="import" href="element-visit-details.html">
<link rel="import" href="element-prescription.html">
<link rel="import" href="element-symptoms.html">
<link rel="import" href="element-examination.html">
<link rel="import" href="element-vital.html">
<link rel="import" href="element-test-advised.html">
<link rel="import" href="element-diagnosis.html">
<link rel="import" href="element-next-visit.html">
<link rel="import" href="element-refferal.html">
<link rel="import" href="element-invoice.html">
<link rel="import" href="element-history-physical.html">
<link rel="import" href="element-prescription.html">
<link rel="import" href="element-patient-stay.html">
<link rel="import" href="element-visit-print-preview.html">

<!-- style -->
<link rel="import" href="../../styles/common-style.html">

<!-- behavior -->
<link rel="import" href="../../behaviors/common-computes.html">
<link rel="import" href="../../behaviors/db-using.html">
<link rel="import" href="../../behaviors/translating.html">
<link rel="import" href="../../behaviors/page-like.html">
<link rel="import" href="../../behaviors/api-calling.html">



<!-- element -->
<dom-module id="page-visit-editor">
  <template>

    <style is="custom-style" include="common-style">
      .fixed-btn {
        position: absolute;
        top: 8px;
        right: 8px;
      }

      .limiting-container {
        margin-top: 8px;
        width: 95%;
      }

      .external-card-title {
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
        color: #777777;
      }

      .b-radius paper-listbox {
        border-radius: 6px;
      }

      .info-card {
        @apply(--layout-vertical);
        /*@apply(--layout-center);*/
        margin-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
        padding-bottom: 20px;
      }

      .info-card .row {
        margin-left: 10px;
        /*margin-right: 10px;*/
        margin-top: 10px;
      }

      .info-card .hr {
        margin-left: 20px;
        margin-right: 20px;
        height: 1px;
        /*width: 100px;*/
        background: #dddddd;
      }

      .info-card .row .modifier {
        font-size: 14px;
        background: #000000;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
      }

      .info-card .row .modifier.online {
        background: #757575;
      }

      .info-card .row .modifier.local-only {
        background: #039BE5;
      }

      .info-card .row .modifier.locally-updated {
        background: #009688;
      }

      .info-card .row .modifier.imported {
        background: #4CAF50;
      }

      .info-row {
        margin-top: 10px;
      }

      .top-info-row {
        margin-top: 10px;
        margin-bottom: 10px;
      }

      .serial-number {
        background: #37474F;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: bold;
        display: inline-block;
        font-size: 14px;
      }

      .address1 {
        margin-right: 10px;
      }

      .name {
        margin-left: 5px;
        font-size: 24px;
      }

      .email {
        margin-left: 5px;
        font-size: 14px;
      }

      .phone {
        margin-left: 5px;
      }

      .val {
        text-decoration: underline;
      }

      .account-box {
        --iron-icon-width: 96px;
        --iron-icon-height: 96px;
      }

      .list-item {
        margin-top: 8px;
        margin-bottom: 8px;
      }

      .copy-button {
        background-color: #1FAE0B;
      }

      .paste-button {
        background-color: #f44336;
        color: white;
      }

      .table {
        width: 100%;
        border-collapse: collapse;
      }

      .table th {
        text-align: left;
      }

      .table thead * {
        border-bottom: 1px solid #ccc;
        background-color: #f5f5f5;
        padding: 5px;
      }

      .table tbody th,
      .table tbody td {
        padding: 5px;
        border-bottom: 1px solid #eee;
        vertical-align: middle;
      }

      .table tfoot * {
        background-color: #f5f5f5;
        padding: 5px;
      }



      .item-action {
        border-top: 1px solid #e8e8e8;
        padding: 5px 16px;
        position: relative;
        padding: 15px;
        text-align: right;
      }

      paper-dropdown-menu {
        width: 100%;
      }


      paper-checkbox.remind {
        padding: 15px 25px;
      }

      paper-checkbox.guideline-checkbox {
        --paper-checkbox-size: 14px;
      }

      .guideline {
        margin-left: 10px;
        margin-top: 70px;
        height: 90%;
        overflow: auto;
      }

      .guideline h1 {
        text-align: left;
        padding: 10px 0;
        border-bottom: 1px solid var(--paper-green-500);
        color: var(--brand-primary-color);
      }

      .guideline .dose {
        margin: 10px 0;
        padding: 10px;
      }

      .guideline .subDose {
        padding: 10px;
        margin: 5px 0;
        border: 1px solid #e0e0e0;
        border-radius: 3px;
        /*background-color: var(--paper-grey-50);*/
      }

      .guideline .age-group {
        border-bottom: 1px solid #ccc;
      }

      .disclaimer p {
        color: red;
      }

      app-drawer {
        --app-drawer-width: 400px;
        --app-drawer-scrim-background: rgba(0, 0, 0, 0.1);
        --app-drawer-content-container: {
          border-left: 1px solid #ccc;
          padding-left: 10px;
        }
        text-align: left;
      }

      paper-material {
        border: 1px solid var(--paper-grey-200);
      }

      paper-fab {
        float: right;
        margin-right: 10px;
        margin-top: 30px;
      }

      .indication-group {
        border: 1px solid var(--paper-blue-grey-100);
        padding: 15px;
        border-radius: 3px;
      }

      .indication-group paper-dropdown-menu {
        --paper-input-container-color: var(--paper-orange-500);
      }

      .card-custom-header {
        padding: 15px;
        border-bottom: 1px solid var(--paper-grey-200);
        background-color: var(--paper-grey-50);
      }

      .card-custom-header .title {
        font-size: 20px;
        font-weight: 500;
        color: var(--brand-primary-color);
      }

      @media screen and (max-width: 480px) {
        app-drawer {
          --app-drawer-width: 95%;
        }

        .btn-add.m-vert {
          margin: 0.29em;
        }
      }

      .card-item-2 {
        border-radius: 2px;
        margin: 8px 4px;
        border: 2px solid #eee;
        background-color: #fff;
        position: relative;
      }

      .card-item {
        border-radius: 6px;
        border: 1px solid #eee;
        margin: 3px;
      }

      .custom-card-content {
        background-color: #f7f7f7;
      }



      .card-item div {
        background-color: #fafafa;
        /*border-right: 1px solid #eee;*/
      }

      paper-checkbox {
        margin: 8px;
      }

      .btn-custom {
        background-color: #fafafa !important;
        border: 1px solid #eee;
        margin: 3px;
      }

      .btn-custom-2 {
        background-color: #fafafa !important;
        border-radius-top-left: 0;
        border-radius-bottom-left: 0;
        margin: 0 !important;
      }

      .combobox-custom {
        padding: 8px 16px;
        background-color: #f7f7f7;
        border-bottom: 1px solid #eee;
      }

      /*Full Visit Preview - start*/

      .document {
        font-family: 'Times New Roman';
        background: white;
      }

      .document-title {
        font-size: 16px;
        text-decoration: underline;
        font-weight: bold;
        @apply(--layout-vertical);
        @apply(--layout-center);
      }



      .external-card-title {
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
        color: #777777;
      }

      .info-card {
        @apply(--layout-vertical);
        /*@apply(--layout-center);*/
        margin-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
        padding-bottom: 20px;
      }

      .info-card .row {
        margin-left: 10px;
        /*margin-right: 10px;*/
        margin-top: 10px;
      }

      .info-card .hr {
        margin-left: 20px;
        margin-right: 20px;
        height: 1px;
        /*width: 100px;*/
        background: #dddddd;
      }

      .info-card .row .modifier {
        font-size: 14px;
        background: #000000;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
      }

      .info-card .row .modifier.online {
        background: #757575;
      }

      .info-card .row .modifier.local-only {
        background: #039BE5;
      }

      .info-card .row .modifier.locally-updated {
        background: #009688;
      }

      .info-card .row .modifier.imported {
        background: #4CAF50;
      }

      .info-row {
        margin-top: 10px;
      }

      .top-info-row {
        margin-top: 10px;
        margin-bottom: 10px;
      }

      .serial-number {
        background: #37474F;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: bold;
        display: inline-block;
        font-size: 14px;
      }

      .address1 {
        margin-right: 10px;
      }

      .name {
        margin-left: 5px;
        font-size: 24px;
      }

      .email {
        margin-left: 5px;
        font-size: 14px;
      }

      .phone {
        margin-left: 5px;
      }

      .val {
        text-decoration: underline;
      }

      .account-box {
        --iron-icon-width: 96px;
        --iron-icon-height: 96px;
      }

      .document {
        font-family: 'Times New Roman';
        background: white;
      }

      .document-title {
        font-size: 20px;
        font-weight: bold;
      }

      .collection {
        color: red;
        background: grey;
      }

      .document-header {
        /*background-color: #fafafa;*/
        padding-left: 10px;
        padding-right: 10px;
        border-bottom: 1px solid #eee;
      }

      .document-header .logo {
        max-width: 128px;
        max-height: 128px;
      }

      .horiline {
        width: 100%;
        height: 0px;
        /*background: black;*/
        border: 1px solid black;
        margin-bottom: 6px;
      }

      .leftSide {
        margin-left: 6px;
      }

      .leftSideLine1 {
        font-size: 24px;
      }

      .rightSideLine1 {
        font-size: 22px;
      }


      .document-header2 .logo {
        max-width: 128px;
        max-height: 128px;
      }


      .item {
        padding: 10px;
        border: 1px solid grey;
      }

      #printPreview {
        display: none !important;
      }

      @media print {

        #hideOnPrint {
          display: none !important;
        }

        #printPreview {
          display: block !important;
          background-color: transparent;
        }
      }

      @media print {
        app-header-layout #contentContainer {
          overflow-y: unset !important;
        }
      }

      .preview-title {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        padding-left: 12px;
        padding-right: 8px;
        background-color: #fff;
        min-height: 60px;
        /*border-bottom: 1px solid #eee;*/
      }

      .custom-content {
        @apply(--layout-horizontal);
        @apply(--layout-wrap);
        @apply(--layout-center);
        padding-left: 12px;
        padding-right: 8px;
      }

      .b-top {
        border-top: 1px solid #eee;
      }

      /*.content {
        padding-top: 8px;
      }*/

      .content.top {}

      .content.left {
        width: 40%;
        /*padding-right: 8px;*/
      }

      .content.right {
        width: 60%;
      }

      @media screen and (max-width: 639px) {
        .content.left {
          /*margin-top: 8px;*/
          width: 100%;
          /*padding: 0;*/
        }

        .content.right {
          width: 100%;
          /*padding: 0;*/
          /*margin-top: 8px;*/
        }
      }

      .tabColor {
        background-color: teal !important;
      }

      vaadin-combo-box.combobox-custom-style {
        padding: 2px;
      }

      vaadin-combo-box.combobox-custom-style ::content paper-input-container {
        padding: 4px 0;
      }

      vaadin-combo-box.combobox-custom-style ::content label {
        font-size: 18px !important;
        /*color: rgba(0, 0, 0, .87) !important;*/
      }

      /*vaadin-combo-box.combobox-custom-style ::content .unfocused-line {
        border-bottom: none;
      }*/

      vaadin-combo-box.combobox-custom-style ::content input {
        font-size: 18px !important;
        color: rgba(0, 0, 0, .87) !important;
      }

      .paper-input-custom ::content input {
        font-size: 18px !important;
        color: rgba(0, 0, 0, .87) !important;
      }

      .paper-input-custom ::content label {
        font-size: 18px !important;
        color: #737373 !important;
      }


      paper-textarea.textarea-custom-style ::content label {
        font-size: 18px !important;
      }

      paper-textarea.textarea-custom-style ::content iron-autogrow-textarea {
        font-size: 18px !important;
      }

      /*paper-textarea ::content .unfocused-line{
        border-bottom: none;
      }*/

      .type.title-2 {
        font-size: 18px;
        line-height: 50px;
      }

      vaadin-date-picker.date-picker-custom-style ::content paper-input-container {
        padding: 0;
      }

      /*vaadin-date-picker.date-picker-custom-style ::content .unfocused-line {
        border-bottom: none;
      }*/

      vaadin-date-picker.date-picker-custom-style ::content label {
        font-size: 18px !important;
      }

      vaadin-date-picker.date-picker-custom-style ::content input {
        font-size: 18px !important;
      }

      vaadin-date-picker.date-picker-custom-style ::content .floated-label-placeholder {
        display: none;
      }

      vaadin-date-picker.date-picker-custom-style {
        padding: 8px 8px 8px 0;
      }

      paper-dropdown-menu.dropdown-menu-custom-style ::content label {
        font-size: 18px !important;
      }

      paper-dropdown-menu.dropdown-menu-custom-style ::content input {
        font-size: 18px !important;
      }

      .border-top {
        border-top: 1px solid #eee;
      }

      .action-area {
        padding: 5px 0 5px 8px;
      }

      .btn-add {
        min-width: 0;
        padding-top: 0.5em;
        padding-bottom: 0.5em;
        background-color: #eceff1;
        color: rgba(0, 0, 0, .87);
      }

      .btn-add.small {
        margin: 3px;
        font-size: 14px;
      }


      paper-tabs.custom-tabs {
        background-color: #f7f7f7;
        height: 56px;
      }

      /*Print Preview*/

      .patient-details {
        background-color: #5c4575;
        color: #fff;
      }

      .print-content {
        border-top: 1px solid #eee;
        @apply(--layout-horizontal);
      }

      .print-content .left {
        width: 34%;
        border-right: 1px solid #eee;
      }

      .print-content .right {
        width: 66%;
      }

      ol.order-list {
        margin: 4px 0;
        padding-left: 16px;
        list-style-type: lower-alpha;
      }

      ul.unorderd-list-custom {
        margin: 4px 0;
        padding-left: 16px;
      }

      ol.order-list li {
        margin: 4px 0;
      }

      .print-sub-header {
        font-size: bold;
        background-color: #fafafa;
        margin-bottom: 8px;
      }

      .profile-image {
        height: 78px;
        width: 78px;
        border-radius: 50%;
        border: 2px solid #f7f7f7;
      }
    </style>

    <div class="master-container">
      <div class="limiting-container">

        <!-- Page :: New Visit - Start -->
        <paper-card id="hideOnPrint">

          <!-- visit content - start -->
          <div class="custom-card-content">
            <!-- Patient Details start -->
            <element-patient-details patient="[[patient]]"></element-patient-details>
            <!-- Patient Details end -->

            <!-- visit details - start -->
            <element-visit-details visit="{{visit}}"></element-visit-details>
            <!-- visit details - end -->
          </div>

          <div class="custom-card-content horizontal layout wrap">

            <div class="content left">

              <!-- Card - Symptoms - start -->
              <element-symptoms></element-symptoms>
              <!-- Card - Symptoms - end -->

              <!-- Card - Examination - start -->
              <element-examination></element-examination>
              <!-- Card - Examination - end -->

              <!-- Card - Vitals - start -->
              <element-vital></element-vital>
              <!-- Card - Vitals - end -->

              <!-- Card - Test Advised - start -->
              <element-test-advised></element-test-advised>
              <!-- Card - Test Advised - end -->

              <!-- Card - Diagnosis - start -->
              <element-diagnosis></element-diagnosis>
              <!-- Card - Diagnosis - end -->

              <!-- Card - Notes - start -->
              
              <!-- Card - Notes - end -->

              <!-- Card - Next Visit - start -->
              <element-next-visit></element-next-visit>
              <!-- Card - Next Visit - end -->

              <!-- Card - Referral start -->
              <element-refferal></element-refferal>
              <!-- Card - Referral end -->

              <!-- Card :: Invoice - start -->
              <element-invoice></element-invoice>
              <!-- Card :: Invoice - end -->

            </div>

            <div class="content right">

              <!-- Card - History And Physical - start -->
              <element-history-physical></element-history-physical>
              <!-- Card - History And Physical - end -->

              <!-- Card :: Prescription - start -->

              <element-prescription></element-prescription>

              <!-- Card :: Prescription - end -->

              <!-- Card :: Patient Stay - start -->
              <element-patient-stay></element-patient-stay>
              <!-- Card :: Patient Stay - end -->

            </div>
          </div>
          <!-- visit content - end -->
        </paper-card>
        <!-- New Visit - end -->
      </div>
    </div>

    <!-- Print Preview Area - start -->
    <element-visit-print-preview></element-visit-print-preview>
    <!-- Print Preview Area - end -->

    <!-- Dialog for - Continue Current Medication - start -->
    <paper-dialog id="dialogContinueCurrentMedication">
      <div>
        <vaadin-date-picker id="continueEndDate" label="[[$TRANSLATE('Ends on',LANG)]]" value="{{continueMedicineEndsOnDate}}"></vaadin-date-picker>
      </div>
      <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button on-click="addSelectedCurrentMedicine" autofocus raised>Save</paper-button>
      </div>
    </paper-dialog>
    <!-- Dialog for - Continue Current Medication - end -->

    <!-- Dialog for - Suggested Institution - start -->
    <paper-dialog id="dialogSuggestedInstitution">
      <div>
        <vaadin-combo-box label="Suggested Institution" items="{{machingUserAddedInstitutionList}}" allow-custom-value="true" on-keyup="comboBoxKeyUpSeggestedInstitutionNameChanged"
          value="{{suggestedInstitutionValue}}">
        </vaadin-combo-box>
      </div>
      <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <!-- <paper-button on-click="_saveSuggestedInstituonName" autofocus raised>Save</paper-button> -->
      </div>
    </paper-dialog>
    <!-- Dialog for - Suggested Institution - end -->

    <!-- Dialog for - Investigation Member Name - start -->
    <paper-dialog id="dialogInvestigationMemberValue">
      <div>
        <paper-input label="Add Test" value="{{investigationMemberValue}}"></paper-input>
      </div>
      <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button on-click="addInvestigationMember" autofocus raised>Add</paper-button>
      </div>
    </paper-dialog>
    <!-- Dialog for - Investigation Member Name - end -->

    <!-- Dialog for - Examination Member Name - start -->
    <paper-dialog id="dialogExaminationMemberValue">
      <div>
        <paper-input label="Add Examination" value="{{customExaminationValue}}"></paper-input>
      </div>
      <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button on-click="addExaminationMember" autofocus raised>Add</paper-button>
      </div>
    </paper-dialog>
    <!-- Dialog for - Examination Member Name - end -->

    <!-- Dialog - Visit Settings - start -->
    <paper-dialog id="dialogVisitSettings">
      <div class="dialog-content">
        <div class="type body-lead">
          <iron-icon icon="icons:settings" class="m-right-8 "></iron-icon>Visit Settings</div>


        <vaadin-combo-box class="flex combobox-custom-style" label="Change Record Title" id="comboBoxRecordTitle" items="{{visitHeaderTitleList}}"
          allow-custom-value="true" on-keyup="comboBoxKeyUpRecordTitleValueChanged" value="{{visit.recordTitle}}"></vaadin-combo-box>
        <paper-dropdown-menu label="Institution " class="flex ">
          <paper-listbox class="dropdown-content " selected="{{doctorInstitutionSelectedIndex}} " on-iron-select="_institutionSelectedIndexChanged ">
            <template is="dom-repeat " items="{{doctorInstitutionList}} ">
              <paper-item>{{item}}</paper-item>
            </template>

          </paper-listbox>
        </paper-dropdown-menu>

        <paper-dropdown-menu label="Speciality " class="flex ">
          <paper-listbox class="dropdown-content " selected="{{doctorSpecialitySelectedIndex}} " on-iron-select="_specialitySelectedIndexChanged ">
            <template is="dom-repeat " items="{{doctorSpecialityList}} ">
              <paper-item>{{item}}</paper-item>
            </template>

          </paper-listbox>
        </paper-dropdown-menu>
      </div>

      <div class="buttons ">
        <paper-button dialog-dismiss autofocus raised on-tap="saveVisitSettings">
          <iron-icon icon="save" class="m-right-8"></iron-icon>Save</paper-button>
      </div>
    </paper-dialog>

    

    

    <!-- local DOM -->
  </template>
  <script src="../mixin/mixin-patient-stay.coffee-compiled.js "></script>
  <script src="../mixin/load-price-list-mixin.coffee-compiled.js "></script>
  <script src="invoice-module.coffee-compiled.js"></script>
  <script src="page-visit-editor.coffee-compiled.js "></script>
</dom-module>