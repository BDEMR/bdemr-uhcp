<!-- style --><!-- behavior --><!-- custom-elements --><!-- element --><dom-module id="page-print-test-result-from-clinic-app">
  <template>

    <!-- style -->

    <style is="custom-style" include="common-style">
      .limiting-container {
        margin-top: 10px;
      }
      
      .external-card-title {
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
        color: #777777;
      }
      
      .info-card {
        @apply(--layout-vertical);
        /*@apply(--layout-center);*/
        margin-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
        padding-bottom: 20px;
      }
      
      .info-card .row {
        margin-left: 10px;
        /*margin-right: 10px;*/
        margin-top: 10px;
      }
      
      .info-card .hr {
        margin-left: 20px;
        margin-right: 20px;
        height: 1px;
        /*width: 100px;*/
        background: #dddddd;
      }
      
      .info-card .row .modifier {
        font-size: 14px;
        background: #000000;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
      }
      
      .info-card .row .modifier.online {
        background: #757575;
      }
      
      .info-card .row .modifier.local-only {
        background: #039BE5;
      }
      
      .info-card .row .modifier.locally-updated {
        background: #009688;
      }
      
      .info-card .row .modifier.imported {
        background: #4CAF50;
      }
      
      .info-row {
        margin-top: 10px;
      }
      
      .top-info-row {
        margin-top: 10px;
        margin-bottom: 10px;
      }
      
      .serial-number {
        background: #37474F;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: bold;
        display: inline-block;
        font-size: 14px;
      }
      
      .address1 {
        margin-right: 10px;
      }
      
      .name {
        margin-left: 5px;
        font-size: 24px;
      }
      
      .email {
        margin-left: 5px;
        font-size: 14px;
      }
      
      .phone {
        margin-left: 5px;
      }
      
      .val {
        text-decoration: underline;
      }
      
      .account-box {
        --iron-icon-width: 96px;
        --iron-icon-height: 96px;
      }

      .limiting-container {
      margin-top: 10px;
    }
    
    .limiting-container {
      max-width: 210mm;
      min-height: 230mm;
      /*min-height: 297mm;*/
    }
    
    .document {
      font-family: 'Times New Roman';
      background: white;
    }
    
    .document-title {
      font-size: 20px;
      font-weight: bold;
    }
    
    @media print {
      .limiting-container {
        /*margin-top: -60px;*/
        /*border: 1px solid black;*/
      }
    }
    
    .collection {
      color: red;
      background: grey;
    }
    
    .document-header {
      padding-left: 10px;
      padding-right: 10px;
    }
    
    .document-header .logo {
      max-width: 128px;
      max-height: 128px;
    }
    
    .horiline {
      width: 100%;
      height: 0px;
      /*background: black;*/
      border: 1px solid black;
      margin-bottom: 6px;
    }
    
    .leftSide {
      margin-left: 6px;
    }
    
    .leftSideLine1 {
      font-size: 24px;
    }
    
    .rightSideLine1 {
      font-size: 22px;
    }
    .item{
      padding: 10px;
      border: 1px solid grey;
    }
    </style>

    <!-- local DOM -->

    <div class="master-container">

      <div class="limiting-container document">

        <template is="dom-if" if="{{!isVisitValid}}">
          Visit invalid
        </template>

        <template is="dom-if" if="{{!isPatientValid}}">
          Patient invalid
        </template>

        <!-- editing visit - start -->
        <template is="dom-if" if="{{$and(isVisitValid, isPatientValid)}}">
          <div class="document-header horizontal layout center">

            <template is="dom-if" if="[[settings.printDecoration.logoDataUri]]">
              <img class="logo" src="[[settings.printDecoration.logoDataUri]]" alt="">
            </template>

            <div class="leftSide vertical layout">
              <div class="leftSideLine1">[[settings.printDecoration.leftSideLine1]]</div>
              <div class="leftSideLine2">[[settings.printDecoration.leftSideLine2]]</div>
              <div class="leftSideLine3">[[settings.printDecoration.leftSideLine3]]</div>
            </div>
            <div class="flex"></div>
            <div class="rightSide vertical layout end">
              <div class="rightSideLine1">[[settings.printDecoration.rightSideLine1]]</div>
              <div class="rightSideLine2">[[settings.printDecoration.rightSideLine2]]</div>
              <div class="rightSideLine3">[[settings.printDecoration.rightSideLine3]]</div>
            </div>
          </div>



          <div class="horiline"></div>

          <div class="document-header horizontal layout center">
            <template is="dom-if" if="[[!patient.isForOrganizationOnly]]">
              Name: {{patient.name}} <br>
              Age :[[_computeAge(patient.dob)]] years <br>
              Allergy : <br>
              Blood Group : <br>
            </template>
            <template is="dom-if" if="[[patient.isForOrganizationOnly]]">
              Name: REDACTED FOR CONFIDENTIALITY <br>
              Age : REDACTED FOR CONFIDENTIALITY  <br>
              Allergy : <br>
              Blood Group : <br>
            </template>
          </div>

          <!-- Test Results - start -->
          
          <paper-card class="m-top-16" heading="Test Results">
            <template is="dom-if" if="[[_isEmptyArray(matchingTestResultsList)]]">
              <div class="card-content layout horizontal center center-justified">
                <div class="type body secondary">-- empty --</div>
              </div>
            </template>
            <template is="dom-if" if="[[!_isEmptyArray(matchingTestResultsList)]]">
              <div class="p-0">
                <paper-listbox>
                  
                  <template id="test-results-list-repeater" is="dom-repeat" items="[[matchingTestResultsList]]">

                    <paper-item class="custom layout horizontal">
                      <div class="flex">

                        <div class="type body"> <span class="type body m-right-8">[[_returnSerial(index)]].</span>{{item.investigationName}}</div>

                        <ul>
                          <template is="dom-repeat" items="{{item.data.testList}}">
                            <li>
                              <div>
                                {{item.testName}}: {{item.testResult}} {{item.testUnit}}
                              </div>
                              <div class="type caption secondary"><strong>Reported By:</strong> {{item.reportedDoctorName}}, <strong>Institution/Hospital Name:</strong> {{item.institutionName}}</div>
                              <div class="type caption secondary">Date Performed: {{item.datePerform}}</div>
                            </li>
                          </template>
                        </ul>
                        <div>
                          <span class="type caption-2">
                            <strong>Advised by:</strong> {{item.advisedDoctorName}} - {{item.advisedDoctorSpeciality}}
                          </span>
                        </div>
                        
                        <!-- <div class="type caption-2"><strong>Advised Date:</strong> [[_formatDateTime(item.createdDatetimeStamp)]]</div> -->
                      </div>

                      <div class="type warning" hidden$="[[!item.data.flags.flagAsError]]">Flagged as Error</div>

                    </paper-item>
                  </template>
                </paper-listbox>
              </div>
            </template>
  
          </paper-card>
       
          <!-- Test Results - end -->

          <div class="sp-2"></div>
          <div class="horizontal layout center center-justified p-horizontal-16">
            <div class="type body italic"><strong>printed by: </strong>[[user.name]]</div>
          </div>


        </template>
        <!-- editing visit - end -->

      </div>

    </div>




    

  </template>
  <script>(function(){Polymer({is:"page-print-test-result-from-clinic-app",behaviors:[app.behaviors.commonComputes,app.behaviors.dbUsing,app.behaviors.pageLike,app.behaviors.translating],properties:{isVisitValid:{type:Boolean,notify:!1,value:!1},isPrescriptionValid:{type:Boolean,notify:!1,value:!1},isNoteValid:{type:Boolean,notify:!1,value:!1},isNextVisitValid:{type:Boolean,notify:!1,value:!1},isTestAdvisedValid:{type:Boolean,notify:!1,value:!1},isPatientValid:{type:Boolean,notify:!1,value:!1},user:{type:Object,notify:!0,value:null},patient:{type:Object,notify:!0,value:null},visit:{type:Object,notify:!0,value:null},prescription:{type:Object,notify:!0,value:null},doctorNote:{type:Object,notify:!0,value:null},nextVisit:{type:Object,notify:!0,value:null},testAdvised:{type:Object,notify:!0,value:null},matchingTestResultsList:{type:Array,notify:!0,value:[]},doctorInstitutionList:{type:Array,notify:!0,value:[]},doctorSpecialityList:{type:Array,notify:!0,value:[]},doctorInstitutionSelectedIndex:{type:Number,notify:!0,value:0},doctorSpecialitySelectedIndex:{type:Number,notify:!0,value:0},settings:{type:Object,notify:!0}},_makeSettings:function(){var t;return t={serial:"only",isSyncEnabled:!1,printDecoration:{leftSideLine1:"My Institution",leftSideLine2:"My Institution Address",leftSideLine3:"My Institution Contact",rightSideLine1:"My Name",rightSideLine2:"My Degrees",rightSideLine3:"My Contact",footerLine:"A simple message on the bottom",logoDataUri:null},billingTargetEmailAddress:"",nsqipTargetEmailAddress:"",monetaryUnit:"BDT"}},_getSettings:function(){var t,i;return t=app.db.find("settings"),i=0===t.length?this._makeSettings():t[0]},_loadUser:function(){var t,i,e,n,s,a,o,r,l,d;if(d=app.db.find("user"),1===d.length){for(this.user=d[0],a=d[0].employmentDetailsList,i=0,n=a.length;i<n;i++)t=a[i],this.push("doctorInstitutionList",t.institutionName);for(o=d[0].specializationList,r=[],e=0,s=o.length;e<s;e++)l=o[e],r.push(this.push("doctorSpecialityList",l.specializationTitle));return r}},_makeNewTestAdvise:function(){return this.masterAdvisedTestObj={serial:null,lastModifiedDatetimeStamp:0,createdDatetimeStamp:0,lastSyncedDatetimeStamp:0,createdByUserSerial:null,visitSerial:null,patientSerial:null,doctorName:null,doctorSpeciality:null,data:{testAdvisedList:[]}}},_loadPatient:function(t){var i;return i=app.db.find("patient-list",function(i){var e;return e=i.serial,e===t}),1===i.length?(this.isPatientValid=!0,this.patient=i[0]):this._notifyInvalidPatient()},arrowBackButtonPressed:function(t){return this.domHost.navigateToPreviousPage()},$findCreator:function(t){return"me"},_institutionSelectedIndexChanged:function(){var t;if(null!==this.doctorInstitutionSelectedIndex)return t=this.doctorInstitutionList[this.doctorInstitutionSelectedIndex],this.visit.hospitalName=t},_specialitySelectedIndexChanged:function(){var t;if(null!==this.doctorSpecialitySelectedIndex)return t=this.doctorSpecialityList[this.doctorSpecialitySelectedIndex],this.visit.doctorSpeciality=t},_notifyInvalidPatient:function(){return this.isPatientValid=!1,this.domHost.showModalDialog("Invalid Patient Provided")},_notifyInvalidVisit:function(){return this.isVisitValid=!1,this.domHost.showModalDialog("Invalid Visit Provided")},_loadVisit:function(t){var i;return i=app.db.find("doctor-visit",function(i){var e;return e=i.serial,e===t}),1===i.length?(this.isVisitValid=!0,this.visit=i[0],null!==this.visit.serial&&this._loadTestResults(this.visit.testResults.serial),!0):(this._notifyInvalidVisit(),!1)},_loadTestAdvised:function(t){var i;return i=app.db.find("patient-test-results",function(i){var e;return e=i.serial,e===t}),1===i.length?(this.isTestAdvisedValid=!0,this.testAdvised=i[0],!0):(this.isTestAdvisedValid=!1,!1)},_loadTestResults:function(t){var i;return i=app.db.find("patient-test-results",function(i){var e;return e=i.serial,e===t}),i.sort(function(t,i){return t.createdDatetimeStamp>i.createdDatetimeStamp?-1:t.createdDatetimeStamp<i.createdDatetimeStamp?1:0}),this.matchingTestResultsList=i},createNewTestPressed:function(){var t;return t=this.domHost.getPageParams(),"new"===t.visit&&this._saveVisit(),this.domHost.navigateToPage("#/test-adviced-editor/visit:"+this.visit.serial+"/patient:"+this.patient.serial+"/test-adviced:new")},editTestAdvisedPressed:function(t){return this.domHost.navigateToPage("#/test-adviced-editor/visit:"+this.visit.serial+"/patient:"+this.patient.serial+"/test-adviced:"+this.testAdvised.serial)},_isEmpty:function(t){return 0===t},_isEmptyArray:function(t){return 0===t.length},_isEmptyString:function(t){return null===t||""===t||"undefined"===t},_computeTotalDaysCount:function(t,i){var e,n;return n=864e5,e=t-i,Math.round(e/n)},_returnSerial:function(t){return t+1},_computeAge:function(t){var i,e,n,s;return s=new Date,e=new Date(t),i=s.getFullYear()-e.getFullYear(),n=s.getMonth()-e.getMonth(),(n<0||0===n&&s.getDate()<e.getDate())&&i--,i},printButtonPressed:function(t){return window.print()},navigatedIn:function(){var t;return this._loadUser(),t=this.domHost.getPageParams(),this._makeNewTestAdvise(),t.visit?t.patient?(this._loadPatient(t.patient),"new"===t.visit?this._makeNewVisit():this._loadVisit(t.visit),this.settings=this._getSettings()):void this._notifyInvalidPatient():void this._notifyInvalidVisit()},navigatedOut:function(){return this.visit={},this.patient={},this.isVisitValid=!1,this.isPatientValid=!1,this.isTestAdvisedValid=!1,this.doctorInstitutionList=[],this.doctorSpecialityList=[]},_formatDateTime:function(t){return lib.datetime.format(new Date(t),"mmm d, yyyy h:MMTT")}})}).call(this);
//# sourceMappingURL=page-print-test-result-from-clinic-app.coffee-compiled.js.map</script>
</dom-module>


