<!-- style --><!-- behavior --><!-- custom-elements --><!-- element --><div hidden="" by-polymer-bundler=""><link rel="import" href="../html-block/html-block.html"></div><dom-module id="page-print-history-and-physical-record">
  <template>

    <!-- style -->

    <style is="custom-style" include="common-style">
    .limiting-container {
      margin-top: 10px;
    }
    
    .limiting-container {
      max-width: 210mm;
      min-height: 230mm;
      /*min-height: 297mm;*/
    }
    
    .document {
      font-family: 'Times New Roman';
      background: white;
    }
    
    .document-title {
      font-size: 16px;
      text-decoration: underline;
      font-weight: bold;
      @apply(--layout-vertical);
      @apply(--layout-center);
    }
    
    @media print {
      .limiting-container {
        margin-top: -60px;
        /*border: 1px solid black;*/
      }
    }
    
    .collection {
      color: red;
      background: grey;
    }
    
    .document-header {
      padding-left: 10px;
      padding-right: 10px;
    }
    
    .document-header .logo {
      max-width: 128px;
      max-height: 128px;
    }
    
    .horiline {
      width: 100%;
      height: 0px;
      /*background: black;*/
      border: 1px solid black;
      margin-bottom: 6px;
    }
    
    .leftSide {
      margin-left: 6px;
    }
    
    .leftSideLine1 {
      font-size: 24px;
    }
    
    .rightSideLine1 {
      font-size: 22px;
    }
    </style>

    <!-- local DOM -->

    <div class="master-container">

      <div class="limiting-container document vertical layout">

        <template is="dom-if" if="[[shouldRender]]">



          <div class="document-header horizontal layout center">

            <template is="dom-if" if="[[settings.printDecoration.logoDataUri]]">
              <img class="logo" src="[[settings.printDecoration.logoDataUri]]" alt="">
            </template>

            <div class="leftSide vertical layout">
              <div class="leftSideLine1">[[settings.printDecoration.leftSideLine1]]</div>
              <div class="leftSideLine2">[[settings.printDecoration.leftSideLine2]]</div>
              <div class="leftSideLine3">[[settings.printDecoration.leftSideLine3]]</div>
            </div>
            <div class="flex"></div>
            <div class="rightSide vertical layout end">
              <div class="rightSideLine1">[[settings.printDecoration.rightSideLine1]]</div>
              <div class="rightSideLine2">[[settings.printDecoration.rightSideLine2]]</div>
              <div class="rightSideLine3">[[settings.printDecoration.rightSideLine3]]</div>
            </div>
          </div>



          <div class="horiline"></div>

          <div class="document-header horizontal layout center">
            <template is="dom-if" if="[[!patient.isForOrganizationOnly]]">
              Name: {{patient.name}} <br>
              Age :[[_computeAge(patient.dob)]] years <br>
              Allergy : <br>
              Blood Group : <br>
            </template>
            <template is="dom-if" if="[[patient.isForOrganizationOnly]]">
              Name: REDACTED FOR CONFIDENTIALITY <br>
              Age : REDACTED FOR CONFIDENTIALITY  <br>
              Allergy : <br>
              Blood Group : <br>
            </template>
          </div>



          <div class="horiline"></div>

          <div class="document-title">[[recordPartTitle]]</div>

          <html-block html="[[recordPartHtmlContent]]"></html-block>

          <!-- <div class="footerLine">[[settings.printDecoration.footerLine]]</div> -->

        </template>

        <div class="sp-2"></div>
        <div class="horizontal layout center center-justified p-horizontal-16">
          <div class="type body italic"><strong>printed by: </strong>[[user.name]]</div>
        </div>

      </div>

    </div>

  </template>
  <script>(function(){Polymer({is:"page-print-history-and-physical-record",behaviors:[app.behaviors.commonComputes,app.behaviors.dbUsing,app.behaviors.translating,app.behaviors.pageLike],properties:{record:{type:Object,notify:!0,value:null},patient:{type:Object,notify:!0,value:null},recordDatabaseCollectionName:{type:String,value:null},recordPartName:{type:String,value:null},recordPartData:{type:Object,value:null},recordPartDef:{type:Object,value:null},recordPartTitle:{type:String,value:null},recordPartHtmlContent:{type:String,value:null},shouldRender:{type:Boolean,value:!1},delayRendering:{type:Boolean,value:!1},settings:{type:Object,notify:!0}},_computeAge:function(e){var t,n,i,r;return r=new Date,n=new Date(e),t=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth(),(i<0||0===i&&r.getDate()<n.getDate())&&t--,t},printButtonPressed:function(e){return window.print()},arrowBackButtonPressed:function(e){return this.domHost.navigateToPreviousPage()},_getRecord:function(e,t){var n;return n=app.db.find(t,function(t){var n;return n=t.serial,n===e}),1===n.length?n[0]:null},_getPatient:function(e){var t;return t=app.db.find("patient-list",function(t){var n;return n=t.serial,n===e}),1===t.length?t[0]:null},navigatedIn:function(){var e;return e=this.domHost.getPageParams(),e.record?(this.set("recordPartName","history-and-physical-record"),this.recordDatabaseCollectionName="history-and-physical-record",this.record=this._getRecord(e.record,this.recordDatabaseCollectionName),this.record?"patientSerial"in this.record?(this.patient=this._getPatient(this.record.patientSerial),this.patient?(this.settings=this._getSettings(),this.recordPartData=this.record,this.recordPartTitle="History and Physical Record",this.domHost.getStaticData("dynamicElementDefinitionPreoperativeAssessment",function(e){return function(t){if(e.recordPartDef=t,e.recordPartHtmlContent=e.generateHtmlContent(e.recordPartDef,e.recordPartData),!e.delayRendering)return e.shouldRender=!0}}(this))):void this.domHost.showModalDialog("Invalid Patient Identifier")):void this.domHost.showModalDialog("Missing Patient from Record"):void this.domHost.showModalDialog("Invalid Record Identifier")):void this.domHost.showModalDialog("Missing Record!")},navigatedOut:function(){return this.shouldRender=!1},_makeSettings:function(){var e;return e={serial:"only",isSyncEnabled:!1,printDecoration:{leftSideLine1:"My Institution",leftSideLine2:"My Institution Address",leftSideLine3:"My Institution Contact",rightSideLine1:"My Name",rightSideLine2:"My Degrees",rightSideLine3:"My Contact",footerLine:"A simple message on the bottom",logoDataUri:null},billingTargetEmailAddress:"",nsqipTargetEmailAddress:"",monetaryUnit:"BDT"}},_getSettings:function(){var e,t;return e=app.db.find("settings"),t=0===e.length?this._makeSettings():e[0]},generateHtmlContent:function(e,t){var n;return n=this.handle_type(e,t.data),n=this.filterHtmlContent(n)},filterHtmlContent:function(e){return e=e.replace(/@VALUE@/g,"")},printOutStyleSheet:function(){return"<style>\n  \n  .default-category {\n    /* font-size: 20px; \n    font-weight: bold; */\n    text-align: center; \n  }\n  .default-collection {\n    /* font-size: 16px; \n    font-weight: bold; */\n  }\n  .default-group {\n    /* text-decoration: overline; */\n  }\n  .default-card {\n    /* text-decoration: underline; */\n  }\n  span {\n    font-size: 14px;\n  }\n  .unprocessed {\n    color: red;\n  }\n</style>"},handle_children:function(e,t){var n,i,r,l,a,o,s;if(l="","childMap"in t&&"childList"in e&&null!==e.childList)for(s=e.childList,r=a=0,o=s.length;a<o;r=++a)n=s[r],n.key in t.childMap&&(i=this.handle_type(n,t.childMap[n.key]),i&&";"!==i&&":;"!==i&&": ;"!==i&&(i=this.sanitizeOutput(i),l+=i));return l},handle_type:function(e,t){return"print"in e||(e.print={}),"systemRoot"===e.type?(this.flattenStyle(e),this.type_systemRoot(e,t)):"category"===e.type?("boldLabel"in e.print||(e.print.boldLabel=!0),"fontSize"in e.print||(e.print.fontSize=18),this.flattenStyle(e),this.type_category(e,t)):"collection"===e.type?("boldLabel"in e.print||(e.print.boldLabel=!0),"fontSize"in e.print||(e.print.fontSize=16),this.flattenStyle(e),this.type_collection(e,t)):"group"===e.type?("passThrough"in e.print||(e.print.passThrough=!0),"fontSize"in e.print||(e.print.fontSize=14),this.flattenStyle(e),this.type_group(e,t)):"card"===e.type?("boldLabel"in e.print||(e.print.boldLabel=!0),"fontSize"in e.print||(e.print.fontSize=14),this.flattenStyle(e),this.type_card(e,t)):"checkbox"===e.type?(this.flattenStyle(e),this.type_checkbox(e,t)):"toggleableContainer"===e.type?(this.flattenStyle(e),this.type_toggleableContainer(e,t)):"label"===e.type?(this.flattenStyle(e),this.type_label(e,t)):"autocomplete"===e.type?("selectionType"in e&&"label"===e.selectionType&&("separatorString"in e.print||(e.print.separatorString=", ")),this.flattenStyle(e),this.type_autocomplete(e,t)):"container"===e.type?(this.flattenStyle(e),this.type_container(e,t)):"checkList"===e.type?("separatorString"in e.print||(e.print.separatorString=", "),this.flattenStyle(e),this.type_checkList(e,t)):"radioList"===e.type?("separatorString"in e.print||(e.print.separatorString=", "),this.flattenStyle(e),this.type_radioList(e,t)):"input"===e.type?(this.flattenStyle(e),this.type_input(e,t)):"singleSelectDropdown"===e.type?(this.flattenStyle(e),this.type_singleSelectDropdown(e,t)):"incrementalCounter"===e.type?(this.flattenStyle(e),this.type_incrementalCounter(e,t)):'<span class="unprocessed">UNPROCESSED '+e.type+" - "+e.key+"</span>"},flattenStyle:function(e){if("passThrough"in e.print&&("hideLabel"in e.print||(e.print.hideLabel=!0),"noColonAfterThis"in e.print||(e.print.noColonAfterThis=!0),"noSemicolonAfterThis"in e.print||(e.print.noSemicolonAfterThis=!1)),"newLineBeforeThis"in e.print&&("boolean"==typeof e.print.newLineBeforeThis?e.print.newLineBeforeThis=e.print.newLineBeforeThis===!0?1:0:e.print.newLineBeforeThis=parseInt(e.print.newLineBeforeThis)),"newLineAfterThis"in e.print&&("boolean"==typeof e.print.newLineAfterThis?e.print.newLineAfterThis=e.print.newLineAfterThis===!0?1:0:e.print.newLineAfterThis=parseInt(e.print.newLineAfterThis)),"newLineAfterThisAndChildren"in e.print&&("boolean"==typeof e.print.newLineAfterThisAndChildren?e.print.newLineAfterThisAndChildren=e.print.newLineAfterThisAndChildren===!0?1:0:e.print.newLineAfterThisAndChildren=parseInt(e.print.newLineAfterThisAndChildren)),"newLineAfterEachValue"in e.print)return"boolean"==typeof e.print.newLineAfterEachValue?e.print.newLineAfterEachValue=e.print.newLineAfterEachValue===!0?1:0:e.print.newLineAfterEachValue=parseInt(e.print.newLineAfterEachValue)},sanitizeOutput:function(e){var t,n;for(t=n=0;n<=2;t=++n)e=e.replace(/\;;/g,";"),e=e.replace(/\;;/g,";"),e=e.replace(/\; ;/g,";"),e=e.replace(/\: ;/g,";"),e=e.replace(/\: :/g,":"),e=e.replace(/\, ;/g,";"),e=e.replace(/\; ,/g,";"),e=e.replace(/\,;/g,";"),e=e.replace(/<\/span style=""><\/span>/g,""),e=e.replace(/<\/span>;<\/span>/g,"</span></span>"),e=e.replace(/<\/span>; <\/span>/g,"</span></span>"),e=e.replace(/<\/span> ,<\/span>/g,"</span></span>");return e},_computeElementStyle:function(e){var t;return t="",e.print.fontSize&&(t+="font-size: "+e.print.fontSize+"px;"),e.print.hide&&(t+="display: none;"),t},_computeTitleOrLabelStyle:function(e){var t;return t="",e.print.boldLabel&&(t+="font-weight: bold;"),t},type_systemRoot:function(e,t){var n;return n=this.handle_children(e,t),this.printOutStyleSheet()+n},type_category:function(e,t){var n,i,r,l;return n=this.handle_children(e,t),0===n.length?"":(r=this._computeTitleOrLabelStyle(e),l='<span style="'+r+'">'+e.label+"</span>",r=this._computeElementStyle(e),i='<div class="default-category" style="'+r+'">'+l+"</div>"+n)},type_collection:function(e,t){var n,i,r,l;return 0===Object.keys(t.childMap).length?"":(n=e.defaultGroup&&!t.isDefaultGroupDismissed?this.handle_type(e.defaultGroup,t.childMap[e.defaultGroup.key]):this.handle_children(e,t),r=this._computeTitleOrLabelStyle(e),l='<br><span style="'+r+'">'+e.label+"</span><br>",r=this._computeElementStyle(e),i='<span class="default-collection" style="'+r+'">'+l+"</span>: "+n+"<br>")},type_group:function(e,t){var n,i,r,l;return n=this.handle_children(e,t),r=this._computeTitleOrLabelStyle(e),l='<span style="'+r+'">'+e.label+"</span>",e.print.passThrough?i=n+";":(r=this._computeElementStyle(e),i='<span class="default-group" style="'+r+'">'+l+"</span>: "+n+"; "),i},_makePrintableContent:function(e,t,n,i,r){var l,a,o,s,p,h,u,c,d,f,y,g,b,_,L;if(0===t.length&&0===n.length&&"label"!==i.type)return"";if(d=i.print,c="",a="",L="",d.hide)return"";if(e.length>0&&(d.hideLabel||(_="",d.boldLabel&&(_+="font-weight: bold;"),d.fontSize&&(_+="font-size:"+d.fontSize+"px;"),c='<span style="'+_+'">'+e+"</span>")),n.length>0&&(d.hideValue||(_="",d.boldValue&&(_+="font-weight: bold;"),d.fontSize&&(_+="font-size:"+d.fontSize+"px;"),L='<span style="'+_+'">'+n+"</span>")),t.length>0&&(d.hideChildren||(_="",d.boldChildren&&(_+="font-weight: bold;"),a='<span style="'+_+'">'+t+"</span>")),0===(c+a+L).length)return"";if("newLineBeforeThis"in d)for(s=p=0,f=d.newLineBeforeThis;0<=f?p<f:p>f;s=0<=f?++p:--p)c="<br>"+c;if("newLineAfterThis"in d)for(s=h=0,y=d.newLineAfterThis;0<=y?h<y:h>y;s=0<=y?++h:--h)c+="<br>";if(l="noColonAfterThis"in d&&d.noColonAfterThis||0===c.length?"":": ",b="noSemicolonAfterThis"in d&&d.noSemicolonAfterThis?"":"; ",o=c+l+a+L+b,"newLineAfterThisAndChildren"in d)for(s=u=0,g=d.newLineAfterThisAndChildren;0<=g?u<g:u>g;s=0<=g?++u:--u)o+="<br>";return o},type_card:function(e,t){var n,i,r;return n=this.handle_children(e,t),i=e.label,r=null,this._makePrintableContent(i||"",n||"",r||"",e,t)},type_checkbox:function(e,t){var n,i,r;return n=null,i=null,r=t.isChecked?e.label:"",this._makePrintableContent(i||"",n||"",r||"",e,t)},type_label:function(e,t){var n,i,r;return n=null,i=t.label||e.label||e.defaultLabel,r=null,this._makePrintableContent(i||"",n||"",r||"",e,t)},type_toggleableContainer:function(e,t){var n,i,r;return t.isChecked?(n=this.handle_children(e,t),i=e.label,r=null,this._makePrintableContent(i||"",n||"",r||"",e,t)):""},type_container:function(e,t){var n,i,r;return n=this.handle_children(e,t),i=t.label||e.defaultLabel,r=null,this._makePrintableContent(i||"",n||"",r||"",e,t)},type_checkList:function(e,t){var n,i,r,l,a,o,s,p,h,u,c,d,f;for(p=e.print,d=[],h=t.checkedValueList,l=0,s=h.length;l<s;l++)r=h[l],d.push(r);if(c=p.separatorString,"newLineAfterEachValue"in p)for(i=a=0,u=p.newLineAfterEachValue;0<=u?a<u:a>u;i=0<=u?++a:--a)c+="<br>";return f=d.join(c),o=null,n=null,this._makePrintableContent(o||"",n||"",f||"",e,t)},type_radioList:function(e,t){var n,i,r;return r=t.selectedValue,i=null,n=null,this._makePrintableContent(i||"",n||"",r||"",e,t)},type_singleSelectDropdown:function(e,t){var n,i,r;return r=e.possibleValueList[t.selectedIndex],i=null,n=null,this._makePrintableContent(i||"",n||"",r||"",e,t)},type_input:function(e,t){var n,i,r,l;return n=t.value,e.unitDetails&&(r=e.unitDetails.unitList[t.selectedUnitIndex]),l=n,i=e.label,n=null,this._makePrintableContent(i||"",n||"",l||"",e,t)},type_autocomplete:function(e,t){var n,i,r,l,a,o,s,p,h,u,c,d,f,y,g;if(s=e.print,"label"===e.selectionType){d=[],p=t.virtualChildMap;for(a in p)y=p[a],f=a.split("_"),f.pop(),f.shift(),f=f.join("_"),d.push(f);if(c=s.separatorString,"newLineAfterEachValue"in s)for(r=l=0,h=s.newLineAfterEachValue;0<=h?l<h:l>h;r=0<=h?++l:--l)c+="<br>";return y=d.join(c),o=e.label,i=null,this._makePrintableContent(o||"",i||"",y||"",e,t)}i="",u=t.virtualChildMap;for(a in u)y=u[a],f=a.split("_"),f.pop(),f.shift(),f=f.join("_"),g={type:"container",defaultLabel:f,key:a,childList:e.childListForEachContainer},n=this.handle_type(g,y)+", ",i+=n;return y=null,o=e.label,this._makePrintableContent(o||"",i||"",y||"",e,t)},type_incrementalCounter:function(e,t){var n,i,r,l,a,o,s,p,h;n="",a=t.virtualChildMap;for(r in a)return p=a[r],s=r.replace("item",""),o=parseInt(s),h={type:"container",defaultLabel:function(){try{return e.unit.singular}catch(t){return i=t,"unit"}}()+" #"+(o+1),key:r,childList:e.childListForEachContainer},n+=this.handle_type(h,p)+";",p=null,l=e.label,this._makePrintableContent(l||"",n||"",p||"",e,t)},should_boldLabel:function(e){return"print"in e&&"boldLabel"in e.print&&e.print.boldLabel},should_passThrough:function(e){return"print"in e&&"passThrough"in e.print&&e.print.passThrough},should_newLineBeforeThis:function(e){return"print"in e&&"newLineBeforeThis"in e.print&&e.print.newLineBeforeThis},inject_passThrough_special_card:function(e,t){var n;if(e.key===e.label&&("Details"===(n=e.key)||"Default"===n))return e.print||(e.print={}),e.print.passThrough=!0},inject_passThrough_special_group:function(e,t){var n;if(e.key===e.label&&("List"===(n=e.key)||"Default"===n))return e.print||(e.print={}),e.print.passThrough=!0},__debug_print:function(e,t){var n,i;n="print"in e?Object.keys(e.print):[],i=lib.array.minus(n,t),i.length>0}})}).call(this);
//# sourceMappingURL=page-print-history-and-physical-record.coffee-compiled.js.map</script>
</dom-module>