<!-- element --><dom-module id="de-card">
  <template>

    <!-- style -->

    <style is="custom-style" include="dynamic-element-styles">
    :host {
      @apply(--layout-horizontal);
      width: 100%;
    }
    </style>

    <!-- local DOM - start -->

    <template is="dom-if" if="[[shouldRender]]">

      <div class$="generic-container vertical layout styleSet[[depth]]">
        <div class="title">
          [[def.label]]
        </div>
        <div class="content">
          <de-array data="[[data]]" def="[[def]]" depth="[[depth]]"></de-array>
        </div>
      </div>

    </template>

    <!-- local DOM - end -->
  </template>
</dom-module>

<!-- element -->
<dom-module id="de-toggleable-container">
  <template>

    <!-- style -->

    <style is="custom-style" include="dynamic-element-styles">
    :host {
      @apply(--layout-horizontal);
      width: 100%;
    }
    </style>

    <!-- local DOM - start -->

    <template is="dom-if" if="[[shouldRender]]">

      <div class$="generic-container vertical layout styleSet[[depth]]">
        <div class="title">
          <paper-checkbox checked="{{data.isChecked}}">[[def.label]]</paper-checkbox>
        </div>
        <div class="content">
          <template is="dom-if" if="[[data.isChecked]]">
            <de-array data="[[data]]" def="[[def]]" depth="[[depth]]"></de-array>
          </template>
        </div>
      </div>

    </template>

    <!-- local DOM - end -->
  </template>
</dom-module>

<!-- element -->
<dom-module id="de-container">
  <template>

    <!-- style -->

    <style is="custom-style" include="dynamic-element-styles">
    :host {
      @apply(--layout-horizontal);
      width: 100%;
    }
    </style>

    <!-- local DOM - start -->

    <template is="dom-if" if="[[shouldRender]]">

      <div class$="generic-container vertical layout styleSet[[depth]]">
        <div class="title">
          [[data.label]]
        </div>
        <div class="content">
          <de-array data="[[data]]" def="[[def]]" depth="[[depth]]"></de-array>
        </div>
      </div>

    </template>

    <!-- local DOM - end -->
  </template>
</dom-module>

<!-- element -->
<dom-module id="de-check-list">
  <template>

    <!-- style -->

    <style is="custom-style" include="dynamic-element-styles">
    :host {
      @apply(--layout-horizontal);
      width: 100%;
    }
    </style>

    <!-- local DOM - start -->

    <template is="dom-if" if="[[shouldRender]]">

      <div class$="generic-container vertical layout styleSet[[depth]]">

        <template is="dom-repeat" items="[[def.possibleValueList]]" as="possibleValue">
          <paper-checkbox on-change="possibleValueCheckedStatusChanged" checked="[[$isPossibleValueChecked(possibleValue, data.checkedValueList)]]">[[possibleValue]]</paper-checkbox>
        </template>

        <template is="dom-if" if="[[def.allowCustomValue]]">
          <template is="dom-repeat" items="[[data.customValueList]]" as="customPossibleValue">
            <div class="horizontal layout center">
              <paper-checkbox on-change="customPossibleValueCheckedStatusChanged" checked="[[$isPossibleCustomValueChecked(customPossibleValue, data.checkedValueList)]]">[[customPossibleValue]]</paper-checkbox>
              <paper-icon-button on-tap="deleteCustomValue" icon="delete"></paper-icon-button>
            </div>
          </template>
          <div class="horizontal layout center">
            <paper-input value="{{typedCustomValue}}" label="Enter Custom Text" class="flex"></paper-input>
            <paper-icon-button on-tap="addCustomValue" icon="send"></paper-icon-button>
          </div>
        </template>

      </div>

    </template>

    <!-- local DOM - end -->
  </template>
</dom-module>

<!-- element -->
<dom-module id="de-input">
  <template>

    <!-- style -->

    <style is="custom-style" include="dynamic-element-styles">
    :host {
      @apply(--layout-horizontal);
      width: 100%;
    }
    </style>

    <!-- local DOM - start -->

    <template is="dom-if" if="[[shouldRender]]">

      <div class$="generic-container vertical layout styleSet[[depth]]">

        <template is="dom-if" if="[[$equals(def.valueType, 'text')]]">
          <paper-input class="main-input" value="{{data.value}}" label="[[def.label]]"></paper-input>
        </template>

        <template is="dom-if" if="[[$equals(def.valueType, 'multilineText')]]">
          <paper-textarea class="main-input" value="{{data.value}}" label="[[def.label]]"></paper-textarea>
        </template>

        <template is="dom-if" if="[[$equals(def.valueType, 'date')]]">
          <paper-input type="date" class="main-input" value="{{data.value}}" label="[[def.label]]"></paper-input>
        </template>

        <template is="dom-if" if="[[$equals(def.valueType, 'number')]]">
          <template is="dom-if" if="[[def.rangeDetails]]">
            <paper-input min="[[data.rangeDetails.minValue]]" max="[[data.rangeDetails.maxValue]]" step="[[data.rangeDetails.steps]]" auto-validate="" type="number" class="main-input" value="{{data.value}}" label="[[def.label]]"></paper-input>
          </template>
          <template is="dom-if" if="[[!def.rangeDetails]]">
            <paper-input type="number" class="main-input" value="{{data.value}}" label="[[def.label]]"></paper-input>
          </template>

        </template>

      </div>

      <template is="dom-if" if="[[def.unitDetails]]">

        <paper-dropdown-menu-light label="Unit">
          <paper-listbox class="dropdown-content" selected="{{localSelectedUnitIndex}}">

            <template is="dom-repeat" items="[[def.unitDetails.unitList]]" as="possibleUnit">
              <paper-item data-name$="[[possibleUnit.name]]">[[possibleUnit.name]]</paper-item>
            </template>

          </paper-listbox>
        </paper-dropdown-menu-light>

      </template>

    </template>

    <!-- local DOM - end -->
  </template>
</dom-module>

<!-- element -->
<dom-module id="de-label">
  <template>

    <!-- style -->

    <style is="custom-style" include="dynamic-element-styles">
    :host {
      @apply(--layout-horizontal);
      width: 100%;
    }
    </style>

    <!-- local DOM - start -->

    <template is="dom-if" if="[[shouldRender]]">

      [[$_getLabel(data.label, updateHackInteger)]]
      <template is="dom-if" if="[[def.isRefreshable]]">
        <paper-icon-button icon="refresh" on-tap="refreshButtonTapped"></paper-icon-button>
      </template>

    </template>

    <!-- local DOM - end -->
  </template>
</dom-module>

<!-- element -->
<dom-module id="de-single-select-dropdown">
  <template>

    <!-- style -->

    <style is="custom-style" include="dynamic-element-styles">
    :host {
      @apply(--layout-horizontal);
      width: 100%;
    }
    </style>

    <!-- local DOM - start -->

    <template is="dom-if" if="[[shouldRender]]">

      <paper-dropdown-menu-light label="[[def.label]]">
        <paper-listbox class="dropdown-content" selected="{{data.selectedIndex}}">

          <template is="dom-repeat" items="[[def.possibleValueList]]" as="possibleValue">
            <paper-item>[[possibleValue]]</paper-item>
          </template>

        </paper-listbox>
      </paper-dropdown-menu-light>

    </template>

    <!-- local DOM - end -->
  </template>
</dom-module>

<!-- element -->
<dom-module id="de-incremental-counter">
  <template>

    <!-- style -->

    <style is="custom-style" include="dynamic-element-styles">
    :host {
      @apply(--layout-horizontal);
      width: 100%;
    }
    </style>

    <!-- local DOM - start -->

    <template is="dom-if" if="[[shouldRender]]">

      <div class$="generic-container vertical layout styleSet[[depth]]">
        <div class="title horizontal layout center">
          [[def.label]] [[data.count]] [[$getUnit(data.count)]]
          <template is="dom-if" if="[[$lt(data.count,def.limit)]]">
            <paper-icon-button on-tap="addIconPressed" icon="add-box"></paper-icon-button>
          </template>
        </div>
        <div class="content">
          <template is="dom-repeat" items="[[virtualItemList]]" as="virtualItem">

            <div class$="generic-container vertical layout styleSet[[$inc(depth)]]">
              <div class="title horizontal layout center">
                <div>[[virtualItem.def.defaultLabel]]</div>
                <div class="flex"></div>
                <paper-icon-button on-tap="deleteIconPressed" icon="delete"></paper-icon-button>
              </div>
              <div class="content">
                <de-array data="[[virtualItem.data]]" def="[[virtualItem.def]]" depth="[[$inc(depth)]]"></de-array>
              </div>
            </div>

          </template>
        </div>
      </div>

    </template>

    <!-- local DOM - end -->
  </template>
</dom-module>

<!-- element -->
<dom-module id="de-radio-list">
  <template>

    <!-- style -->

    <style is="custom-style" include="dynamic-element-styles">
    :host {
      @apply(--layout-horizontal);
      width: 100%;
    }
    </style>

    <!-- local DOM - start -->

    <template is="dom-if" if="[[shouldRender]]">

      <div class$="generic-container vertical layout styleSet[[depth]]">

        <template is="dom-repeat" items="[[def.possibleValueList]]" as="possibleValue">
          <paper-radio-button on-change="possibleValueCheckedStatusChanged" checked="[[$isPossibleValueChecked(possibleValue, data.selectedValue)]]">[[possibleValue]]</paper-radio-button>
        </template>

        <template is="dom-if" if="[[def.allowCustomValue]]">
          <template is="dom-repeat" items="[[data.customValueList]]" as="customPossibleValue">
            <div class="horizontal layout center">
              <paper-radio-button on-change="customPossibleValueCheckedStatusChanged" checked="[[$isPossibleCustomValueChecked(customPossibleValue, data.selectedValue)]]">[[customPossibleValue]]</paper-radio-button>
              <paper-icon-button on-tap="deleteCustomValue" icon="delete"></paper-icon-button>
            </div>
          </template>
          <div class="horizontal layout center">
            <paper-input value="{{typedCustomValue}}" label="Enter Custom Text" class="flex"></paper-input>
            <paper-icon-button on-tap="addCustomValue" icon="send"></paper-icon-button>
          </div>
        </template>

      </div>

    </template>

    <!-- local DOM - end -->
  </template>
</dom-module>

<!-- element -->
<dom-module id="de-checkbox">
  <template>

    <!-- style -->

    <style is="custom-style" include="dynamic-element-styles">
    :host {
      @apply(--layout-horizontal);
      width: 100%;
    }
    </style>

    <!-- local DOM - start -->

    <template is="dom-if" if="[[shouldRender]]">

      <paper-checkbox checked="{{data.isChecked}}">[[def.label]]</paper-checkbox>

    </template>

    <!-- local DOM - end -->
  </template>
</dom-module>

<!-- element -->
<dom-module id="de-autocomplete">
  <template>

    <!-- style -->

    <style is="custom-style" include="dynamic-element-styles">
    :host {
      @apply(--layout-horizontal);
      width: 100%;
    }
    </style>

    <!-- local DOM - start -->

    <template is="dom-if" if="[[shouldRender]]">

      <div class$="generic-container vertical layout styleSet[[depth]]">
        <div class="title">
          [[def.label]]
        </div>

        <custom-autocomplete on-autocomplete-select="autocompleteSelected" source-data-list="[[sourceDataList]]" selected-string-object-list="{{selectedStringObjectList}}"></custom-autocomplete>

        <div class="content">
          <template is="dom-if" if="[[$equals(def.selectionType,'label')]]">
            <!-- selectionType: label - start -->

            <template is="dom-repeat" items="[[virtualItemList]]" as="virtualItem">

              <span>[[virtualItem.def.defaultLabel]]</span>
              <paper-icon-button on-tap="deleteIconPressed" icon="delete"></paper-icon-button>

            </template>

            <!-- selectionType: label - end -->
          </template>
          <template is="dom-if" if="[[$equals(def.selectionType,'container')]]">
            <!-- selectionType: container - start -->

            <template is="dom-repeat" items="[[virtualItemList]]" as="virtualItem">
              <div class$="generic-container vertical layout styleSet[[$inc(depth)]]">
                <div class="title horizontal layout center">
                  <div>[[virtualItem.def.defaultLabel]]</div>
                  <div class="flex"></div>
                  <paper-icon-button on-tap="deleteIconPressed" icon="delete"></paper-icon-button>
                </div>
                <div class="content">
                  <de-array data="[[virtualItem.data]]" def="[[virtualItem.def]]" depth="[[$inc(depth)]]"></de-array>
                </div>
              </div>
            </template>

            <!-- selectionType: container - end -->
          </template>

        </div>

      </div>

    </template>

    <!-- local DOM - end -->
  </template>
</dom-module>

<script>(function(){var deBehavior,indexOf=[].indexOf||function(e){for(var t=0,a=this.length;t<a;t++)if(t in this&&this[t]===e)return t;return-1};deBehavior={properties:{data:{type:Object,value:null},def:{type:Object,value:null},depth:{type:Number,value:0},shouldRender:{type:Boolean,value:!1}},$both:function(e,t){return e&&t},$equals:function(e,t){return e===t},$inc:function(e){return e+1},observers:["systemChanged(def, data)"],systemChanged:function(e,t){var a;return e&&t&&e.key===t.forKey&&e.type===(a=t.forType)&&a===this.supportedDefType?(this.shouldRender=!0,void this.systemChangedDelegated(e,t)):this.shouldRender=!1},notifyDynamicDataAlteration:function(e){var t;try{return this.propagateDynamicDataAlterationSignal(e,this.def.key)}catch(a){return t=a,lib.util.delay(100,function(t){return function(){return t.propagateDynamicDataAlterationSignal(e,t.def.key)}}(this))}},propagateDynamicDataAlterationSignal:function(e,t){return"string"==typeof t?this.domHost.propagateDynamicDataAlterationSignal(e,[t]):(t.unshift(this.def.key),this.domHost.propagateDynamicDataAlterationSignal(e,t))}},Polymer({is:"de-card",supportedDefType:"card",behaviors:[deBehavior],systemChangedDelegated:function(e,t){return null}}),Polymer({is:"de-toggleable-container",supportedDefType:"toggleableContainer",behaviors:[deBehavior],observers:["dataIsCheckedAltered(data.isChecked)"],dataIsCheckedAltered:function(){var e;if(this.data&&this.def)return e=this.data.isChecked?"check":"uncheck",this.notifyDynamicDataAlteration(e)},systemChangedDelegated:function(e,t){if(!("isChecked"in t))return e.isPrechecked?t.isChecked=!0:t.isChecked=!1}}),Polymer({is:"de-check-list",supportedDefType:"checkList",behaviors:[deBehavior],properties:{typedCustomValue:{type:String,notify:!0,value:""}},observers:["dataCheckedValueListChanged(data.checkedValueList.*)"],dataCheckedValueListChanged:function(){var e;if(this.data&&this.def)return e="change",this.notifyDynamicDataAlteration(e)},$isPossibleValueChecked:function(e,t){return indexOf.call(t,e)>=0},possibleValueCheckedStatusChanged:function(e){var t,a;return a=e.model.possibleValue,t=this.data.checkedValueList.indexOf(a),t!==-1?this.splice("data.checkedValueList",t,1):this.push("data.checkedValueList",a)},$isPossibleCustomValueChecked:function(e,t){return indexOf.call(t,e)>=0},customPossibleValueCheckedStatusChanged:function(e){var t,a;return a=e.model.customPossibleValue,t=this.data.checkedValueList.indexOf(a),t!==-1?this.splice("data.checkedValueList",t,1):this.push("data.checkedValueList",a)},addCustomValue:function(e){var t,a;if(t=this.typedCustomValue,!(indexOf.call(this.data.customValueList,t)>=0||(a=this.typedCustomValue,indexOf.call(this.def.possibleValueList,a)>=0)))return this.push("data.customValueList",this.typedCustomValue),this.push("data.checkedValueList",this.typedCustomValue),this.typedCustomValue=""},deleteCustomValue:function(e){var t,a;if(a=e.model.customPossibleValue,t=this.data.checkedValueList.indexOf(a),t!==-1&&this.splice("data.checkedValueList",t,1),t=this.data.customValueList.indexOf(a),t!==-1)return this.splice("data.customValueList",t,1)},systemChangedDelegated:function(e,t){var a,i,n,s;if(!("checkedValueList"in t)&&(t.checkedValueList=[],"preselectedValueList"in e))for(n=e.preselectedValueList,a=0,i=n.length;a<i;a++)s=n[a],this.push("data.checkedValueList",s);if(!("customValueList"in t))return t.customValueList=[]}}),Polymer({is:"de-input",supportedDefType:"input",behaviors:[deBehavior],properties:{localSelectedUnitIndex:{type:Number}},observers:["dataValueChanged(data.value)","updateValueIfUnitIsAltered(localSelectedUnitIndex)"],dataValueChanged:function(){var e;if(this.data&&this.def)return e="change",this.notifyDynamicDataAlteration(e)},systemChangedDelegated:function(e,t){var a,i,n,s,r,l,u;"value"in t||(e.prefilledValue?this.set("data.value",e.prefilledValue):("text"===e.valueType&&this.set("data.value",""),"multilineText"===e.valueType&&this.set("data.value",""),"date"===e.valueType&&this.set("data.value",lib.datetime.mkDate(lib.datetime.now())),"number"===e.valueType&&this.set("data.value",0))),"unitDetails"in e&&("selectedUnitIndex"in t||this.set("data.selectedUnitIndex",e.unitDetails.baseUnit),this.set("localSelectedUnitIndex",this.data.selectedUnitIndex)),"labelType"in e||(e.labelType="float"),"rangeDetails"in e&&("rangeDetails"in t||(this.set("data.rangeDetails",{}),this.set("data.rangeDetails.minValue",e.rangeDetails.minValue),this.set("data.rangeDetails.maxValue",e.rangeDetails.maxValue),r=Math.pow(10,e.rangeDetails.decimalPrecisionDigits),this.set("data.rangeDetails.steps",r))),"injection"in e&&(e.injection.ref?(s=e.injection.ref,u="","patient-name"===s?u=window.bdemrElement.patient.name:"patient-age"===s?(u=new Date(window.bdemrElement.patient.dob),u=(new Date).getTime()-u.getTime(),u=Math.floor(u/1e3/60/60/24/365)):"patient-dob"===s?u=window.bdemrElement.patient.dob:"patient-address"===s&&(u=window.bdemrElement.patient.address.line1),this.set("data.value",u)):(i=e.injection.from,l=i.replace("<root>",window.bdmerRecordContentTypeName),l=l.replace(/\/\/\<array\>/g,""),n=window.bdemrElement.safeExtractItem(l),n&&this.set("data.value",n.value)));try{return t.value=t.value.replace("@VALUE@","")}catch(d){return a=d,"pass"}},updateValueIfUnitIsAltered:function(){var formula,newIndex,oldIndex,value;if(oldIndex=this.data.selectedUnitIndex,newIndex=this.localSelectedUnitIndex,oldIndex!==newIndex)return value=this.data.value,formula=this.def.unitDetails.unitList[oldIndex].reverseFormula.replace("@VALUE@",value),value=eval(formula),formula=this.def.unitDetails.unitList[newIndex].formula.replace("@VALUE@",value),value=eval(formula),"rangeDetails"in this.data&&(formula=this.def.unitDetails.unitList[newIndex].formula.replace("@VALUE@",this.def.rangeDetails.minValue),this.set("data.rangeDetails.minValue",eval(formula)),formula=this.def.unitDetails.unitList[newIndex].formula.replace("@VALUE@",this.def.rangeDetails.maxValue),this.set("data.rangeDetails.maxValue",eval(formula))),this.set("data.selectedUnitIndex",this.localSelectedUnitIndex),this.set("data.value",value)}}),Polymer({is:"de-label",supportedDefType:"label",behaviors:[deBehavior],properties:{updateHackInteger:{type:Number,value:0},cache:{type:String,value:null}},refreshButtonTapped:function(){return this.updateHackInteger+=1},$_getLabel:function(e){return e},systemChangedDelegated:function(e,t){if("label"in t||(e.label&&(e.defaultLabel=e.label,"@VALUE@"===e.defaultLabel&&(e.defaultLabel=""),delete e.label),t.label=e.defaultLabel,"@VALUE@"===t.label&&(t.label=""),t.label=t.label.replace("@VALUE@","")),e.isRefreshable)return this.cache=t.label,window.setTimeout(function(e){return function(){return e.refreshLoop()}}(this),1e3)},refreshLoop:function(){if(this.def&&this.data&&this.def.isRefreshable)return this.data.label!==this.cache&&(this.cache=this.data.label,this.refreshButtonTapped(null)),window.setTimeout(function(e){return function(){return e.refreshLoop()}}(this),1e3)}}),Polymer({is:"de-container",supportedDefType:"container",behaviors:[deBehavior],systemChangedDelegated:function(e,t){if(!("label"in t))return e.label&&(e.defaultLabel=e.label,delete e.label),t.label=e.defaultLabel}}),Polymer({is:"de-single-select-dropdown",supportedDefType:"singleSelectDropdown",behaviors:[deBehavior],observers:["dataSelectedIndexChanged(data.selectedIndex)"],dataSelectedIndexChanged:function(){var e;if(this.data&&this.def)return e="change",this.notifyDynamicDataAlteration(e)},systemChangedDelegated:function(e,t){if(!("selectedIndex"in t))return"preselctedIndex"in e?t.selectedIndex=e.preselctedIndex:t.selectedIndex=null}}),Polymer({is:"de-incremental-counter",supportedDefType:"incrementalCounter",behaviors:[deBehavior],properties:{virtualItemList:{type:Array,value:null}},observers:["dataCountChanged(data.count)"],dataCountChanged:function(){var e;if(this.data&&this.def)return e="change",this.notifyDynamicDataAlteration(e)},$getUnit:function(e){return"unit"in this.def?1===e?this.def.unit.singular:this.def.unit.plural:1===e?"unit":"units"},$lt:function(e,t){return e<t},systemChangedDelegated:function(e,t){var a,i,n,s,r,l;"count"in t||(t.count=0),"seed"in t||(t.seed=0),"limit"in e||(e.limit=999),"virtualChildMap"in t||(t.virtualChildMap={}),l=[],n=t.virtualChildMap;for(i in n)a=n[i],i=parseInt(i.replace("item","")),r=this.generateVirtualContainer(this.def,i),s=a,l.push({def:r,data:s});return this.set("virtualItemList",l)},generateVirtualContainer:function(e,t){var a,i;return i={type:"deletable-container",defaultLabel:function(){try{return e.unit.singular}catch(t){return a=t,"unit"}}()+" #"+(t+1),key:"item"+t,childList:e.childListForEachContainer}},addIconPressed:function(e){var t,a,i;return this.set("data.count",this.data.count+1),t=this.data.seed,this.set("data.seed",this.data.seed+1),i=this.generateVirtualContainer(this.def,t),a={forType:"deletable-container",forKey:i.key,childMap:{}},this.push("virtualItemList",{def:i,data:a}),this.data.virtualChildMap[i.key]=a},deleteIconPressed:function(e){var t,a,i,n;if(n=e.model.virtualItem,t=this.virtualItemList.indexOf(n),t>-1)return this.splice("virtualItemList",t,1),this.set("data.count",this.data.count-1),i=n.def,a=n.data,delete this.data.virtualChildMap[i.key]}}),Polymer({is:"de-radio-list",supportedDefType:"radioList",behaviors:[deBehavior],properties:{typedCustomValue:{type:String,notify:!0,value:""}},observers:["dataSelectedValueChanged(data.selectedValue)"],dataSelectedValueChanged:function(){var e;if(this.data&&this.def&&this.data.selectedValue)return e="change",this.notifyDynamicDataAlteration(e)},$isPossibleValueChecked:function(e,t){return e===t},possibleValueCheckedStatusChanged:function(e){var t;return t=e.model.possibleValue,this.set("data.selectedValue",t)},$isPossibleCustomValueChecked:function(e,t){return e===t},customPossibleValueCheckedStatusChanged:function(e){var t;return t=e.model.customPossibleValue,this.set("data.selectedValue",t)},addCustomValue:function(e){var t,a;if(t=this.typedCustomValue,!(indexOf.call(this.data.customValueList,t)>=0||(a=this.typedCustomValue,indexOf.call(this.def.possibleValueList,a)>=0)))return this.push("data.customValueList",this.typedCustomValue),this.set("data.selectedValue",this.typedCustomValue),this.typedCustomValue=""},deleteCustomValue:function(e){var t,a;if(a=e.model.customPossibleValue,this.set("data.selectedValue",""),t=this.data.customValueList.indexOf(a),t!==-1)return this.splice("data.customValueList",t,1)},systemChangedDelegated:function(e,t){if("selectedValue"in t||(this.set("data.selectedValue",""),"preselectedValue"in e&&(this.data.selectedValue=this.def.preselectedValue)),!("customValueList"in t))return t.customValueList=[]}}),Polymer({is:"de-checkbox",supportedDefType:"checkbox",behaviors:[deBehavior],observers:["dataIsCheckedChanged(data.isChecked)"],dataIsCheckedChanged:function(){var e;if(this.data&&this.def)return e=this.data.isChecked?"check":"uncheck",this.notifyDynamicDataAlteration(e)},systemChangedDelegated:function(e,t){if(!("isChecked"in t))return e.isPrechecked?t.isChecked=!0:t.isChecked=!1}}),Polymer({is:"de-autocomplete",supportedDefType:"autocomplete",behaviors:[deBehavior],properties:{sourceDataList:{type:Array,notify:!0,value:[]},virtualItemList:{type:Array},selectedStringObjectList:{type:Array,notify:!0}},sourceDataPluginMap:{operationNameList:function(e){var t;return t=document.querySelector("root-element"),t.getStaticData("operationList",function(t){return function(t){var a,i;return i=function(){var e,i,n;for(n=[],e=0,i=t.length;e<i;e++)a=t[e],n.push({text:a.name,alt:a.shortcut});return n}(),e(i)}}(this))},medicineNameList:function(e){var t;return t=document.querySelector("root-element"),t.getStaticData("medicineList",function(t){return function(t){var a,i,n,s;return a=function(){var e,a,n;for(n=[],e=0,a=t.length;e<a;e++)i=t[e],n.push({text:i.brandName,alt:""});return n}(),n=function(){var e,a,n;for(n=[],e=0,a=t.length;e<a;e++)i=t[e],n.push({text:i.pharmaName,alt:""});return n}(),s=[].concat(a,n),e(s)}}(this))},hospitalNameList:function(e){var t;return t=document.querySelector("root-element"),t.getStaticData("hospitalList",function(t){return function(t){var a,i;return i=function(){var e,i,n;for(n=[],e=0,i=t.length;e<i;e++)a=t[e],n.push({text:a.name,alt:""});return n}(),e(i)}}(this))},diagnosisNameList:function(e){var t;return t=document.querySelector("root-element"),t.getStaticData("diagnosisList",function(t){return function(t){var a,i;return i=function(){var e,i,n;for(n=[],e=0,i=t.length;e<i;e++)a=t[e],n.push({text:a.name,alt:""});return n}(),e(i)}}(this))}},observers:["dataVirtualItemListChanged(virtualItemList.*)"],dataVirtualItemListChanged:function(){var e;if(this.data&&this.def)return e="change",this.notifyDynamicDataAlteration(e)},systemChangedDelegated:function(e,t){var a,i,n,s,r,l,u,d,o,c,h,f,p,m,v,y,g,V;if(!("selectionType"in e))throw new Error("missing selectionType");if("sourceDataPlugin"in e){if(l=e.sourceDataPlugin.name,!(l in this.sourceDataPluginMap))throw"unknown sourceDataPlugin";(a=this.sourceDataPluginMap[l])(function(e){return function(t){return e.sourceDataList=t}}(this))}else{if(!("sourceDataList"in e))throw new Error("missing sourceDataList or sourceDataPlugin");this.sourceDataList=e.sourceDataList}"virtualChildMap"in t||(t.virtualChildMap={}),V=[],d=t.virtualChildMap;for(s in d)n=d[s],f=s.replace("item_",""),u=f.split("_"),u.pop(),r=u.join("_"),g=this.generateVirtualContainer(this.def,f,r),y=n,V.push({def:g,data:y});if(this.set("virtualItemList",V),0===V.length&&"injection"in e){if(e.injection.ref)return"custom stuff";if(i=e.injection.from,p=i.replace("<root>",window.bdmerRecordContentTypeName),p=p.replace(/\/\/\<array\>/g,""),n=window.bdemrElement.safeExtractItem(p)){o=n.virtualChildMap,c=[];for(s in o)v=o[s],s=s.split("_"),f=s.pop(),s.shift(),m=s.join("_"),h={text:m,serial:f},c.push(this._postAutocompleteSelected(h));return c}}},generateVirtualContainer:function(e,t,a){var i;return i={type:"deletable-container",defaultLabel:a,key:"item_"+t,childList:e.childListForEachContainer}},_postAutocompleteSelected:function(e){var t,a,i;return t=e.text+"_"+e.serial,i=this.generateVirtualContainer(this.def,t,e.text),a={forType:"deletable-container",forKey:i.key,childMap:{}},this.push("virtualItemList",{def:i,data:a}),this.data.virtualChildMap[i.key]=a},autocompleteSelected:function(e){var t;return t=e.detail.selectedStringObject,this._postAutocompleteSelected(t)},deleteIconPressed:function(e){var t,a,i,n;if(n=e.model.virtualItem,t=this.virtualItemList.indexOf(n),t>-1)return this.splice("virtualItemList",t,1),i=n.def,a=n.data,delete this.data.virtualChildMap[i.key]}})}).call(this);
//# sourceMappingURL=de-all.coffee-compiled.js.map</script>
