<!-- style --><!-- behavior --><!-- custom-elements --><!-- element --><dom-module id="page-print-invoice">
  <template>

    <!-- style -->

    <style is="custom-style" include="common-style">
      .limiting-container {
        margin-top: 10px;
      }

      .external-card-title {
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
        color: #777777;
      }

      .info-card {
        @apply(--layout-vertical);
        /*@apply(--layout-center);*/
        margin-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
        padding-bottom: 20px;
      }

      .info-card .row {
        margin-left: 10px;
        /*margin-right: 10px;*/
        margin-top: 10px;
      }

      .info-card .hr {
        margin-left: 20px;
        margin-right: 20px;
        height: 1px;
        /*width: 100px;*/
        background: #dddddd;
      }

      .info-card .row .modifier {
        font-size: 14px;
        background: #000000;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
      }

      .info-card .row .modifier.online {
        background: #757575;
      }

      .info-card .row .modifier.local-only {
        background: #039BE5;
      }

      .info-card .row .modifier.locally-updated {
        background: #009688;
      }

      .info-card .row .modifier.imported {
        background: #4CAF50;
      }

      .info-row {
        margin-top: 10px;
      }

      .top-info-row {
        margin-top: 10px;
        margin-bottom: 10px;
      }

      .serial-number {
        background: #37474F;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: bold;
        display: inline-block;
        font-size: 14px;
      }

      .address1 {
        margin-right: 10px;
      }

      .name {
        margin-left: 5px;
        font-size: 24px;
      }

      .email {
        margin-left: 5px;
        font-size: 14px;
      }

      .phone {
        margin-left: 5px;
      }

      .val {
        text-decoration: underline;
      }

      .account-box {
        --iron-icon-width: 96px;
        --iron-icon-height: 96px;
      }

      .limiting-container {
        margin-top: 10px;
      }

      .document {
        font-family: 'Arial,';
        background: white;
        width: 100%;
        overflow-x: hidden;
      }

      .document-title {
        font-size: 20px;
        font-weight: bold;
      }

      .collection {
        color: red;
        background: grey;
      }

      .document-header {
        padding-left: 10px;
        padding-right: 10px;
      }

      .document-header .logo {
        max-width: 128px;
        max-height: 128px;
      }

      .horiline {
        width: 100%;
        height: 0px;
        /*background: black;*/
        border: 1px solid black;
        margin-bottom: 6px;
      }

      .leftSide {
        margin-left: 6px;
      }

      .rightSide {
        text-align: right;
      }

      .leftSideLine1 {
        font-size: 24px;
      }

      .rightSideLine1 {
        font-size: 22px;
      }

      .item {
        padding: 10px;
        border: 1px solid grey;
      }

      h1,
      h2,
      h3,
      h4 {
        margin: 0;
        padding: 5px 0;
      }

      paper-progress {
        width: 100%;
        --paper-progress-active-color: var(--paper-orange-500);
      }

      :host([has-scrolling-region]) #wrapper #contentContainer {
        overflow-y: visible;
        overflow-x: hidden;
      }

      @media print {
        :host([has-scrolling-region]) #wrapper #contentContainer {
          overflow-y: visible;
          overflow-x: hidden;
        }
      }
    </style>

    <!-- local DOM -->


    <div class="document">

      <template is="dom-if" if="[[loadingCounter]]">
        <div class="layout horizontal center type bold text-center">
          <paper-progress indeterminate="" hidden$="[[!getBoolean(loadingCounter)]]"></paper-progress>
        </div>
      </template>

      <!-- editing visit - start -->

      <div class="document-header horizontal layout center">

        <template is="dom-if" if="[[settings.printDecoration.logoDataUri]]">
          <img class="logo" src="[[settings.printDecoration.logoDataUri]]" alt="">
        </template>

        <div class="leftSide vertical layout">
          <div class="leftSideLine1">[[settings.printDecoration.leftSideLine1]]</div>
          <div class="leftSideLine2">[[settings.printDecoration.leftSideLine2]]</div>
          <div class="leftSideLine3">[[settings.printDecoration.leftSideLine3]]</div>
        </div>
        <div class="flex"></div>
        <div class="rightSide vertical layout end">
          <div class="rightSideLine1">[[settings.printDecoration.rightSideLine1]]</div>
          <div class="rightSideLine2">[[settings.printDecoration.rightSideLine2]]</div>
          <div class="rightSideLine3">[[settings.printDecoration.rightSideLine3]]</div>
        </div>
      </div>



      <div class="horiline"></div>

      <div class="document-header horizontal layout justified">

        <div class="leftSide vertical layout">
          <span>Patient's Name: [[$getFullName(patient.name)]]</span>
          <span>Age :[[_computeAge(patient.dateOfBirth)]] years</span>
          <span>Allergy : [[patient.allergy]]</span>
          <span>Blood Group : [[patient.bloodGroup]]</span>
        </div>

        <div class="rightSide vertical layout end">
          <strong>Invoice#: [[invoice.serial]]</strong>
          <span>Date :[[_formatDateTime(invoice.createdDatetimeStamp)]]</span>
          <span>Created By : [[user.name]]</span>
          <span>Organization: [[invoice.organizationName]]</span>
        </div>

      </div>

      <div class="horiline"></div>

      <!--Invoice Starts -->
      <div class="invoice document-header">

        <div class="p-16">
          <paper-item class="layout horizontal center invoice-item">
            <div class="flex-7">
              <strong>Items</strong>
            </div>
            <div class="flex-2">
              <strong>Unit Price</strong>
            </div>
            <div class="flex-1">
              <strong>Qty</strong>
            </div>
            <div class="flex-2">
              <strong>Price</strong>
            </div>
          </paper-item>
          <template is="dom-repeat" items="[[invoice.data]]">
            <paper-listbox>
              <paper-item class="invoice-item">
                <div>[[_returnSerial(index)]]</div>
                <div class="flex-7 layout vertical m-left-8">
                  <div class="layout horizontal">
                    <strong>[[item.name]]</strong> &nbsp;
                    <span class="flex"></span>
                    <template is="dom-if" if="[[item.category]]">
                      <span class="type secondary m-right-8">[[item.category]]</span>
                    </template>
                  </div>
                  <div>
                    <template is="dom-repeat" items="[[item.itemList]]" as="packageItem">
                      <div> - [[packageItem.name]]</div>
                    </template>
                  </div>
                </div>
                <div class="flex-2">[[item.price]]</div>
                <div class="flex-1">[[item.qty]]</div>
                <div class="flex-2">[[item.totalPrice]]
                  <span class="text-mute">BDT</span>
                </div>
              </paper-item>
            </paper-listbox>
          </template>
          <div class="horiline"></div>
          <div class="layout vertical end">
            <h3>Total
              <strong>[[invoice.totalBilled]]</strong> BDT</h3>
          </div>
          <div class="layout vertical end">
            <h4>Paid [[invoice.paid]]</h4>
            <h4>Due
              <strong>[[$calculateRemaining(invoice.totalBilled, invoice.totalAmountReceieved)]]</strong>
            </h4>
          </div>
        </div>

      </div>

    </div>

  </template>
  <script>(function(){Polymer({is:"page-print-invoice",behaviors:[app.behaviors.commonComputes,app.behaviors.dbUsing,app.behaviors.pageLike,app.behaviors.translating,app.behaviors.apiCalling],properties:{isVisitValid:{type:Boolean,notify:!1,value:!1},isPatientValid:{type:Boolean,notify:!1,value:!1},user:{type:Object,notify:!0,value:null},patient:{type:Object,notify:!0,value:null},invoice:{type:Object,notify:!0,value:null},settings:{type:Object,notify:!0},loadingCounter:{type:Number,notify:!0,value:function(){return 0}}},navigatedIn:function(){var t;return this._loadUser(),t=this.domHost.getPageParams(),t.invoice?(this._loadInvoice(t.invoice,function(i){return function(){return i._loadPatient(t.patient)}}(this)),this.set("settings",this._getSettings())):void this._notifyInvalidVisit()},getBoolean:function(t){return!!t},_getSettings:function(){var t,i;return t=app.db.find("settings",function(t){var i;return i=t.serial,"only"===i}),i=t[0]},_loadUser:function(){var t;if(t=app.db.find("user"),1===t.length)return this.user=t[0]},getFullName:function(t){var i,n,e,a;return n="",i="",e="",a="",t.honorifics&&(n=t.honorifics+". "),t.first&&(i=t.first),t.middle&&(a=" "+t.middle),t.last&&(e=" "+t.last),n+i+a+e},_loadPatient:function(t){var i;return i=app.db.find("patient-list",function(i){var n;return n=i.serial,n===t}),i.length?this.set("patient",i[0]):t===this.invoice.patientSerial?this.set("patient",this.invoice.patientInfo):this._notifyInvalidPatient()},$of:function(t,i){return i in t||(t[i]=null),t[i]},_loadVisit:function(t){var i;return i=app.db.find("doctor-visit",function(i){var n;return n=i.serial,n===t}),1===i.length?(this.isVisitValid=!0,this.visit=i[0]):(this._notifyInvalidVisit(),!1)},_loadInvoice:function(t,i){var n,e;return this.loadingCounter++,e=app.db.find("visit-invoice",function(i){var n;return n=i.serial,n===t}),1===e.length?(this.set("invoice",e[0]),this.loadingCounter--,i()):(n={apiKey:this.user.apiKey,invoiceSerial:t},this.callApi("uhcp--get-single-invoice",n,function(t){return function(n,e){return t.loadingCounter--,e.hasError?t.domHost.showModalDialog(e.error.message):(t.set("invoice",e.data[0]),i())}}(this)))},_notifyInvalidInvoice:function(){return this.domHost.showModalDialog("Invalid Invoice Provided")},printButtonPressed:function(t){return window.print()},arrowBackButtonPressed:function(t){return this.domHost.navigateToPreviousPage()},_notifyInvalidPatient:function(){return this.isPatientValid=!1,this.domHost.showModalDialog("Invalid Patient Provided")},_notifyInvalidVisit:function(){return this.isVisitValid=!1,this.domHost.showModalDialog("Invalid Visit Provided")},_isEmpty:function(t){return 0===t},_isEmptyArray:function(t){return 0===t.length},_isEmptyString:function(t){return null===t||""===t||"undefined"===t},_computeTotalDaysCount:function(t,i){var n,e;return e=864e5,n=t-i,Math.round(n/e)},_returnSerial:function(t){return t+1},_computeAge:function(t){var i,n,e,a;return t?(a=new Date,n=new Date(t),i=a.getFullYear()-n.getFullYear(),e=a.getMonth()-n.getMonth(),(e<0||0===e&&a.getDate()<n.getDate())&&i--,i):""},_formatDateTime:function(t){return lib.datetime.format(new Date(t),"mmm d, yyyy")},navigatedOut:function(){return this.patient={},this.invoice={},this.isVisitValid=!1,this.isPatientValid=!1},_formatDateTime:function(t){return lib.datetime.format(t,"mmm d, yyyy h:MMTT")},_formatDate:function(t){return lib.datetime.format(t,"mmm d, yyyy")},$fromListOrCustom:function(t,i,n){return i===t.length-1?n:t[i]},possiblePaymentStatusses:{notBilled:"Not Billed",unpaid:"Unpaid",partiallyPaid:"Partially Paid",fullyPaid:"Fully Paid"},$toReadbleStatus:function(t){return this.possiblePaymentStatusses[t]},$calculateRemaining:function(t,i){return null==t&&(t=0),null==i&&(i=0),parseInt(t)-parseInt(i)}})}).call(this);
//# sourceMappingURL=page-print-invoice.coffee-compiled.js.map</script>
</dom-module>