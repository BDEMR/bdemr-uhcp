f<!-- app-* -->

<!-- iron-* -->
<!-- paper-* -->
<!-- behavior -->
<!-- custom -->
<!-- element -->
<dom-module id="root-element">
  <template>

    <!-- style -->

    <style is="custom-style" include="common-style">
      /* host start */

      :host {
        display: block;
        --app-primary-color: #0a7b97;
        --app-secondary-color: #666666;
      }

      /* left menu bar */

      /* Text Variations*/

      .text-muted {
        color: var(--secondary-text-color);
      }

      .text-primary {
        color: var(--paper-indigo-500);
      }


      /* Text Sizes */

      .text-sm {
        font-size: 12px;
      }

      /* Text Align */

      .text-left {
        text-align: left;
      }

      .text-center {
        text-align: center;
      }

      .text-right {
        text-align: right;
      }

      app-drawer {
        --app-drawer-scrim-background: rgba(255, 255, 255, 0.4);
        --app-drawer-content-container: {
          background-color: white;
        }
      }

      .drawer-list a {
        display: block;
        padding: 0 16px;
        line-height: 40px;
        text-decoration: none;
        color: var(--app-secondary-color);
      }

      .drawer-list a.iron-selected {
        color: black;
        font-weight: bold;
      }

      .drawer-list a.subroute {
        padding-left: 32px;
      }

      /* app-header start */

      app-header {
        background-color: var(--app-primary-color);
        color: #fff;
      }

      /* Simple app-header */

      app-header.simple {
        background-color: #0a7b97;
        color: #fff;
      }

      app-header.simple paper-icon-button {
        --paper-icon-button-ink-color: white;
      }

      app-header.simple app-toolbar.middle {
        height: 20px;
      }

      /*app-header-layout.show-ad {
        height: calc(100vh - 100px);
      }*/

      paper-toolbar {
        --paper-toolbar-background: var(--app-primary-color);
        --paper-toolbar-title: {
          margin-left: 0;
          height: 22px;
        }
      }


      /*Ad Area Related Styles*/

      .ad-area {
        width: 100%;
        height: 100px;
        margin: 0 auto;
        background-color: #eee;
        position: fixed;
        bottom: 0;
        z-index: 1;
        box-shadow: 1px -4px 2px rgba(0,0,0, 0.16);
      }

      .ad {
        width: 960px;
        margin: 0 auto;
        background-color: #fafafa;
        cursor: pointer;
      }

      .ad img {
        height: 100px;
        width: auto;
        background-size: contain;
      }

      .ad .text {
        padding: 10px;
      }

      .ad h3,
      .ad p {
        margin: 0;
      }


      /* Notifiation drawer related styles */

      #notificationDrawer app-toolbar {
        text-align: left;
      }

      .notification-group-area {
        margin-bottom: 5px;
        background-color: var(--paper-grey-200);
        padding: 5px 0;
      }

      .notification-group-area paper-material {
        padding: 10px;
        margin-bottom: 5px;
      }

      .notification-group-area paper-listbox {
        border: 1px solid var(--paper-blue-grey-50);
        padding: 0;
        border-top: 0;
      }

      .notification-group-area p {
        margin: 0;
        font-size: 14px;
        line-height: 1.4;
      }

      .notification-group-area .sender {
        color: var(--paper-orange-800);
      }

      .notification-header-button {
        --paper-button: {
          @apply(--layout-block);
          text-align: left;
          border-bottom-left-radius: 0;
          border-bottom-right-radius: 0;
          color: var(--paper-blue-500);
          font-weight: bold;
        }
      }

      .user-info {
        padding: 10px 20px;
        background-color: var(--paper-blue-grey-50);
        margin-bottom: 20px;
      }

      .user-info .label {
        background-color: #ccc;
        display: inline-block;
        padding: 3px;
      }

      .nav-footer {
        padding: 10px 20px;
        background-color: var(--paper-grey-300);
      }

      .nav-footer a[href] {
        text-decoration: none;
      }


      @media print {
        paper-toolbar {
          display: none;
        }
        #adArea {
          display: none;
        }

        app-header-layout ::content #contentContainer {
          padding: 0 !important;
          margin: 0 !important;
        }
      }



      .limiting-container {
        width: 100% !important;
        min-width: 100% !important;
        max-width: 100% !important;
        padding: 0 !important;
        margin: 0 !important;
      }

      @media screen and (max-width: 768px) {
        .ad {
          width: 100%;
        }
      }

      @media screen and (max-width: 360px) {
        .ad {
          font-size: 80%;
        }
      }


      paper-toolbar ::content #bottomBar {
        padding: 0;
      }


      .m-horizontal-4 {
        margin: 0 4px;
      }

      .patient-details {
        @apply(--layout-horizontal);
        @apply(--layout-wrap);
        padding: 8px 16px 8px 52px;
        font-size: 16px;
        font-weight: 300;
      }

      paper-toolbar {
        --paper-toolbar-height: 56px;
        --paper-toolbar-medium: {
          height: 144px;
        }
      }


      paper-toolbar ::content #bottomBar {
        height: 88px;
      }

      paper-toolbar ::content .bottom {
        width: 100%;
      }

      paper-tabs {
        margin-top: 8px;
        background-color: #0a7b97;
      }

      .tab-label {
        text-transform: uppercase;
        font-size: 14px;
        border-radius: 6px;
        font-weight: bold;
        margin-left: 8px;
        padding: 3px 6px;
        background-color: #43A047;
      }

      paper-tab {
        text-transform: uppercase;
      }
      .custom-img {
        height: 70px !important;
        width: 70px !important;
      }
    </style>

    <!--Use to detect viewport and show/hide ad on small screen-->
    <iron-media-query query="(max-width: 425px)" query-matches="{{isMobileView}}"></iron-media-query>

    <app-location route="{{route}}" use-hash-as-path=""></app-location>
    <app-route route="{{route}}" pattern="/:page" data="{{routeData}}" tail="{{routeLevel2}}"></app-route>
    <app-route route="{{routeLevel2}}" pattern="/:pageLevel2" data="{{routeLevel2Data}}" tail="{{routeLevel3}}"></app-route>
    <app-route route="{{routeLevel3}}" pattern="/:pageLevel3" data="{{routeLevel3Data}}" tail="{{routeLevel4}}"></app-route>

    <app-drawer-layout fullbleed="" force-narrow="">
      <app-drawer>
        <div class="layout vertical relative" style="height: 100%; overflow: auto;">
          <!-- Left drawer content - Start -->
          <paper-toolbar>
            <span class="title">UHCP App</span>
          </paper-toolbar>
          <div class="user-info">
            <span class="text-muted">[[user.name]]</span>
            <br>
            <template is="dom-if" if="{{currentOrganization.isCurrentUserAnAdmin}}">
              <span class="text-sm text-muted">Admin, </span>
            </template>
            <span class="text-sm text-muted">[[currentOrganization.userActiveRole.title]]</span>
            <br>
            <span class="text-sm text-muted">[[user.email]]</span>
            <br>
          </div>
          <iron-selector selected="[[page.name]]" attr-for-selected="name" class="drawer-list" role="navigation">
            <a name="dashboard" href="#/dashboard" drawer-toggle="">Dashboard</a>
            <a name="patient-manager" href="#/patient-manager" drawer-toggle="" hidden$="[[!_checkUserAccess('D001')]]">Patient Manager</a>
            <a name="patient-manager" href="#/reports-manager" drawer-toggle="" hidden$="[[!_checkUserAccess('D002')]]">Reports Manager</a>
            <a name="patient-manager" href="#/chamber-manager" drawer-toggle="" hidden$="[[!_checkUserAccess('D003')]]">Chamber Manager</a>
            <a name="medicine-dispension" href="#/medicine-dispension" drawer-toggle="" hidden$="[[!_checkUserAccess('D004')]]">Medicine Dispension</a>
            <template is="dom-if" if="[[!user.isUsingAsAssistant]]">
              <a name="assistant-manager" href="#/assistant-manager" drawer-toggle="" hidden$="[[!_checkUserAccess('D005')]]">Assistant Manager</a>
            </template>
            <a name="search-record" href="#/search-record" drawer-toggle="" hidden$="[[!_checkUserAccess('D006')]]">Search Records</a>
            <a name="invoice-manager" href="#/invoice-manager" drawer-toggle="" hidden$="[[!_checkUserAccess('D007')]]">Invoice Manager</a>
            <a name="booking" href="#/booking" drawer-toggle="" hidden$="[[!_checkUserAccess('D009')]]">Booking and Services</a>
            <a name="organization-manager" href="#/organization-manager" drawer-toggle="" hidden$="[[!_checkUserAccess('D010')]]">Organization Manager</a>
            <a name="notification-panel" href="#/notification-panel" drawer-toggle="" hidden$="[[!_checkUserAccess('D011')]]">Send Notification</a>
            <a name="my-wallet" href="#/wallet" drawer-toggle="">[[$TRANSLATE('My Wallet',LANG)]]</a>
            <a name="send-feedback" href="#/send-feedback" drawer-toggle="" hidden$="[[!_checkUserAccess('D012')]]">Send Feedback</a>
            <a name="welcome-internal" href="#/welcome-internal" drawer-toggle="">Welcome</a>
            <a name="settings" href="#/settings" drawer-toggle="">Settings</a>
            <hr>
            <a on-tap="logoutPressed">Logout</a>
            <!-- <hr> -->
            <!-- <a name="dev-tools" href="#/dev-tools">Dev Tools</a> -->
          </iron-selector>
          <!-- Left drawer content - End -->
          <div class="nav-footer">
            <div class="text-muted text-sm">Copyright © [[getYear()]] BDEMR</div>
            <div class="text-muted text-sm">Feedback at
              <a class="text-sm" href="mailto:ab@bdemr.com">ab@bdemr.com</a>
            </div>
          </div>
        </div>
      </app-drawer>

      <!--Notification Drawer Start-->
      <app-drawer id="notificationDrawer" align="right">
        <div style="height: 100%; overflow: auto; background-color: #f5f5f5;">
          <app-toolbar>
            <div main-title="">Notifications</div>
            <paper-icon-button icon="chevron-right" on-tap="notificationToggleButtonPressed"></paper-icon-button>
          </app-toolbar>
          <div>
            <div class="notification-group-area">
              <paper-button class="notification-header-button btn btn-sm btn-default block" on-tap="toggleReportNotification">Report</paper-button>
              <iron-collapse id="reportNotification" opened="">
                <template is="dom-if" if="[[!reportNotification.length]]">
                  <paper-item class="text-sm">No New Notifications!</paper-item>
                </template>
                <paper-listbox>
                  <template is="dom-repeat" items="[[reportNotification]]">
                    <paper-material class="layout horizontal">
                      <div class="layout vertical start flex">
                        <span class="text-sm text-muted block">[[_formatDateTime(item.createdDateTimeStamp)]]</span>
                        <span class="text-sm sender">[[item.sender]]</span>
                        <p class="text-left">[[item.message]]</p>
                      </div>
                      <div class="layout horizontal center">
                        <paper-icon-button icon="clear" mini="" on-tap="markAsRead"></paper-icon-button>
                      </div>
                    </paper-material>
                  </template>
                </paper-listbox>
              </iron-collapse>
            </div>
            <div class="notification-group-area">
              <paper-button class="notification-header-button btn btn-sm btn-default block" on-tap="togglePatientNoteNotification">Patient Note</paper-button>
              <iron-collapse id="patientNoteNotification" opened="">
                <template is="dom-if" if="[[!patientNoteNotification.length]]">
                  <paper-item class="text-sm">No New Notifications!</paper-item>
                </template>
                <paper-listbox>
                  <template is="dom-repeat" items="[[patientNoteNotification]]">
                    <paper-material class="layout horizontal">
                      <div class="layout vertical start flex">
                        <span class="text-sm text-muted block">[[_formatDateTime(item.createdDateTimeStamp)]]</span>
                        <span class="text-sm sender">[[item.sender]]</span>
                        <p class="text-left">[[item.message]]</p>
                      </div>
                      <div class="layout horizontal center">
                        <paper-icon-button icon="clear" mini="" on-tap="markAsRead"></paper-icon-button>
                      </div>
                    </paper-material>
                  </template>
                </paper-listbox>
              </iron-collapse>
            </div>
            <div class="notification-group-area">
              <paper-button class="notification-header-button btn btn-sm btn-default block" on-tap="toggleOnlineConsultationNotification">Consultation</paper-button>
              <iron-collapse id="onlineConsultationNotification" opened="">
                <template is="dom-if" if="[[!onlineConsultationNotification.length]]">
                  <paper-item class="text-sm">No New Notifications!</paper-item>
                </template>
                <paper-listbox>
                  <template is="dom-repeat" items="[[onlineConsultationNotification]]">
                    <paper-material class="layout horizontal">
                      <div class="layout vertical start flex">
                        <span class="text-sm text-muted block">[[_formatDateTime(item.createdDateTimeStamp)]]</span>
                        <span class="text-sm sender">[[item.sender]]</span>
                        <p class="text-left">[[item.message]]</p>
                      </div>
                      <div class="layout horizontal center">
                        <paper-icon-button icon="clear" mini="" on-tap="markAsRead"></paper-icon-button>
                      </div>
                    </paper-material>
                  </template>
                </paper-listbox>
              </iron-collapse>
            </div>
            <div class="notification-group-area">
              <paper-button class="notification-header-button btn btn-sm btn-default block" on-tap="toggleGeneralNotification">General</paper-button>
              <iron-collapse id="generalNotification" opened="">
                <template is="dom-if" if="[[!generalNotification.length]]">
                  <paper-item class="text-sm">No New Notifications!</paper-item>
                </template>
                <paper-listbox>
                  <template is="dom-repeat" items="[[generalNotification]]">
                    <paper-material class="layout horizontal">
                      <div class="layout vertical start flex">
                        <span class="text-sm text-muted block">[[_formatDateTime(item.createdDateTimeStamp)]]</span>
                        <span class="text-sm sender">[[item.sender]]</span>
                        <p class="text-left">[[item.message]]</p>
                      </div>
                      <div class="layout horizontal center">
                        <paper-icon-button icon="clear" mini="" on-tap="markAsRead"></paper-icon-button>
                      </div>
                    </paper-material>
                  </template>
                </paper-listbox>
              </iron-collapse>
            </div>
          </div>
        </div>
      </app-drawer>
      <!--Notification Drawer Start-->

      <app-header-layout id="mainHeader" class="show-ad" has-scrolling-region="">

        <!-- App header - Start -->
        <app-header reveals="">
          <paper-toolbar class$="{{_changeToolbarClass(page.showPatientsDetails, page.showToolbar)}}">

            <!--  header - start -->
            <template is="dom-if" if="[[$equals(page.headerType, 'normal')]]">
              <template is="dom-if" if="[[page.leftMenuEnabled]]">
                <paper-icon-button icon="menu" drawer-toggle=""></paper-icon-button>
              </template>
            </template>

            <template is="dom-if" if="[[$equals(page.headerType, 'modal')]]">
              <paper-icon-button icon="arrow-back" on-tap="arrowBackButtonPressed"></paper-icon-button>
            </template>

            <div class="title">
              <template is="dom-if" if="[[!page.hideHeaderTitle]]">
                [[page.headerTitle]]
              </template>

              <template is="dom-if" if="[[page.showPatientsDetails]]">
                [[$getFullName(currentPatientsDetails.name)]]
              </template>
            </div>

            <paper-button on-tap="changeOrganizationClicked">[[currentOrganization.name]]</paper-button>

            <paper-menu-button no-overlap="">
              <paper-button class="dropdown-trigger lang-button">
                <iron-icon icon="language"></iron-icon>
                [[languageName]]
              </paper-button>
              <paper-menu class="dropdown-content" selected="{{languageSelectedIndex}}">
                <paper-item>English (US)</paper-item>
                <paper-item>Bengali / বাংলা</paper-item>
              </paper-menu>
            </paper-menu-button>

            <template is="dom-if" if="[[downloadActions.count]]">
              <paper-icon-button id="fileDownloadIcon" icon="file-download"></paper-icon-button>
              <paper-badge for="fileDownloadIcon" label="[[downloadActions.count]]"></paper-badge>
            </template>

            <template is="dom-if" if="[[apiActions.count]]">
              <paper-icon-button id="apiActionsIcon" icon="swap-vertical-circle"></paper-icon-button>
              <paper-badge for="apiActionsIcon" label="[[apiActions.count]]"></paper-badge>
            </template>

            <template is="dom-if" if="[[page.showPrintButton]]">
              <paper-icon-button icon="print" on-tap="printButtonPressed"></paper-icon-button>
            </template>

            <template is="dom-if" if="[[page.showSaveButton]]">
              <paper-icon-button icon="save" on-tap="saveButtonPressed"></paper-icon-button>
            </template>

            <template is="dom-if" if="[[currentOrganization]]">
              <template is="dom-if" if="[[_showSyncButton(syncActions.count,downloadActions.count)]]">
                <paper-icon-button icon="cloud-upload" on-tap="syncButtonPressed"></paper-icon-button>
              </template>
            </template>
            <template is="dom-if" if="[[syncActions.count]]">
              <paper-spinner alt="Syncing to Cloud" active=""></paper-spinner>
            </template>
            <!-- <paper-icon-button icon="refresh" on-tap="refreshButtonPressed"></paper-icon-button> -->
            <paper-icon-button icon="add-alert" on-tap="notificationToggleButtonPressed"></paper-icon-button>
            <!--  header - end -->


            <template is="dom-if" if="[[page.showToolbar]]">
              <div class="bottom">
                <template is="dom-if" if="[[page.showPatientsDetails]]">
                  <div class="patient-details">
                    <template is="dom-if" if="[[!currentPatientsDetails.isForOrganizationOnly]]">
                      <div class="m-horizontal-4">
                        <strong>Serial: </strong>
                        <span>{{currentPatientsDetails.serial}}</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Sex: </strong>
                        <span></span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Age: </strong>
                        <span>[[_computeAge(currentPatientsDetails.dob)]] years </span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Blood Group: </strong>
                        <span> [[currentPatientsDetails.bloodGroup]]</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Allergy: </strong>
                        <span>[[currentPatientsDetails.allergy]] </span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Personal Balance: </strong>
                        <span>[[patientWalletBalance]]</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Organization Indoor Balance: </strong>
                        <span>[[patientOrganizationWalletIndoorBalance]]</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Organization Outdoor Balance: </strong>
                        <span>[[patientOrganizationWalletOutdoorBalance]]</span>
                      </div>
                    </template>

                    <template is="dom-if" if="[[currentPatientsDetails.isForOrganizationOnly]]">
                      <div class="m-horizontal-4">
                        <strong>Patient Name: </strong>
                        <i>REDACTED FOR CONFIDENTIALITY</i>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Age: </strong>
                        <i>REDACTED FOR CONFIDENTIALITY</i>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Blood Group: </strong>
                        <span>[[currentPatientsDetails.bloodGroup]]</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Allergy: </strong>
                        <span>[[currentPatientsDetails.allergy]]</span>
                      </div>
                    </template>
                  </div>
                </template>
                <div class="flex custom-toolbar">
                  <paper-tabs selected="{{selectedPatientPageIndex}}" scrollable="" noink="true">
                    <paper-tab>
                      <div class="layout horizontal layout">
                        <div>[[$TRANSLATE('Visit',LANG)]]</div>
                        <div class="tab-label">[[selectedVisitSerial]]</div>
                      </div>
                    </paper-tab>
                    <paper-tab>[[$TRANSLATE('Patient Demography',LANG)]]</paper-tab>
                    <paper-tab>[[$TRANSLATE('Diabetic Registration',LANG)]]</paper-tab>
                    <paper-tab><img class="m-right-8" width="24" height="24" src="../../assets/img/partners/badas_logo.png" alt="">[[$TRANSLATE('PCC Records',LANG)]]</paper-tab>
                    <paper-tab>[[$TRANSLATE('Confirmed Diagnosis',LANG)]]</paper-tab>
                    <paper-tab>[[$TRANSLATE('Medicine',LANG)]]</paper-tab>
                    <paper-tab>[[$TRANSLATE('Vitals',LANG)]]</paper-tab>
                    <paper-tab>[[$TRANSLATE('Visits &amp; Report',LANG)]]</paper-tab>
                    <paper-tab>[[$TRANSLATE('Test Results',LANG)]]</paper-tab>
                    <paper-tab>[[$TRANSLATE('Doctor Patient Notes',LANG)]]</paper-tab>
                    <paper-tab>[[$TRANSLATE('Patient Gallery',LANG)]]</paper-tab>
                    <paper-tab>[[$TRANSLATE('Activity Log',LANG)]]</paper-tab>
                  </paper-tabs>
                </div>
              </div>
            </template>


          </paper-toolbar>
        </app-header>
        <!-- App header - End -->

        <!-- Page switcher - Start -->
        
        <iron-pages role="main" selected="[[page.name]]" attr-for-selected="name" fallback-selection="error404" on-iron-select="ironPagesSelectedEvent" on-iron-deselect="ironPagesDeselectedEvent">
          <!-- see assets/pages.coffee -->
        </iron-pages>
        <!-- Page switcher - End -->

        <!-- Advertisement Area -->
        <!-- <div id="adArea" class="ad-area layout vertical" hidden$="[[hideAd]]">
          
          <template is="dom-if" if="[[$equals(page.name, 'preconception-record')]]">
            <div class="ad layout p-16">
              <div class="horizontal layout center">
                <img src="../../assets/img/preconception/gov-logo.png" alt="" class="p-horizontal-8 custom-img">
                <img src="../../assets/img/preconception/badas-logo-tab.png" alt="" class="p-horizontal-8 custom-img">
                <img src="../../assets/img/preconception/endocrine_socity_tab_logo.png" alt="" class="p-horizontal-8 custom-img">
                <img src="../../assets/img/preconception/safe-pregnancy.png" alt="" class="p-horizontal-8 custom-img">
                <div class="type caption-2 secondary p-horizontal-8">A joint community awareness program of Diabetic Association of safe-pregnancyBangladesh and Law and Justice Division, Ministry of Law, Justice and Parliamentary Affairs, Government of People's Republic of Bangladesh, funded by World Diabetes Foundation for strengthening preconception care.</div>
              </div>
            </div>
          </template>

          <template is="dom-if" if="[[!$equals(page.name, 'preconception-record')]]">
            <div class="ad layout horizontal">
              <img src$="[[currentAd.image]]" alt="">
              <div class="text">
                <template is="dom-if" if="[[currentAd.hasAudio]]">
                  <audio src$="[[currentAd.audio]]" controls id="audioPlayer">
                    <p>Your browser does not support the
                      <code>audio</code> element </p>
                  </audio>
                </template>
                <h3>[[currentAd.title]]</h3>
                <p>[[currentAd.text]]</p>
              </div>
            </div>
          </template>
    
        
        </div> -->
        <!-- Advertisement Area End-->

      </app-header-layout>

    </app-drawer-layout>

    <!-- generic-modal-prompt - start -->
    <paper-dialog id="generic-modal-prompt" modal="" on-iron-overlay-closed="genericModalPromptClosed">
      <h2>[[genericModalPromptContents]]</h2>
      <div class="buttons">
        <paper-button dialog-dismiss="">Cancel</paper-button>
        <paper-button dialog-confirm="" autofocus="">Confirm</paper-button>
      </div>
    </paper-dialog>
    <!-- generic-modal-prompt - end -->

    <!-- generic-modal-input - start -->
    <paper-dialog id="generic-modal-input" modal="" on-iron-overlay-closed="genericModalInputClosed">
      <h2>[[genericModalInputContents]]</h2>
      <paper-input type="text" autofocus="" value="{{genericModalInputFieldValue}}"></paper-input>
      <div class="buttons">
        <paper-button dialog-dismiss="">Cancel</paper-button>
        <paper-button dialog-confirm="" autofocus="">Confirm</paper-button>
      </div>
    </paper-dialog>
    <!-- generic-modal-input - end -->

    <!-- generic-modal-dialog - start -->
    <paper-dialog id="generic-modal-dialog" modal="">
      <p>[[genericModalDialogContents]]</p>
      <p>
        <template is="dom-repeat" items="[[genericModalDialogContentArray]]" as="line">
          <span>[[line]]</span><br>
        </template>
      </p>
      <div class="buttons">
        <paper-button dialog-confirm="" autofocus="">Got It</paper-button>
      </div>
    </paper-dialog>
    <!-- generic-modal-dialog - end -->

    <paper-toast id="toast1" duration="2000" text="[[genericToastContents]]" on-tap="genericToastTapped"></paper-toast>

  </template>
  <script>(function(){var t,n;n=null,t=[],app.behaviors.local["root-element"]||(app.behaviors.local["root-element"]={}),app.behaviors.local["root-element"].dataLoader={loadStaticData:function(){return this.requestForLoadingStaticData()},getStaticData:function(e,i){if(!(e in n))throw new Error('Unknown static data "'+e+'" requested');return null!==n[e]?lib.util.setImmediate(i,n[e]):t.push({cbfn:i,name:e})},afterLoadingStaticData:function(e){var i,a,s,o;for(n=e,o=[],i=0,s=t.length;i<s;i++)a=t[i],o.push(lib.util.setImmediate(a.cbfn,n[a.name]));return o},requestForLoadingStaticData:function(){var t,e,i,a,s,o,r,l;for(r=[{name:"investigationList",url:"static-data/investigation-list.json"},{name:"symptomsList",url:"static-data/symptoms-list.json"},{name:"examinationList",url:"static-data/examination-list.json"},{name:"medicineList",url:"static-data/medicine-list.json"},{name:"operationList",url:"static-data/operation-list.json"},{name:"diagnosisList",url:"static-data/diagnosis-list.json"},{name:"dynamicElementDefinitionPostoperativeAssessment",url:"static-data/de-def-postop-assessment.json"},{name:"dynamicElementDefinitionOperationAnaesthesia",url:"static-data/de-def-op-anaesthesia.json"},{name:"dynamicElementDefinitionOperationSurgery",url:"static-data/de-def-op-surgery.json"},{name:"dynamicElementDefinitionPreoperativeAssessment",url:"static-data/de-def-doctor-app-history-and-physical-examination.json"}],l=[{name:"investigationList",url:"https://bdemr.b-cdn.net/investigation-list-8-11-2017.json"},{name:"symptomsList",url:"https://bdemr.b-cdn.net/symptoms-list-25-10-2017.json"},{name:"examinationList",url:"https://bdemr.b-cdn.net/examination-list-25-10-2017.json"},{name:"medicineList",url:"https://bdemr.b-cdn.net/medicine-list-19-10-2017.json"},{name:"operationList",url:"https://bdemr.b-cdn.net/operation-list-19-10-2017.json"},{name:"diagnosisList",url:"https://bdemr.b-cdn.net/diagnosis-list-19-10-2017.json"},{name:"dynamicElementDefinitionPostoperativeAssessment",url:"https://bdemr.b-cdn.net/de-def-postop-assessment-19-10-2017.json"},{name:"dynamicElementDefinitionOperationAnaesthesia",url:"https://bdemr.b-cdn.net/de-def-op-anaesthesia-19-10-2017.json"},{name:"dynamicElementDefinitionOperationSurgery",url:"https://bdemr.b-cdn.net/de-def-op-surgery-22-10-2017.json"},{name:"dynamicElementDefinitionPreoperativeAssessment",url:"https://bdemr.b-cdn.net/de-def-doctor-app-history-and-physical-examination-10-12-2017.json"}],o="production"===app.mode&&"web"===app.config.clientPlatform?l:r,n={},e=0,s=o.length;e<s;e++)a=o[e],n[a.name]=null;return t=new lib.util.Collector(o.length),i=new lib.util.Iterator(o),i.forEach(function(n){return function(e,i,a){var s,o;return s=n.notifyDownloadAction("start",a.url),o=lib.network.ensureBaseNetworkDelay(function(){return n.notifyDownloadAction("done",a.url,s)}),lib.network.request(a.url,"GET",{fromApp:app.config.clientIdentifier+"-"+app.config.clientVersion},function(e,i){var r;return e?void n.notifyDownloadAction("error",a.url,s):(o(),r=JSON.parse(i.target.responseText),t.collect(a.name,r))}),e()}}(this)),i["finally"](function(){return null}),t["finally"](function(t){return function(n){return t.afterLoadingStaticData(n)}}(this))}}}).call(this);
//# sourceMappingURL=behavior-data-loader.coffee-compiled.js.map</script>
  <script>(function(){var e=[].indexOf||function(e){for(var r=0,t=this.length;r<t;r++)if(r in this&&this[r]===e)return r;return-1};app.behaviors.local["root-element"]||(app.behaviors.local["root-element"]={}),app.behaviors.local["root-element"].userDataSync={_syncUser:function(r,t){var a,i,n,l,o,s,d,p,u,c,f,v,h,m,b,g,A,S,y;for(i=r.collectionName,o=r.deletedCollectionName,p=r.headerApi,l=r.dataApi,A=app.db.find("user")[0],n=A.serial,y=A.idOnServer,a=A.apiKey,h=app.db.find("organization")[0],h&&(m=h.idOnServer,S=h.isCurrentUserAnAdmin?"root-user":h.hasOwnProperty("userActiveRole")?h.userActiveRole.serial:"root-user"),g=this,b=app.db.find(i),u={},c=0,v=b.length;c<v;c++)f=b[c],u[f.serial]=f.lastModifiedDatetimeStamp;return s=app.db.find(o),d=function(){var e,r,t;for(t=[],e=0,r=s.length;e<r;e++)f=s[e],t.push(f.serial);return t}(),this.callApi(p,{apiKey:a,userId:y,createdByUserSerial:n,clientHeaderMap:u,clientDeletedSerialList:d},function(r){return function(s,d){var p,u,c,v,h,b,A,L,D,I;if(d.hasError)return g.showModalDialog(d.error.message);for(c=d.data,p=c.clientNeedsToDelete,I=c.serverHasDeleted,L=app.db.find(o,function(r){var t;return t=r.serial,e.call(I,t)>=0}),v=0,b=L.length;v<b;v++)f=L[v],app.db.remove(o,f._id);for(L=app.db.find(i,function(r){var t;return t=r.serial,e.call(p,t)>=0}),h=0,A=L.length;h<A;h++)f=L[h],app.db.remove(i,f._id);return D=c.serverHasLatestList,u=app.db.find(i,function(r){var t;return t=r.serial,e.call(c.clientHasLatestList,t)>=0}),r.callApi(l,{organizationId:m,userActiveRoleId:S,apiKey:a,userId:y,createdByUserSerial:n,clientToServerItemList:u,requestedServerToClientItemList:D},function(e,r){var a,n,l;if(r.hasError)return g.showModalDialog(r.error.message);for(c=r.data,l=c.serverToClientItemList,a=0,n=l.length;a<n;a++)f=l[a],app.db.upsert(i,f,function(e){var r;return r=e.serial,f.serial===r});return t()})}}(this))}}}).call(this);
//# sourceMappingURL=behavior-user-data-sync.coffee-compiled.js.map</script>
  <script>(function(){app.behaviors.local["root-element"]||(app.behaviors.local["root-element"]={}),app.behaviors.local["root-element"].userDataSyncConfig={syncSettings:{collectionName:"settings",deletedCollectionName:"settings--deleted",headerApi:"/bdemr-doctor-app--sync--settings--exchange-headers",dataApi:"/bdemr-doctor-app--sync--settings--exchange-data"},syncDoctorFavoriteMedicationConfig:{collectionName:"favorite-medicine-list",deletedCollectionName:"favorite-medicine-list--deleted",headerApi:"/bdemr-doctor-app--sync--doctor-favorite-medications--exchange-headers",dataApi:"/bdemr-doctor-app--sync--doctor-favorite-medications--exchange-data"},syncFavoriteAdvisedTestConfig:{collectionName:"favorite-advised-test",deletedCollectionName:"favorite-advised-test--deleted",headerApi:"/bdemr-doctor-app--sync--favorite-advised-test--exchange-headers",dataApi:"/bdemr-doctor-app--sync--favorite-advised-test--exchange-data"},syncUserAddedCustomSymptomsConfig:{collectionName:"custom-symptoms-list",deletedCollectionName:"custom-symptoms-list--deleted",headerApi:"/bdemr-doctor-app--sync--user-custom-symptoms-list--exchange-headers",dataApi:"/bdemr-doctor-app--sync--user-custom-symptoms-list--exchange-data"},syncUserAddedCustomExaminationConfig:{collectionName:"custom-examination-list",deletedCollectionName:"custom-examination-list--deleted",headerApi:"/bdemr-doctor-app--sync--user-custom-examination-list--exchange-headers",dataApi:"/bdemr-doctor-app--sync--user-custom-examination-list--exchange-data"},syncVisitedPatientLogConfig:{collectionName:"visited-patient-log",deletedCollectionName:"visited-patient-log--deleted",headerApi:"/bdemr-doctor-app--sync--visited-patient-log--exchange-headers",dataApi:"/bdemr-doctor-app--sync--visited-patient-log--exchange-data"}}}).call(this);
//# sourceMappingURL=behavior-user-data-sync-config.coffee-compiled.js.map</script>
  <script>(function(){var e=[].indexOf||function(e){for(var r=0,t=this.length;r<t;r++)if(r in this&&this[r]===e)return r;return-1};app.behaviors.local["root-element"]||(app.behaviors.local["root-element"]={}),app.behaviors.local["root-element"].patientsDataSync={_syncPatients:function(r,t){var i,a,n,o,l,s,d,p,c,u,f,h,v,g,m,b,S,A,y,L,D,I,M;for(n=r.collectionName,l=r.deletedCollectionName,c=r.headerApi,o=r.dataApi,D=app.db.find("user")[0],p=D.serial,M=D.idOnServer,a=D.apiKey,b=app.db.find("organization")[0],b&&(S=b.idOnServer,I=b.isCurrentUserAnAdmin?"root-user":b.hasOwnProperty("userActiveRole")?b.userActiveRole.serial:"root-user"),v=app.db.find("patient-list"),g=function(){var e,r,t;for(t=[],e=0,r=v.length;e<r;e++)A=v[e],t.push(A.serial);return t}(),i=this.notifySyncAction("start",o),L=this,y=app.db.find(n),u={},f=0,m=y.length;f<m;f++)h=y[f],u[h.serial]=h.lastModifiedDatetimeStamp;return s=app.db.find(l),d=function(){var e,r,t;for(t=[],e=0,r=s.length;e<r;e++)h=s[e],t.push(h.serial);return t}(),this.callApi(c,{apiKey:a,userId:M,doctorSerial:p,clientHeaderMap:u,clientDeletedSerialList:d,knownPatientSerialList:g},function(r){return function(s,d){var c,u,f,v,g,m,b,A,y,D;if(d.hasError)return r.domHost.showModalDialog(d.error.message);for(f=d.data,c=f.clientNeedsToDelete,D=f.serverHasDeleted,A=app.db.find(l,function(r){var t;return t=r.serial,e.call(D,t)>=0}),v=0,m=A.length;v<m;v++)h=A[v],app.db.remove(l,h._id);for(A=app.db.find(n,function(r){var t;return t=r.serial,e.call(c,t)>=0}),g=0,b=A.length;g<b;g++)h=A[g],app.db.remove(n,h._id);return y=f.serverHasLatestList,u=app.db.find(n,function(r){var t;return t=r.serial,e.call(f.clientHasLatestList,t)>=0}),r.callApi(o,{apiKey:a,userId:M,organizationId:S,userActiveRoleId:I,doctorSerial:p,clientToServerItemList:u,requestedServerToClientItemList:y},function(e,r){var a,l,s,d,p,c,u;if(r.hasError)return this.domHost.showModalDialog(r.error.message);for(f=r.data,u=f.serverToClientItemList,s=0,d=u.length;s<d;s++)h=u[s],app.db.upsert(n,h,function(e){var r;return r=e.serial,h.serial===r});if("changeSerialMap"in f)for(c in changeSerialMap)p=changeSerialMap[c],l=app.db.find(n,function(e){var r;return r=e.serial,c===r}),l.length>0&&(a=l[0],a.serial=p),app.db.upsert(n,a,function(e){var r;return r=e.serial,c===r});return L.notifySyncAction("done",o,i),t()})}}(this))}}}).call(this);
//# sourceMappingURL=behavior-patients-data-sync.coffee-compiled.js.map</script>
  <script>(function(){app.behaviors.local["root-element"]||(app.behaviors.local["root-element"]={}),app.behaviors.local["root-element"].patientsDataSyncConfig={syncVisitConfig:{collectionName:"doctor-visit",deletedCollectionName:"doctor-visit--deleted",headerApi:"/bdemr-doctor-app--sync--doctor-visit--exchange-headers",dataApi:"/bdemr-doctor-app--sync--doctor-visit--exchange-data"},syncPrescriptionConfig:{collectionName:"visit-prescription",deletedCollectionName:"visit-prescription--deleted",headerApi:"/bdemr-doctor-app--sync--visit-prescription--exchange-headers",dataApi:"/bdemr-doctor-app--sync--visit-prescription--exchange-data"},syncPatientMedicationConfig:{collectionName:"patient-medications",deletedCollectionName:"patient-medications--deleted",headerApi:"/bdemr-doctor-app--sync--medications--exchange-headers",dataApi:"/bdemr-doctor-app--sync--medications--exchange-data"},syncDoctorNotesConfig:{collectionName:"visit-note",deletedCollectionName:"visit-note--deleted",headerApi:"/bdemr-doctor-app--sync--doctor-notes--exchange-headers",dataApi:"/bdemr-doctor-app--sync--doctor-notes--exchange-data"},syncNextVisitConfig:{collectionName:"visit-next-visit",deletedCollectionName:"visit-next-visit--deleted",headerApi:"/bdemr-doctor-app--sync--visit-next-visit--exchange-headers",dataApi:"/bdemr-doctor-app--sync--visit-next-visit--exchange-data"},syncTestAdvisedConfig:{collectionName:"visit-advised-test",deletedCollectionName:"visit-advised-test--deleted",headerApi:"/bdemr-doctor-app--sync--visit-advised-test--exchange-headers",dataApi:"/bdemr-doctor-app--sync--visit-advised-test--exchange-data"},syncExaminationConfig:{collectionName:"visit-examination",deletedCollectionName:"visit-examination--deleted",headerApi:"/bdemr-doctor-app--sync--visit-examination--exchange-headers",dataApi:"/bdemr-doctor-app--sync--visit-examination--exchange-data"},syncIdentifiedSymptomsConfig:{collectionName:"visit-identified-symptoms",deletedCollectionName:"visit-identified-symptoms--deleted",headerApi:"/bdemr-doctor-app--sync--visit-identified-symptoms--exchange-headers",dataApi:"/bdemr-doctor-app--sync--visit-identified-symptoms--exchange-data"},syncCustomInvestigationConfig:{collectionName:"custom-investigation-list",deletedCollectionName:"custom-investigation-list--deleted",headerApi:"/bdemr-doctor-app--sync--custom-investigation-list--exchange-headers",dataApi:"/bdemr-doctor-app--sync--custom-investigation-list--exchange-data"},syncUserAddedInstitutionConfig:{collectionName:"user-added-institution-list",deletedCollectionName:"user-added-institution-list--deleted",headerApi:"/bdemr-doctor-app--sync--user-added-institution-list--exchange-headers",dataApi:"/bdemr-doctor-app--sync--user-added-institution-list--exchange-data"},syncPatientTestResultsConfig:{collectionName:"patient-test-results",deletedCollectionName:"patient-test-results--deleted",headerApi:"/bdemr-doctor-app--sync--patient-test-results--exchange-headers",dataApi:"/bdemr-doctor-app--sync--patient-test-results--exchange-data"},syncPatientStayConfig:{collectionName:"visit-patient-stay",deletedCollectionName:"visit-patient-stay--deleted",headerApi:"/bdemr-doctor-app--sync--patient-stay--exchange-headers",dataApi:"/bdemr-doctor-app--sync--patient-stay--exchange-data"},syncHistoryAndPhysicalConfig:{collectionName:"history-and-physical-record",deletedCollectionName:"history-and-physical-record--deleted",headerApi:"/bdemr-doctor-app--sync--history-and-physical-record--exchange-headers",dataApi:"/bdemr-doctor-app--sync--history-and-physical-record--exchange-data"},syncDiagnosisConfig:{collectionName:"diagnosis-record",deletedCollectionName:"diagnosis-record--deleted",headerApi:"/bdemr-doctor-app--sync--diagnosis-record--exchange-headers",dataApi:"/bdemr-doctor-app--sync--diagnosis-record--exchange-data"},syncVitalBloodPressureConfig:{collectionName:"patient-vitals-blood-pressure",deletedCollectionName:"patient-vitals-blood-pressure--deleted",headerApi:"/bdemr-doctor-app--sync--vital-blood-pressure--exchange-headers",dataApi:"/bdemr-doctor-app--sync--vital-blood-pressure--exchange-data"},syncVitalBMIConfig:{collectionName:"patient-vitals-bmi",deletedCollectionName:"patient-vitals-bmi--deleted",headerApi:"/bdemr-doctor-app--sync--vital-bmi--exchange-headers",dataApi:"/bdemr-doctor-app--sync--vital-bmi--exchange-data"},syncVitalPulseRateConfig:{collectionName:"patient-vitals-pulse-rate",deletedCollectionName:"patient-vitals-pulse-rate--deleted",headerApi:"/bdemr-doctor-app--sync--vital-pulse-rate--exchange-headers",dataApi:"/bdemr-doctor-app--sync--vital-pulse-rate--exchange-data"},syncVitalRespiratoryRateConfig:{collectionName:"patient-vitals-respiratory-rate",deletedCollectionName:"patient-vitals-respiratory-rate--deleted",headerApi:"/bdemr-doctor-app--sync--vital-respiratory-rate--exchange-headers",dataApi:"/bdemr-doctor-app--sync--vital-respiratory-rate--exchange-data"},syncVitalSpO2Config:{collectionName:"patient-vitals-spo2",deletedCollectionName:"patient-vitals-spo2--deleted",headerApi:"/bdemr-doctor-app--sync--vital-spo2--exchange-headers",dataApi:"/bdemr-doctor-app--sync--vital-spo2--exchange-data"},syncVitalTemperatureConfig:{collectionName:"patient-vitals-temperature",deletedCollectionName:"patient-vitals-temperature--deleted",headerApi:"/bdemr-doctor-app--sync--vital-temperature--exchange-headers",dataApi:"/bdemr-doctor-app--sync--vital-temperature--exchange-data"},syncTestBloodSugarConfig:{collectionName:"patient-test-blood-sugar",deletedCollectionName:"patient-test-blood-sugar--deleted",headerApi:"/bdemr-doctor-app--sync--test-blood-sugar--exchange-headers",dataApi:"/bdemr-doctor-app--sync--vital-blood-sugar--exchange-data"},syncOtherTestConfig:{collectionName:"patient-test-other",deletedCollectionName:"patient-test-other--deleted",headerApi:"/bdemr-doctor-app--sync--other-test--exchange-headers",dataApi:"/bdemr-doctor-app--sync--other-test--exchange-data"},syncCommentPatientConfig:{collectionName:"comment-patient",deletedCollectionName:"comment-patient--deleted",headerApi:"/bdemr-doctor-app--sync--comment-patient--exchange-headers",dataApi:"/bdemr-doctor-app--sync--comment-patient--exchange-data"},syncCommentDoctorConfig:{collectionName:"comment-doctor",deletedCollectionName:"comment-doctor--deleted",headerApi:"/bdemr-doctor-app--sync--comment-doctor--exchange-headers",dataApi:"/bdemr-doctor-app--sync--comment-doctor--exchange-data"},syncPatientGalleryAttachmentConfig:{collectionName:"patient-gallery--online-attachment",deletedCollectionName:"patient-gallery--online-attachment--deleted",headerApi:"/bdemr-doctor-app--sync--patient-gallery--online-attachment--exchange-headers",dataApi:"/bdemr-doctor-app--sync--patient-gallery--online-attachment--exchange-data"},syncAnaesmonRecordConfig:{collectionName:"anaesmon-record",deletedCollectionName:"anaesmon-record--deleted",headerApi:"/bdemr-doctor-app--sync--anaesmon-record--exchange-headers",dataApi:"/bdemr-doctor-app--sync--anaesmon-record--exchange-data"},syncAnaesmonProgressNoteConfig:{collectionName:"progress-note-record",deletedCollectionName:"progress-note-record--deleted",headerApi:"/bdemr-doctor-app--sync--progress-note-record--exchange-headers",dataApi:"/bdemr-doctor-app--sync--progress-note-record--exchange-data"},syncActivityLog:{collectionName:"activity",deletedCollectionName:"activity--deleted",headerApi:"/bdemr-doctor-app--sync--user-activity-log--exchange-headers",dataApi:"/bdemr-doctor-app--sync--user-activity-log--exchange-data"},syncVisitInvoice:{collectionName:"visit-invoice",deletedCollectionName:"visit-invoice--deleted",headerApi:"/bdemr-doctor-app--sync--visit-invoice--exchange-headers",dataApi:"/bdemr-doctor-app--sync--visit-invoice--exchange-data"},syncVisitDiagnosis:{collectionName:"visit-diagnosis",deletedCollectionName:"visit-diagnosis--deleted",headerApi:"/bdemr-doctor-app--sync--visit-diagnosis--exchange-headers",dataApi:"/bdemr-doctor-app--sync--visit-diagnosis--exchange-data"},syncPccRecords:{collectionName:"pcc-records",deletedCollectionName:"pcc-records--deleted",headerApi:"/bdemr-doctor-app--sync--pcc-records--exchange-headers",dataApi:"/bdemr-doctor-app--sync--pcc-records--exchange-data"}}}).call(this);
//# sourceMappingURL=behavior-patients-data-sync-config.coffee-compiled.js.map</script>
  <script>(function(){var t,e=[].slice,n=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};t=!1,Polymer({is:"root-element",behaviors:[app.behaviors.translating,app.behaviors.commonComputes,app.behaviors.apiCalling,app.behaviors.dbUsing,app.behaviors.debug,app.behaviors.local["root-element"].dataLoader,app.behaviors.local["root-element"].patientsDataSyncConfig,app.behaviors.local["root-element"].patientsDataSync,app.behaviors.local["root-element"].userDataSyncConfig,app.behaviors.local["root-element"].userDataSync],properties:{selectedPatientPageIndex:{type:Number,value:0,notify:!0,observer:"patientPageSelectedIndexChanged"},page:{type:Object,observer:"_mainViewPageChanged"},languageSelectedIndex:{type:Number,value:app.lang.defaultLanguageIndex,notify:!0,observer:"languageSelectedIndexChanged"},languageName:{type:String,computed:"_showLanguageName(languageSelectedIndex)"},downloadActions:{type:Object,value:{count:0,seed:0,list:[]}},syncActions:{type:Object,value:{count:0,seed:0,list:[]}},apiActions:{type:Object,value:{count:0,seed:0,list:[]}},currentOrganization:{type:Object,value:{}},currentNavigationCandidate:{type:String,value:""},readyPageNodeNameList:{type:Array,value:[]},genericModalDialogContents:{type:String,value:"Content goes here..."},genericToastContents:{type:String,value:"Content goes here..."},genericModalInputFieldValue:{type:String,value:"",notify:!0},currentPatientsDetails:{type:Object,value:null,notify:!0},selectedVisitSerial:{type:String,value:"new",notify:!0,observer:"setSelectedVisitSerial"},currentAd:{type:Object},user:{type:Object,value:null},hideAd:{type:Boolean,value:!1},isMobileView:{type:Boolean,value:!1},orgSmsBalance:{type:Number,value:0}},observers:["_routerHrefChanged(routeData.page)"],saveDefaultSettings:function(){var t;return t={createdByUserSerial:this.user.serial,lastModifiedDatetimeStamp:0,createdDatetimeStamp:lib.datetime.now(),lastSyncedDatetimeStamp:null,serial:this.user.serial,printDecoration:{leftSideLine1:"My Institution",leftSideLine2:"My Institution Address",leftSideLine3:"My Institution Contact",rightSideLine1:"My Name",rightSideLine2:"My Degrees",rightSideLine3:"My Contact",footerLine:"A simple message on the bottom",logoDataUri:null},billingTargetEmailAddress:"",nsqipTargetEmailAddress:"",monetaryUnit:"BDT",otherSettings:{patientSignUpDefaultPassword:"123456"}},app.db.upsert("settings",t,function(t){return function(e){var n;return n=e.serial,t.user.serial===n}}(this))},notifyApiAction:function(){var t,n,i,o,a;return t=arguments[0],n=2<=arguments.length?e.call(arguments,1):[],"start"===t?(this.apiActions.count+=1,this.notifyPath("apiActions.count"),o=n[0],i={id:this.apiActions.seed++,path:n[o],time:lib.datetime.now(),action:"start"},this.apiActions.list.push(i),i.id):"done"===t?(0!==this.apiActions.count&&(this.apiActions.count-=1),this.notifyPath("apiActions.count"),o=n[0],a=n[1],i={id:this.apiActions.seed++,path:o,refId:a,action:"done"},this.apiActions.list.push(i),i.id):"error"===t?(0!==this.apiActions.count&&(this.apiActions.count-=1),this.notifyPath("apiActions.count"),o=n[0],a=n[1],i={id:this.apiActions.seed++,path:o,refId:a,action:"error"},this.apiActions.list.push(i),i.id):void 0},notifyDownloadAction:function(){var t,n,i,o,a;return t=arguments[0],n=2<=arguments.length?e.call(arguments,1):[],"start"===t?(this.downloadActions.count+=1,this.notifyPath("downloadActions.count"),o=n[0],i={id:this.downloadActions.seed++,path:n[o],time:lib.datetime.now(),action:"start"},this.downloadActions.list.push(i),i.id):"done"===t?(0!==this.downloadActions.count&&(this.downloadActions.count-=1),this.notifyPath("downloadActions.count"),o=n[0],a=n[1],i={id:this.downloadActions.seed++,path:o,refId:a,action:"done"},this.downloadActions.list.push(i),i.id):"error"===t?(0!==this.downloadActions.count&&(this.downloadActions.count-=1),this.notifyPath("downloadActions.count"),o=n[0],a=n[1],i={id:this.downloadActions.seed++,path:o,refId:a,action:"error"},this.downloadActions.list.push(i),i.id):void 0},notifySyncAction:function(){var t,n,i,o,a;return t=arguments[0],n=2<=arguments.length?e.call(arguments,1):[],"start"===t?(this.syncActions.count+=1,this.notifyPath("syncActions.count"),o=n[0],i={id:this.syncActions.seed++,path:n[o],time:lib.datetime.now(),action:"start"},this.syncActions.list.push(i),i.id):"done"===t?(0!==this.syncActions.count&&(this.syncActions.count-=1),this.notifyPath("syncActions.count"),o=n[0],a=n[1],i={id:this.syncActions.seed++,path:o,refId:a,action:"done"},this.syncActions.list.push(i),i.id):"error"===t?(0!==this.apiActions.count&&(this.apiActions.count-=1),this.notifyPath("apiActions.count"),o=n[0],a=n[1],i={id:this.apiActions.seed++,path:o,refId:a,action:"error"},this.apiActions.list.push(i),i.id):void 0},_routerHrefChanged:function(t){var e,i,o,a,r,s;for(t||(t="/"),s=!1,a=null,r=app.pages.pageList,e=0,i=r.length;e<i;e++)if(o=r[e],n.call(o.hrefList,t)>=0){a=o,s=!0;break}return s?a.requireAuthentication?this.isUserLoggedIn()?this._checkUserAccess(a.accessId)?this.page=a:this.page=app.pages.error404:this.skipWelcomePage()?this.navigateToPage("#/login"):this.navigateToPage("#/welcome"):this.page=a:this.page=app.pages.error404},_preloadOtherPages:function(){var t,e,n,i,o;for(t=[].concat(app.pages.pageList,[app.pages.error404]),o=[],e=0,n=t.length;e<n;e++)i=t[e],o.push(function(t){return function(e){var n,i,o,a;if(e.name!==t.page.name)return o=t.resolveUrl("../"+e.element+"/"+e.element+".html"),i=t.notifyDownloadAction("start",o),a=lib.network.ensureBaseNetworkDelay(function(){return t.notifyDownloadAction("done",o,i)}),n=lib.network.ensureBaseNetworkDelay(function(){return t.notifyDownloadAction("error",o,i)}),t.importHref(o,a,n,!0)}}(this)(i));return o},_mainViewPageChanged:function(e){var n,i;return n=function(e){return function(){if(!t)return t=!0}}(this),i=this.resolveUrl("../"+e.element+"/"+e.element+".html"),this.importHref(i,n,n,!1),this._hideAd(e.name)},_fillIronPagesFromPageList:function(){var t,e,n,i,o,a,r;for(n=Polymer.dom(this.root).querySelector("iron-pages"),t=[].concat(app.pages.pageList,app.pages.error404),r=[],e=0,i=t.length;e<i;e++)o=t[e],a=document.createElement(o.element),a.setAttribute("name",o.name),r.push(Polymer.dom(n).appendChild(a));return r},_computeAge:function(t){var e,n,i,o;return o=new Date,n=new Date(t),e=o.getFullYear()-n.getFullYear(),i=o.getMonth()-n.getMonth(),(i<0||0===i&&o.getDate()<n.getDate())&&e--,e},created:function(){return this.removeUserUnlessSessionIsPersistent(),this.loadStaticData()},ready:function(){var t,e;if(this._fillIronPagesFromPageList(),null===localStorage.getItem("selectedVisitSerial")?localStorage.setItem("selectedVisitSerial","new"):this.selectedVisitSerial=localStorage.getItem("selectedVisitSerial"),e=localStorage.getItem("currentPatientsDetails"),this.currentPatientsDetails=JSON.parse(e),this.user=function(){try{return app.db.find("user")[0]}catch(e){return t=e,null}}()||null,this.isUserLoggedIn())return this._callAfterUserLogsIn()},getYear:function(){return(new Date).getFullYear()},_callAfterUserLogsIn:function(t){var e;return this.user=this.getCurrentUser(),this.inAppNotificationSystemInitiate(),this.updateNotificationView(),this.initiateAdvertisement(),e=this.getCurrentOrganization(),e?(this.set("currentOrganization",e),this.loadOrganizationSmsBalance(e.idOnServer)):this.set("currentOrganization",null)},_showSyncButton:function(t,e){return!e&&!t},_hideAd:function(t){var e;return e=this.isMobileView?["login","patient-manager"]:["login"],n.call(e,t)>=0?(this.set("hideAd",!0),this.toggleClass("show-ad",!1,this.$.mainHeader)):(this.set("hideAd",!1),this.toggleClass("show-ad",!0,this.$.mainHeader))},setCurrentPatientsDetails:function(t){return this.currentPatientsDetails=t,localStorage.setItem("currentPatientsDetails",JSON.stringify(this.currentPatientsDetails))},setSelectedVisitSerial:function(t){return this.set("selectedVisitSerial",t),localStorage.setItem("selectedVisitSerial",t)},_compareFn:function(t,e,n){return"<"===e?t<n:">"===e?t>n:"=="===e?t===n:">="===e?t>=n:"<="===e?t<=n:void 0},refreshButtonPressed:function(t){return this.reloadPage()},logoutPressed:function(t){return this.navigateToPage("#/login"),this.$$("app-drawer").toggle(),this.reloadPage()},showModalDialog:function(t){return"string"==typeof t?(this.genericModalDialogContents=t,this.genericModalDialogContentArray=[]):(this.genericModalDialogContents="",this.genericModalDialogContentArray=t),this.$$("#generic-modal-dialog").toggle()},showModalPrompt:function(t,e){return this.$$("#generic-modal-prompt").toggle(),this.genericModalPromptContents=t,this.genericModalPromptDoneCallback=e},showModalInput:function(t,e,n){return this.genericModalInputContents=t,this.genericModalInputFieldValue=e,this.$$("#generic-modal-input").toggle(),this.genericModalInputDoneCallback=n},genericModalInputClosed:function(t){return t.detail.confirmed?this.genericModalInputDoneCallback(this.genericModalInputFieldValue):this.genericModalInputDoneCallback(!1),this.genericModalInputDoneCallback=null},genericModalPromptClosed:function(t){return t.detail.confirmed?this.genericModalPromptDoneCallback(!0):this.genericModalPromptDoneCallback(!1),this.genericModalPromptDoneCallback=null},showToast:function(t){return this.genericToastContents=t,this.$$("#toast1").open()},genericToastTapped:function(t){return this.$$("#toast1").close()},saveButtonPressed:function(t){return this.$$("iron-pages").selectedItem.saveButtonPressed(t)},printButtonPressed:function(t){return this.$$("iron-pages").selectedItem.printButtonPressed(t)},arrowBackButtonPressed:function(t){return this.$$("iron-pages").selectedItem.arrowBackButtonPressed(t)},getPageParams:function(){var t,e,n,i,o,a,r,s,c;for(t=window.location.hash,t=t.replace("#/",""),r=t.split("/"),r.shift(),o={},e=0,i=r.length;e<i;e++){if(a=r[e],a.indexOf(":")===-1){this.showModalDialog("Malformatted Url Given");break}s=a.split(":"),n=s[0],c=s[1],o[n]=c}return o},navigateToPage:function(t){var e;return this.user=function(){try{return app.db.find("user")[0]}catch(t){return e=t,null}}()||null,window.history.pushState({},null,t),window.dispatchEvent(new CustomEvent("location-changed"))},navigateToPreviousPage:function(){return window.history.back()},modifyCurrentPagePath:function(t){return window.history.replaceState({},t,t)},reloadPage:function(){return window.location.reload()},ironPagesSelectedEvent:function(t){var e,n,i,o,a;if("IRON-PAGES"===Polymer.dom(t).rootTarget.nodeName){for(i=t.detail.item.nodeName,a=this.readyPageNodeNameList,e=0,n=a.length;e<n;e++)if(o=a[e],o===i)return void(t.detail.item.navigatedIn&&(t.detail.item.navigatedIn(),this.pageElement=t.detail.item));return this.currentNavigationCandidate=i}},pageReady:function(t){if(this.readyPageNodeNameList.push(t.nodeName),this.currentNavigationCandidate===t.nodeName&&(this.currentNavigationCandidate="",t.navigatedIn))return t.navigatedIn(),this.pageElement=t},ironPagesDeselectedEvent:function(t){var e,n,i,o,a;if("IRON-PAGES"===Polymer.dom(t).rootTarget.nodeName)for(i=t.detail.item.nodeName,a=this.readyPageNodeNameList,e=0,n=a.length;e<n;e++)if(o=a[e],o===i)return void(t.detail.item.navigatedOut&&t.detail.item.navigatedOut())},changeOrganizationClicked:function(){return this.navigateToPage("#/select-organization")},loadOrganizationSmsBalance:function(t){var e;return e={apiKey:this.user.apiKey,organizationId:t},this.callApi("/bdemr-get-organization-sms-balance",e,function(t){return function(e,n){return n.hasError?"No data found"===n.error.message?t.set("orgSmsBalance",0):void 0:t.set("orgSmsBalance",n.data.smsBalance)}}(this))},_formatDateTime:function(t){if(t)return lib.datetime.format(t,"mmm d, yyyy h:MMTT")},inAppNotificationSystemInitiate:function(){var t;return t=app.config.variableConfigs[app.mode].serverWsHost,this.ws=new WebSocket(t,["soap","xmpp"]),this.ws.addEventListener("open",function(t){return function(e){return t.inAppNotificationRegister(),t.ws.addEventListener("message",function(e){return t.inAppNotificationMessageHandler(e)},!1,!1)}}(this))},inAppNotificationMessageHandler:function(t){var e;return e=JSON.parse(t.data),"register"===e.operation&&"successful"===e.status?this.inAppNotificationMyId=e.userId:"incoming-notification"===e.operation?(e.markedAsRead=!1,app.db.insert("in-app-notification",e),this.updateNotificationView(),this.showNotification(e)):void 0},inAppNotificationRegister:function(){var t,e;return t=this.getCurrentUser().apiKey,e={operation:"register",apiKey:t},this.ws.send(JSON.stringify(e))},showNotification:function(t){var e,n,i,o;switch(t.category){case"patientNote":o="New Patient Note";break;case"report":o="Report";break;case"onlineConsultation":o="New Consulation Request";break;case"general":o="General";break;default:o="New Notification"}return i={body:t.message,icon:"../../images/web-app-icon/app-icon-72.png",timestamp:t.createdDateTimeStamp,sound:"../../assets/notification.mp3"},"Notification"in window?"granted"===Notification.permission?(n=new Notification(o,i),e=new Audio("../../assets/notification.mp3"),e.play()):"denied"!==Notification.permission?Notification.requestPermission(function(t){if("granted"===t)return n=new Notification(o,i),e=new Audio("../../assets/notification.mp3"),e.play()}):void 0:alert(message)},updateNotificationView:function(){return this.reportNotification=app.db.find("in-app-notification",function(t){return function(t){var e;if(e=t.category,"report"===e)return!0}}(this)),this.patientNoteNotification=app.db.find("in-app-notification",function(t){return function(t){var e;if(e=t.category,"patientNote"===e)return!0}}(this)),this.onlineConsultationNotification=app.db.find("in-app-notification",function(t){return function(t){var e;if(e=t.category,"onlineConsultation"===e)return!0}}(this)),this.generalNotification=app.db.find("in-app-notification",function(t){return function(t){var e;if(e=t.category,"general"===e)return!0}}(this))},markAllDonePressed:function(){return this.reportNotification=[],this.patientNoteNotification=[],this.onlineConsultationNotification=[],this.generalNotification=[]},markAsRead:function(t){return app.db.remove("in-app-notification",t.model.item._id),"report"===t.model.item.category?this.splice("reportNotification",t.model.index,1):"patientNote"===t.model.item.category?this.splice("patientNoteNotification",t.model.index,1):"onlineConsultation"===t.model.item.category?this.splice("onlineConsultationNotification",t.model.index,1):"general"===t.model.item.category?this.splice("generalNotification",t.model.index,1):void 0},notificationToggleButtonPressed:function(t){return this.$.notificationDrawer.toggle()},toggleReportNotification:function(){return this.$.reportNotification.toggle()},togglePatientNoteNotification:function(){return this.$.patientNoteNotification.toggle()},toggleOnlineConsultationNotification:function(){return this.$.onlineConsultationNotification.toggle()},toggleGeneralNotification:function(){return this.$.generalNotification.toggle()},_callGetAdvertisementApi:function(t){var e;return e=app.db.find("user")[0].apiKey,this.callApi("/get-advertisement-list",{apiKey:e},{automaticallyHandleNetworkErrors:!1},function(e){return function(n,i){var o;return n?void 0:i.hasError?e.showModalDialog(i.error.message):(o=i.data.advertisementLongList,t(o))}}(this))},switchAdvertisement:function(){var t;return 0===this.adList.length?this.set("currentAd",null):this.currentAd&&"audio"in this.currentAd&&(t=this.$$("#audioPlayer"),!t.paused)?void lib.util.delay(1e4,function(t){return function(){return t.switchAdvertisement()}}(this)):(null===this.adListSelectedIndex?this.adListSelectedIndex=0:(this.adListSelectedIndex+=1,this.adListSelectedIndex===this.adList.length&&(this.adListSelectedIndex=0)),this.currentAd=this.adList[this.adListSelectedIndex],lib.util.delay(1e4,function(t){return function(){return t.switchAdvertisement()}}(this)))},initiateAdvertisement:function(){var t;if(t=app.db.find("user"),0!==t.length)return this._callGetAdvertisementApi(function(t){return function(e){return t.adList=e,t.adListSelectedIndex=null,t.switchAdvertisement()}}(this))},addActivityLog:function(t,e,n){var i;return i={serial:this.generateSerialForActivity(),doctorSerial:this.getCurrentUserSerial(),patientSerial:n.patientSerial||null,doctorName:this.getCurrentUser().name,subject:t,action:e,data:n,lastModifiedDatetimeStamp:(new Date).getTime()},app.db.insert("activity",i)},languageSelectedIndexChanged:function(){var t;return t=this.supportedLanguageList[this.languageSelectedIndex],this.setActiveLanguage(t)},_showLanguageName:function(t){return 0===t?"EN":"বাংলা"},patientPageSelectedIndexChanged:function(){if(this.currentPatientsDetails)return 0===this.selectedPatientPageIndex?(this.selectedVisitSerial=localStorage.getItem("selectedVisitSerial"),this.navigateToPage("#/visit-editor/visit:"+this.selectedVisitSerial+"/patient:"+this.currentPatientsDetails.serial)):(this.navigateToPage("#/patient-viewer/patient:"+this.currentPatientsDetails.serial+"/selected:"+this.selectedPatientPageIndex),this.pageElement.navigatedIn())},_changeToolbarClass:function(t){return t===!0?"medium-tall":""},_checkUserAccess:function(t){var e,n,i,o,a;if(e=this.getCurrentOrganization(),"none"===t)return!0;if(e){if(e.isCurrentUserAnAdmin)return!0;if(e.isCurrentUserAMember){if(!e.userActiveRole)return!0;if(a=e.userActiveRole.privilegeList,0!==a.length)for(n=0,i=a.length;n<i;n++)if(o=a[n],o.serial===t)return!0;return!1}return!1}return!0},_createOnlinePccPatient:function(t,e){var n;return n={patient:t,apiKey:this.user.apiKey},this.callApi("/bdemr-preconception-records-patient-registration",n,function(n){return function(i,o){return o.hasError?"Phone number already exists."===o.error.message?(t.userAlreadyExist=!0,n.getExisitingPatientInfo(t.serial,t.phone,function(){return e(t)})):n.domHost.showModalDialog(o.error.message):(t=o.data.patient,e(t))}}(this))},getExisitingPatientInfo:function(t,e,n){var i;return i={apiKey:this.user.apiKey,phoneNumber:e},this.callApi("/bdemr-get-patient-info",i,function(e){return function(e,i){var o;if(!i.hasError)return o={oldSerial:t,doctorAccessPin:"0000",data:null},o.data=i.data,app.db.insert("existing-patient-log-for-pending-pcc-records",o),n()}}(this))},_updateLocalPatient:function(t,e){var n;return n=app.db.find("patient-list",function(t){var n;return n=t.serial,n===e})[0]._id,t.isTemporaryOfflinePatient=!1,t.flags={isImported:!1,isLocalOnly:!1,isOnlineOnly:!1},t.flags.isImported=!0,app.db.remove("patient-list",n),app.db.insert("patient-list",t)},_updateLocalPcc:function(t,e){var n;return n=app.db.find("pcc-records",function(t){var n;return n=t.patientSerial,n===e})[0],n.patientSerial=t,app.db.update("pcc-records",n._id,n)},_removeLocalPatient:function(t){var e;e=app.db.find("patient-list",function(e){var n;return n=e.serial,n===t})[0]._id,app.db.remove("patient-list",e)},_convertOfflinePccPatientToOnline:function(t,e){var n;return n=t.serial,this._createOnlinePccPatient(t,function(t){return function(i){return i.userAlreadyExist?t._removeLocalPatient(i.serial):(t._updateLocalPatient(i,n),t._updateLocalPcc(i.serial,n)),e()}}(this))},_syncTemporaryOfflinePccPatients:function(t){var e,n;return n=app.db.find("patient-list",function(t){return function(t){return t.isTemporaryOfflinePatient===!0}}(this)),0===n.length?t():(e=new lib.util.Iterator(n),e.forEach(function(t){return function(e,n,i){return t._convertOfflinePccPatientToOnline(i,function(){return e()})}}(this)),e["finally"](function(e){return function(){return t()}}(this)))},_syncOnlyPatientTestResults:function(t){return this._syncPatients(this.syncPatientTestResultsConfig,function(){return t()})},_syncOnlyPatientGallery:function(t){return this._syncPatients(this.syncPatientGalleryAttachmentConfig,function(){return t()})},_syncUserSettings:function(t){return this._syncUser(this.syncSettings,function(){return t()})},_syncOnlyInvoice:function(t){return this._syncPatients(this.syncVisitInvoice,function(){return t()})},syncButtonPressed:function(t){return this._sync()},_sync:function(t){return null==t&&(t=null),this._syncTemporaryOfflinePccPatients(function(e){return function(){var n;return n=new lib.util.Collector(36),e._syncUser(e.syncDoctorFavoriteMedicationConfig,function(){return n.collect("A1",null)}),e._syncUser(e.syncSettings,function(){return n.collect("A1",null)}),e._syncUser(e.syncFavoriteAdvisedTestConfig,function(){return n.collect("A1",null)}),e._syncUser(e.syncUserAddedInstitutionConfig,function(){return n.collect("A1",null)}),e._syncUser(e.syncVisitedPatientLogConfig,function(){return n.collect("A1",null)}),e._syncUser(e.syncUserAddedCustomSymptomsConfig,function(){return n.collect("A1",null)}),e._syncUser(e.syncUserAddedCustomExaminationConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncVisitConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncPrescriptionConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncPatientMedicationConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncDoctorNotesConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncNextVisitConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncTestAdvisedConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncExaminationConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncIdentifiedSymptomsConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncCustomInvestigationConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncAnaesmonRecordConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncPatientTestResultsConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncPatientStayConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncHistoryAndPhysicalConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncDiagnosisConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncVitalBloodPressureConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncVitalBMIConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncVitalPulseRateConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncVitalRespiratoryRateConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncVitalSpO2Config,function(){return n.collect("A1",null)}),e._syncPatients(e.syncVitalTemperatureConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncTestBloodSugarConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncOtherTestConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncCommentPatientConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncCommentDoctorConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncPatientGalleryAttachmentConfig,function(){return n.collect("A1",null)}),e._syncPatients(e.syncActivityLog,function(){return n.collect("A1",null)}),e._syncPatients(e.syncVisitInvoice,function(){return n.collect("A1",null)}),e._syncPatients(e.syncVisitDiagnosis,function(){return n.collect("A1",null)}),e._syncPatients(e.syncPccRecords,function(){return n.collect("A1",null)}),n["finally"](function(){return t&&e.navigateToPage(t),e.reloadPage()})}}(this))}})}).call(this);
//# sourceMappingURL=root-element.coffee-compiled.js.map</script>
</dom-module>