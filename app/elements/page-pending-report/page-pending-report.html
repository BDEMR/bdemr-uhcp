<!-- iron-* --><!-- paper-* --><!-- style --><!-- behavior --><!-- custom-elements --><!-- element --><dom-module id="page-pending-report">
  <template>

    <!-- style -->
    <style is="custom-style" include="common-style">

      .limiting-container {
        margin-top: 10px;
      }
      .table{
        width: 100%;
        border-collapse: collapse;
      }

      .table th {
        text-align: left;
        background-color: var(--paper-grey-50);
      }

      .table td {
        color: #444;
      }

      .table td, .table th{
        vertical-align: middle;
        padding: 10px 20px;
        border-bottom: 1px solid var(--paper-grey-100);
      }

       .table tr:last-child td {
        border-bottom: 0;
      }

      .table.two-col th {
        text-align: right;
        background-color: white;
        width: 50%;
      }

      .two-col .header th {
        background-color: var(--paper-grey-50);
        text-align: center;
        padding: 20px 0;
        text-trasnform: uppercase;
      }

      .block{display: block}

      .filter-query {
        --paper-input-container: {
          width: 250px;
          padding: 0;
        }
        --paper-input-container-label: {
          font-size: 13px;
        }
        --paper-input-container-input: {
          font-size: 13px;
        }        
      }
      .search {
        @apply(--layout-end-justified);
      }

      @media only screen and (min-width : 320px) and (max-width : 480px){
        .table td, .table th{
          vertical-align: top;
          font-size: 14px;
        }
        .search {
          margin-top: 10px;
          @apply(--layout-start-justified);
        }
      }
    </style>
    <!-- /style -->

    
    <div class="master-container">

      <div class="limiting-container">

        <!-- Demography - start -->
        <paper-card heading="Demography">
          <div class="card-content">

            <div class="basic-list">

              <!-- <div class="layout horizontal">
                <iron-image class="avatar" sizing="cover" src="../../images/avatar.png"></iron-image>
                <div class="m-horizontal-5 flex">
                  <div class="type caption m-horizontal-5 bg-gray">DA1234</div>
                  <div class="type body-lead m-horizontal-5">Mr. John Doe</div>
                </div>
              </div> -->

              <div class="layout horizontal center">
                <div class="type body-lead capitalize">{{patient.name}}</div>
                <div class="m-left-8 type caption bg-gray">{{patient.serial}}</div>
              </div>
              <div class="type caption secondary">Created on [[$mkDate(patient.createdDatetimeStamp)]] by [[$findCreator(patient.createdByUserSerial)]]</div>
              
              

              <div class="layout horizontal">
                <!-- <div class="type body">Male</div> -->
                <div class="type body" hidden$="[[_isEmptyString(patient.dob)]]">[[$computeAge(patient.dob)]] years</div>
                <!-- <div class="m-left-10 type body">AB+</div> -->
                <!-- <div class="m-left-10 type body">5'4"</div> -->
                <!-- <div class="m-left-10 type body">65Kgs</div> -->
              </div>

              <div hidden$="[[_isEmptyString(patient.nIdOrSsn)]]">
                <iron-icon class="icon small" icon="icons:perm-identity"></iron-icon><span class="type body m-left-10">{{patient.nIdOrSsn}}</span>
              </div>

              <div hidden$="[[_isEmptyString(patient.phone)]]">
                <iron-icon class="icon small" icon="communication:phone"></iron-icon><span class="type body m-left-10">{{patient.phone}}</span>
              </div>
              <div hidden$="[[_isEmptyString(patient.email)]]">
                <iron-icon class="icon small" icon="communication:mail-outline"></iron-icon><span class="type body m-left-10"> {{patient.email}}</span>
              </div>

              <div>
                <iron-icon hidden$="[[_isEmptyString(patient.address.line1)]]" class="icon small" icon="home"></iron-icon>
                <span class="m-left-10" hidden$="[[_isEmptyString(patient.address.line1)]]">{{patient.address.line1}}</span>
                <span hidden$="[[_isEmptyString(patient.address.line2)]]">, {{patient.address.line2}}</span>
                <span hidden$="[[_isEmptyString(patient.address.postalCode)]]">, {{patient.address.postalCode}}</span>
                <span hidden$="[[_isEmptyString(patient.address.cityOrTown)]]">, {{patient.address.cityOrTown}}</span>
                <span hidden$="[[_isEmptyString(patient.address.stateOrProvince)]]">, {{patient.address.stateOrProvince}}</span>
                <span hidden$="[[_isEmptyString(patient.address.country)]]">, {{patient.address.country}}</span>
              </div>

              <!-- <template is="dom-if" if="[[_isEmptyArray(patient.doctorsPrivateNote)]]"> -->
              <div hidden$="[[_isEmptyString(patient.doctorsPrivateNote)]]">
                <div class="sp"></div>
                <div>
                  <span class="type bold">Quick Notes (Kept Private): </span>
                  <span>{{patient.doctorsPrivateNote}}</span>
                </div>
              </div>
              
                
              <!-- </template> -->

              
              
            </div>

          </div>
        </paper-card>
        <!-- Demography - end -->

        <paper-card class="m-top-8" heading="Test Results">


          <div class="card-content">
            <template is="dom-if" if="[[_compareFn(pendingReport.data.testList.length, '!=', 1)]]">
              <div class="type body-lead">{{pendingReport.investigationName}}</div>
              <div class="sp"></div>
              <ul>
                <template is="dom-repeat" items="{{pendingReport.data.testList}}">
                  
                  <li class="m-top-8">
                    <div>
                      {{item.testName}}: {{item.testResult}} {{item.testUnit}}
                    </div>
                    <div class="type caption-2"><strong>Institution/Hospital Name:</strong> {{item.institutionName}}</div>
                    <div class="type caption-2"><strong>Date Performed: </strong>{{item.datePerform}}</div>
                    <div class="type caption-2"><strong>Reference Range: </strong>{{item.referenceRange}}</div>
                  </li>
                  
                </template>
              </ul>
              <div>
                <span class="type caption-2">
                  <strong>Advised by:</strong> {{pendingReport.advisedDoctorName}} - {{pendingReport.advisedDoctorSpeciality}}
                </span>
              </div>
              <div>
                <span class="type caption-2">
                  <strong>Reported by:</strong> {{pendingReport.reportedDoctorName}} - {{pendingReport.reportedDoctorSpeciality}}
                </span>
              </div>

            </template>

            <template is="dom-if" if="[[_compareFn(pendingReport.data.testList.length, '==', 1)]]">
              <div class="type body-lead">{{pendingReport.investigationName}}: {{pendingReport.data.testList.0.testResult}} {{pendingReport.data.testList.0.testUnit}}</div>
              <div class="sp"></div>

              <div class="type caption-2"><strong>Institution/Hospital Name:</strong> {{pendingReport.data.testList.0.institutionName}}</div>
              <div class="type caption-2"><strong>Date Performed: </strong>{{pendingReport.data.testList.0.datePerform}}</div>
              <div class="type caption-2"><strong>Reference Range: </strong>{{pendingReport.data.testList.0.referenceRange}}</div>

              <div>
                <span class="type caption-2">
                  <strong>Advised by:</strong> {{pendingReport.advisedDoctorName}} - {{pendingReport.advisedDoctorSpeciality}}
                </span>
              </div>

              <div>
                <span class="type caption-2">
                  <strong>Reported by:</strong> {{pendingReport.reportedDoctorName}} - {{pendingReport.reportedDoctorSpeciality}}
                </span>
              </div>

            </template>

            
          </div>

          <div class="card-actions">
            <paper-button class="type warning" on-tap="flagAsErrorTestResultsItemClicked">Flag As Error</paper-button>
            <paper-button raised="" class="colored" on-tap="_setReportsAvailableToPatient">Available To Patient</paper-button>
          </div>


                         
        </paper-card>


 
        
      </div>
    </div>
    <!-- /local DOM -->

  </template>
  <script>(function(){Polymer({is:"page-pending-report",behaviors:[app.behaviors.commonComputes,app.behaviors.dbUsing,app.behaviors.translating,app.behaviors.pageLike,app.behaviors.apiCalling],properties:{selectedReportPageIndex:{type:Number,notify:!0,value:0},isPatientValid:{type:Boolean,notify:!1,value:!0},user:{type:Object,notify:!0,value:null},patient:{type:Object,notify:!0,value:null},pendingReport:{type:Object,notify:!0,value:null}},$findCreator:function(e){return"me"},arrowBackButtonPressed:function(e){return this.domHost.navigateToPreviousPage()},_isEmptyString:function(e){return null===e||"undefined"===e||""===e},_isEmptyArray:function(e){return 0===e.length},_compareFn:function(e,t,r){return"<"===t?e<r:">"===t?e>r:"=="===t?e===r:">="===t?e>=r:"<="===t?e<=r:"!="===t?e!==r:void 0},_sortByDate:function(e,t){return e.date<t.date?1:e.date>t.date?-1:void 0},_returnSerial:function(e){return e+1},_loadUser:function(){var e;if(e=app.db.find("user"),1===e.length)return this.user=e[0]},_loadPendingReport:function(e){var t;return t={apiKey:this.user.apiKey,serial:e,doctorSerial:this.user.serial},this.callApi("/bdemr-get-pending-report",t,function(e){return function(t,r){return r.hasError?e.domHost.showModalDialog(r.error.message):(e.pendingReport=r.data.report,e.patient=r.data.patient)}}(this))},_updateTestResults:function(e){var t;return t={apiKey:this.user.apiKey,serial:this.pendingReport.serial,availableToPatient:this.pendingReport.availableToPatient,flagAsError:this.pendingReport.data.flags.flagAsError,seenByAdvisedDoctor:this.pendingReport.data.flags.seenByAdvisedDoctor},this.callApi("/bdemr-test-result-update",t,function(e){return function(t,r){return r.hasError?e.domHost.showModalDialog(r.error.message):(e.arrowBackButtonPressed(),e.domHost.showToast("Updated Successfully!"))}}(this))},_setReportsAvailableToPatient:function(e){return this.pendingReport.availableToPatient=!0,this._updateTestResults()},flagAsErrorTestResultsItemClicked:function(){return this.pendingReport.data.flags.flagAsError=!0,this._updateTestResults()},navigatedIn:function(){var e,t;if(e=this.getCurrentOrganization(),e||this.domHost.navigateToPage("#/select-organization"),t=this.domHost.getPageParams(),this._loadUser(),t.serial)return this._loadPendingReport(t.serial)},navigatedOut:function(){return this.pendingReport={}}})}).call(this);
//# sourceMappingURL=page-pending-report.coffee-compiled.js.map</script>
</dom-module>
