<!-- paper-* --><!-- style --><!-- behavior --><!-- custom-elements --><!-- element --><div hidden="" by-polymer-bundler=""><!--
@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<iron-iconset-svg name="av" size="24">
<svg><defs>
<g id="add-to-queue"><path d="M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2zm0 14H3V5h18v12zm-5-7v2h-3v3h-2v-3H8v-2h3V7h2v3h3z"></path></g>
<g id="airplay"><path d="M6 22h12l-6-6zM21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4v-2H3V5h18v12h-4v2h4c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></g>
<g id="album"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path></g>
<g id="art-track"><path d="M22 13h-8v-2h8v2zm0-6h-8v2h8V7zm-8 10h8v-2h-8v2zm-2-8v6c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V9c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2zm-1.5 6l-2.25-3-1.75 2.26-1.25-1.51L3.5 15h7z"></path></g>
<g id="av-timer"><path d="M11 17c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1-1 .45-1 1zm0-14v4h2V5.08c3.39.49 6 3.39 6 6.92 0 3.87-3.13 7-7 7s-7-3.13-7-7c0-1.68.59-3.22 1.58-4.42L12 13l1.41-1.41-6.8-6.8v.02C4.42 6.45 3 9.05 3 12c0 4.97 4.02 9 9 9 4.97 0 9-4.03 9-9s-4.03-9-9-9h-1zm7 9c0-.55-.45-1-1-1s-1 .45-1 1 .45 1 1 1 1-.45 1-1zM6 12c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1-1 .45-1 1z"></path></g>
<g id="branding-watermark"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16h-9v-6h9v6z"></path></g>
<g id="call-to-action"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3v-3h18v3z"></path></g>
<g id="closed-caption"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 7H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z"></path></g>
<g id="equalizer"><path d="M10 20h4V4h-4v16zm-6 0h4v-8H4v8zM16 9v11h4V9h-4z"></path></g>
<g id="explicit"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h4v2h-4v2h4v2H9V7h6v2z"></path></g>
<g id="fast-forward"><path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"></path></g>
<g id="fast-rewind"><path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"></path></g>
<g id="featured-play-list"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 8H3V9h9v2zm0-4H3V5h9v2z"></path></g>
<g id="featured-video"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 9H3V5h9v7z"></path></g>
<g id="fiber-dvr"><path d="M17.5 10.5h2v1h-2zm-13 0h2v3h-2zM21 3H3c-1.11 0-2 .89-2 2v14c0 1.1.89 2 2 2h18c1.11 0 2-.9 2-2V5c0-1.11-.89-2-2-2zM8 13.5c0 .85-.65 1.5-1.5 1.5H3V9h3.5c.85 0 1.5.65 1.5 1.5v3zm4.62 1.5h-1.5L9.37 9h1.5l1 3.43 1-3.43h1.5l-1.75 6zM21 11.5c0 .6-.4 1.15-.9 1.4L21 15h-1.5l-.85-2H17.5v2H16V9h3.5c.85 0 1.5.65 1.5 1.5v1z"></path></g>
<g id="fiber-manual-record"><circle cx="12" cy="12" r="8"></circle></g>
<g id="fiber-new"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zM8.5 15H7.3l-2.55-3.5V15H3.5V9h1.25l2.5 3.5V9H8.5v6zm5-4.74H11v1.12h2.5v1.26H11v1.11h2.5V15h-4V9h4v1.26zm7 3.74c0 .55-.45 1-1 1h-4c-.55 0-1-.45-1-1V9h1.25v4.51h1.13V9.99h1.25v3.51h1.12V9h1.25v5z"></path></g>
<g id="fiber-pin"><path d="M5.5 10.5h2v1h-2zM20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zM9 11.5c0 .85-.65 1.5-1.5 1.5h-2v2H4V9h3.5c.85 0 1.5.65 1.5 1.5v1zm3.5 3.5H11V9h1.5v6zm7.5 0h-1.2l-2.55-3.5V15H15V9h1.25l2.5 3.5V9H20v6z"></path></g>
<g id="fiber-smart-record"><g><circle cx="9" cy="12" r="8"></circle><path d="M17 4.26v2.09c2.33.82 4 3.04 4 5.65s-1.67 4.83-4 5.65v2.09c3.45-.89 6-4.01 6-7.74s-2.55-6.85-6-7.74z"></path></g></g>
<g id="forward-10"><path d="M4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8zm6.8 3H10v-3.3L9 13v-.7l1.8-.6h.1V16zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1.3.2.5.3.2.3.3.6.1.5.1.8v.7zm-.8-.8v-.5s-.1-.2-.1-.3-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z"></path></g>
<g id="forward-30"><path d="M9.6 13.5h.4c.2 0 .4-.1.5-.2s.2-.2.2-.4v-.2s-.1-.1-.1-.2-.1-.1-.2-.1h-.5s-.1.1-.2.1-.1.1-.1.2v.2h-1c0-.2 0-.3.1-.5s.2-.3.3-.4.3-.2.4-.2.4-.1.5-.1c.2 0 .4 0 .6.1s.3.1.5.2.2.2.3.4.1.3.1.5v.3s-.1.2-.1.3-.1.2-.2.2-.2.1-.3.2c.2.1.4.2.5.4s.2.4.2.6c0 .2 0 .4-.1.5s-.2.3-.3.4-.3.2-.5.2-.4.1-.6.1c-.2 0-.4 0-.5-.1s-.3-.1-.5-.2-.2-.2-.3-.4-.1-.4-.1-.6h.8v.2s.1.1.1.2.1.1.2.1h.5s.1-.1.2-.1.1-.1.1-.2v-.5s-.1-.1-.1-.2-.1-.1-.2-.1h-.6v-.7zm5.7.7c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1.3.2.5.3.2.3.3.6.1.5.1.8v.7zm-.9-.8v-.5s-.1-.2-.1-.3-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5zM4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8z"></path></g>
<g id="forward-5"><path d="M4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8zm6.7.9l.2-2.2h2.4v.7h-1.7l-.1.9s.1 0 .1-.1.1 0 .1-.1.1 0 .2 0h.2c.2 0 .4 0 .5.1s.3.2.4.3.2.3.3.5.1.4.1.6c0 .2 0 .4-.1.5s-.1.3-.3.5-.3.2-.5.3-.4.1-.6.1c-.2 0-.4 0-.5-.1s-.3-.1-.5-.2-.2-.2-.3-.4-.1-.3-.1-.5h.8c0 .2.1.3.2.4s.2.1.4.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-.6l-.1-.2-.2-.2s-.2-.1-.3-.1h-.2s-.1 0-.2.1-.1 0-.1.1-.1.1-.1.1h-.6z"></path></g>
<g id="games"><path d="M15 7.5V2H9v5.5l3 3 3-3zM7.5 9H2v6h5.5l3-3-3-3zM9 16.5V22h6v-5.5l-3-3-3 3zM16.5 9l-3 3 3 3H22V9h-5.5z"></path></g>
<g id="hd"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path></g>
<g id="hearing"><path d="M17 20c-.29 0-.56-.06-.76-.15-.71-.37-1.21-.88-1.71-2.38-.51-1.56-1.47-2.29-2.39-3-.79-.61-1.61-1.24-2.32-2.53C9.29 10.98 9 9.93 9 9c0-2.8 2.2-5 5-5s5 2.2 5 5h2c0-3.93-3.07-7-7-7S7 5.07 7 9c0 1.26.38 2.65 1.07 3.9.91 1.65 1.98 2.48 2.85 3.15.81.62 1.39 1.07 1.71 2.05.6 1.82 1.37 2.84 2.73 3.55.51.23 1.07.35 1.64.35 2.21 0 4-1.79 4-4h-2c0 1.1-.9 2-2 2zM7.64 2.64L6.22 1.22C4.23 3.21 3 5.96 3 9s1.23 5.79 3.22 7.78l1.41-1.41C6.01 13.74 5 11.49 5 9s1.01-4.74 2.64-6.36zM11.5 9c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5-1.12-2.5-2.5-2.5-2.5 1.12-2.5 2.5z"></path></g>
<g id="high-quality"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 11H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm7-1c0 .55-.45 1-1 1h-.75v1.5h-1.5V15H14c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v4zm-3.5-.5h2v-3h-2v3z"></path></g>
<g id="library-add"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z"></path></g>
<g id="library-books"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"></path></g>
<g id="library-music"><path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 5h-3v5.5c0 1.38-1.12 2.5-2.5 2.5S10 13.88 10 12.5s1.12-2.5 2.5-2.5c.57 0 1.08.19 1.5.51V5h4v2zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6z"></path></g>
<g id="loop"><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"></path></g>
<g id="mic"><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"></path></g>
<g id="mic-none"><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1.2-9.1c0-.66.54-1.2 1.2-1.2.66 0 1.2.54 1.2 1.2l-.01 6.2c0 .66-.53 1.2-1.19 1.2-.66 0-1.2-.54-1.2-1.2V4.9zm6.5 6.1c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"></path></g>
<g id="mic-off"><path d="M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"></path></g>
<g id="movie"><path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"></path></g>
<g id="music-video"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14zM8 15c0-1.66 1.34-3 3-3 .35 0 .69.07 1 .18V6h5v2h-3v7.03c-.02 1.64-1.35 2.97-3 2.97-1.66 0-3-1.34-3-3z"></path></g>
<g id="new-releases"><path d="M23 12l-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68L23 12zm-10 5h-2v-2h2v2zm0-4h-2V7h2v6z"></path></g>
<g id="not-interested"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"></path></g>
<g id="note"><path d="M22 10l-6-6H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99l16-.01c1.1 0 2-.89 2-1.99v-8zm-7-4.5l5.5 5.5H15V5.5z"></path></g>
<g id="pause"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></g>
<g id="pause-circle-filled"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z"></path></g>
<g id="pause-circle-outline"><path d="M9 16h2V8H9v8zm3-14C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm1-4h2V8h-2v8z"></path></g>
<g id="play-arrow"><path d="M8 5v14l11-7z"></path></g>
<g id="play-circle-filled"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"></path></g>
<g id="play-circle-outline"><path d="M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g>
<g id="playlist-add"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z"></path></g>
<g id="playlist-add-check"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zM2 16h8v-2H2v2zm19.5-4.5L23 13l-6.99 7-4.51-4.5L13 14l3.01 3 5.49-5.5z"></path></g>
<g id="playlist-play"><path d="M19 9H2v2h17V9zm0-4H2v2h17V5zM2 15h13v-2H2v2zm15-2v6l5-3-5-3z"></path></g>
<g id="queue"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z"></path></g>
<g id="queue-music"><path d="M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"></path></g>
<g id="queue-play-next"><path d="M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h2v-2H3V5h18v8h2V5c0-1.11-.9-2-2-2zm-8 7V7h-2v3H8v2h3v3h2v-3h3v-2h-3zm11 8l-4.5 4.5L18 21l3-3-3-3 1.5-1.5L24 18z"></path></g>
<g id="radio"><path d="M3.24 6.15C2.51 6.43 2 7.17 2 8v12c0 1.1.89 2 2 2h16c1.11 0 2-.9 2-2V8c0-1.11-.89-2-2-2H8.3l8.26-3.34L15.88 1 3.24 6.15zM7 20c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm13-8h-2v-2h-2v2H4V8h16v4z"></path></g>
<g id="recent-actors"><path d="M21 5v14h2V5h-2zm-4 14h2V5h-2v14zM14 5H2c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zM8 7.75c1.24 0 2.25 1.01 2.25 2.25S9.24 12.25 8 12.25 5.75 11.24 5.75 10 6.76 7.75 8 7.75zM12.5 17h-9v-.75c0-1.5 3-2.25 4.5-2.25s4.5.75 4.5 2.25V17z"></path></g>
<g id="remove-from-queue"><path d="M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2zm0 14H3V5h18v12zm-5-7v2H8v-2h8z"></path></g>
<g id="repeat"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"></path></g>
<g id="repeat-one"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4zm-4-2V9h-1l-2 1v1h1.5v4H13z"></path></g>
<g id="replay"><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"></path></g>
<g id="replay-10"><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-1.1 11H10v-3.3L9 13v-.7l1.8-.6h.1V16zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1c.2.1.3.2.5.3s.2.3.3.6.1.5.1.8v.7zm-.9-.8v-.5s-.1-.2-.1-.3-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z"></path></g>
<g id="replay-30"><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-2.4 8.5h.4c.2 0 .4-.1.5-.2s.2-.2.2-.4v-.2s-.1-.1-.1-.2-.1-.1-.2-.1h-.5s-.1.1-.2.1-.1.1-.1.2v.2h-1c0-.2 0-.3.1-.5s.2-.3.3-.4.3-.2.4-.2.4-.1.5-.1c.2 0 .4 0 .6.1s.3.1.5.2.2.2.3.4.1.3.1.5v.3s-.1.2-.1.3-.1.2-.2.2-.2.1-.3.2c.2.1.4.2.5.4s.2.4.2.6c0 .2 0 .4-.1.5s-.2.3-.3.4-.3.2-.5.2-.4.1-.6.1c-.2 0-.4 0-.5-.1s-.3-.1-.5-.2-.2-.2-.3-.4-.1-.4-.1-.6h.8v.2s.1.1.1.2.1.1.2.1h.5s.1-.1.2-.1.1-.1.1-.2v-.5s-.1-.1-.1-.2-.1-.1-.2-.1h-.6v-.7zm5.7.7c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1.3.2.5.3.2.3.3.6.1.5.1.8v.7zm-.8-.8v-.5c0-.1-.1-.2-.1-.3s-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z"></path></g>
<g id="replay-5"><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-1.3 8.9l.2-2.2h2.4v.7h-1.7l-.1.9s.1 0 .1-.1.1 0 .1-.1.1 0 .2 0h.2c.2 0 .4 0 .5.1s.3.2.4.3.2.3.3.5.1.4.1.6c0 .2 0 .4-.1.5s-.1.3-.3.5-.3.2-.4.3-.4.1-.6.1c-.2 0-.4 0-.5-.1s-.3-.1-.5-.2-.2-.2-.3-.4-.1-.3-.1-.5h.8c0 .2.1.3.2.4s.2.1.4.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-.6l-.1-.2-.2-.2s-.2-.1-.3-.1h-.2s-.1 0-.2.1-.1 0-.1.1-.1.1-.1.1h-.7z"></path></g>
<g id="shuffle"><path d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"></path></g>
<g id="skip-next"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></g>
<g id="skip-previous"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></g>
<g id="slow-motion-video"><path d="M13.05 9.79L10 7.5v9l3.05-2.29L16 12zm0 0L10 7.5v9l3.05-2.29L16 12zm0 0L10 7.5v9l3.05-2.29L16 12zM11 4.07V2.05c-2.01.2-3.84 1-5.32 2.21L7.1 5.69c1.11-.86 2.44-1.44 3.9-1.62zM5.69 7.1L4.26 5.68C3.05 7.16 2.25 8.99 2.05 11h2.02c.18-1.46.76-2.79 1.62-3.9zM4.07 13H2.05c.2 2.01 1 3.84 2.21 5.32l1.43-1.43c-.86-1.1-1.44-2.43-1.62-3.89zm1.61 6.74C7.16 20.95 9 21.75 11 21.95v-2.02c-1.46-.18-2.79-.76-3.9-1.62l-1.42 1.43zM22 12c0 5.16-3.92 9.42-8.95 9.95v-2.02C16.97 19.41 20 16.05 20 12s-3.03-7.41-6.95-7.93V2.05C18.08 2.58 22 6.84 22 12z"></path></g>
<g id="snooze"><path d="M7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm-3-9h3.63L9 15.2V17h6v-2h-3.63L15 10.8V9H9v2z"></path></g>
<g id="sort-by-alpha"><path d="M14.94 4.66h-4.72l2.36-2.36zm-4.69 14.71h4.66l-2.33 2.33zM6.1 6.27L1.6 17.73h1.84l.92-2.45h5.11l.92 2.45h1.84L7.74 6.27H6.1zm-1.13 7.37l1.94-5.18 1.94 5.18H4.97zm10.76 2.5h6.12v1.59h-8.53v-1.29l5.92-8.56h-5.88v-1.6h8.3v1.26l-5.93 8.6z"></path></g>
<g id="stop"><path d="M6 6h12v12H6z"></path></g>
<g id="subscriptions"><path d="M20 8H4V6h16v2zm-2-6H6v2h12V2zm4 10v8c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2v-8c0-1.1.9-2 2-2h16c1.1 0 2 .9 2 2zm-6 4l-6-3.27v6.53L16 16z"></path></g>
<g id="subtitles"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z"></path></g>
<g id="surround-sound"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.76 16.24l-1.41 1.41C4.78 16.1 4 14.05 4 12c0-2.05.78-4.1 2.34-5.66l1.41 1.41C6.59 8.93 6 10.46 6 12s.59 3.07 1.76 4.24zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm5.66 1.66l-1.41-1.41C17.41 15.07 18 13.54 18 12s-.59-3.07-1.76-4.24l1.41-1.41C19.22 7.9 20 9.95 20 12c0 2.05-.78 4.1-2.34 5.66zM12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g>
<g id="video-call"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4zM14 13h-3v3H9v-3H6v-2h3V8h2v3h3v2z"></path></g>
<g id="video-label"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 13H3V5h18v11z"></path></g>
<g id="video-library"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8 12.5v-9l6 4.5-6 4.5z"></path></g>
<g id="videocam"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"></path></g>
<g id="videocam-off"><path d="M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"></path></g>
<g id="volume-down"><path d="M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"></path></g>
<g id="volume-mute"><path d="M7 9v6h4l5 5V4l-5 5H7z"></path></g>
<g id="volume-off"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"></path></g>
<g id="volume-up"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></g>
<g id="web"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 14H4v-4h11v4zm0-5H4V9h11v4zm5 5h-4V9h4v9z"></path></g>
<g id="web-asset"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm0 14H5V8h14v10z"></path></g>
</defs></svg>
</iron-iconset-svg>
<link rel="import" href="../custom-vital-search/custom-vital-search.html"><link rel="import" href="../custom-graph/custom-graph.html"></div><dom-module id="page-patient-viewer">
  <template>

    <!-- style -->

    <style is="custom-style" include="common-style">
      .fixed-btn {
        position: absolute;
        top: 8px;
        right: 8px;
      }

      .sub-header {
        background-color: #f7f7f7;
        padding: 4px 16px;
        border-bottom: 1px solid #eee;
        font-weight: 500;
      }

      .bg-white {
        background-color: #fff
      }

      .new-patient-fab {
        position: fixed;
        right: 20px;
        bottom: 164px;
        z-index: 999;
      }

      .patient-info-card-counter {
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
        color: #777777;
      }

      .patient-info-cards {
        @apply(--layout-vertical);
        /*@apply(--layout-center);*/
        margin-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
        padding-bottom: 20px;
      }

      .patient-info-cards .row {
        margin-left: 10px;
        /*margin-right: 10px;*/
        margin-top: 10px;
      }

      .patient-info-cards .hr {
        margin-left: 20px;
        margin-right: 20px;
        height: 1px;
        /*width: 100px;*/
        background: #dddddd;
      }

      .patient-info-cards .row .modifier {
        font-size: 14px;
        background: #000000;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
      }

      .patient-info-cards .row .modifier.online {
        background: #757575;
      }

      .patient-info-cards .row .modifier.local-only {
        background: #039BE5;
      }

      .patient-info-cards .row .modifier.locally-updated {
        background: #009688;
      }

      .patient-info-cards .row .modifier.imported {
        background: #4CAF50;
      }

      .info-row {
        margin-top: 10px;
      }

      .top-info-row {
        margin-top: 10px;
        margin-bottom: 10px;
      }

      .serial-number {
        background: #37474F;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: bold;
      }

      .address1 {
        margin-right: 10px;
      }

      .break-on-tablet {
        @apply(--layout-horizontal);
      }

      @media screen and (max-width: 740px) {
        .break-on-tablet {
          display: block;
        }
      }

      .val {
        text-decoration: underline;
      }

      .search-result-counter {
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
        color: #777777;
      }

      .search-results {
        @apply(--layout-vertical);
        /*@apply(--layout-center);*/
        margin-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
        padding-bottom: 20px;
      }

      .search-results .row {
        margin-left: 10px;
        /*margin-right: 10px;*/
        margin-top: 10px;
      }

      .search-results .hr {
        margin-left: 20px;
        margin-right: 20px;
        height: 1px;
        /*width: 100px;*/
        background: #dddddd;
      }

      .search-results .row .name {
        font-size: 18px;
        margin-left: 10px;
      }

      .search-results .row .email {
        font-size: 14px;
        color: #777777;
        margin-left: 10px;
      }

      .search-results .row .modifier {
        font-size: 14px;
        background: #000000;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
      }

      .search-results .row .modifier.online {
        background: #757575;
      }

      .search-results .row .modifier.local-only {
        background: #039BE5;
      }

      .search-results .row .modifier.locally-updated {
        background: #009688;
      }

      .search-results .row .modifier.imported {
        background: #4CAF50;
      }

      .new-patient-fab {
        position: fixed;
        right: 20px;
        bottom: 20px;
      }

      .serial-number {
        background: #37474F;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: bold;
      }

      paper-button {
        background: white;
      }

      .comment-history-item.right {
        @apply(--layout-end-justified);
      }

      .header {
        position: relative;
        border-top-left-radius: inherit;
        border-top-right-radius: inherit;
        overflow: hidden;
        border-bottom: 1px solid #eeeeee;
        background-color: #fafafa;
        padding: 16px
      }

      .header .title {
        font-family: 'Roboto', 'Noto', sans-serif;
        -webkit-font-smoothing: antialiased;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 20px;
        font-weight: 500;
        line-height: 28px;
        color: #5c4575;
      }

      /*custom-vital-search {
        margin-left: 30px;
      }*/

      .card-custom-header {
        padding: 15px;
        /*border-bottom: 1px solid var(--paper-grey-200);*/
        background-color: var(--paper-grey-50);
      }

      .card-custom-header .title {
        font-size: 20px;
        font-weight: 500;
        line-height: 28px;
        color: var(--brand-primary-color);
      }

      .table {
        position: relative;
        width: 100%;
        border-collapse: collapse;
      }

      .table th {
        text-align: left;
        background-color: var(--paper-grey-50);
      }

      .table td {
        color: #444;
      }

      .table td,
      .table th {
        vertical-align: middle;
        padding: 10px 0;
        border-bottom: 1px solid var(--paper-grey-200);
      }

      .table tr:last-child td {
        border-bottom: 0;
      }

      .table tr:hover {
        background-color: var(--paper-grey-200);
      }

      .table.two-col th {
        text-align: right;
        background-color: white;
        width: 50%;
      }

      .table tfoot {
        background-color: var(--paper-grey-50);
      }

      .two-col .header th {
        background-color: var(--paper-grey-50);
        text-align: center;
        padding: 20px 0;
        text-trasnform: uppercase;
      }

      .block {
        display: block
      }


      .pagination li {
        display: inline-block;
        list-style: none;
      }

      .pagination paper-button {
        min-width: 2em;
        font-size: 14px;
        background-color: var(--google-grey-100);
      }

      .filter-query {
        --paper-input-container: {
          width: 250px;
          padding: 0;
        }
        --paper-input-container-label: {
          font-size: 13px;
        }
        --paper-input-container-input: {
          font-size: 13px;
        }
      }

      .search {
        @apply(--layout-end-justified);
      }

      @media only screen and (min-width: 320px) and (max-width: 480px) {
        .table td,
        .table th {
          vertical-align: top;
          font-size: 14px;
        }
        .search {
          margin-top: 10px;
          @apply(--layout-start-justified);
        }
      }


      /*Region - Patient Gallary*/

      .new-attachment-preview {
        display: block;
        ;
        width: 256px;
        height: 256px;
      }

      .descriptive-area {
        padding: 4px;
      }

      paper-button {
        background: white;
      }

      .attachment-card {
        background: white;
        /*
        margin: 4px;
        padding: 4px;
        */
      }

      .image {
        display: block;
        max-width: 256px;
        max-height: 256px;
        width: 256px;
        ;
        height: auto;
      }

      .footer {
        margin-top: 4px;
      }

      .usage {
        margin-right: 20px;
      }

      .usage .title {
        font-size: 36px;
        text-align: left;
      }

      .attachment-card-list {
        margin: 10px 0;
      }

      .attachment-card-list paper-material {
        margin-right: 10px;
        margin-bottom: 10px;
      }

      .attachment-card .footer {
        padding: 10px;
      }

      .activity-log {
        max-height: 300px;
        overflow: auto;
      }

      .text-mute {
        color: #999;
      }

      #newDiagnosisInputModal {
        width: 450px;
      }

      .main-tabs paper-tab {
        background-color: var(--paper-green-600);
      }

      .reports {
        font-size: 12px;
        background-color: #4caf50;
        color: #ffffff;
        margin: 0 4px;
        padding: 2px 8px;
        height: 14px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: bold;
      }

      .preview-title {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        padding-left: 16px;
        padding-right: 8px;
        /*background-color: #E2E4E6;*/
        min-height: 60px;
      }

      .action-area {
        padding: 5px 0 5px 8px;
      }

      .btn-add {
        min-width: 0;
        padding-top: 0.5em;
        padding-bottom: 0.5em;
        background-color: #eceff1;
        color: rgba(0, 0, 0, .87);
      }


      paper-input.input-custom-style ::content input {
        font-size: 18px !important;
      }

      paper-input.input-custom-style ::content label {
        font-size: 18px !important;
        color: rgba(0, 0, 0, .54) !important;
      }

      paper-card.custom-card ::content .header {
        border-bottom: none;
      }

      .gallery-results {
        @apply(--layout-horizontal);
        @apply(--layout-wrap);
        padding: 8px;
        border-top: 1px solid #eee;
        border-radius: 6px;
      }

      .gallery-item {
        background-color: #fafafa;
        margin: 3px;
        border: 1px solid #eee;
      }

      .filter-query {
        --paper-input-container: {
          width: 180px;
          padding: 0;
        }
        --paper-input-container-label: {
          font-size: 13px;
        }
        --paper-input-container-input: {
          font-size: 13px;
        }
      }

      .profile-image {
        height: 78px;
        width: 78px;
        border-radius: 50%;
        border: 2px solid #f7f7f7;
      }

      .record-item {
        width: calc(33.333333% - 26px);
        border-radius: 6px;
        margin: 4px;
        border: 1px solid #eee;
        padding: 8px;
      }

      @media screen and (max-width: 640px) {
        .record-item {
          width: calc(100% - 16px);
        }
      }
    </style>


    <div class="master-container">

      <div class="limiting-container">

        <template is="dom-if" if="{{isPatientValid}}">

          <paper-card>
            <div class="card-content">


              <div class="horizontal layout wrap center">
                <iron-image class="profile-image m-right-8" src$="[[$getProfileImage(patient.profileImage)]]" preload="" sizing="cover"></iron-image>

                <div class="flex">
                  <div class="m-horizontal-4 horizontal layout center">
                    <div class="type body-lead capitalize">{{$getFullName(patient.name)}}</div>
                    <template is="dom-repeat" items="[[patient.policyList]]" as="policy">
                      <div class="m-left-8 type caption bg-gray">[[policy.number]]</div>
                    </template>
                  </div>
                  <div class="horizontal layout wrap type caption-2 secondary">

                    <template is="dom-if" if="[[!patient.isForOrganizationOnly]]">

                      <div class="m-horizontal-4">
                        <strong>Sex: </strong>
                        <span>{{patient.gender}}</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Age: </strong>
                        <span>[[$computeAge(patient.dateOfBirth)]] years </span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Blood Group: </strong>
                        <span> [[patient.bloodGroup]]</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Allergy: </strong>
                        <span>[[patient.allergy]] </span>
                      </div>
                    </template>

                    <template is="dom-if" if="[[patient.isForOrganizationOnly]]">
                      <div class="m-horizontal-4">
                        <strong>Patient Name: </strong>
                        <i>REDACTED FOR CONFIDENTIALITY</i>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Age: </strong>
                        <i>REDACTED FOR CONFIDENTIALITY</i>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Blood Group: </strong>
                        <span>[[patient.bloodGroup]]</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Allergy: </strong>
                        <span>[[patient.allergy]]</span>
                      </div>
                    </template>
                  </div>

                  <div class="layout horizontal m-4">
                    <div class="type secondary caption-2">Member Wallet:
                      <span class="type caption bold bg-gray">[[$toTwoDecimalPlace(patientWalletBalance)]]</span>
                    </div>
                  </div>

                </div>
              </div>

              <paper-button raised="" class="fixed-btn btn-add colored" on-tap="editPatientBtnPressed">Edit Patient</paper-button>
            </div>
          </paper-card>

          <iron-pages selected="[[selectedSubViewIndex]]" class="m-top-8">


            <section>
              <!-- Demography - start -->
              <template is="dom-if" if="{{$checkUserAccess('U0006')}}">
                <paper-card class="p-0 bg-white">

                  <div class="card-custom-header">
                    <div class="layout horizontal justified center">
                      <div class="title flex">[[$TRANSLATE('Demography',LANG)]]</div>
                      <paper-button on-tap="goPatientEditPage" raised="" class="btn-add colored">
                        <iron-icon icon="create" class="m-right-8"></iron-icon>Edit</paper-button>
                    </div>
                  </div>


                  <div class="type body">

                    <div class="type body-lead sub-header">Basic details</div>
                    <div class="vertical layout wrap p-12">

                      <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.nationalIdCardNumber)]]">
                        <strong>National ID: </strong>
                        <span>{{patient.nationalIdCardNumber}}</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Age: </strong>
                        <span>[[$computeAge(patient.dateOfBirth)]] years</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Sex: </strong>
                        <span>{{patient.gender}}</span>
                      </div>
                      <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.bloodGroup)]]">
                        <strong>Blood Group: </strong>
                        <span>{{patient.bloodGroup}}</span>
                      </div>
                      <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.allergy)]]">
                        <strong>Allergy: </strong>
                        <span>{{patient.allergy}}</span>
                      </div>
                      <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.patientSpouseName)]]">
                        <strong>Spouse Name: </strong>
                        <span>{{patient.patientSpouseName}}</span>
                      </div>
                      <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.patientFatherName)]]">
                        <strong>Father's Name: </strong>
                        <span>{{patient.patientFatherName}}</span>
                      </div>
                      <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.patientMotherName)]]">
                        <strong>Mother's Name: </strong>
                        <span>{{patient.patientMotherName}}</span>
                      </div>
                      <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.email)]]">
                        <strong>Email: </strong>
                        <span>{{patient.email}}</span>
                      </div>
                      <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.phone)]]">
                        <strong>Phone: </strong>
                        <span>{{patient.phone}}</span>
                      </div>
                      <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.expenditure)]]">
                        <strong>Expenditure: </strong>
                        <span>{{patient.expenditure}}</span>
                      </div>
                    </div>

                    <div class="type body-lead m-top-8 sub-header">Address</div>
                    <div class="p-12">
                      <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.addressLine1,patient.addressList.0.addressLine2)]]">
                        <strong>Address line: </strong>
                        <span>{{patient.addressList.0.addressLine1}}</span>
                        <span>, {{patient.addressList.0.addressLine2}}</span>
                      </div>
                      <div class="horizontal layout wrap">
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.addressDivision)]]">
                          <strong>Division: </strong>{{patient.addressList.0.addressDivision}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.addressDistrict)]]">
                          <strong>District: </strong>{{patient.addressList.0.addressDistrict}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.subdistrictName)]]">
                          <strong>Thana/Sub District: </strong>{{patient.addressList.0.subdistrictName}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.addressAreaName)]]">
                          <strong>Area: </strong>{{patient.addressList.0.addressAreaName}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.flat)]]">
                          <strong>Flat: </strong>{{patient.addressList.0.flat}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.floor)]]">
                          <strong>Floor: </strong>{{patient.addressList.0.floor}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.plot)]]">
                          <strong>Plot: </strong>{{patient.addressList.0.plot}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.block)]]">
                          <strong>Block: </strong>{{patient.addressList.0.block}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.road)]]">
                          <strong>Road: </strong>{{patient.addressList.0.road}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.village)]]">
                          <strong>Village: </strong>{{patient.addressList.0.village}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.addressUnion)]]">
                          <strong>Union: </strong>{{patient.addressList.0.addressUnion}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.addressPostalOrZipCode)]]">
                          <strong>Postal/Zip Code: </strong>{{patient.addressList.0.addressPostalOrZipCode}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.addressCityOrTown)]]">
                          <strong>City/Town: </strong>{{patient.addressList.0.addressCityOrTown}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.stateOrProvince)]]">
                          <strong>State/Province: </strong>{{patient.addressList.0.stateOrProvince}}</div>
                        <div class="m-horizontal-4" hidden$="[[_isEmptyString(patient.addressList.0.addressCountry)]]">
                          <strong>Country: </strong>{{patient.addressList.0.addressCountry}}</div>
                      </div>

                    </div>


                    <!-- Policy Info start -->
                    <div class="type body-lead m-top-8 sub-header">Policy Info</div>
                    <div class="p-12">
                      <paper-item style="border-bottom: 1px solid #ccc">
                        <div class="flex type bold">Number</div>
                        <div class="flex-2 type bold">Insurance Company</div>
                        <div class="flex type bold">Start Date</div>
                        <div class="flex type bold">End Date</div>
                        <div class="flex type bold">Action</div>
                      </paper-item>
                      <template is="dom-if" if="[[!patient.policyList.length]]">
                        <p class="layout vertical center type secondary">-- No Policy yet --</p>
                      </template>
                      <template is="dom-repeat" items="[[patient.policyList]]" as="policy">
                        <paper-item>
                          <div class="flex">[[policy.number]]</div>
                          <div class="flex-2">[[policy.insuranceProvider]]</div>
                          <div class="flex">[[policy.startDate]]</div>
                          <div class="flex">[[policy.endDate]]</div>
                          <div class="flex">
                            <paper-icon-button icon="create" on-tap="editPolicyClicked"></paper-icon-button>
                            <paper-icon-button icon="delete" on-tap="deletePolicyClicked"></paper-icon-button>
                          </div>
                        </paper-item>
                      </template>
                    </div>
                    <!-- Policy Info End -->

                    <!-- Employment Info start -->
                    <div class="type body-lead m-top-8 sub-header">Employment Info</div>
                    <div class="card-item vertical layout p-12">
                      <div class="m-horizontal-4">
                        <strong>Designation: </strong>
                        <span>[[patient.employmentInfo.currentPosition]]</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Department</strong>
                        <span>[[patient.employmentInfo.department]]</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Salary</strong>
                        <span>[[patient.employmentInfo.salary]]</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Joining Date</strong>
                        <span>[[patient.employmentInfo.joiningDate]]</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Termination Date</strong>
                        <span>[[patient.employmentInfo.terminationDate]]</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Institution Name</strong>
                        <span>[[patient.employmentInfo.institutionName]]</span>
                      </div>
                      <div class="m-horizontal-4">
                        <strong>Institution Address</strong>
                        <span>[[patient.employmentInfo.institutionAddres]]</span>
                      </div>

                    </div>
                    <!-- Employment Info end -->



                  </div>
                </paper-card>
              </template>
              <!-- Demography - end -->
            </section>

            <section>

              <!-- Diagnosis Start -->
              <template is="dom-if" if="{{$checkUserAccess('U0024')}}">
                <paper-card class="with-table">
                  <!--Custom Header-->
                  <div class="card-custom-header">
                    <div class="layout horizontal justified center">
                      <div class="title flex">[[$TRANSLATE('Confirmed Diagnosis',LANG)]]</div>
                    </div>
                  </div>
                  <!--Custom Header-->

                  <div class="card-content">
                    <table class="table">
                      <tbody><tr>
                        <th>Date</th>
                        <th>Diagnosis</th>
                        <th></th>
                      </tr>
                      <tr class="" hidden="[[!_isEmptyArray(confirmedDiagnosisList)]]">
                        <td colspan="2" class="type body secondary">-- no data available --</td>
                      </tr>
                      <template is="dom-repeat" items="[[confirmedDiagnosisList]]" sort="_sortByImportantDiagnosis" id="confirmed-diagnosis-list-repeater">
                        <tr>
                          <td>[[$formatDateTime(item.createdDatetimeStamp)]]</td>
                          <td class="flex">[[item.diagnosis]]</td>

                          <td>
                            <template is="dom-if" if="_compareFn(user.serial, '==', item.createdByUserSerial)">
                              <paper-icon-button icon="delete" on-click="deleteConfirmDiagnosis"></paper-icon-button>
                            </template>
                          </td>
                        </tr>
                      </template>
                    </tbody></table>
                  </div>
                  <div class="card-actions">
                    <paper-button raised="" class="colored" on-tap="newDiagnosisButtonClicked">New Diagnosis
                      <iron-icon class="icon medium-small m-left-8" icon="add"></iron-icon>
                    </paper-button>
                  </div>
                </paper-card>
              </template>

              <!-- Diagnosis End -->
            </section>

            <section>
              <!-- Medicine - start -->
              <template is="dom-if" if="{{$checkUserAccess('U0008')}}">
                <paper-card>

                  <!--Custom Header with Search-->
                  <div class="card-custom-header">
                    <div class="layout horizontal justified center">
                      <div class="title flex">[[$TRANSLATE('Medicine',LANG)]]</div>
                      <template is="dom-if" if="[[!_isEmptyArray(matchingCurrentMedicineList)]]">
                        <template is="dom-if" if="[[!_isEmptyArray(matchingOldMedicineList)]]">
                          <paper-icon-button icon="print" on-tap="printBothMedicinePressed"></paper-icon-button>
                          
                        </template>
                      </template>
                    </div>
                  </div>
                  <!--Custom Header with Search-->


                  <paper-tabs class="basic-tabs" selected="{{selectedMedicinePage}}">
                    <paper-tab>Current Medicine</paper-tab>
                    <paper-tab>Old Medicine</paper-tab>
                  </paper-tabs>

                  <iron-pages selected="{{selectedMedicinePage}}">
                    <!-- page - Current Medicine - start -->
                    <div>
                      <template is="dom-if" if="[[_isEmptyArray(matchingCurrentMedicineList)]]">
                        <div class="card-content layout horizontal center center-justified">
                          <div class="type body secondary">-- empty --</div>
                        </div>
                      </template>
                      <template is="dom-if" if="[[!_isEmptyArray(matchingCurrentMedicineList)]]">
                        <div class="p-horizontal-16 layout horizontal end-justified">
                          <paper-icon-button icon="print" on-tap="printCurrentMedicinePressed"></paper-icon-button>
                        </div>
                        <div class="p-0">
                          <paper-listbox>

                            <template id="current-medicine-list-repeater" is="dom-repeat" items="[[matchingCurrentMedicineList]]">
                              <paper-item class="custom layout horizontal center">
                                <div class="type caption secondary">[[_returnSerial(index)]]</div>
                                <div class="flex m-left-8">
                                  <div class="layout horizontal wrap center">

                                    <div class="flex">
                                      <div class="type body">{{item.data.brandName}} {{item.data.strength}}
                                        <span class="type caption bg-gray">[[item.data.manufacturer]]</span>
                                      </div>
                                      <div class="type caption italic secondary">{{item.data.genericName}} {{item.data.strength}}</div>
                                    </div>

                                    <div>
                                      <div class="type caption m-horizontal-4">
                                        <span hidden="[[!item.data.doseDirection]]">
                                          [[$TRANSLATE_NUMBER(item.data.doseDirection, LANG)]]</span>
                                        [[$TRANSLATE('for',LANG)]] [[_computeTotalDaysCount(item.data.endDateTimeStamp,item.data.startDateTimeStamp)]] [[$TRANSLATE('Days',LANG)]]
                                      </div>

                                      <div class="type caption m-horizontal-4">
                                        <span>By </span>
                                        <span class="text-cap">[[$TRANSLATE(item.data.route, LANG)]]</span>
                                        <span>[[$TRANSLATE(item.data.direction, LANG)]] </span>
                                      </div>
                                      <div class="type caption m-horizontal-4">[[item.data.comments]]</div>
                                    </div>

                                  </div>
                                </div>
                              </paper-item>
                            </template>

                          </paper-listbox>

                        </div>
                      </template>
                    </div>
                    <!-- /page - Current Medicine - end -->

                    <!-- page - Old Medicine - start -->
                    <div>
                      <template is="dom-if" if="[[_isEmptyArray(matchingOldMedicineList)]]">
                        <div class="card-content layout horizontal center center-justified">
                          <div class="type body secondary">-- empty --</div>
                        </div>
                      </template>

                      <template is="dom-if" if="[[!_isEmptyArray(matchingOldMedicineList)]]">
                        <div class="p-horizontal-16 layout horizontal end-justified">
                          <paper-icon-button icon="print" on-tap="printOldMedicinePressed"></paper-icon-button>
                        </div>
                        <div class="p-0">
                          <paper-listbox>

                            <template id="old-medicine-list-repeater" is="dom-repeat" items="[[matchingOldMedicineList]]">
                              <paper-item class="custom layout horizontal center">
                                <div class="type caption secondary">[[_returnSerial(index)]]</div>



                                <div class="flex m-left-8">
                                  <div class="layout horizontal wrap center">

                                    <div class="flex">
                                      <div class="type body">{{item.data.brandName}} {{item.data.strength}}
                                        <span class="type caption bg-gray">[[item.data.manufacturer]]</span>
                                      </div>
                                      <div class="type caption italic secondary">{{item.data.genericName}} {{item.data.strength}}</div>
                                    </div>

                                    <div>
                                      <div class="type caption secondary">Started: [[$formatDateTime(item.data.startDateTimeStamp)]]</div>
                                      <div class="type caption bold">Stopped: [[$formatDateTime(item.lastModifiedDatetimeStamp)]]</div>
                                    </div>

                                  </div>
                                </div>

                              </paper-item>
                            </template>

                          </paper-listbox>

                        </div>
                      </template>
                    </div>
                    <!-- page - Old Medicine - end -->
                  </iron-pages>
                </paper-card>
              </template>
              <!-- Medicine - end -->
            </section>

            <section>
              <!-- Vitals - start -->
              <template is="dom-if" if="{{$checkUserAccess('U0009')}}">
                <paper-card>
                  <!--Custom Header-->
                  <div class="card-custom-header">
                    <div class="layout horizontal justified center">
                      <div class="title flex">[[$TRANSLATE('Vitals',LANG)]]</div>
                      <!-- <paper-checkbox checked on-change="vitalsSyncCheckboxChanged">Sync</paper-checkbox> -->

                      <paper-button class="btn btn-success btn-sm" on-tap="showGraphPressed">
                        <iron-icon icon="refresh" class="m-right-8" raised=""></iron-icon>Refresh Graph</paper-button>

                    </div>
                  </div>
                  <!--Custom Header-->

                  <paper-tabs class="basic-tabs" selected="{{selectedVitalPage}}" scrollable="" on-iron-select="vitalTabChanges">
                    <paper-tab>BP</paper-tab>
                    <paper-tab>HR</paper-tab>
                    <paper-tab>BMI</paper-tab>
                    <paper-tab>RR</paper-tab>
                    <paper-tab>SpO2</paper-tab>
                    <paper-tab>Temp</paper-tab>
                  </paper-tabs>

                  <iron-pages selected="{{selectedVitalPage}}">

                    <!-- Page - Blood Pressure List - start-->

                    <div>
                      <div class="horizontal layout end-justified p-horizontal-16">
                        <custom-vital-search on-date-select="bloodPressureCustomSearchClicked" on-clear="bloodPressureSearchClearButtonClicked"></custom-vital-search>
                        <template is="dom-if" if="[[!_isEmptyArray(matchingVitalBloodPressureList)]]">
                          <paper-icon-button class="m-left-8" icon="print" on-tap="printVitalBPPressed"></paper-icon-button>
                        </template>
                      </div>


                      <template is="dom-if" if="[[_isEmptyArray(matchingVitalBloodPressureList)]]">
                        <div class="card-content layout horizontal center center-justified">
                          <div class="type body secondary">-- no data available --</div>
                        </div>
                      </template>
                      <template is="dom-if" if="[[!_isEmptyArray(matchingVitalBloodPressureList)]]">
                        <div class="p-0">
                          <paper-listbox>

                            <template id="vital-blood-pressure-list-repeater" is="dom-repeat" items="{{matchingVitalBloodPressureList}}" sort="" as="vital">
                              <paper-item class$="custom horizontal layout {{_getClassForFlaggedAsError(vital.data.flags.flagAsError)}}">
                                <div class="flex layout horizontal center wrap">
                                  <div class="type caption secondary">[[_returnSerial(index)]]</div>

                                  <div class="flex m-left-16">
                                    <div class="type caption">Systolic/Diastolic</div>
                                    <div class="type body">[[vital.data.systolic]]/[[vital.data.diastolic]] mm Hg</div>
                                    <div class="type caption secondary">[[$formatDateTime(vital.createdDatetimeStamp)]]</div>
                                  </div>
                                  <div class="type danger" hidden$="[[!vital.data.flags.flagAsError]]">
                                    Flagged as Error
                                  </div>

                                </div>


                                <paper-menu-button class="p-0" vertical-align="bottom" horizontal-align="right" hidden$="[[vital.data.flags.flagAsError]]">
                                  <paper-icon-button icon="icons:more-vert" class="dropdown-trigger" alt="options"></paper-icon-button>
                                  <paper-menu class="dropdown-content">
                                    <paper-item on-tap="flagAsErrorBloodPressureItemClicked">
                                      Flag as Error
                                    </paper-item>
                                    <!-- <paper-item on-tap="editBloodPressureItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:create" item-icon></iron-icon>
                                      Edit
                                    </paper-item> -->
                                    <!-- <paper-item on-tap="deleteBloodPressureItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:delete" item-icon></iron-icon>
                                      Delete
                                    </paper-item> -->
                                  </paper-menu>
                                </paper-menu-button>
                              </paper-item>
                            </template>

                          </paper-listbox>

                        </div>
                      </template>

                    </div>
                    <!-- Page - Blood Pressure - end-->

                    <!-- Page - Pulse Rate List - start-->
                    <div>
                      <div class="horizontal layout end-justified p-horizontal-16">
                        <custom-vital-search on-date-select="pulseRateCustomSearchClicked" on-clear="pulseRateSearchClearButtonClicked"></custom-vital-search>
                        <template is="dom-if" if="[[!_isEmptyArray(matchingVitalPulseRateList)]]">
                          <paper-icon-button class="m-left-8" icon="print" on-tap="printVitalPRPressed"></paper-icon-button>
                        </template>
                      </div>


                      <template is="dom-if" if="[[_isEmptyArray(matchingVitalPulseRateList)]]">
                        <div class="card-content layout horizontal center center-justified">
                          <div class="type body secondary">-- no data available --</div>
                        </div>
                      </template>
                      <template is="dom-if" if="[[!_isEmptyArray(matchingVitalPulseRateList)]]">
                        <div class="p-0">
                          <paper-listbox>

                            <template id="vital-pulse-rate-list-repeater" is="dom-repeat" items="{{matchingVitalPulseRateList}}" sort="" as="vital">
                              <paper-item class="custom layout horizontal">
                                <div class="flex layout horizontal center wrap">
                                  <div class="type caption secondary">[[_returnSerial(index)]]</div>
                                  <div class="m-left-16 flex">
                                    <div class="type body">Herat Rate: [[vital.data.bpm]] bpm</div>
                                    <div class="type caption secondary">[[$formatDateTime(vital.createdDatetimeStamp)]]</div>
                                  </div>
                                  <div class="type warning" hidden$="[[!vital.data.flags.flagAsError]]">
                                    Flagged as Error
                                  </div>
                                </div>


                                <paper-menu-button class="p-0" vertical-align="bottom" horizontal-align="right" hidden$="[[vital.data.flags.flagAsError]]">
                                  <paper-icon-button icon="icons:more-vert" class="dropdown-trigger" alt="options"></paper-icon-button>
                                  <paper-menu class="dropdown-content">
                                    <paper-item on-tap="flagAsErrorPulseRateItemClicked">
                                      Flag as Error
                                    </paper-item>
                                    <!-- <paper-item on-tap="editPulseRateItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:create" item-icon></iron-icon>
                                      Edit
                                    </paper-item> -->
                                    <!-- <paper-item on-tap="deletePulseRateItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:delete" item-icon></iron-icon>
                                      Delete
                                    </paper-item> -->
                                  </paper-menu>
                                </paper-menu-button>

                              </paper-item>
                            </template>

                          </paper-listbox>
                        </div>
                      </template>

                    </div>
                    <!-- Page - Pulse Rate List - end-->

                    <!-- Page - BMI List - start-->
                    <div>
                      <div class="horizontal layout end-justified p-horizontal-16">
                        <custom-vital-search on-date-select="BMICustomSearchClicked" on-clear="BMISearchClearButtonClicked"></custom-vital-search>
                        <template is="dom-if" if="[[!_isEmptyArray(matchingVitalBMIList)]]">
                          <paper-icon-button class="m-left-8" icon="print" on-tap="printVitalBMIPressed"></paper-icon-button>
                        </template>
                      </div>


                      <template is="dom-if" if="[[_isEmptyArray(matchingVitalBMIList)]]">
                        <div class="card-content layout horizontal center center-justified">
                          <div class="type body secondary">-- no data available --</div>
                        </div>
                      </template>
                      <template is="dom-if" if="[[!_isEmptyArray(matchingVitalBMIList)]]">
                        <div class="p-0">
                          <paper-listbox>

                            <template id="vital-bmi-list-repeater" is="dom-repeat" items="{{matchingVitalBMIList}}" sort="" as="vital">
                              <paper-item class="custom layout horizontal center">

                                <div class="flex layout horizontal center wrap">
                                  <div class="type caption secondary">[[_returnSerial(index)]]</div>
                                  <div class="m-left-16 flex">
                                    <div class="type body layout horizontal">
                                      <div>Height:
                                        <template is="dom-if" if="[[isHeightCmOrM(vital.data.heightUnit)]]">[[vital.data.height]] [[vital.data.heightUnit]]</template>
                                        <template is="dom-if" if="[[isHeightFtInch(vital.data.heightUnit)]]">[[vital.data.heightFt]] Ft [[vital.data.heightInch]] Inch</template>
                                      </div>

                                      <div>, Weight: [[vital.data.weight]] [[vital.data.weightUnit]]</div>

                                      <div>, BMI: [[vital.data.calculatedBmi]] - [[_calculateBMIVerdict(vital.data.calculatedBmi)]]</div>
                                    </div>
                                    <div class="type caption secondary">[[$formatDateTime(vital.createdDatetimeStamp)]]</div>
                                  </div>

                                  <div class="type warning" hidden$="[[!vital.data.flags.flagAsError]]">
                                    Flagged as Error
                                  </div>
                                </div>

                                <paper-menu-button class="p-0" vertical-align="bottom" horizontal-align="right" hidden$="[[vital.data.flags.flagAsError]]">
                                  <paper-icon-button icon="icons:more-vert" class="dropdown-trigger" alt="options"></paper-icon-button>
                                  <paper-menu class="dropdown-content">
                                    <paper-item on-tap="flagAsErrorBMIItemClicked">
                                      Flag as Error
                                    </paper-item>
                                    <!-- <paper-item on-tap="editBMIItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:create" item-icon></iron-icon>
                                      Edit
                                    </paper-item> -->
                                    <!-- <paper-item on-tap="deleteBMIItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:delete" item-icon></iron-icon>
                                      Delete
                                    </paper-item> -->
                                  </paper-menu>
                                </paper-menu-button>
                              </paper-item>
                            </template>

                          </paper-listbox>
                        </div>
                      </template>

                    </div>
                    <!-- Page - BMI - end-->

                    <!-- Page - Respiratory Rate List - start-->
                    <div>
                      <div class="horizontal layout end-justified p-horizontal-16">
                        <custom-vital-search on-date-select="respiratoryRateCustomSearchClicked" on-clear="respiratoryRateSearchClearButtonClicked"></custom-vital-search>
                        <template is="dom-if" if="[[!_isEmptyArray(matchingVitalRespiratoryRateList)]]">
                          <paper-icon-button class="m-left-8" icon="print" on-tap="printVitalRRPressed"></paper-icon-button>
                        </template>
                      </div>


                      <template is="dom-if" if="[[_isEmptyArray(matchingVitalRespiratoryRateList)]]">
                        <div class="card-content layout horizontal center center-justified">
                          <div class="type body secondary">-- no data available --</div>
                        </div>
                      </template>
                      <template is="dom-if" if="[[!_isEmptyArray(matchingVitalRespiratoryRateList)]]">
                        <div class="p-0">
                          <paper-listbox>

                            <template id="vital-respiratory-rate-list-repeater" is="dom-repeat" items="{{matchingVitalRespiratoryRateList}}" sort="" as="vital">
                              <paper-item class="custom layout horizontal center">
                                <div class="flex layout horizontal center">
                                  <div class="type caption secondary">[[_returnSerial(index)]]</div>
                                  <div class="m-left-16 flex">
                                    <div class="type body">RR: [[vital.data.respiratoryRate]] /min</div>
                                    <div class="type caption secondary">[[$formatDateTime(vital.createdDatetimeStamp)]]</div>
                                  </div>
                                </div>

                                <div class="type warning" hidden$="[[!vital.data.flags.flagAsError]]">
                                  Flagged as Error
                                </div>

                                <paper-menu-button class="p-0" vertical-align="bottom" horizontal-align="right" hidden$="[[vital.data.flags.flagAsError]]">
                                  <paper-icon-button icon="icons:more-vert" class="dropdown-trigger" alt="options"></paper-icon-button>
                                  <paper-menu class="dropdown-content">
                                    <paper-item on-tap="flagAsErrorRRItemClicked">
                                      Flag as Error
                                    </paper-item>
                                    <!-- <paper-item on-tap="editRespiratoryRateItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:create" item-icon></iron-icon>
                                      Edit
                                    </paper-item> -->
                                    <!-- <paper-item on-tap="deleteRespiratoryRateItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:delete" item-icon></iron-icon>
                                      Delete
                                    </paper-item> -->
                                  </paper-menu>
                                </paper-menu-button>
                              </paper-item>
                            </template>

                          </paper-listbox>
                        </div>
                      </template>

                    </div>
                    <!-- Page - Respiratory Rate List - end-->

                    <!-- Page - SpO2 List - start-->
                    <div>
                      <div class="horizontal layout end-justified p-horizontal-16">
                        <custom-vital-search on-date-select="spO2CustomSearchClicked" on-clear="spO2SearchClearButtonClicked"></custom-vital-search>
                        <template is="dom-if" if="[[!_isEmptyArray(matchingVitalSpO2List)]]">
                          <paper-icon-button class="m-left-8" icon="print" on-tap="printVitalSpo2Pressed"></paper-icon-button>
                        </template>
                      </div>


                      <template is="dom-if" if="[[_isEmptyArray(matchingVitalSpO2List)]]">
                        <div class="card-content layout horizontal center center-justified">
                          <div class="type body secondary">-- no data available --</div>
                        </div>
                      </template>
                      <template is="dom-if" if="[[!_isEmptyArray(matchingVitalSpO2List)]]">
                        <div class="p-0">
                          <paper-listbox>

                            <template id="vital-spo2-list-repeater" is="dom-repeat" items="{{matchingVitalSpO2List}}" sort="" as="vital">
                              <paper-item class="custom layout horizontal center">

                                <div class="flex layout horizontal center">
                                  <div class="type caption secondary">[[_returnSerial(index)]]</div>
                                  <div class="m-left-16 flex">
                                    <div class="type body">SpO2: [[vital.data.spO2Percentage]]%</div>
                                    <div class="type caption secondary">[[$formatDateTime(vital.createdDatetimeStamp)]]</div>
                                  </div>
                                </div>

                                <div class="type warning" hidden$="[[!vital.data.flags.flagAsError]]">
                                  Flagged as Error
                                </div>

                                <paper-menu-button class="p-0" vertical-align="bottom" horizontal-align="right" hidden$="[[vital.data.flags.flagAsError]]">
                                  <paper-icon-button icon="icons:more-vert" class="dropdown-trigger" alt="options"></paper-icon-button>
                                  <paper-menu class="dropdown-content">
                                    <paper-item on-tap="flagAsErrorSpO2ItemClicked">
                                      Flag as Error
                                    </paper-item>
                                    <!-- <paper-item on-tap="editSpO2ItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:create" item-icon></iron-icon>
                                      Edit
                                    </paper-item> -->
                                    <!-- <paper-item on-tap="deleteSpO2ItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:delete" item-icon></iron-icon>
                                      Delete
                                    </paper-item> -->
                                  </paper-menu>
                                </paper-menu-button>
                              </paper-item>
                            </template>

                          </paper-listbox>
                        </div>
                      </template>

                    </div>
                    <!-- Page - SpO2 List - end-->

                    <!-- Page - Temparature List - start-->
                    <div>
                      <div class="horizontal layout end-justified p-horizontal-16">
                        <custom-vital-search on-date-select="temperatureCustomSearchClicked" on-clear="temperatureSearchClearButtonClicked"></custom-vital-search>
                        <template is="dom-if" if="[[!_isEmptyArray(matchingVitalTemperatureList)]]">
                          <paper-icon-button class="m-left-8" icon="print" on-tap="printVitalTempPressed"></paper-icon-button>
                        </template>
                      </div>

                      <template is="dom-if" if="[[_isEmptyArray(matchingVitalTemperatureList)]]">
                        <div class="card-content layout horizontal center center-justified">
                          <div class="type body secondary">-- no data available --</div>
                        </div>
                      </template>
                      <template is="dom-if" if="[[!_isEmptyArray(matchingVitalTemperatureList)]]">
                        <div class="p-0">
                          <paper-listbox>

                            <template id="vital-temperature-list-repeater" is="dom-repeat" items="{{matchingVitalTemperatureList}}" sort="" as="vital">
                              <paper-item class="custom layout horizontal center">
                                <div class="flex layout horizontal center">
                                  <div class="type caption secondary">[[_returnSerial(index)]]</div>
                                  <div class="m-left-16 flex">
                                    <div class="type body">Temperature: [[vital.data.temperature]]C</div>
                                    <div class="type caption secondary">[[$formatDateTime(vital.createdDatetimeStamp)]]</div>
                                  </div>
                                </div>

                                <div class="type warning" hidden$="[[!vital.data.flags.flagAsError]]">
                                  Flagged as Error
                                </div>

                                <paper-menu-button class="p-0" vertical-align="bottom" horizontal-align="right" hidden$="[[vital.data.flags.flagAsError]]">
                                  <paper-icon-button icon="icons:more-vert" class="dropdown-trigger" alt="options"></paper-icon-button>
                                  <paper-menu class="dropdown-content">
                                    <paper-item on-tap="flagAsErrorTempItemClicked">
                                      Flag as Error
                                    </paper-item>
                                    <!-- <paper-item on-tap="editTemperatureItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:create" item-icon></iron-icon>
                                      Edit
                                    </paper-item> -->
                                    <!-- <paper-item on-tap="deleteTemperatureItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:delete" item-icon></iron-icon>
                                      Delete
                                    </paper-item> -->
                                  </paper-menu>
                                </paper-menu-button>
                              </paper-item>
                            </template>

                          </paper-listbox>
                        </div>
                      </template>

                    </div>
                    <!-- Page - Temparature List - end-->

                  </iron-pages>

                  <div class="card-actions">
                    <paper-button raised="" class="dropdown-trigger colored" alt="options" on-tap="_addVitalsButtonClicked">Add Vitals
                      <iron-icon class="icon medium-small m-left-8" icon="add"></iron-icon>
                    </paper-button>
                  </div>
                </paper-card>
              

                <!-- GRAPH AREA - START -->
                <paper-card class="m-top-8">

                  <div class="element-insertion-point">
                    <custom-graph></custom-graph>
                  </div>

                </paper-card>
                <!-- GRAPH AREA - END -->
              </template>
              <!-- Vitals - end -->
            </section>

            <section>
              <!-- Visit - start -->
              <template is="dom-if" if="{{$checkUserAccess('U00010')}}">
                <paper-card>
                  <!--Custom Header with Search-->
                  <div class="card-custom-header">
                    <div class="layout horizontal justified center wrap">
                      <div class="flex">
                        <div class="title">[[$TRANSLATE('Visits History',LANG)]]</div>
                      </div>
                      <div class="layout horizontal center search wrap">
                        <custom-vital-search on-date-select="visitCustomSearchClicked" on-clear="visitSearchClearButtonClicked"></custom-vital-search>
                      </div>
                    </div>
                  </div>

                  <paper-tabs class="basic-tabs" selected="{{selectedOldVisitRecordPage}}">
                    <paper-tab>[[$TRANSLATE('Visits',LANG)]]</paper-tab>
                    <paper-tab>[[$TRANSLATE('Next Visit',LANG)]]</paper-tab>
                  </paper-tabs>
                  <br>

                  <iron-pages selected="{{selectedOldVisitRecordPage}}">

                    <!-- visit and reports - start -->
                    <section class="p-16">

                      <table class="table">
                        <thead>
                          <tr>
                            <th>Serial</th>
                            <th>Record Type</th>
                            <th>Created Date</th>
                            <th>Created by</th>
                            <th>Organization/Hospital</th>
                            <th class="type text-right">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <template is="dom-if" if="[[_isEmptyArray(matchingVisitList)]]">
                            <tr>
                              <td colspan="6" class="text-center">
                                [[$TRANSLATE('No Data added yet',LANG)]]...
                              </td>
                            </tr>
                          </template>
                          <template id="visit-list-repeater" is="dom-repeat" items="[[matchingVisitList]]">
                            <tr class="type body">
                              <td>[[item.serial]]</td>
                              <td>{{_checkRecordTitle(item)}}</td>
                              <td>[[$formatDateTime(item.createdDatetimeStamp)]]</td>

                              <td>[[item.doctorName]]
                                <span>[[item.doctorSpeciality]]</span></td>
                              <td>[[item.hospitalName]]</td>
                              <td>
                                <div class="horizontal layout center end-justified">
                                  <template is="dom-if" if="[[!_compareFn(item.recordType, '==', 'anaesmon-record')]]">
                                    <paper-button class="btn-add colored" on-tap="viewVisitRecord">View</paper-button>
                                  </template>
                                  <template is="dom-if" if="[[_compareFn(item.recordType, '==', 'anaesmon-record')]]">
                                    <paper-menu-button class="p-0" vertical-align="bottom" horizontal-align="right">
                                      <paper-icon-button icon="icons:more-vert" class="dropdown-trigger" alt="options"></paper-icon-button>
                                      <paper-menu class="dropdown-content">
                                        <paper-item on-tap="preopPreviewButtonClicked">
                                          <iron-icon class="m-right-8" icon="icons:launch" item-icon=""></iron-icon>
                                          PreOP
                                        </paper-item>
                                        <paper-item on-tap="postopPreviewButtonClicked">
                                          <iron-icon class="m-right-8" icon="icons:launch" item-icon=""></iron-icon>
                                          Post Op
                                        </paper-item>
                                        <paper-item on-tap="opAnaesthesiaPreviewButtonClicked">
                                          <iron-icon class="m-right-8" icon="icons:launch" item-icon=""></iron-icon>
                                          Op Anaesthesia
                                        </paper-item>
                                        <paper-item on-tap="opSurgeryPreviewButtonClicked">
                                          <iron-icon class="m-right-8" icon="icons:launch" item-icon=""></iron-icon>
                                          Op Surgery
                                        </paper-item>
                                      </paper-menu>
                                    </paper-menu-button>
                                  </template>
                                  <template is="dom-if" if="[[!_compareFn(item.recordType, '==', 'anaesmon-record')]]">
                                    <div class="layout horizontal center">

                                      <template is="dom-if" if="[[!_isEmptyArray(item.testResults.attachmentSerialList)]]">
                                        <paper-icon-button icon="attachment" on-tap="viewTestResultsAttachemntsBtnPressed"></paper-icon-button>
                                      </template>

                                      <paper-menu-button class="p-0" vertical-align="bottom" horizontal-align="right">
                                        <paper-icon-button icon="icons:more-vert" class="dropdown-trigger" alt="options"></paper-icon-button>
                                        <paper-menu class="dropdown-content">
                                          <!-- <paper-item on-tap="viewVisitRecord">View</paper-item> -->
                                          <!-- <template is="dom-if" if="[[!_isEmptyArray(item.testResults.attachmentSerialList)]]">
                                                          <paper-item on-tap="viewTestResultsAttachemntsBtnPressed">View Attachment</paper-item>
                                                        </template> -->
                                          <template is="dom-if" if="[[_compareFn(item.recordTypeName, '==' ,'History &amp; Physical')]]">
                                            <paper-item on-tap="visitReportCopyBtnPressed">
                                              <iron-icon class="m-right-8" icon="icons:content-copy" item-icon=""></iron-icon>
                                              Copy History &amp; Physical
                                            </paper-item>
                                          </template>

                                          <!-- <paper-item on-tap="authorizeRecordPressed">
                                                          Authorize
                                                        </paper-item> -->

                                        </paper-menu>
                                      </paper-menu-button>



                                    </div>
                                  </template>
                                </div>
                              </td>

                            </tr>
                          </template>
                        </tbody>
                      </table>

                    </section>

                    <!-- visit and reports - end -->

                    <!-- next visit - start -->
                    <section class="p-8">
                      <table class="table">
                        <tbody><tr>
                          <th>Date Advised</th>
                          <th>Next Visit Date</th>
                          <th>Name of Doctor</th>
                          <th>Specialty</th>
                          <th>Priority</th>
                        </tr>
                        <template is="dom-if" if="[[_isEmptyArray(matchingNextVisitList)]]">
                          <tr>
                            <td colspan="5" class="text-center">
                              [[$TRANSLATE('No Data added yet',LANG)]]...
                            </td>
                          </tr>
                        </template>
                        <template id="next-visit-list-repeater" is="dom-repeat" items="[[matchingNextVisitList]]" sort="_sortByDate" filter="{{computeVisitFilter(searchString)}}">
                          <tr>
                            <td>
                              <span class="text-muted">[[$formatDateTime(item.createdDatetimeStamp)]]</span>
                            </td>
                            <td>[[$formatDateTime(item.data.nextVisitDateTimestamp)]]</td>

                            <td>[[item.doctorName]]</td>
                            <td>[[item.doctorSpeciality]]</td>
                            <td>[[item.data.priorityType]]</td>

                          </tr>
                        </template>
                      </tbody></table>
                    </section>
                    <!-- next visit - end -->
                  </iron-pages>

                </paper-card>
              </template>
              <!-- Visit - end -->
            </section>

            <!-- <Invoice Start> -->
            <section>
              <template is="dom-if" if="{{$checkUserAccess('U00011')}}">
                <paper-tabs class="" selected="{{selectedInvoiceView}}">
                  <paper-tab>Invoice</paper-tab>
                  <paper-tab>
                    <span id="pendingInvoieCount">Pending Invoice</span>
                    <paper-badge class="m-left-16" for="pendingInvoieCount" label="[[pendingInvoiceList.length]]" hidden="[[!pendingInvoiceList.length]]"></paper-badge>
                  </paper-tab>
                </paper-tabs>
                <iron-pages selected="{{selectedInvoiceView}}">

                  <!-- Invoice List Start -->
                  <paper-card>
                    <div class="card-custom-header">
                      <div class="layout horizontal center">
                        <div class="title flex">Invoice</div>
                        <paper-button class="btn btn-success" on-tap="createNewInvoiceButtonClicked">
                          <iron-icon icon="add"></iron-icon>
                          Create New Invoice</paper-button>
                      </div>
                    </div>
                    <div class="card-content">
                      <table class="table">
                        <thead>
                          <tr>
                            <th>Date</th>
                            <th>Visit Serial</th>
                            <th>Total Billed</th>
                            <th>Amt. Received</th>
                            <th>Due</th>
                            <th class="type text-right">Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <template is="dom-if" if="[[_isEmptyArray(invoiceList.length)]]">
                            <tr>
                              <td colspan="6">-- Empty --</td>
                            </tr>
                          </template>
                          <template id="invoice-list-repeater" is="dom-repeat" items="[[invoiceList]]" sort="_sortByCreatedDate">
                            <tr>
                              <td>[[$formatDateTime(item.createdDatetimeStamp)]]</td>
                              <td>[[getVisitSerial(item)]]</td>
                              <td>[[$toTwoDecimalPlace(item.totalBilled)]]
                                <span class="text-muted">BDT</span>
                              </td>
                              <td>[[$toTwoDecimalPlace(item.totalAmountReceieved)]]
                                <span class="text-muted">BDT</span>
                              </td>
                              <td>[[calculateDue(item.totalBilled, item.totalAmountReceieved)]]
                                <span class="text-muted">BDT</span>
                              </td>
                              <td class="type text-right">
                                <span class="type danger" hidden$="[[!item.flags.flagAsError]]">Flagged as Error</span>
                                <span class="type success" hidden$="[[!item.flags.markAsCompleted]]">Flagged as Completed</span>
                                <paper-menu-button id="invoiceMenuButton" class="p-0" vertical-align="bottom" horizontal-align="right" hidden$="[[item.flags.flagAsError]]" close-on-activate="">
                                  <paper-icon-button icon="icons:more-vert" class="dropdown-trigger" alt="options"></paper-icon-button>
                                  <paper-menu class="dropdown-content">
                                    <paper-item on-tap="previewInvoiceItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:launch" item-icon=""></iron-icon>
                                      Print Preview
                                    </paper-item>
                                    <!--Do not show if invoice is marked as Completed-->
                                    <template is="dom-if" if="[[!item.flags.markAsCompleted]]">
                                      <paper-item on-tap="editInvoiceItemClicked">
                                        <iron-icon class="m-right-8" icon="icons:create" item-icon=""></iron-icon>
                                        Edit
                                      </paper-item>
                                      <paper-item on-tap="invoiceMarkedAsCompleteButtonClicked">
                                        <iron-icon class="m-right-8" icon="icons:done" item-icon="" style="color: green"></iron-icon>
                                        Complete
                                      </paper-item>
                                      <div hidden="">[[item]]</div>
                                    </template>
                                    <paper-item on-tap="flagAsErrorInvoiceItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:info-outline" item-icon="" style="color: red"></iron-icon>
                                      Flag as Error
                                    </paper-item>
                                  </paper-menu>
                                </paper-menu-button>
                              </td>
                            </tr>
                          </template>
                        </tbody>
                        <tfoot>
                          <tr>
                            <td></td>
                            <td>Wallet:
                              <strong>25000</strong>
                            </td>
                            <td>Total Billed:
                              <strong>[[totalInvoiceBilled]]</strong>
                            </td>
                            <td>Total Received:
                              <strong>[[totalInvoiceIncome]]</strong>
                            </td>
                            <td>Total Due:
                              <strong>[[calculateDue(totalInvoiceBilled, totalInvoiceIncome)]]</strong>
                            </td>
                            <td>Remaining Balance:
                              <strong>[[$toTwoDecimalPlace(patientWalletBalance)]]</strong>
                            </td>
                          </tr>
                        </tfoot>
                      </table>

                    </div>
                  </paper-card>
                  <!-- Invoice end -->

                  <!-- Pending Invoice start -->

                  <paper-card>
                    <paper-progress inderminate="" hidden="[[!loadingCounter]]"></paper-progress>

                    <div class="card-content">

                      <template is="dom-if" if="[[_isEmptyArray(pendingInvoiceList.length)]]">
                        <div class="card-content layout horizontal center center-justified">
                          <div class="type body secondary">-- empty --</div>
                        </div>
                      </template>

                      <template is="dom-if" if="[[!_isEmptyArray(pendingInvoiceList.length)]]">
                        <paper-listbox>
                          <template is="dom-repeat" items="[[pendingInvoiceList]]">

                            <div class="p-16 b-top layout horizontal start">
                              <div class="flex-1">
                                <div class="m-right-8">Visit Serial:
                                  <span class="type bold">[[item.visitSerial]]</span>
                                </div>
                                <div class="type caption">Advised by: {{item.doctorName}}</div>
                                <div class="type caption">Date: [[$formatDateTime(item.createdDatetimeStamp)]]</div>
                              </div>
                              <ul class="flex-2">
                                <template is="dom-repeat" items="[[item.investigations]]" as="investigation">
                                  <li class="">{{investigation.data.investigationName}}</li>
                                </template>
                              </ul>
                              <div class="flex-1">
                                <paper-button raised="" class="btn btn-success" on-tap="makeNewInvoiceButtonClicked">
                                  <iron-icon class="m-right-8" icon="add"></iron-icon>
                                  Make Invoice
                                </paper-button>
                              </div>
                            </div>

                          </template>
                        </paper-listbox>
                      </template>

                    </div>
                  </paper-card>

                  <!-- Pending Invoice end -->

                </iron-pages>
              </template>
            </section>
            <!-- <Invoice End> -->

            <section>
              <template is="dom-if" if="{{$checkUserAccess('U00012')}}">
                <!-- Test - start -->
                <paper-card>

                  <!--Custom Header-->
                  <div class="card-custom-header">
                    <div class="layout horizontal justified center">
                      <div class="title flex">[[$TRANSLATE('Test Results',LANG)]]</div>
                      <paper-button class="btn btn-success btn-sm" on-tap="showGraphPressed">
                        <iron-icon icon="refresh" class="m-right-8" raised=""></iron-icon>Refresh Graph</paper-button>
                      <!-- <paper-checkbox checked on-change="testSyncCheckboxChanged">Sync</paper-checkbox> -->
                    </div>
                  </div>
                  <!--Custom Header-->

                  <paper-tabs class="basic-tabs" selected="{{selectedTestPage}}" scrollable="">
                    <paper-tab>Blood Sugar</paper-tab>
                    <paper-tab>Other Test</paper-tab>
                  </paper-tabs>

                  <iron-pages selected="{{selectedTestPage}}">

                    <!-- Page - Blood Sugar - start-->
                    <section>
                      <div class="horizontal layout center end-justified p-horizontal-16">
                        <paper-input label="Filter by Type" no-label-float="" value="{{bloodSugarSearchString}}" on-search="searchBloodSugar" type="search" class="filter-query"></paper-input>
                        <custom-vital-search on-date-select="bloodSugarCustomSearchClicked" on-clear="bloodSugarSearchClearButtonClicked"></custom-vital-search>
                        <template is="dom-if" if="[[!_isEmptyArray(matchingTestBloodSugarList)]]">
                          <paper-icon-button class="m-left-8" icon="print" on-tap="printTestBloodSugarPressed"></paper-icon-button>
                        </template>
                      </div>

                      <template is="dom-if" if="[[_isEmptyArray(matchingTestBloodSugarList)]]">
                        <div class="card-content layout horizontal center center-justified">
                          <div class="type body secondary">-- no data available --</div>
                        </div>
                      </template>
                      <template is="dom-if" if="[[!_isEmptyArray(matchingTestBloodSugarList)]]">
                        <div class="p-0">
                          <paper-listbox>

                            <template id="test-blood-sugar-list-repeater" is="dom-repeat" items="{{matchingTestBloodSugarList}}" sort="" as="test">
                              <paper-item class="custom layout horizontal center">
                                <div class="type caption secondary">[[_returnSerial(index)]]</div>
                                <div class="m-left-16 flex">
                                  <div class="type body">
                                    <div>
                                      <span class="type secondary">type:</span> {{test.data.type}}</div>
                                    <div>
                                      <span>{{test.data.value}} {{test.data.unit}}</span>
                                    </div>
                                  </div>
                                  <div class="type caption secondary layout vertical">
                                    <span>Created: [[$formatDateTime(test.createdDatetimeStamp)]]</span>
                                    <span>LastModified: [[$formatDateTime(test.lastModifiedDatetimeStamp)]]</span>
                                  </div>
                                </div>

                                <paper-menu-button class="p-0" vertical-align="bottom" horizontal-align="right">
                                  <paper-icon-button icon="icons:more-vert" class="dropdown-trigger" alt="options"></paper-icon-button>
                                  <paper-menu class="dropdown-content">
                                    <paper-item on-tap="editBloodSugarItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:create" item-icon=""></iron-icon>
                                      Edit
                                    </paper-item>
                                    <paper-item on-tap="deleteBloodSugarItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:delete" item-icon=""></iron-icon>
                                      Delete
                                    </paper-item>
                                  </paper-menu>
                                </paper-menu-button>
                              </paper-item>
                            </template>

                          </paper-listbox>
                        </div>
                      </template>

                      <div class="card-actions">
                        <paper-button raised="" class="btn-add colored" on-tap="addBloodSugarItemClicked">
                          <iron-icon icon="add" class="m-right-8"></iron-icon>Blood Sugar</paper-button>
                      </div>

                    </section>
                    <!-- Page - Blood Sugar - end-->

                    <!-- Page - Other Test - start-->
                    <section>

                      <div class="horizontal layout end-justified p-horizontal-16">
                        <paper-input label="Filter by Name" no-label-float="" value="{{otherTestSearchString}}"></paper-input>
                        <custom-vital-search on-date-select="otherTestCustomSearchClicked" on-clear="otherTestSearchClearButtonClicked"></custom-vital-search>
                        <template is="dom-if" if="[[!_isEmptyArray(matchingOtherTestList)]]">
                          <paper-icon-button class="m-left-8" icon="print" on-tap="printTestOtherPressed"></paper-icon-button>
                        </template>
                      </div>

                      <template is="dom-if" if="[[_isEmptyArray(matchingOtherTestList)]]">
                        <div class="card-content layout horizontal center center-justified">
                          <div class="type body secondary">-- no data available --</div>
                        </div>
                      </template>
                      <template is="dom-if" if="[[!_isEmptyArray(matchingOtherTestList)]]">
                        <div class="p-0">
                          <paper-listbox>

                            <template id="other-test-list-repeater" is="dom-repeat" items="{{matchingOtherTestList}}" filter="{{computeOtherTestFilter(otherTestSearchString)}}" sort="">
                              <paper-item class="custom layout horizontal center">

                                <div class="flex layout horizontal center">
                                  <div class="type caption secondary">[[_returnSerial(index)]]</div>
                                  <div class="m-left-16 flex">
                                    <div class="type body">{{item.data.name}}: {{item.data.result}} {{item.data.unit}} ({{item.data.institution}})</div>
                                    <div class="type caption secondary">Test Date: [[$formatDateTime(item.data.date)]]</div>
                                  </div>
                                </div>

                                <paper-menu-button class="p-0" vertical-align="bottom" horizontal-align="right">
                                  <paper-icon-button icon="icons:more-vert" class="dropdown-trigger" alt="options"></paper-icon-button>
                                  <paper-menu class="dropdown-content">
                                    <paper-item on-tap="editOtherTestItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:create" item-icon=""></iron-icon>
                                      Edit
                                    </paper-item>
                                    <paper-item on-tap="deleteOtherTestItemClicked">
                                      <iron-icon class="m-right-8" icon="icons:delete" item-icon=""></iron-icon>
                                      Delete
                                    </paper-item>
                                  </paper-menu>
                                </paper-menu-button>
                              </paper-item>
                            </template>

                          </paper-listbox>
                        </div>
                      </template>

                      <div class="card-actions">
                        <paper-button raised="" class="btn-add colored" on-tap="addOtherTestItemClicked">
                          <iron-icon icon="add" class="m-right-8"></iron-icon>Add Test</paper-button>
                      </div>

                    </section>
                    <!-- Page - Other Test - end-->
                  </iron-pages>

                </paper-card>
                <!-- Test - end -->

                <paper-card class="m-top-8" style="overflow-x: auto;">
                  <!-- GRAPH AREA - START -->

                  <div class="element-insertion-point2">
                    <custom-graph></custom-graph>
                  </div>

                  <!-- GRAPH AREA - END -->
                </paper-card>
              </template>
            </section>

            <section>
              <!-- Comments - start -->
              <template is="dom-if" if="{{$checkUserAccess('U00013')}}">
                <paper-card>
                  <!--Custom Header-->
                  <div class="card-custom-header">
                    <div class="layout horizontal justified center">
                      <div class="title flex">[[$TRANSLATE('Doctor Patient Notes',LANG)]]</div>
                      <!-- <paper-checkbox checked on-change="doctorPateintNotesSyncCheckboxChanged">Sync</paper-checkbox> -->
                    </div>
                  </div>
                  <!--Custom Header-->


                  <paper-tabs class="basic-tabs" selected="{{selectedCommentPage}}" scrollable="">
                    <paper-tab>Doctor</paper-tab>
                    <paper-tab>Patient</paper-tab>
                  </paper-tabs>

                  <iron-pages selected="{{selectedCommentPage}}">

                    <!-- Page - Doctor - start-->
                    <div>
                      <div class="add-comment-box">
                        <div class="form-group">
                          <div>
                            <paper-textarea label="Write a Comments" value="{{doctorCommentMessage.data.message}}"></paper-textarea>
                          </div>
                        </div>
                        <div class="layout horizontal end-justified m-top-8">
                          <paper-button class="colored" raised="" on-tap="addCommentButtonClicked">Send (5 BDT, Patient)
                            <iron-icon class="icon medium-small m-left-8" icon="send"></iron-icon>
                          </paper-button>
                        </div>
                      </div>

                      <template is="dom-if" if="[[_isEmptyArray(matchingDoctorCommentList)]]">
                        <div class="card-content layout horizontal center center-justified">
                          <div class="type body secondary">-- no data available --</div>
                        </div>
                      </template>

                      <template is="dom-if" if="[[!_isEmptyArray(matchingDoctorCommentList)]]">
                        <div class="p-0">
                          <paper-listbox>

                            <template id="doctor-comment-list-repeater" is="dom-repeat" items="{{matchingDoctorCommentList}}" sort="" as="comment">
                              <paper-item class="custom layout horizontal center">

                                <div class="flex layout horizontal center">
                                  <div class="type caption secondary">[[_returnSerial(index)]]</div>
                                  <div class="m-left-16 flex">
                                    <div class="type body">{{comment.data.message}}</div>
                                    <div class="type caption italic">{{comment.doctorName}}, {{comment.doctorSpeciality}}</div>
                                    <div class="type caption secondary">[[$formatDateTime(comment.createdDatetimeStamp)]]</div>
                                  </div>
                                </div>

                                <paper-icon-button icon="delete" on-tap="deleteUserCommentItemClicked"></paper-icon-button>
                              </paper-item>
                            </template>

                          </paper-listbox>
                        </div>
                      </template>
                    </div>
                    <!-- Page - Doctor - end-->


                    <!-- Page - Patient Comments - start-->
                    <div>
                      <template is="dom-if" if="[[_isEmptyArray(matchingPatientCommentList)]]">
                        <div class="card-content layout horizontal center center-justified">
                          <div class="type body secondary">-- no data available --</div>
                        </div>
                      </template>
                      <template is="dom-if" if="[[!_isEmptyArray(matchingPatientCommentList)]]">
                        <div class="p-0">
                          <paper-listbox>

                            <template id="patient-comment-list-repeater" is="dom-repeat" items="{{matchingPatientCommentList}}" sort="" as="comment">
                              <paper-item class="custom layout horizontal center">

                                <div class="flex layout horizontal center">
                                  <div class="type caption secondary">[[_returnSerial(index)]]</div>
                                  <div class="m-left-16 flex">
                                    <div class="type body">{{comment.data.message}}</div>
                                    <div class="type caption secondary">[[$formatDateTime(test.createdDatetimeStamp)]]</div>
                                  </div>
                                </div>

                              </paper-item>
                            </template>

                          </paper-listbox>
                        </div>
                      </template>

                    </div>
                    <!-- Page - Patient Comment - end-->
                  </iron-pages>

                </paper-card>
              </template>
              <!-- Comment - end -->
            </section>

            <section>
              <template is="dom-if" if="{{$checkUserAccess('U00014')}}">
                <!-- Gallery - start -->
                <paper-card class="custom-card">
                  <!--Custom Header-->
                  <div class="preview-title">
                    <paper-input class="flex input-custom-style" value="{{fileSearchString}}" label="Search gallery" placeholder="Type file name here..."></paper-input>
                    <div class="action-area">
                      <paper-button raised="" class="btn-add colored" on-tap="searchGalleryTapped">
                        <iron-icon icon="icons:search" class="m-right-8"></iron-icon>Search
                      </paper-button>

                    </div>
                  </div>


                  <template is="dom-if" if="[[matchingFileList.length]]">

                    <div class="gallery-results">
                      <template is="dom-repeat" items="[[matchingFileList]]" as="file" index-as="fileIndex">
                        <paper-button on-tap="fileItemClicked">
                          <div>
                            <div>
                              <img src$="{{_checkFileDataURI(file.dataURI)}}" alt="[[attachment.title]]" width="64" height="64">
                            </div>
                            <div class="type body">{{file.title}}</div>
                            <div class="type caption secondary">{{file.originalName}}</div>
                            <div class="type caption italic secondary">{{file.originalType}}</div>
                          </div>
                        </paper-button>
                      </template>
                    </div>
                  </template>
                </paper-card>

                <paper-card class="m-top-8">
                  <!--Custom Header-->
                  <div class="card-custom-header">
                    <div class="layout horizontal justified center">
                      <div class="title flex">[[$TRANSLATE('Upload',LANG)]]</div>
                      <!-- <paper-checkbox checked on-change="activityLogSyncCheckboxChanged">Sync</paper-checkbox> -->
                    </div>
                  </div>
                  <!--Custom Header-->

                  <div class="card-content">
                    <template is="dom-if" if="[[newAttachment]]">

                      <div class="horizontal layout wrap">
                        <div class="vertical layout center descriptive-area">
                          <template is="dom-if" if="[[newAttachment.isImage]]">
                            <img class="new-attachment-preview" src$="[[newAttachment.dataUri]]">
                          </template>
                          <template is="dom-if" if="[[!newAttachment.isImage]]">
                            <img class="new-attachment-preview" src="./../../assets/no-preview.png">
                          </template>
                          <paper-progress value="[[newAttachment.progress]]"></paper-progress>
                        </div>
                        <div class="vertical layout descriptive-area">
                          <paper-input class="logo-input" type="file" accept="*/*" on-change="fileInputChanged" no-ink=""></paper-input>

                          <template is="dom-if" if="[[newAttachment.isLoaded]]">

                            <paper-input label="Title" value="{{newAttachment.title}}"></paper-input>

                            <paper-input label="Description" value="{{newAttachment.description}}"></paper-input>

                            <paper-input readonly="" label="Space Needed" value="[[$toMega(newAttachment.sizeInChars)]]MB"></paper-input>

                            <div class="horizontal layout">
                              <div class="layout horizontal center" hidden$="[[!isUploading]]">
                                <paper-spinner style="margin-right: 10px;" active=""></paper-spinner>
                                <paper-button disabled="">UPLOADING...</paper-button>
                              </div>
                              <paper-button raised="" on-tap="uploadPressed" hidden$="[[isUploading]]">UPLOAD (5 to 20 BDT)</paper-button>
                              <paper-button raised="" on-tap="saveLocallyPressed">SAVE LOCALLY</paper-button>
                              <paper-button raised="" on-tap="keepUntilBrowserClosedPressed">KEEP UNTIL BROWSER IS CLOSED</paper-button>
                            </div>

                          </template>
                        </div>
                      </div>

                    </template>

                    <!-- <div class="layout horizontal center" hidden$="[[!isDownloading]]">
                      <paper-spinner active></paper-spinner>
                      <span class="text-muted"> &nbsp; &nbsp; Loading Images...</span>
                    </div> -->
                    <!-- <template is="dom-if" if="[[attachmentList]]">
                      <div class="attachment-card-list horizontal layout wrap">
                        
                        <template is="dom-repeat" items="[[attachmentList]]" as="attachment" index-as="attachmentIndex">
                          <paper-material elevation="1">
                            <div class="attachment-card vertical layout">
                              <img class="image" src$="[[$getImageSrc(attachment)]]" hidden$="[[!attachment.isImage]]"/>
                              <div class="footer">
                                <div class="title horizontal layout center">
                                  <div class="flex">[[attachment.title]]</div>
                                  <paper-icon-button on-tap="downloadPressed" icon="file-download"></paper-icon-button>
                                  <paper-icon-button on-tap="deletePressed" icon="delete"></paper-icon-button>
                                </div>
                              </div>
                            </div>
                          </paper-material>
                        </template>

                      </div>
                    </template> -->
                  </div>

                  <div class="card-actions">
                    <div class="usage horizontal layout around-justified center">
                      <div class="vertical layout">
                        <div class="title">[[localDataUsedPercentage]]%</div>
                        <paper-progress value="[[localDataUsedPercentage]]"></paper-progress>
                      </div>
                      <div>You are currently using [[localDataUsedPercentage]]% of your local store capacity for images.</div>
                    </div>
                  </div>

                </paper-card>
              </template>
              <!-- Gallary - end -->
            </section>

            <section>
              <!--Activity Log Start-->
              <template is="dom-if" if="{{$checkUserAccess('U00015')}}">
                <paper-card>
                  <!--Custom Header-->
                  <div class="card-custom-header">
                    <div class="layout horizontal justified center">
                      <div class="title flex">[[$TRANSLATE('Activity Log',LANG)]]</div>
                      <!-- <paper-checkbox checked on-change="activityLogSyncCheckboxChanged">Sync</paper-checkbox> -->
                    </div>
                  </div>
                  <!--Custom Header-->

                  <div class="card-content activity-log">
                    <paper-listbox>
                      <template is="dom-repeat" items="[[activityLogs]]" sort="_sortByDate">
                        <paper-item class="layout horizontal">
                          <div class="text-mute m-right-16">[[$formatDateTime(item.lastModifiedDatetimeStamp)]]</div>
                          <div class="flex">[[item.doctorName]] has [[item.action]]ed [[item.subject]]</div>
                        </paper-item>
                      </template>
                    </paper-listbox>
                  </div>

                </paper-card>

                <paper-card heading="Transaction List" class="m-top-8">
                  <div class="card-content">
                    <paper-progress inderminate="" hidden="[[!loadingCounter]]"></paper-progress>
                    <table class="table">
                      <template is="dom-repeat" items="[[transactionList]]" sort="_sortByCreatedDate">
                        <tr>
                          <td class="text-mute">[[$formatDateTime(item.createdDatetimeStamp)]]</td>
                          <td class="">[[item.serial]]</td>
                          <td class="">[[$toTwoDecimalPlace(item.amount)]] BDT</td>
                        </tr>
                      </template>
                      <tbody><tr>
                        <th></th>
                        <th></th>
                        <th>Total : [[$toTwoDecimalPlace(totalTransaction)]]</th>
                      </tr>
                    </tbody></table>
                  </div>
                </paper-card>

              </template>


              <!--Activity Log End-->
            </section>

            <!-- Leave Info -->
            <section>
              <template is="dom-if" if="{{$checkUserAccess('U00016')}}">
                <paper-card heading="Employee Leave Info">
                  <div class="card-content">
                    <div class="m-vertical-16 layout horizontal wrap start">
                      <vaadin-date-picker class="m-left-8" label="From Date" value="{{leaveFromDate}}"></vaadin-date-picker>
                      <vaadin-date-picker class="m-left-8" label="End Date" value="{{leaveToDate}}" min="{{leaveFromDate}}"></vaadin-date-picker>
                      <paper-dropdown-menu class="m-left-8" label="Reason">
                        <paper-listbox class="dropdown-content" selected="{{sickReasonSelectedIndex}}">
                          <template is="dom-repeat" items="[[sickReasonList]]">
                            <paper-item>{{item}}</paper-item>
                          </template>
                        </paper-listbox>
                      </paper-dropdown-menu>
                      <paper-button class="btn btn-primary" on-tap="leaveInfoAddedButtonClicked">Add</paper-button>
                    </div>
                    <div class="m-vertical-16">
                      <paper-tabs selected="{{selectedLeaveView}}">
                        <paper-tab>View All</paper-tab>
                        <paper-tab>Month View</paper-tab>
                        <paper-tab>Year View</paper-tab>
                      </paper-tabs>
                      <iron-pages selected="{{selectedLeaveView}}">
                        <!-- all view -->
                        <section>
                          <paper-listbox>
                            <template is="dom-repeat" items="[[leaveData.data]]">
                              <paper-item>
                                <div class="flex">From: [[$formatDateTime(item.startDate)]]</div>
                                <div class="flex">To: [[$formatDateTime(item.endDate)]]</div>
                                <div class="flex">Reason [[item.reason]]</div>
                                <paper-icon-button icon="delete" on-tap="deleteLeaveInfoClicked"></paper-icon-button>
                              </paper-item>
                            </template>
                          </paper-listbox>
                        </section>

                        <!-- by month view -->
                        <section>
                          <paper-listbox>
                            <template is="dom-repeat" items="[[getLeaveCountByMonthYear(leaveData.data)]]">
                              <paper-item>
                                <div class="flex">[[getMonthYearString(item.monthYear)]]</div>
                                <div class="flex">[[item.leaveCount]] Days</div>
                              </paper-item>
                            </template>
                          </paper-listbox>
                        </section>

                        <!-- by year view -->
                        <section>
                          <paper-listbox>
                            <template is="dom-repeat" items="[[getLeaveCountByYear(leaveData.data)]]">
                              <paper-item>
                                <div class="flex">[[item.year]]</div>
                                <div class="flex">[[item.leaveCount]] Days</div>
                              </paper-item>
                            </template>
                          </paper-listbox>
                        </section>


                      </iron-pages>

                    </div>
                  </div>

                </paper-card>
              </template>
            </section>

          </iron-pages>

          


        </template>
        <paper-dialog id="newDiagnosisInputModal" on-iron-overlay-closed="diagnosisModalConfirm">
          <paper-autocomplete label="Diagnosis Name" text="{{confirmedDiagnosisModalValue}}" source="[[diagnosisDataList]]"></paper-autocomplete>
          <div class="buttons">
            <paper-button dialog-dismiss="">Cancel</paper-button>
            <paper-button dialog-confirm="" autofocus="">Add</paper-button>
          </div>
        </paper-dialog>
      </div>
    </div>

  </template>
  <script>(function(){window.__SOURAV_MIXIN_graphMixin={_generatePointList_temperature:function(){var e,t,a,i,r,n,m;for(n=[],m=this.matchingVitalTemperatureList,t=e=0,i=m.length;e<i;t=++e)a=m[t],r={originalCreatedDatetimeStamp:a.createdDatetimeStamp,datetimeStamp:1e3*(2+5*t)*60,magnitude:parseInt(a.data.temperature),key:"CVP",extraDataObject:{}},n.push(r);return n},_generatePointList_oxygenSaturation:function(){var e,t,a,i,r,n,m;for(n=[],m=this.matchingVitalSpO2List,t=e=0,i=m.length;e<i;t=++e)a=m[t],r={originalCreatedDatetimeStamp:a.createdDatetimeStamp,datetimeStamp:1e3*(2+5*t)*60,magnitude:parseInt(a.data.spO2Percentage),key:"CVP",extraDataObject:{}},n.push(r);return n},_generatePointList_respiratoryRate:function(){var e,t,a,i,r,n,m;for(n=[],m=this.matchingVitalRespiratoryRateList,t=e=0,i=m.length;e<i;t=++e)a=m[t],r={originalCreatedDatetimeStamp:a.createdDatetimeStamp,datetimeStamp:1e3*(2+5*t)*60,magnitude:parseInt(a.data.respiratoryRate),key:"CVP",extraDataObject:{}},n.push(r);return n},_generatePointList_bmi:function(){var e,t,a,i,r,n,m;for(n=[],m=this.matchingVitalBMIList,t=e=0,i=m.length;e<i;t=++e)a=m[t],r={originalCreatedDatetimeStamp:a.createdDatetimeStamp,datetimeStamp:1e3*(2+5*t)*60,magnitude:parseInt(a.data.height),key:"Vapor",extraDataObject:{}},n.push(r),r={originalCreatedDatetimeStamp:a.createdDatetimeStamp,datetimeStamp:1e3*(2+5*t)*60,magnitude:parseInt(a.data.weight),key:"CVP",extraDataObject:{}},n.push(r),r={originalCreatedDatetimeStamp:a.createdDatetimeStamp,datetimeStamp:1e3*(2+5*t)*60,magnitude:parseInt(a.data.calculatedBMI),key:"Pulse",extraDataObject:{}},n.push(r);return n},_generatePointList_heartRate:function(){var e,t,a,i,r,n,m;for(n=[],m=this.matchingVitalPulseRateList,t=e=0,i=m.length;e<i;t=++e)a=m[t],r={originalCreatedDatetimeStamp:a.createdDatetimeStamp,datetimeStamp:1e3*(2+5*t)*60,magnitude:parseInt(a.data.bpm),key:"Pulse",extraDataObject:{}},n.push(r);return n},_generatePointList_bloodPressure:function(){var e,t,a,i,r,n,m;for(n=[],m=this.matchingVitalBloodPressureList,t=e=0,i=m.length;e<i;t=++e)a=m[t],r={originalCreatedDatetimeStamp:a.createdDatetimeStamp,datetimeStamp:1e3*(2+5*t)*60,magnitude:parseInt(a.data.diastolic),key:"BPD",extraDataObject:{}},n.push(r),r={originalCreatedDatetimeStamp:a.createdDatetimeStamp,datetimeStamp:1e3*(2+5*t)*60,magnitude:parseInt(a.data.systolic),key:"BPS",extraDataObject:{}},n.push(r);return n},_generatePointList_bloodSugar:function(){var e,t,a,i,r,n,m,s,o;for(s=[],o=this.matchingTestBloodSugarList,t=e=0,r=o.length;e<r;t=++e){switch(a=o[t],a.data.type){case"after-meal":n=a.data.value,i="Vapor";break;case"before-meal":n=a.data.value,i="CVP";break;case"random":n=a.data.value,i="Pulse"}m={originalCreatedDatetimeStamp:a.createdDatetimeStamp,datetimeStamp:1e3*(2+5*t)*60,magnitude:parseInt(n),key:i,extraDataObject:{}},s.push(m),m={originalCreatedDatetimeStamp:a.createdDatetimeStamp,datetimeStamp:1e3*(2+5*t)*60,magnitude:parseInt(a.data.systolic),key:"BPS",extraDataObject:{}},s.push(m)}return s},_generatePointList_otherTest:function(){var e,t,a,i,r,n,m;for(n=[],m=this.matchingOtherTestList,t=e=0,i=m.length;e<i;t=++e)a=m[t],r={originalCreatedDatetimeStamp:a.createdDatetimeStamp,datetimeStamp:1e3*(2+5*t)*60,magnitude:parseInt(a.data.result),key:"Pulse",extraDataObject:{}},n.push(r);return n},showGraphPressed:function(e){return lib.util.delay(100,function(e){return function(){var t,a,i,r,n,m,s,o,d,l,p,g,u,c,h,S;if(4===e.selectedSubViewIndex)for(0===e.selectedTestPage?u=e._generatePointList_bloodSugar():1===e.selectedTestPage&&(u=e._generatePointList_otherTest()),p=e.$$(".element-insertion-point2"),c=Array.from(p.childNodes),r=0,s=c.length;r<s;r++)t=c[r],p.removeChild(t);else for(0===e.selectedVitalPage?u=e._generatePointList_bloodPressure():1===e.selectedVitalPage?u=e._generatePointList_heartRate():2===e.selectedVitalPage?u=e._generatePointList_bmi():3===e.selectedVitalPage?u=e._generatePointList_respiratoryRate():4===e.selectedVitalPage?u=e._generatePointList_oxygenSaturation():5===e.selectedVitalPage&&(u=e._generatePointList_temperature()),p=e.$$(".element-insertion-point"),h=Array.from(p.childNodes),n=0,o=h.length;n<o;n++)t=h[n],p.removeChild(t);for(l=1,S=(new Date).getTime(),i=(new Date).getTime()+864e5,m=0,d=u.length;m<d;m++)g=u[m],g.magnitude>l&&(l=g.magnitude),g.originalCreatedDatetimeStamp<S&&(S=g.originalCreatedDatetimeStamp),g.originalCreatedDatetimeStamp>i&&(i=g.originalCreatedDatetimeStamp);return a=document.createElement("custom-graph"),a.setTimeRange(S,i),a.setCurrentTime(S),a.yAxisMaxValue=Math.ceil(l+0*(10*l/100)),a.setPointList(u),a.computeExternalOptions(),p.appendChild(a)}}(this))}}}).call(this);
//# sourceMappingURL=graph-mixin.coffee-compiled.js.map</script>
  <script>(function(){var t,e={}.hasOwnProperty;t=function(t){var e,i,a,r,n,s;for(a=atob(t.split(",")[1]),s=t.split(",")[0].split(":")[1].split(";")[0],e=new ArrayBuffer(a.length),n=new Uint8Array(e),r=0;r<a.length;)n[r]=a.charCodeAt(r),r++;return i=new Blob([e],{type:s})},Polymer({is:"page-patient-viewer",behaviors:[app.behaviors.commonComputes,app.behaviors.dbUsing,app.behaviors.translating,app.behaviors.pageLike,app.behaviors.apiCalling,__SOURAV_MIXIN_graphMixin],properties:{selectedOldVisitRecordPage:{type:Number,notify:!0,value:0},selectedSubViewIndex:{type:Number,notify:!0,value:0},isPatientValid:{type:Boolean,notify:!1,value:!0},user:{type:Object,notify:!0,value:null},patient:{type:Object,notify:!0,value:null},doctorCommentMessage:{type:Object,notify:!0,value:{}},matchingVisitList:{type:Array,notify:!0,value:[]},modifiedVisitList:{type:Array,notify:!0,value:[]},matchingCurrentMedicineList:{type:Array,notify:!0,value:[]},matchingOldMedicineList:{type:Array,notify:!0,value:[]},matchingVitalBloodPressureList:{type:Array,notify:!0,value:[]},matchingVitalPulseRateList:{type:Array,notify:!0,value:[]},matchingVitalBMIList:{type:Array,notify:!0,value:[]},matchingVitalRespiratoryRateList:{type:Array,notify:!0,value:[]},matchingVitalSpO2List:{type:Array,notify:!0,value:[]},matchingVitalTemperatureList:{type:Array,notify:!0,value:[]},matchingCommentHistoryList:{type:Array,notify:!0,value:[]},matchingTestBloodSugarList:{type:Array,notify:!0,value:[]},matchingOtherTestList:{type:Array,notify:!0,value:[]},matchingPatientCommentList:{type:Array,notify:!0,value:[]},matchingDoctorCommentList:{type:Array,notify:!0,value:[]},attachmentList:{type:Array,notify:!1,value:function(){return[]}},newAttachment:{type:Object,notify:!1,value:null},localDataUriDb:{type:Object,value:null},maximumImageSizeAllowedInBytes:{type:Number,value:1e7},maximumLocalDataUriDbSizeInChars:{type:Number,value:2e6},localDataUsedPercentage:{type:Number,value:0},currentDateFilterStartDate:{type:Number},currentDateFilterEndDate:{type:Number},isDownloading:{type:Boolean,value:!1},isUploading:{type:Boolean,value:!1},toAuthorizeIndex:{type:Number,value:null},toAuthorizePccIndex:{type:Number,value:null},toAuthorizeNdrIndex:{type:Number,value:null},organizationsIBelongToList:{type:Array,value:function(){return[]}},authorizeToSelectedIndex:{type:Number,value:null},confirmedDiagnosisList:{type:Array,value:[]},activityLogs:{type:Array,value:function(){return[]}},matchingNextVisitList:{type:Array,notify:!0,value:[]},visitDiagnosis:{type:Array,notify:!0,value:[]},matchingPccRecordList:{type:Array,notify:!0,value:function(){return[]}},matchingNdrRecordList:{type:Array,notify:!0,value:function(){return[]}},sickReasonSelectedIndex:{type:Number,value:function(){return 0}},leaveData:{type:Object,value:function(){return{}}},sickReasonList:{type:Array,value:["Sick","Personal","Injury","Others"]},leaveData:{type:Object,value:function(){return{data:[]}}},monthList:{type:Array,value:function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}},selectedLeaveView:{type:Number,value:function(){return 0}},viewLeaveDetails:{type:Array,value:function(){return[]}},invoiceList:{type:Array,value:[]},selectedInvoiceView:{type:Number,value:function(){return 0}},loadingCounter:{type:Number,value:function(){return 0}},pendingInvoiceList:{type:Array,value:function(){return[]}},selectedTestListForInvoice:{type:Array,value:function(){return[]}},patientWalletBalance:Number,totalInvoiceIncome:{type:Number,computed:"_calculateTotalInvoiceIncome(invoiceList)"},totalInvoiceBilled:{type:Number,computed:"_computedTotalInvoiceBilled(invoiceList)"},transactionList:{type:Array,value:function(){return[]}},totalTransaction:{type:Number,computed:"_computedTotalTransactionBalance(transactionList)"}},arrowBackButtonPressed:function(t){return this.domHost.setSelectedVisitSerial("new"),this.domHost.navigateToPage("#/patient-manager")},$findCreator:function(t){return"me"},_isEmptyString:function(t){return null===t||"undefined"===t||""===t},_compareFn:function(t,e,i){return"<"===e?t<i:">"===e?t>i:"=="===e?t===i:">="===e?t>=i:"<="===e?t<=i:void 0},_isEmptyArray:function(t){return 0===(null!=t?t.length:void 0)},_computeTotalDaysCount:function(t,e){var i,a,r;return t&&e?(a=864e5,e=new Date(e),t=new Date(t),i=t-e,r=Math.round(i/a),this.$TRANSLATE_NUMBER(r,this.LANG)):this.$TRANSLATE_NUMBER(1,this.LANG)},_sortByCreatedDate:function(t,e){return e.createdDatetimeStamp-t.createdDatetimeStamp},_sortByDate:function(t,e){return t.date<e.date?1:t.date>e.date?-1:void 0},_returnSerial:function(t){return t+1},getDoctorSpeciality:function(){if(0!==this.user.specializationList.length)return this.user.specializationList[0].specializationTitle},_loadPatient:function(t){var e,i;return e=app.db.find("patient-list",function(e){var i;return i=e.serial,i===t}),1!==e.length?this._notifyInvalidPatient():(this.isPatientValid=!0,i=e[0],i.employmentInfo=i.employmentDetailsList[0]||{},this.set("patient",i),void 0)},_loadUser:function(){var t;if(t=app.db.find("user"),1===t.length)return this.user=t[0]},_notifyInvalidPatient:function(){return this.isPatientValid=!1,this.domHost.showModalDialog("Invalid Patient Provided")},searchGalleryTapped:function(t){var e;return e={apiKey:this.user.apiKey,searchString:this.fileSearchString,userId:this.user.idOnServer,patientId:this.patient.serial},this.callApi("/bdemr-patient-file-search",e,function(t){return function(e,i){return i.hasError?t.domHost.showModalDialog(i.error.message):t.matchingFileList=i.data.matchingFileList}}(this))},deleteConfirmDiagnosis:function(t){var e,i,a,r;return i=this.locateParentNode(t.target,"PAPER-ICON-BUTTON"),i.opened=!1,r=this.$$("#confirmed-diagnosis-list-repeater"),a=r.indexForElement(i),e=this.confirmedDiagnosisList[a],this.domHost.showModalPrompt("Are you sure?",function(t){return function(i){var a;if(i===!0)return a=app.db.find("visit-diagnosis",function(t){var i;return i=t.serial,i===e.serial})[0]._id,app.db.remove("visit-diagnosis",a),app.db.insert("visit-diagnosis--deleted",{serial:e.serial}),t.domHost.showToast("Confirmed Diagnosis Deleted!"),t._listConfirmedDiagnosis(t.patient.serial)}}(this))},_checkFileDataURI:function(t){return""===t?"assets/no-preview.png":t},goPatientEditPage:function(){return this.domHost.navigateToPage("#/patient-editor/patient:"+this.patient.serial)},goPreconceptionRecordEditPage:function(){return this.domHost.navigateToPage("#/preconception-record/patients:"+this.patient.serial)},goToPreconceptionRecordPreviewPage:function(){return this.domHost.navigateToPage("#/preview-preconception-record/patients:"+this.patient.serial)},loadPatientPccRecords:function(t){var e;return e=app.db.find("pcc-records",function(e){var i;return i=e.patientSerial,i===t}),e.length>0&&e.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),this.matchingPccRecordList=e,this.checkIfPatientHaveDiabeticsOrNot()},loadPatientNdrRecords:function(t){var e;return e=app.db.find("ndr-records",function(e){var i;return i=e.patientSerial,i===t}),e.length>0&&e.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),this.matchingNdrRecordList=e},checkIfPatientHaveDiabeticsOrNot:function(){var t,e,i,a,r,n,s,o,l,c;if(n=["Known Diabetes","DM","KNOWN DIABETES"],this.matchingPccRecordList.length>0)for(s=this.matchingPccRecordList,e=0,a=s.length;e<a;e++)for(t=s[e],i=0,r=n.length;i<r;i++)if(c=n[i],null!=(null!=(o=t.clinical)&&null!=(l=o.pregnancyInfo)?l.glycemicStatus:void 0)===c)return void localStorage.setItem("currentPatientGlycemicStatus",c)},_callBDEMRPatientDetailsUpdateApi:function(t){var e;return e={patient:t,apiKey:this.user.apiKey},this.callApi("/bdemr-patient-details-update",e,function(t){return function(e,i){return i.hasError?t.domHost.showModalDialog(i.error.message):t.domHost.showToast("Patient Updated!")}}(this))},formatDate:function(t){var e,i,a;return i=t.getMonth(),e=t.getDate().toString(),a=t.getFullYear(),a=a.toString().substr(-2),i=(i+1).toString(),1===i.length&&(i="0"+i),1===e.length&&(e="0"+e),e+i+ +a},generateRandomString:function(t){var e,i,a,r,n,s,o,l,c,d;for(c="",e=[],a=r=0;r<=25;a=++r)e.push(String.fromCharCode("a".charCodeAt()+a));for(a=n=0;n<=25;a=++n)e.push(String.fromCharCode("A".charCodeAt()+a));for(a=s=0;s<=9;a=++s)e.push(String.fromCharCode("0".charCodeAt()+a));for(o=e.length,a=l=1,d=t;1<=d?l<=d:l>=d;a=1<=d?++l:--l)i=Math.floor(10000363*Math.random())%10000019,i%=o,c+=e[i];return c},generateRandomNumericString:function(t){var e,i,a,r,n,s,o,l;for(o="",e=[],a=r=0;r<=9;a=++r)e.push(String.fromCharCode("0".charCodeAt()+a));for(s=e.length,a=n=1,l=t;1<=l?n<=l:n>=l;a=1<=l?++n:--n)i=Math.floor(10000363*Math.random())%10000019,i%=s,o+=e[i];return o},generatedRecordSpecificRandomPatientId:function(t){var e,i,a,r,n,s;return s=this.generateRandomString(6),n=this.generateRandomNumericString(4),r=lib.datetime.now(),e=new Date,i=this.formatDate(e),a=s+"-"+i+"-"+t+"-"+n},checkForRecordSpecificPatientId:function(t,e){var i,a,r,n,s,o;if(o=[],s=!1,"undefined"==typeof this.patient.recordSpecificPatientIdList||null===this.patient.recordSpecificPatientIdList?this.patient.recordSpecificPatientIdList=[]:o=this.patient.recordSpecificPatientIdList,o.length>0)for(a=0,r=o.length;a<r;a++){if(i=o[a],i.recordType===t){s=!0;break}s=!1}return s||(n={recordType:t,patientId:this.generatedRecordSpecificRandomPatientId(t)},this.patient.recordSpecificPatientIdList.push(n),app.db.upsert("patient-list",this.patient,function(t){return function(e){var i;return i=e.serial,t.patient.serial===i}}(this)),this._callBDEMRPatientDetailsUpdateApi(this.patient)),e()},viewPccRecord:function(t){var e,i;return e=t.model.index,i=this.matchingPccRecordList[e],this.domHost.navigateToPage("#/preview-preconception-record/record:"+i.serial)},editPccRecord:function(t){var e,i;return e=t.model.index,i=this.matchingPccRecordList[e],this.domHost.navigateToPage("#/preconception-record/record:"+i.serial+"/patients:"+i.patientSerial)},getPatientIdForRecordType:function(t,e){var i,a,r;if("undefined"==typeof e)return null;if(!(e.length>0))return null;for(a=0,r=e.length;a<r;a++)return i=e[a],i.recordType===t?i.patientId:null},addNewPccRecord:function(){return this.checkForRecordSpecificPatientId("PC",function(t){return function(){return t.domHost.navigateToPage("#/preconception-record/record:new/patients:"+t.patient.serial)}}(this))},editNdrRecord:function(t){var e,i;return e=t.model.index,i=this.matchingNdrRecordList[e],this.domHost.navigateToPage("#/ndr/record:"+i.serial+"/patient:"+i.patientSerial)},addNewNdrRecord:function(){return this.checkForRecordSpecificPatientId("NR",function(t){return function(){return t.domHost.navigateToPage("#/ndr/record:new/patient:"+t.patient.serial)}}(this))},editPatientBtnPressed:function(){return this.domHost.navigateToPage("#/patient-editor/patient:"+this.patient.serial)},navigatedIn:function(){var t,e;return this.organization=this.getCurrentOrganization(),this.organization?(e=this.domHost.getPageParams(),this._loadUser(),e.patient?(this._loadPatient(e.patient),this.$getPatientServiceBalance(this.patient.idOnServer,function(t){return function(e){return t.set("patientWalletBalance",e.outdoorBalance)}}(this))):this._notifyInvalidPatient(),this.set("matchingVisitList",[]),this.set("modifiedVisitList",[]),this.isPatientValid&&this._listVisits(),e.selected?(t=e.selected,t=parseInt(t),this.domHost.selectedPatientPageIndex=t,this.set("selectedSubViewIndex",t-1),this._subViewChanged(this.selectedSubViewIndex,e)):void 0):this.domHost.navigateToPage("#/select-organization")},_subViewChanged:function(t,e){return this.debounce("selectedSubView",function(i){return function(){switch(t){case 1:return i._listConfirmedDiagnosis(e.patient),i._loadDiagnosisNameList();case 2:return i.set("selectedMedicinePage",0),i._listCurrentMedications(e.patient),i._listOldMedications(e.patient);case 3:return i.set("selectedVitalPage",0),i._listVitalBloodPressure(e.patient),i._listVitalPulseRate(e.patient),i._listVitalBMI(e.patient),i._listVitalRespiratoryRate(e.patient),i._listVitalSpO2(e.patient),i._listVitalTemperature(e.patient);case 4:return i._loadPatientNextVisit(e.patient);case 5:return i._loadInvoice(i.patient.serial,i.organization.idOnServer),i._getNonResultedTestAdvised(i.patient.serial);case 6:return i.set("selectedTestPage",0),i._listTestBloodSugar(e.patient),i._listOtherTest(e.patient);case 7:return i.set("selectedCommentPage",0),i._listDoctorComment(e.patient),i._listPatientComment(e.patient),i._makeDoctorComment();case 8:return i._openLocalDataUriDb(),i._makeBlankAttachment(),i._updateSpaceCalculation();case 9:return i._getActivityLogs(),i._getPatientWalletTransaction();case 10:return i._loadLeaveData(i.patient.serial)}}}(this),100)},navigatedOut:function(){return this.patient=null,this.isPatientValid=!1,this.matchingVisitList=[],this.modifiedVisitList=[],this.matchingCurrentMedicineList=[],this.matchingOldMedicineList=[],this.matchingVitalBloodPressureList=[],this.matchingVitalPulseRateList=[],this.matchingVitalBMIList=[],this.matchingVitalRespiratoryRateList=[],this.matchingVitalSpO2List=[],this.matchingVitalTemperatureList=[],this.matchingPatientCommentList=[],this.matchingDoctorCommentList=[],this.matchingTestBloodSugarList=[],this.matchingOtherTestList=[],this.patient=null,this.selectedTestListForInvoice=[],this.pendingInvoiceList=[]},_listVisits:function(){var t,e,i,a,r,n,s;for(s=app.db.find("doctor-visit",function(t){return function(e){var i;return i=e.patientSerial,t.patient.serial===i}}(this)),r=app.db.find("anaesmon-record",function(t){return function(e){var i;return i=e.patientSerial,t.patient.serial===i}}(this)),t=[].concat(s,r),t.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),a=[],e=0,i=t.length;e<i;e++)n=t[e],r=[{visitSerial:n.serial,recordSerial:n.prescriptionSerial,recordType:"Prescription",hideAuthorizeButton:!1},{visitSerial:n.serial,recordSerial:n.advisedTestSerial,recordType:"Test Advised",hideAuthorizeButton:!1},{visitSerial:n.serial,recordSerial:n.historyAndPhysicalRecordSerial,recordType:"History & Physical",hideAuthorizeButton:!1},{visitSerial:n.serial,recordSerial:n.diagnosisSerial,recordType:"Diagnosis",hideAuthorizeButton:!0},{visitSerial:n.serial,recordSerial:n.doctorNotesSerial,recordType:"Doctor Notes",hideAuthorizeButton:!0},{visitSerial:n.serial,recordSerial:n.identifiedSymptomsSerial,recordType:"Symptoms",hideAuthorizeButton:!0},{visitSerial:n.serial,recordSerial:n.invoiceSerial,recordType:"Invoice",hideAuthorizeButton:!0}],n.recordList=r,a.push(n);return this.set("matchingVisitList",a)},_makeVisitRecordForReportType:function(t,e,i,a,r){var n,s;return"anaesmon-record"!==t.recordType&&(n=t.testResults.attachmentSerialList.length>0?t.testResults.attachmentSerialList:[]),s={serial:t.serial,createdDatetimeStamp:t.createdDatetimeStamp,hospitalName:t.hospitalName,doctorName:t.doctorName,doctorSpeciality:t.doctorSpeciality,recordTypeSerial:i,recordTypeName:e,attachmentSerialList:n,hasTestResult:a,testResultName:r}},_loadPatientNextVisit:function(t){var e,i;return e=app.db.find("visit-next-visit",function(e){var i;return i=e.patientSerial,i===t}),i=[].concat(e),i.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),this.matchingNextVisitList=i},viewVisitRecord:function(t){var e,i,a,r;if(e=this.locateParentNode(t.target,"PAPER-BUTTON"),e.opened=!1,a=this.$$("#visit-list-repeater"),i=a.indexForElement(e),r=this.matchingVisitList[i],r.testResults.serial)this.domHost.navigateToPage("#/print-test-result/visit:"+r.serial+"/patient:"+this.patient.serial+"/test-results:"+r.testResults.serial);else{if("Invoice"!==r.recordTypeName)return this.domHost.navigateToPage("#/visit-preview/visit:"+r.serial+"/patient:"+this.patient.serial),window.location.reload();this.domHost.navigateToPage("#/print-invoice/visit:"+r.serial+"/patient:"+this.patient.serial+"/invoice:"+r.recordTypeSerial)}},_checkRecordTitle:function(t){var e,i;return null===(null!=(e=t.testResults)?e.serial:void 0)?void 0===t.recordTitle||null===t.recordTitle||""===t.recordTitle?"Complete Visit":t.recordTitle:null!=(i=t.testResults)?i.name:void 0},visitReportCopyBtnPressed:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-ITEM"),e.opened=!1,a=this.$$("#visit-list-repeater"),i=a.indexForElement(e),r=this.matchingVisitList[i],"History & Physical"!==r.recordTypeName?this.domHost.showToast("Something Wrong, contact ADMIN"):void this.domHost.navigateToPage("#/visit-editor/visit:"+r.serial+"/patient:"+this.patient.serial+"/record:"+r.recordTypeSerial)},viewTestResultsAttachemntsBtnPressed:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-BUTTON"),e.opened=!1,a=this.$$("#visit-list-repeater"),i=a.indexForElement(e),r=this.matchingVisitList[i],this.domHost.navigateToPage("#/attachement-preview/test-result:"+r.testResults.serial)},preopPreviewButtonClicked:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-ITEM"),a=this.$$("#visit-list-repeater"),i=a.indexForElement(e),r=this.matchingVisitList[i],this.domHost.navigateToPage("#/print-anaesmon-record/part:preop-assessment/record:"+r.serial)},postopPreviewButtonClicked:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-ITEM"),a=this.$$("#visit-list-repeater"),i=a.indexForElement(e),r=this.matchingVisitList[i],this.domHost.navigateToPage("#/print-anaesmon-record/part:postop-assessment/record:"+r.serial)},opAnaesthesiaPreviewButtonClicked:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-ITEM"),a=this.$$("#visit-list-repeater"),i=a.indexForElement(e),r=this.matchingVisitList[i],this.domHost.navigateToPage("#/print-anaesmon-record/part:op-anaesthesia/record:"+r.serial)},opSurgeryPreviewButtonClicked:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-ITEM"),a=this.$$("#visit-list-repeater"),i=a.indexForElement(e),r=this.matchingVisitList[i],this.domHost.navigateToPage("#/print-anaesmon-record/part:op-surgery/record:"+r.serial)},createNewVisitPressed:function(t){return this.domHost.navigateToPage("#/visit-editor/patient:"+this.patient.serial)},selectedVisitTypeVisitButtonPressed:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-ITEM"),e.opened=!1,a=this.$$("#visit-list-repeater"),i=a.indexForElement(e),r=this.matchingVisitList[i],this.domHost.navigateToPage("#/visit-editor/patient:"+this.patient.serial+"/visit:"+r.serial+"/selected:5")},printCurrentMedicinePressed:function(t){return this.domHost.navigateToPage("#/print-current-medicine/patient:"+this.patient.serial)},printOldMedicinePressed:function(t){return this.domHost.navigateToPage("#/print-old-medicine/patient:"+this.patient.serial)},printBothMedicinePressed:function(t){return this.domHost.navigateToPage("#/print-both-medicine/patient:"+this.patient.serial)},printVitalBPPressed:function(t){return this.domHost.navigateToPage("#/print-vital-bp/patient:"+this.patient.serial+"/startDate:"+this.currentDateFilterStartDate+"/endDate:"+this.currentDateFilterEndDate)},printVitalPRPressed:function(t){return this.domHost.navigateToPage("#/print-vital-pr/patient:"+this.patient.serial+"/startDate:"+this.currentDateFilterStartDate+"/endDate:"+this.currentDateFilterEndDate)},printVitalBMIPressed:function(t){return this.domHost.navigateToPage("#/print-vital-bmi/patient:"+this.patient.serial+"/startDate:"+this.currentDateFilterStartDate+"/endDate:"+this.currentDateFilterEndDate)},printVitalRRPressed:function(t){return this.domHost.navigateToPage("#/print-vital-rr/patient:"+this.patient.serial+"/startDate:"+this.currentDateFilterStartDate+"/endDate:"+this.currentDateFilterEndDate)},printVitalSpo2Pressed:function(t){return this.domHost.navigateToPage("#/print-vital-spo2/patient:"+this.patient.serial+"/startDate:"+this.currentDateFilterStartDate+"/endDate:"+this.currentDateFilterEndDate)},printVitalTempPressed:function(t){return this.domHost.navigateToPage("#/print-vital-temp/patient:"+this.patient.serial+"/startDate:"+this.currentDateFilterStartDate+"/endDate:"+this.currentDateFilterEndDate)},printTestBloodSugarPressed:function(t){return this.domHost.navigateToPage("#/print-blood-sugar/patient:"+this.patient.serial+"/startDate:"+this.currentDateFilterStartDate+"/endDate:"+this.currentDateFilterEndDate)},printTestOtherPressed:function(t){return this.domHost.navigateToPage("#/print-other-test/patient:"+this.patient.serial+"/startDate:"+this.currentDateFilterStartDate+"/endDate:"+this.currentDateFilterEndDate)},viewVisitPressed:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-BUTTON"),e.opened=!1,a=this.$$("#visit-list-repeater"),i=a.indexForElement(e),r=this.matchingVisitList[i],this.domHost.setSelectedVisitSerial(r.serial),this.domHost.selectedPatientPageIndex=0,this.domHost.navigateToPage("#/visit-editor/patient:"+this.patient.serial+"/visit:"+r.serial)},duplicateVisitPressed:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-MENU-BUTTON"),e.opened=!1,a=this.$$("#visit-list-repeater"),i=a.indexForElement(e),r=this.matchingVisitList[i],this.domHost.showModalDialog("TODO")},deleteVisitPressed:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-MENU-BUTTON"),e.opened=!1,a=this.$$("#visit-list-repeater"),i=a.indexForElement(e),r=this.matchingVisitList[i],this.domHost.showModalPrompt("Are you sure?",function(t){return function(e){if(e===!0)return app.db.remove("doctor-visit",r._id),t._listVisits()}}(this))},visitCustomSearchClicked:function(t){var e,i,a,r;return r=new Date(t.detail.startDate),r.setHours(0,0,1),e=new Date(t.detail.endDate),e.setHours(23,59,59),i=function(){var t,i,n,s,o;for(n=this.matchingVisitList,o=[],t=0,i=n.length;t<i;t++)a=n[t],r.getTime()<=(s=new Date(a.lastModifiedDatetimeStamp).getTime())&&s<=e.getTime()&&o.push(a);return o}.call(this),this.matchingVisitList=i},visitSearchClearButtonClicked:function(t){return this._listVisits()},computeVisitFilter:function(t){return t?function(e){var i,a,r,n,s;if(t=t.toLowerCase(),i=e.hospitalName?e.hospitalName.toLowerCase():"",a=e.doctorName?e.doctorName.toLowerCase():"",s=e.doctorSpeciality?e.doctorSpeciality.toLowerCase():"",r=e.recordTitle?e.recordTitle.toLowerCase():"",n=new RegExp("\\b"+t,"gi"),i.search(n)!==-1||a.search(n)!==-1||s.search(n)!==-1||r.search(n)!==-1)return!0}:null},_loadDiagnosisNameList:function(){return this.domHost.getStaticData("diagnosisList",function(t){return function(e){var i;return t.diagnosisDataList=function(){var t,a,r;for(r=[],t=0,a=e.length;t<a;t++)i=e[t],r.push({text:i.name,alt:""});return r}()}}(this))},_sortByImportantDiagnosis:function(t,e){return t.markedAsImportant<e.markedAsImportant?1:t.markedAsImportant>e.markedAsImportant?-1:void 0},_listConfirmedDiagnosis:function(t){var i,a,r,n,s,o,l,c,d,u,h,p;for(u=app.db.find("history-and-physical-record",function(e){var i;if(i=e.patientSerial,i===t)return!0}),r=[],l=0,d=u.length;l<d;l++)if(o=u[l],a=lib.util.findDeepValue("Confirmed Diagnosis",o),a&&(i=lib.util.findDeepValue("virtualChildMap",a)))for(c in i)e.call(i,c)&&(h=i[c],n={createdDatetimeStamp:o.createdDatetimeStamp,diagnosis:c.split("_")[1]},r.push(n));return p=app.db.find("visit-diagnosis",function(e){return function(e){var i;return i=e.patientSerial,i===t}}(this)),s=[].concat(r,p),this.set("confirmedDiagnosisList",s)},newDiagnosisButtonClicked:function(){return this.$$("#newDiagnosisInputModal").toggle()},diagnosisModalConfirm:function(t){var e,i;if(t.detail.confirmed&&this.confirmedDiagnosisModalValue)return i={serial:this.generateSerialForDiagnosis(),createdDatetimeStamp:lib.datetime.now(),lastModifiedDatetimeStamp:lib.datetime.now(),lastSyncedDatetimeStamp:0,createdByUserSerial:this.user.serial,patientSerial:this.patient.serial,doctorName:this.$getFullName(this.user.name),doctorSpeciality:this.getDoctorSpeciality(),diagnosis:this.confirmedDiagnosisModalValue},this.push("confirmedDiagnosisList",i),e=this.confirmedDiagnosisList,this.confirmedDiagnosisList=[],this.confirmedDiagnosisList=e,app.db.upsert("visit-diagnosis",i,function(t){var e;return e=t.serial,e===e}),this.confirmedDiagnosisModalValue=""},_getActivityLogs:function(){var t;return t=app.db.find("activity",function(t){return function(e){var i;return i=e.data,t.patient.serial===i.patientSerial}}(this)),this.set("activityLogs",t)},_getPatientWalletTransaction:function(){return this.loadingCounter++,this.$getPatientServiceBalance(this.patient.idOnServer,function(t){return function(e){return t.set("transactionList",e.outdoorTransactionHistory),t.loadingCounter--}}(this))},_computedTotalTransactionBalance:function(t){if(null!=t?t.length:void 0)return t.reduce(function(t,e){return t+e.amount},0)},_listCurrentMedications:function(t){var e,i,a,r,n;for(e=app.db.find("patient-medications",function(e){var i,a;if(a=e.patientSerial,i=e.data,a===t&&i.hasOwnProperty("status")&&"continue"===i.status)return!0}),n=[].concat(e),n.sort(function(t,e){return t.createdDatetimeStamp<e.createdDatetimeStamp?-1:t.createdDatetimeStamp>e.createdDatetimeStamp?1:0}),i=0,a=n.length;i<a;i++)r=n[i],r.flags={isLocalOnly:!0};return this.matchingCurrentMedicineList=n},_listOldMedications:function(t){var e,i,a,r,n;for(n=app.db.find("patient-medications",function(e){var i,a;if(a=e.patientSerial,i=e.data,a===t&&i.hasOwnProperty("status")&&"stopped"===i.status)return!0}),r=[].concat(n),r.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),e=0,i=r.length;e<i;e++)a=r[e],a.flags={isLocalOnly:!0};return this.matchingOldMedicineList=r},vitalTabChanges:function(){return this.showGraphPressed()},_addVitalsButtonClicked:function(){return this.domHost.navigateToPage("#/patient-vitals-editor/patient:"+this.patient.serial)},_listVitalBloodPressure:function(t){var e,i;return e=app.db.find("patient-vitals-blood-pressure",function(t){return function(e){var i;return i=e.patientSerial,t.patient.serial===i}}(this)),i=[].concat(e),i.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),this.matchingVitalBloodPressureList=i},addBloodPressureItemClicked:function(){return this.domHost.navigateToPage("#/vital-blood-pressure/patient:"+this.patient.serial+"/vital:new")},_saveBloodPressure:function(t){return app.db.upsert("patient-vitals-blood-pressure",t,function(e){return function(e){var i;return i=e.serial,t.serial===i}}(this))},flagAsErrorBloodPressureItemClicked:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-ITEM"),e.opened=!1,a=this.$$("#vital-blood-pressure-list-repeater"),i=a.indexForElement(e),r=this.matchingVitalBloodPressureList[i],r.data.flags={flagAsError:!0},this._saveBloodPressure(r),this._listVitalBloodPressure(this.patient.serial),this.domHost.showToast("Flagged Successfully!"),this.domHost.addActivityLog("blood-pressure","flagAsError",r)},bloodPressureCustomSearchClicked:function(t){var e,i,a,r;return this.currentDateFilterStartDate=t.detail.startDate,this.currentDateFilterEndDate=t.detail.endDate,r=new Date(t.detail.startDate),r.setHours(0,0,1),e=new Date(t.detail.endDate),e.setHours(23,59,59),i=function(){var t,i,n,s,o;for(n=this.matchingVitalBloodPressureList,o=[],t=0,i=n.length;t<i;t++)a=n[t],r.getTime()<=(s=new Date(a.lastModifiedDatetimeStamp).getTime())&&s<=e.getTime()&&o.push(a);return o}.call(this),this.matchingVitalBloodPressureList=i,this.showGraphPressed()},bloodPressureSearchClearButtonClicked:function(t){var e;return this.currentDateFilterStartDate=null,this.currentDateFilterEndDate=null,e=this.domHost.getPageParams(),this._listVitalBloodPressure(e.patient),this.showGraphPressed()},_listVitalPulseRate:function(t){var e,i,a,r,n;for(n=app.db.find("patient-vitals-pulse-rate",function(t){return function(e){var i;return i=e.patientSerial,t.patient.serial===i}}(this)),r=[].concat(n),r.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),e=0,i=r.length;e<i;e++)a=r[e],a.flags={isLocalOnly:!0};return this.matchingVitalPulseRateList=r},addPulseRateItemClicked:function(){return this.domHost.navigateToPage("#/vital-pulse-rate/patient:"+this.patient.serial+"/vital:new")},_savePulseRate:function(t){return app.db.upsert("patient-vitals-pulse-rate",t,function(e){return function(e){var i;return i=e.serial,t.serial===i}}(this))},flagAsErrorPulseRateItemClicked:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-ITEM"),e.opened=!1,a=this.$$("#vital-pulse-rate-list-repeater"),i=a.indexForElement(e),r=this.matchingVitalPulseRateList[i],r.data.flags={flagAsError:!0},this._savePulseRate(r),this._listVitalPulseRate(this.patient.serial),this.domHost.showToast("Flagged Successfully!")},pulseRateCustomSearchClicked:function(t){var e,i,a,r;return this.currentDateFilterStartDate=t.detail.startDate,this.currentDateFilterEndDate=t.detail.endDate,r=new Date(t.detail.startDate),r.setHours(0,0,1),e=new Date(t.detail.endDate),e.setHours(23,59,59),i=function(){var t,i,n,s,o;for(n=this.matchingVitalPulseRateList,o=[],t=0,i=n.length;t<i;t++)a=n[t],r.getTime()<=(s=new Date(a.lastModifiedDatetimeStamp).getTime())&&s<=e.getTime()&&o.push(a);return o}.call(this),this.matchingVitalPulseRateList=i,this.showGraphPressed()},pulseRateSearchClearButtonClicked:function(t){var e;return this.currentDateFilterStartDate=null,this.currentDateFilterEndDate=null,e=this.domHost.getPageParams(),this._listVitalPulseRate(e.patient),this.showGraphPressed()},_listVitalBMI:function(t){var e,i,a,r,n;for(r=app.db.find("patient-vitals-bmi",function(t){return function(e){var i;return i=e.patientSerial,t.patient.serial===i}}(this)),n=[].concat(r),n.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),e=0,i=n.length;e<i;e++)a=n[e],a.flags={isLocalOnly:!0};return this.matchingVitalBMIList=n},addBMIItemClicked:function(){return this.domHost.navigateToPage("#/vital-bmi/patient:"+this.patient.serial+"/vital:new")},_calculateBMIVerdict:function(t){return 0!==t&&t?t<18.5?"Underweight":18.5<=t&&t<24.9?"Normal":25<=t&&t<29.9?"Overweight":"Obese":"Pending"},isHeightCmOrM:function(t){if("ft/inch"!==t)return!0},isHeightFtInch:function(t){if("ft/inch"===t)return!0},BMICustomSearchClicked:function(t){var e,i,a,r;return this.currentDateFilterStartDate=t.detail.startDate,this.currentDateFilterEndDate=t.detail.endDate,r=new Date(t.detail.startDate),r.setHours(0,0,1),e=new Date(t.detail.endDate),e.setHours(23,59,59),i=function(){var t,i,n,s,o;for(n=this.matchingVitalBMIList,o=[],t=0,i=n.length;t<i;t++)a=n[t],r.getTime()<=(s=new Date(a.lastModifiedDatetimeStamp).getTime())&&s<=e.getTime()&&o.push(a);return o}.call(this),this.matchingVitalBMIList=i,this.showGraphPressed()},BMISearchClearButtonClicked:function(t){var e;return this.currentDateFilterStartDate=null,this.currentDateFilterEndDate=null,e=this.domHost.getPageParams(),this._listVitalBMI(e.patient),this.showGraphPressed()},_saveBMI:function(t){return app.db.upsert("patient-vitals-bmi",t,function(e){return function(e){var i;return i=e.serial,t.serial===i}}(this))},flagAsErrorBMIItemClicked:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-ITEM"),e.opened=!1,a=this.$$("#vital-bmi-list-repeater"),i=a.indexForElement(e),r=this.matchingVitalBMIList[i],r.data.flags={flagAsError:!0},this._saveBMI(r),this._listVitalBMI(this.patient.serial),this.domHost.showToast("Flagged Successfully!")},_listVitalRespiratoryRate:function(t){var e,i,a,r,n;for(n=app.db.find("patient-vitals-respiratory-rate",function(t){return function(e){var i;return i=e.patientSerial,t.patient.serial===i}}(this)),r=[].concat(n),r.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0;
}),e=0,i=r.length;e<i;e++)a=r[e],a.flags={isLocalOnly:!0};return this.matchingVitalRespiratoryRateList=r},addRespiratoryRateItemClicked:function(){return this.domHost.navigateToPage("#/vital-respiratory-rate/patient:"+this.patient.serial+"/vital:new")},_saveRR:function(t){return app.db.upsert("patient-vitals-respiratory-rate",t,function(e){return function(e){var i;return i=e.serial,t.serial===i}}(this))},flagAsErrorRRItemClicked:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-ITEM"),e.opened=!1,a=this.$$("#vital-respiratory-rate-list-repeater"),i=a.indexForElement(e),r=this.matchingVitalRespiratoryRateList[i],r.data.flags={flagAsError:!0},this._saveRR(r),this._listVitalRespiratoryRate(this.patient.serial),this.domHost.showToast("Flagged Successfully!")},respiratoryRateCustomSearchClicked:function(t){var e,i,a,r;return this.currentDateFilterStartDate=t.detail.startDate,this.currentDateFilterEndDate=t.detail.endDate,r=new Date(t.detail.startDate),r.setHours(0,0,1),e=new Date(t.detail.endDate),e.setHours(23,59,59),i=function(){var t,i,n,s,o;for(n=this.matchingVitalRespiratoryRateList,o=[],t=0,i=n.length;t<i;t++)a=n[t],r.getTime()<=(s=new Date(a.lastModifiedDatetimeStamp).getTime())&&s<=e.getTime()&&o.push(a);return o}.call(this),this.matchingVitalRespiratoryRateList=i,this.showGraphPressed()},respiratoryRateSearchClearButtonClicked:function(t){var e;return this.currentDateFilterStartDate=null,this.currentDateFilterEndDate=null,e=this.domHost.getPageParams(),this._listVitalRespiratoryRate(e.patient),this.showGraphPressed()},_listVitalSpO2:function(t){var e,i,a,r,n;for(n=app.db.find("patient-vitals-spo2",function(t){return function(e){var i;return i=e.patientSerial,t.patient.serial===i}}(this)),r=[].concat(n),r.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),e=0,i=r.length;e<i;e++)a=r[e],a.flags={isLocalOnly:!0};return this.matchingVitalSpO2List=r},addSpO2ItemClicked:function(){return this.domHost.navigateToPage("#/vital-spo2/patient:"+this.patient.serial+"/vital:new")},_saveSpO2:function(t){return app.db.upsert("patient-vitals-spo2",t,function(e){return function(e){var i;return i=e.serial,t.serial===i}}(this))},flagAsErrorSpO2ItemClicked:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-ITEM"),e.opened=!1,a=this.$$("#vital-spo2-list-repeater"),i=a.indexForElement(e),r=this.matchingVitalSpO2List[i],r.data.flags={flagAsError:!0},this._saveSpO2(r),this._listVitalSpO2(this.patient.serial),this.domHost.showToast("Flagged Successfully!")},spO2CustomSearchClicked:function(t){var e,i,a,r;return this.currentDateFilterStartDate=t.detail.startDate,this.currentDateFilterEndDate=t.detail.endDate,r=new Date(t.detail.startDate),r.setHours(0,0,1),e=new Date(t.detail.endDate),e.setHours(23,59,59),i=function(){var t,i,n,s,o;for(n=this.matchingVitalSpO2List,o=[],t=0,i=n.length;t<i;t++)a=n[t],r.getTime()<=(s=new Date(a.lastModifiedDatetimeStamp).getTime())&&s<=e.getTime()&&o.push(a);return o}.call(this),this.matchingVitalSpO2List=i,this.showGraphPressed()},spO2SearchClearButtonClicked:function(t){var e;return this.currentDateFilterStartDate=null,this.currentDateFilterEndDate=null,e=this.domHost.getPageParams(),this._listVitalSpO2(e.patient),this.showGraphPressed()},_listVitalTemperature:function(t){var e,i,a,r,n;for(n=app.db.find("patient-vitals-temperature",function(t){return function(e){var i;return i=e.patientSerial,t.patient.serial===i}}(this)),r=[].concat(n),r.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),e=0,i=r.length;e<i;e++)a=r[e],a.flags={isLocalOnly:!0};return this.matchingVitalTemperatureList=r},addTemperatureItemClicked:function(){return this.domHost.navigateToPage("#/vital-temperature/patient:"+this.patient.serial+"/vital:new")},_saveTemp:function(t){return app.db.upsert("patient-vitals-temperature",t,function(e){return function(e){var i;return i=e.serial,t.serial===i}}(this))},flagAsErrorTempItemClicked:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-ITEM"),e.opened=!1,a=this.$$("#vital-temperature-list-repeater"),i=a.indexForElement(e),r=this.matchingVitalTemperatureList[i],r.data.flags={flagAsError:!0},this._saveTemp(r),this._listVitalTemperature(this.patient.serial),this.domHost.showToast("Flagged Successfully!")},temperatureCustomSearchClicked:function(t){var e,i,a,r;return this.currentDateFilterStartDate=t.detail.startDate,this.currentDateFilterEndDate=t.detail.endDate,r=new Date(t.detail.startDate),r.setHours(0,0,1),e=new Date(t.detail.endDate),e.setHours(23,59,59),i=function(){var t,i,n,s,o;for(n=this.matchingVitalTemperatureList,o=[],t=0,i=n.length;t<i;t++)a=n[t],r.getTime()<=(s=new Date(a.lastModifiedDatetimeStamp).getTime())&&s<=e.getTime()&&o.push(a);return o}.call(this),this.matchingVitalTemperatureList=i,this.showGraphPressed()},temperatureSearchClearButtonClicked:function(t){var e;return this.currentDateFilterStartDate=null,this.currentDateFilterEndDate=null,e=this.domHost.getPageParams(),this._listVitalTemperature(e.patient),this.showGraphPressed()},_listTestBloodSugar:function(t){var e,i,a,r,n;for(r=app.db.find("patient-test-blood-sugar",function(t){return function(e){var i;return i=e.patientSerial,t.patient.serial===i}}(this)),n=[].concat(r),n.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),e=0,i=n.length;e<i;e++)a=n[e],a.flags={isLocalOnly:!0};return this.matchingTestBloodSugarList=n},addBloodSugarItemClicked:function(){return this.domHost.navigateToPage("#/test-blood-sugar/patient:"+this.patient.serial+"/test:new")},editBloodSugarItemClicked:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-MENU-BUTTON"),e.opened=!1,a=this.$$("#test-blood-sugar-list-repeater"),i=a.indexForElement(e),r=this.matchingTestBloodSugarList[i],this.domHost.navigateToPage("#/test-blood-sugar/patient:"+this.patient.serial+"/test:"+r.serial)},deleteBloodSugarItemClicked:function(t){var e,i,a,r,n;return e=this.locateParentNode(t.target,"PAPER-MENU-BUTTON"),e.opened=!1,r=this.$$("#test-blood-sugar-list-repeater"),a=this.domHost.getPageParams(),i=t.model.index,n=this.matchingTestBloodSugarList[i],this.domHost.showModalPrompt("Are you sure?",function(t){return function(e){var i;if(e===!0)return i=app.db.find("patient-test-blood-sugar",function(t){var e;return e=t.serial,e===n.serial})[0]._id,app.db.remove("patient-test-blood-sugar",i),app.db.insert("patient-test-blood-sugar--deleted",{serial:n.serial}),t.domHost.showToast("Test Deleted!"),t._listTestBloodSugar(a.patient)}}(this))},bloodSugarCustomSearchClicked:function(t){var e,i,a,r;return this.currentDateFilterStartDate=t.detail.startDate,this.currentDateFilterEndDate=t.detail.endDate,r=new Date(t.detail.startDate),r.setHours(0,0,1),e=new Date(t.detail.endDate),e.setHours(23,59,59),i=function(){var t,i,n,s,o;for(n=this.matchingTestBloodSugarList,o=[],t=0,i=n.length;t<i;t++)a=n[t],r.getTime()<=(s=new Date(a.data.date).getTime())&&s<=e.getTime()&&o.push(a);return o}.call(this),this.matchingTestBloodSugarList=i,this.showGraphPressed()},bloodSugarSearchClearButtonClicked:function(t){var e;return this.currentDateFilterStartDate=null,this.currentDateFilterEndDate=null,e=this.domHost.getPageParams(),this._listTestBloodSugar(e.patient),this.showGraphPressed()},searchBloodSugar:function(t){var e,i,a,r,n;return n=t.target.value,n||(a=this.domHost.getPageParams(),this._listTestBloodSugar(a.patient),this.showGraphPressed()),r=new RegExp("\\b"+n,"gi"),e=function(){var t,e,a,n;for(a=this.matchingTestBloodSugarList,n=[],t=0,e=a.length;t<e;t++)i=a[t],r.test(i.data.type)&&n.push(i);return n}.call(this),this.set("matchingTestBloodSugarList",e),this.showGraphPressed()},_listOtherTest:function(t){var e;return e=app.db.find("patient-test-other",function(e){return function(e){var i;return i=e.patientSerial,i===t}}(this)),e.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),this.matchingOtherTestList=e},addOtherTestItemClicked:function(){return this.domHost.navigateToPage("#/other-test/patient:"+this.patient.serial+"/test:new")},editOtherTestItemClicked:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-MENU-BUTTON"),e.opened=!1,a=this.$$("#other-test-list-repeater"),i=a.indexForElement(e),r=this.matchingOtherTestList[i],this.domHost.navigateToPage("#/other-test/patient:"+this.patient.serial+"/test:"+r.serial)},deleteOtherTestItemClicked:function(t){var e,i,a,r,n;return e=this.locateParentNode(t.target,"PAPER-MENU-BUTTON"),e.opened=!1,r=this.$$("#other-test-list-repeater"),a=this.domHost.getPageParams(),i=t.model.index,n=this.matchingOtherTestList[i],this.domHost.showModalPrompt("Are you sure?",function(t){return function(e){var i;if(e===!0)return i=app.db.find("patient-test-other",function(t){var e;return e=t.serial,e===n.serial})[0]._id,app.db.remove("patient-test-other",i),app.db.insert("patient-test-other--deleted",{serial:n.serial}),t.domHost.showToast("Test Deleted!"),t._listOtherTest(a.patient)}}(this))},otherTestCustomSearchClicked:function(t){var e,i,a,r;return this.currentDateFilterStartDate=t.detail.startDate,this.currentDateFilterEndDate=t.detail.endDate,r=new Date(t.detail.startDate),r.setHours(0,0,1),e=new Date(t.detail.endDate),e.setHours(23,59,59),i=function(){var t,i,n,s,o;for(n=this.matchingOtherTestList,o=[],t=0,i=n.length;t<i;t++)a=n[t],r.getTime()<=(s=new Date(a.lastModifiedDatetimeStamp).getTime())&&s<=e.getTime()&&o.push(a);return o}.call(this),this.matchingOtherTestList=i},otherTestsSearchClearButtonClicked:function(){var t;return this.currentDateFilterStartDate=null,this.currentDateFilterEndDate=null,t=this.domHost.getPageParams(),this._listOtherTest(t.patient)},computeOtherTestFilter:function(t){return t?function(e){var i,a,r,n;if(n=t.toLowerCase(),a=e.name?e.name.toLowerCase():"",i=e.institution?e.institution.toLowerCase():"",r=new RegExp("\\b"+n,"gi"),a.search(r)!==-1||i.search(r)!==-1)return!0}:null},_listPatientComment:function(t){var e,i;return i=app.db.find("comment-patient",function(e){return function(e){var i;return i=e.patientSerial,t===i}}(this)),e=[].concat(i),e.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),this.matchingPatientCommentList=e},_listDoctorComment:function(t){var e,i;return i=app.db.find("comment-doctor",function(e){return function(e){var i;return i=e.patientSerial,i===t}}(this)),e=[].concat(i),e.sort(function(t,e){return t.createdDatetimeStamp>e.createdDatetimeStamp?-1:t.createdDatetimeStamp<e.createdDatetimeStamp?1:0}),this.matchingDoctorCommentList=e},_makeDoctorComment:function(){return this.doctorCommentMessage={serial:null,createdDatetimeStamp:0,lastModifiedDatetimeStamp:0,lastSyncedDatetimeStamp:0,patientSerial:this.patient.serial,doctorSerial:this.user.serial,doctorName:this.$getFullName(this.user.name),doctorSpeciality:this.getDoctorSpeciality(),data:{message:""}}},_saveDoctorCommentMessage:function(t){return app.db.upsert("comment-doctor",t,function(e){return function(e){var i;return i=e.serial,t.serial===i}}(this))},addCommentButtonClicked:function(t){return this._chargePatient(this.patient.idOnServer,5,"Payment BDEMR Doctor Generic",function(t){return function(e){return e?void t.domHost.showModalDialog("Unable to charge the patient. "+e.message):(t.doctorCommentMessage.serial=t.generateSerialForCommentMessage("DCT"),t.doctorCommentMessage.createdDatetimeStamp=lib.datetime.now(),t._saveDoctorCommentMessage(t.doctorCommentMessage),t.domHost.showToast("Comment Added!"),t._makeDoctorComment(),t._listDoctorComment(t.patient.serial))}}(this))},deleteUserCommentItemClicked:function(t){var e,i;return i=t.model.index,e=this.matchingDoctorCommentList[i],this.domHost.showModalPrompt("Are you sure?",function(t){return function(i){var a;if(i===!0)return a=app.db.find("comment-doctor",function(t){var i;return i=t.serial,i===e.serial})[0]._id,app.db.remove("comment-doctor",a),t.domHost.showToast("Comment Deleted!"),t._listDoctorComment(t.patient.serial)}}(this))},toggleDemography:function(){var t;return t=this.$$("#collapseDemography"),t.toggle()},toggleConfirmedDiagnosis:function(){var t;return t=this.$$("#collapseConfirmedDiagnosis"),t.toggle()},toggleMedicine:function(){var t;return t=this.$$("#collapseMedicine"),t.toggle()},toggleVitals:function(){var t;return t=this.$$("#collapseVitals"),t.toggle()},toggleVitals:function(){var t;return t=this.$$("#collapseVitals"),t.toggle()},toggleVisits:function(){var t;return t=this.$$("#collapseVisits"),t.toggle()},toggleTestResults:function(){var t;return t=this.$$("#collapseTestResults"),t.toggle()},toggleComments:function(){var t;return t=this.$$("#collapseComments"),t.toggle()},toggleGallery:function(){var t;return t=this.$$("#collapseGallery"),t.toggle()},toggleActivityLog:function(){var t;return t=this.$$("#collapseActivityLog"),t.toggle()},_updatePatientSerialListByCollectionName:function(t){var e,i;return e={collectionName:t,patientSerialList:this._getPatientSerialListFromPatientList()},i=app.db.find("filterd-patient-serial-list-for-sync",function(e){var i;return i=e.collectionName,i===t}),1===i.length?app.db.upsert("filterd-patient-serial-list-for-sync",e,function(t){return function(t){var e;return e=t._id,i[0]._id===e}}(this)):app.db.insert("filterd-patient-serial-list-for-sync",e)},_getPatientSerialListFromPatientList:function(){var t,e,i,a,r,n;for(a=app.db.find("patient-list"),r=[],e=0,i=a.length;e<i;e++)t=a[e],n={},n.patientSerial=t.serial,n.isSync=!0,r.push(n);return r},_updatePatientSerialSyncByCollection:function(t,e,i){var a,r,n,s,o,l,c,d;if(l=app.db.find("filterd-patient-serial-list-for-sync",function(e){var i;return i=e.collectionName,i===t}),1===l.length)for(n=l[0],c={},d=n.patientSerialList,a=s=0,o=d.length;s<o;a=++s)if(r=d[a],r.patientSerial===e)return n.patientSerialList[a].isSync=i,app.db.upsert("filterd-patient-serial-list-for-sync",n,function(t){return function(t){var e;return e=t._id,n._id===e}}(this)),!0},vitalsSyncCheckboxChanged:function(t){var e,i;return e=this.domHost.getPageParams(),e.patient&&(i=e.patient),t.target.checked?(this._updatePatientSerialSyncByCollection("patient-vitals-blood-pressure",i,!0),this._updatePatientSerialSyncByCollection("patient-vitals-pulse-rate",i,!0),this._updatePatientSerialSyncByCollection("patient-vitals-respiratory-rate",i,!0),this._updatePatientSerialSyncByCollection("patient-vitals-spo2",i,!0),this._updatePatientSerialSyncByCollection("patient-vitals-temperature",i,!0),this._updatePatientSerialSyncByCollection("patient-vitals-bmi",i,!0)):(this._updatePatientSerialSyncByCollection("patient-vitals-blood-pressure",i,!1),this._updatePatientSerialSyncByCollection("patient-vitals-pulse-rate",i,!1),this._updatePatientSerialSyncByCollection("patient-vitals-respiratory-rate",i,!1),this._updatePatientSerialSyncByCollection("patient-vitals-spo2",i,!1),this._updatePatientSerialSyncByCollection("patient-vitals-temperature",i,!1),this._updatePatientSerialSyncByCollection("patient-vitals-bmi",i,!1))},testSyncCheckboxChanged:function(t){var e,i;return e=this.domHost.getPageParams(),e.patient&&(i=e.patient),t.target.checked?(this._updatePatientSerialSyncByCollection("patient-test-blood-sugar",i,!0),this._updatePatientSerialSyncByCollection("patient-test-other",i,!0)):(this._updatePatientSerialSyncByCollection("patient-test-blood-sugar",i,!1),this._updatePatientSerialSyncByCollection("patient-test-other",i,!1))},doctorPateintNotesSyncCheckboxChanged:function(t){var e,i;return e=this.domHost.getPageParams(),e.patient&&(i=e.patient),t.target.checked?(this._updatePatientSerialSyncByCollection("comment-patient",i,!0),this._updatePatientSerialSyncByCollection("comment-doctor",i,!0)):(this._updatePatientSerialSyncByCollection("comment-patient",i,!1),this._updatePatientSerialSyncByCollection("comment-doctor",i,!1))},patientGallerySyncCheckboxChanged:function(t){var e,i;return e=this.domHost.getPageParams(),e.patient&&(i=e.patient),t.target.checked?this._updatePatientSerialSyncByCollection("patient-gallery--online-attachment",i,!0):this._updatePatientSerialSyncByCollection("patient-gallery--online-attachment",i,!1)},activityLogSyncCheckboxChanged:function(t){var e,i;return e=this.domHost.getPageParams(),e.patient&&(i=e.patient),t.target.checked?this._updatePatientSerialSyncByCollection("patient-gallery--online-attachment",i,!0):this._updatePatientSerialSyncByCollection("patient-gallery--online-attachment",i,!1)},_updateSpaceCalculation:function(){var t,e;if(this.localDataUriDb)return t=this.localDataUriDb.computeTotalSpaceTaken(),e=1-(this.maximumLocalDataUriDbSizeInChars-t)/this.maximumLocalDataUriDbSizeInChars,this.localDataUsedPercentage=Math.floor(100*e)},_openLocalDataUriDb:function(){var t,e;return t=new lib.DatabaseEngine({name:"local-data-uri-db",storageEngine:lib.localStorage,serializationEngine:lib.json,config:{commitDelay:0}}),t.initializeDatabase({removeExisting:!1}),t.defineCollection({name:"local-attachment"}),this.localDataUriDb=t,e=new lib.DatabaseEngine({name:"session-data-uri-db",storageEngine:lib.tabStorage,serializationEngine:lib.json,config:{commitDelay:0}}),e.initializeDatabase({removeExisting:!1}),e.defineCollection({name:"local-attachment"}),this.sessionDataUriDb=e},_makeBlankAttachment:function(){return this.set("newAttachment",{title:"",description:"",dataUri:"",originalName:null,originalType:null,sizeInBytes:0,sizeInChars:0,isImage:!1,isLoaded:!1,progress:0})},_loadAttachmentList:function(t){var e,i;return e=app.db.find("patient-gallery--local-attachment",function(e){var i;return i=e.patientSerial,i===t}),this.set("attachmentList",e),i=app.db.find("patient-gallery--online-attachment",function(e){var i;return i=e.patientSerial,i===t}),i.length&&this.set("isDownloading",!0),lib.util.iterate(i,function(t){return function(e,i,a){return t.callApi("bdemr/get-uploaded-file",{attachmentId:a.data.attachmentId},function(i,a){return a.hasError?t.domHost.showModalDialog(a.error.message):(t.push("attachmentList",a.data),e())})}}(this))["finally"](function(t){return function(){return t.set("isDownloading",!1)}}(this))},_saveAttachment:function(t){return app.db.upsert("patient-gallery--local-attachment",t,function(e){return function(e){var i;return i=e.serial,t.serial===i}}(this))},$toMega:function(t){return Math.ceil(t/1e3/1e3*100)/100},$getImageSrc:function(t){var e;return"local"===t.mainStorage?(e=this.localDataUriDb.find("local-attachment",function(e){var i;return i=e.attachmentSerial,i===t.serial}),e.length>0?e[0].dataUri:"assets/not-found.png"):"server"===t.mainStorage?t.dataURI:"session"===t.mainStorage?(e=this.sessionDataUriDb.find("local-attachment",function(e){var i;return i=e.attachmentSerial,i===t.serial}),e.length>0?e[0].dataUri:"assets/not-found.png"):void 0},fileInputChanged:function(t){var e,i;return i=new FileReader,e=t.target.files[0],e.size>this.maximumImageSizeAllowedInBytes?void this.domHost.showModalDialog("Please provide a file less than "+Math.floor(this.maximumImageSizeAllowedInBytes/1e3/1e3)+"mb in size."):(i.readAsDataURL(e),i.onprogress=function(t){return function(e){return t.set("newAttachment.progress",e.loaded/e.total*100)}}(this),i.onload=function(t){return function(){var a;return a=i.result,t.set("newAttachment.isImage",e.type.indexOf("image/")>-1),t.set("newAttachment.sizeInBytes",e.size),t.set("newAttachment.title",e.name),t.set("newAttachment.dataUri",a),t.set("newAttachment.originalType",e.type),t.set("newAttachment.originalName",e.name),t.set("newAttachment.sizeInChars",a.length),t.set("newAttachment.isLoaded",!0)}}(this))},_prepareAtachment:function(){var t,e,i,a,r,n,s,o,l,c;return s=this.newAttachment,c=s.title,i=s.description,e=s.dataUri,a=s.isImage,r=s.originalName,n=s.originalType,o=s.sizeInBytes,l=s.sizeInChars,t={serial:this.generateSerialForAttachmentBlob(),attSyncSerial:this.generateSerialForAttachmentSync(),lastModifiedDatetimeStamp:lib.datetime.now(),lastSyncedDatetimeStamp:0,mainStorage:null,title:c,description:i,isImage:a,originalName:r,originalType:n,sizeInBytes:o,sizeInChars:l}},uploadPressed:function(t){var e,i;return i=this._prepareAtachment(),e=0===i.originalType.indexOf("image")?5:20,i.mainStorage="server",i.apiKey=app.db.find("user")[0].apiKey,i.dataURI=this.newAttachment.dataUri,this.set("isUploading",!0),this.callApi("bdemr/file-uploader",i,function(t){return function(e,a){var r;return a.hasError?t.domHost.showModalDialog(a.error.message):(i._id=a.data.attachmentId,t.push("attachmentList",i),r={serial:i.attSyncSerial,createdDatetimeStamp:0,lastModifiedDatetimeStamp:i.lastModifiedDatetimeStamp,lastSyncedDatetimeStamp:0,patientSerial:t.patient.serial,data:{attachmentId:a.data.attachmentId}},app.db.upsert("patient-gallery--online-attachment",r,function(t){var e;return e=t.serial,e===i.serial}),t.set("isUploading",!1),t.domHost._syncOnlyPatientGallery(function(){return t._makeBlankAttachment()}))}}(this))},saveLocallyPressed:function(t){var e,i,a,r,n,s,o,l;return e=this._prepareAtachment(),e.mainStorage="local",l={attachmentSerial:e.serial,dataUri:this.newAttachment.dataUri},i=this.localDataUriDb.computeTotalSpaceTaken(),r=this.maximumLocalDataUriDbSizeInChars,s=r-i,o=JSON.stringify(l).length,s<o?(a=o-s,n="Sorry. Can not save image. Your browser needs "+this.$toMega(a)+"MB additional storage.",this.domHost.showModalDialog(n)):(this.localDataUriDb.insert("local-attachment",l),this.push("attachmentList",e),this._saveAttachment(e),this._makeBlankAttachment(),this._updateSpaceCalculation())},keepUntilBrowserClosedPressed:function(t){var e,i,a,r,n,s,o,l;if(e=this._prepareAtachment(),e.mainStorage="session",l={attachmentSerial:e.serial,dataUri:this.newAttachment.dataUri},i=this.sessionDataUriDb.computeTotalSpaceTaken(),r=5e7,s=r-i,o=JSON.stringify(l).length,s<o)return a=o-s,n="Sorry. Can not save image. Your browser needs "+this.$toMega(a)+"MB additional storage.",this.domHost.showModalDialog(n);try{return this.sessionDataUriDb.insert("local-attachment",l),this.push("attachmentList",e),this._makeBlankAttachment()}catch(c){return t=c,n="Sorry. Can not save image. Your browser do not have enough memory.",this.domHost.showModalDialog(n)}},deletePressed:function(t){var e,i,a,r;return r=t.model,a=r.attachmentIndex,e=r.attachment,"local"===e.mainStorage?(i=this.localDataUriDb.find("local-attachment",function(t){var i;return i=t.attachmentSerial,i===e.serial}),i.length>0&&this.localDataUriDb.remove("local-attachment",i[0]._id),app.db.remove("patient-gallery--local-attachment",e._id),this.splice("attachmentList",a,1),this._updateSpaceCalculation()):"session"===e.mainStorage?(i=this.sessionDataUriDb.find("local-attachment",function(t){var i;return i=t.attachmentSerial,i===e.serial}),i.length>0&&this.sessionDataUriDb.remove("local-attachment",i[0]._id),app.db.remove("patient-gallery--local-attachment",e._id),this.splice("attachmentList",a,1)):this.callApi("bdemr/delete-uploaded-file",{attachmentId:e._id},function(t){return function(r,n){return n.hasError?t.domHost.showModalDialog(n.error.message):(i=app.db.find("patient-gallery--online-attachment",function(t){var i;return i=t.serial,i===e.attSyncSerial}),i.length>0?(app.db.remove("patient-gallery--online-attachment",i[0]._id),t.splice("attachmentList",a,1),app.db.insert("patient-gallery--online-attachment--deleted",{serial:i[0].serial})):void 0)}}(this))},downloadPressed:function(e){var i,a,r,n,s,o;return a=e.model.attachment,o=this.$getImageSrc(a),0===o.indexOf("data:")?(r=t(o),s=window.URL.createObjectURL(r,{type:a.originalType})):s=o,n=a.originalName,i=window.document.createElement("a"),i.href=s,i.target="_blank",i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i)},fileItemClicked:function(t){var e,i,a;return a=t.model.fileIndex,i=this.matchingFileList[a],e={apiKey:this.user.apiKey,userId:this.user.idOnServer,fileIdentifier:i.fileNameOnServer},this.callApi("/bdemr-patient-file-download",e,function(t){return function(e,i){var a,r,n;return i.hasError?t.domHost.showModalDialog(i.error.message):(n=i.data.file.data,r=i.data.file.originalName,a=window.document.createElement("a"),a.href=n,a.target="_blank",a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a))}}(this))},_getClassForFlaggedAsError:function(t){return t===!0?"danger":""},ready:function(){},authorizeToSelected:function(t){var e,i,a,r,n,s,o,l,c;if(null!==this.authorizeToSelectedIndex)return this.authorizeTo=this.organizationsIBelongToList[this.authorizeToSelectedIndex],i=this.authorizeTo.idOnServer,s=this.toAuthorize,r=s.recordSerial,c=s.visitSerial,n=s.recordType,a=s.pccType,this.toAuthorizeIndex=null,this.toAuthorizePccIndex=null,this.authorizeToSelectedIndex=null,l={Prescription:{serverDb:"bdemr--visit-prescription",clientDb:""},"Test Advised":{serverDb:"bdemr--visit-advised-test",clientDb:""},"History & Physical":{serverDb:"history-and-physical-record",clientDb:""},PCC:{serverDb:"bdemr--pcc-records",clientDb:""}},n in l?(o=l[n].serverDb,e={apiKey:this.user.apiKey,visitSerial:c,recordSerial:r,recordType:n,serverDb:o,organizationId:i,masterType:"doctor-app"},"PCC"===e.recordType&&(e.masterType="pcc-records",e.pccType=a),this.callApi("/bdemr-organization-authorize-particular-type-of-record",e,function(t){return function(e,i){return i.hasError?t.domHost.showModalDialog(i.error.message):t.domHost.showModalDialog("Organization is successfully authorized.")}}(this))):void this.domHost.showModalDialog("This type of record can not be authorized!")},_organizationNavigatedIn:function(){var t;return t={apiKey:this.user.apiKey},this.callApi("/bdemr-organization-list-those-user-belongs-to",t,function(t){return function(e,i){return i.hasError?t.domHost.showModalDialog(i.error.message):t.organizationsIBelongToList=i.data.organizationObjectList}}(this))},authorizeRecordPressed:function(t){var e,i,a,r,n,s,o,l,c;return e=this.locateParentNode(t.target,"PAPER-ITEM"),o=this.$$("#visit-list-repeater"),i=o.indexForElement(e),r=t.model.recordIndex,l=this.matchingVisitList[i],a=l.recordList[r],c=a.visitSerial,n=a.recordSerial,s=a.recordType,this.toAuthorize={visitSerial:c,recordSerial:n,recordType:s},this.toAuthorizeIndex=r},authorizePccRecord:function(t){var e,i,a,r;return e=this.locateParentNode(t.target,"PAPER-ITEM"),r=this.$$("#pcc-record-list"),i=r.indexForElement(e),a=this.matchingPccRecordList[i],this.toAuthorize={recordSerial:a.serial,visitSerial:"none",recordType:"PCC",pccType:a.visitReason.type},this.toAuthorizePccIndex=i},deleteRecordFromSelectedVisit:function(t){return this.domHost.showToast("This Feature is Under construction!")},_loadLeaveData:function(t){var e;return e=app.db.find("employee-leave-data",function(e){return function(e){var i;return i=e.patientSerial,i===t}}(this)),e.length?this.set("leaveData",e[0]):this.set("leaveData",this._makeLeaveData())},_makeLeaveData:function(){return{serial:this.generateSerialForEmployeeLeaveData(),createdDatetimeStamp:lib.datetime.now(),lastModifiedDatetimeStamp:null,lastSyncedDatetimeStamp:0,createdByUserSerial:this.user.serial,patientSerial:this.patient.serial,data:[]}},leaveInfoAddedButtonClicked:function(t){var e,i;return e=new Date(this.leaveFromDate).getTime(),i=new Date(this.leaveToDate).getTime(),this.push("leaveData.data",{startDate:e,endDate:i,reason:this.sickReasonList[this.sickReasonSelectedIndex]}),app.db.upsert("employee-leave-data",this.leaveData,function(t){return function(e){var i;return i=e.serial,i===t.leaveData.serial}}(this)),this.leaveFromDate="",this.leaveToDate="",this.sickReasonSelectedIndex=0},calculateLeaveLength:function(t,e){return(e-t)/864e5},getMonthYearString:function(t){var e,i;return i=new Date(t).getFullYear(),e=this.monthList[new Date(t).getMonth()],e+" "+i},_getMonthYearByISO:function(t){var e,i;return i=new Date(t).getFullYear(),e=new Date(t).getMonth()+1,i+"-"+e+"-01"},getLeaveCountByMonthYear:function(t){var i,a,r,n,s,o,l,c,d;for(l={},r=0,o=t.length;r<o;r++)a=t[r],s=this.calculateLeaveLength(a.startDate,a.endDate),d=this._getMonthYearByISO(a.startDate),d in l?l[d]+=s:l[d]=s;i=[];for(n in l)e.call(l,n)&&(c=l[n],i.push({monthYear:n,leaveCount:c}));return i},getLeaveCountByYear:function(t){var i,a,r,n,s,o,l,c,d;for(l={},r=0,o=t.length;r<o;r++)a=t[r],s=this.calculateLeaveLength(a.startDate,a.endDate),d=new Date(a.startDate).getFullYear(),d in l?l[d]+=s:l[d]=s;i=[];for(n in l)e.call(l,n)&&(c=l[n],i.push({year:n,leaveCount:c}));return i},deleteLeaveInfoClicked:function(t){var e;return e=t.model.index,this.domHost.showModalPrompt("Are you sure to Delete",function(t){return function(i){if(i)return t.splice("leaveData.data",e,1),app.db.upsert("employee-leave-data",t.leaveData,function(e){var i;return i=e.serial,i===t.leaveData.serial})}}(this))},_loadInvoice:function(t,e){var i,a;return a=this.matchingVisitList.map(function(t){return t.serial}),i=app.db.find("visit-invoice",function(e){return function(e){var i;return i=e.patientSerial,i===t}}(this)),this.set("invoiceList",i)},_calculateTotalInvoiceIncome:function(t){var e,i,a,r;for(r=0,i=0,a=t.length;i<a;i++)e=t[i],r+=parseInt(null!=e.totalAmountReceieved?e.totalAmountReceieved:e.totalAmountReceieved=0);return r},_computedTotalInvoiceBilled:function(t){var e,i,a,r;for(r=0,i=0,a=t.length;i<a;i++)e=t[i],r+=parseInt(null!=e.totalBilled?e.totalBilled:e.totalBilled=0);return r},calculateDue:function(t,e){return null==t&&(t=0),null==e&&(e=0),this.$toTwoDecimalPlace(parseInt(t)-parseInt(e))},getVisitSerial:function(t){var e;return t.visitSerial?t.visitSerial:(e=this.matchingVisitList.find(function(e){return function(e){return e.invoiceSerial===t.serial}}(this)),e.serial)},createNewInvoiceButtonClicked:function(t){return this.domHost.navigateToPage("#/create-invoice/invoice:new/patient:"+this.patient.serial+"/visit:new")},editInvoiceItemClicked:function(t){var e,i,a;return e=t.model.item,e.visitSerial?a=e.visitSerial:(i=this.matchingVisitList.find(function(t){return function(t){return t.invoiceSerial===e.serial}}(this)),a=i.serial),this.domHost.navigateToPage("#/create-invoice/invoice:"+e.serial+"/patient:"+this.patient.serial+"/visit:"+a)},previewInvoiceItemClicked:function(t){var e,i,a;return e=t.model.item,e.visitSerial?a=e.visitSerial:(i=this.matchingVisitList.find(function(t){return function(t){return t.invoiceSerial===e.serial}}(this)),a=i.serial),this.domHost.navigateToPage("#/print-invoice/invoice:"+e.serial+"/patient:"+this.patient.serial+"/visit:"+a)},invoiceMarkedAsCompleteButtonClicked:function(t){var e;return e=t.model.item,e.flags.markAsCompleted=!0,app.db.upsert("visit-invoice",e,function(t){return function(t){var i;return i=t.serial,e.serial===i}}(this)),this._loadInvoice(this.patient.serial,this.organization.idOnServer),this.$$("#invoiceMenuButton").close()},flagAsErrorInvoiceItemClicked:function(t){var e;return e=t.model.item,e.flags.flagAsError=!0,app.db.upsert("visit-invoice",e,function(t){return function(t){var i;return i=t.serial,e.serial===i}}(this)),this._loadInvoice(this.patient.serial,this.organization.idOnServer),this.$$("#invoiceMenuButton").close()},_getNonResultedTestAdvised:function(t,i){var a;return this.loadingCounter++,a={apiKey:this.user.apiKey,patientIdentifier:t,userId:this.user.idOnServer},this.callApi("/bdemr-non-resulted-advised-test-list",a,function(t){return function(a,r){var n,s,o,l,c,d,u,h,p,m;for(t.loadingCounter--,r.hasError?t.domHost.showModalDialog(r.error.message):(h=r.data,u=h.length?h.filter(function(t){return!t.data.status.invoiceSerial}).sort(function(t,e){return e.createdDatetimeStamp-t.createdDatetimeStamp}):[]),m=u.reduce(function(t,e){return t[e.visitSerial]=null,t},{}),n=[],l=0,d=u.length;l<d;l++){o=u[l];for(c in m)e.call(m,c)&&(p=m[c],c===o.visitSerial&&(s=n.findIndex(function(t){return"visitSerial"in t&&t.visitSerial===c}),s===-1?n.push({visitSerial:c,createdDatetimeStamp:o.createdDatetimeStamp,
doctorName:o.doctorName,investigations:[o]}):n[s].investigations.push(o)))}if(t.set("pendingInvoiceList",[]),t.set("pendingInvoiceList",n),i)return i()}}(this))},makeNewInvoiceButtonClicked:function(t){var e,i;return e=t.model.item,i=encodeURIComponent(JSON.stringify(e.investigations)),this.domHost.navigateToPage("#/create-invoice/visit:"+e.visitSerial+"/invoice:new/patient:"+this.patient.serial+"/testAdviseAdded:"+i)}})}).call(this);
//# sourceMappingURL=page-patient-viewer.coffee-compiled.js.map</script>
</dom-module>