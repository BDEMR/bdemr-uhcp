<!-- paper-* --><!-- Custom AutoComplete --><!-- style --><!-- behavior --><!-- custom-elements --><!-- element --><dom-module id="page-medicine-dispension">
  <template>

    <!-- style -->

    <style is="custom-style" include="common-style">
      .card-custom-header {
        padding: 15px;
        border-bottom: 1px solid var(--paper-grey-200);
        background-color: var(--paper-grey-50);
      }

      .card-custom-header .title {
        font-size: 20px;
        font-weight: 500;
        line-height: 28px;
        color: var(--brand-primary-color);
      }

      .medication-item {
        padding: 15px;
      }

      .medication-item:nth-child(odd) {
        background-color: var(--paper-grey-100);
      }

      .medication-item .patient-name {
        font-weight: bold;
        margin-bottom: 10px;
      }

      .prescription {
        border-bottom: 1px solid #eee;
      }

      .prescription:nth-last-child(2) {
        border: none;
      }

      @media only screen and (max-width: 480px) {
        .table--medicine {
          @apply(--layout-vertical);
          border: 1px solid var(--paper-green-300);

          app-drawer {
            --app-drawer-width: 95%;
          }
        }
    </style>

    <!-- local DOM -->


    <div class="master-container">

      <div class="limiting-container">


        <!-- Organization Selection- start -->

        <paper-card>
          <div class="card-content">

            <paper-dropdown-menu class="m-right-8" label="Clinic/Hospital" id="organizationDropdown">
              <paper-listbox class="dropdown-content" on-iron-select="organizationSelected" selected="{{selectedOrganizationIndex}}">
                <template is="dom-repeat" items="[[organizationsIBelongToList]]" as="organization">
                  <paper-item>[[organization.name]]</paper-item>
                </template>
              </paper-listbox>
            </paper-dropdown-menu>

            <template is="dom-if" if="[[$notUndefined(selectedOrganizationIndex)]]">
              <paper-dropdown-menu class="m-horizontal-4" label="Department" id="departmentDropdown">
                <paper-listbox class="dropdown-content" on-iron-select="departmentSelected" selected="{{selectedDepartmentIndex}}">
                  <template is="dom-repeat" items="[[patientStayObject.departmentList]]" as="department">
                    <paper-item>[[department.name]]</paper-item>
                  </template>
                </paper-listbox>
              </paper-dropdown-menu>
            </template>

            <template is="dom-if" if="[[$notUndefined(selectedDepartmentIndex)]]">
              <paper-dropdown-menu class="m-horizontal-4" label="Unit" id="unitDropdown">
                <paper-listbox class="dropdown-content" on-iron-select="unitSelected" selected="{{selectedUnitIndex}}">
                  <template is="dom-repeat" items="[[unitList]]" as="unit">
                    <paper-item>[[unit.name]]</paper-item>
                  </template>
                </paper-listbox>
              </paper-dropdown-menu>
            </template>

            <template is="dom-if" if="[[$notUndefined(selectedUnitIndex)]]">
              <paper-dropdown-menu class="m-horizontal-4" label="Ward" id="wardDropdown">
                <paper-listbox class="dropdown-content" on-iron-select="wardSelected" selected="{{selectedWardIndex}}">
                  <template is="dom-repeat" items="[[wardList]]" as="ward">
                    <paper-item>[[ward.name]]</paper-item>
                  </template>
                </paper-listbox>
              </paper-dropdown-menu>
            </template>

          </div>
        </paper-card>

        <paper-card heading="Medication List">
          <div class="">
            <template is="dom-repeat" items="[[matchingMedicationList]]">
              <div class="medication-item">
                <div class="patient-name">[[item.patient.name]]</div>
                <div class="m-left-16">
                  <template is="dom-repeat" items="[[item.medicationList]]" as="medicine">
                    <paper-item class="prescription">
                      <div class="flex-2">[[medicine.data.brandName]]</div>
                      <div class="flex-1">[[medicine.data.doseDirection]]</div>
                      <div class="flex-1 type caption-2">
                        <span class="type secondary">Last Dose: </span>
                        <span>[[_getLastDoseDateTime(medicine.data.intakeDateTimeStampList, medicine.data.intakeDateTimeStampList.length)]]</span>
                      </div>
                      <!-- <div class="flex-1 layout vertical">
                        <span class="type secondary caption-2">Next Dose</span>
                        <span>[[_getNextDoseDateTime(item.data.intakeDateTimeStampList, item.data.nextDoseDateTimeStamp)]]</span>
                      </div> -->
                      <div class="flex-1">
                        <paper-button class="btn btn-primary btn-sm" on-tap="tookDoseClicked">Give Medicine</paper-button>
                      </div>
                    </paper-item>
                  </template>
                </div>
              </div>
            </template>
          </div>
        </paper-card>


      </div>

    </div>

  </template>
  <script>(function(){app.behaviors.local.patientStayMixin||(app.behaviors.local.patientStayMixin={}),app.behaviors.local.patientStayMixin={properties:{selectedView:{type:Number,value:function(){return 0}},patientStay:{type:Object,notify:!0,value:function(){return null}},patientStayObject:{type:Object,notify:!0,value:function(){return null}},organizationsIBelongToList:{type:Array,value:function(){return[]}},admissionTypeList:{type:Array,value:function(){return["Out patient/ Discharged with advice","Out patient/ Advised admission","In-Patient","Exclusion Criteria"]}},locationList:{type:Array,value:function(){return["Out Patient"]}},dischargeReasonList:{type:Array,value:function(){return["Patient Got better","Patient require care at bigger facility","Patient care not possible at current facility","Patient do not require further stay at hospital","Death"]}},dischargedToList:{type:Array,value:function(){return["Home","Rehabilitation","Mortuary"]}},selectedOrganizationIndex:{type:Number,value:function(){return null}},selectedDepartmentIndex:{type:Number,value:function(){return null},observer:"departmentSelected"},selectedUnitIndex:{type:Number,value:function(){return null},observer:"unitSelected"},selectedWardIndex:{type:Number,value:function(){return null},observer:"wardSelected"},seatList:{type:Array,value:function(){return[]}},patientDischarged:{type:Boolean,value:function(){return!1}},advisedAdmission:{type:Boolean}},_notifyInvalidPatientStay:function(){return this.isPatientStayValid=!1,this.domHost.showModalDialog("Invalid Patient Stay Provided")},_loadVisitPatientStay:function(t){var e;if(e=app.db.find("visit-patient-stay",function(e){var i;return i=e.serial,i===t}),1===e.length){if(this.isPatientStayValid=!0,this.isFullVisitValid=!0,this.set("patientStay",e[0]),this.patientStay.adviseOnly===!0)return;return this.async(function(t){return function(){return t.patientStay.data.admissionDateTimeStamp=t.$mkDate(t.patientStay.data.admissionDateTimeStamp)}}(this)),this._loadOrganizationsIBelongTo(function(t){return function(){var e;return e=t.patientStay.organizationQueryParameters,t.set("selectedOrganizationIndex",e.selectedOrganizationIndex),t._loadPatientStayObject(t.organizationsIBelongToList[t.selectedOrganizationIndex].idOnServer,function(){return t._loadDropdowns()})}}(this))}return this._notifyInvalidPatientStay()},_loadOrganizationsIBelongTo:function(t){var e;return e={apiKey:this.user.apiKey},this.callApi("/bdemr-organization-list-those-user-belongs-to",e,function(e){return function(i,a){return a.hasError?e.domHost.showModalDialog(a.error.message):(e.set("organizationsIBelongToList",a.data.organizationObjectList),t?t():void 0)}}(this))},_loadDropdowns:function(){var t;if("organizationQueryParameters"in this.patientStay)return t=this.patientStay.organizationQueryParameters,this.set("selectedOrganizationIndex",t.selectedOrganizationIndex),this.set("selectedDepartmentIndex",t.selectedDepartmentIndex),this.set("selectedUnitIndex",t.selectedUnitIndex),this.set("selectedWardIndex",t.selectedWardIndex)},$notUndefined:function(t){return null!=t},_loadPatientStayObject:function(t,e){var i;return i={apiKey:this.user.apiKey,organizationId:t},this.callApi("/bdemr-organization-patient-stay-get-object",i,function(t){return function(i,a){return a.hasError?t.domHost.showModalDialog(a.error.message):(t.set("patientStayObject",a.data.patientStayObject),t.patientStayObject.locations||(t.patientStayObject.locations=["Out Patient"]),e?e():void 0)}}(this))},organizationSelected:function(t){if(null!=this.selectedOrganizationIndex)return this.set("organization",this.organizationsIBelongToList[this.selectedOrganizationIndex]),this._loadPatientStayObject(this.organization.idOnServer,function(t){return function(){return t.async(function(){return this._populateSeatList()})}}(this))},departmentSelected:function(t){var e;if(null!=this.selectedDepartmentIndex)return e=this.patientStayObject.departmentList[this.selectedDepartmentIndex],this.department=e,this.set("unitList",e.unitList),this.debounce("iron-select",function(){return this._populateSeatList(this.department)},50)},unitSelected:function(t){var e;if(null!=this.selectedUnitIndex)return e=this.department.unitList[this.selectedUnitIndex],this.unit=e,this.set("wardList",e.wardList),this.debounce("iron-select",function(){return this._populateSeatList(this.department,this.unit)},50)},wardSelected:function(t){var e;if(null!=this.selectedWardIndex)return e=this.unit.wardList[this.selectedWardIndex],this.ward=e,this.debounce("iron-select",function(){return this._populateSeatList(this.department,this.unit,this.ward)},50)},_populateSeatList:function(t,e,i){var a,n;return null==t&&(t=null),null==e&&(e=null),null==i&&(i=null),i?(n=function(){var n,s,r,o;for(r=this.patientStayObject.seatList,o=[],n=0,s=r.length;n<s;n++)a=r[n],t.name===a.department&&e.name===a.unit&&i.name===a.ward&&o.push(a);return o}.call(this),this.set("seatList",n)):e?(n=function(){var i,n,s,r;for(s=this.patientStayObject.seatList,r=[],i=0,n=s.length;i<n;i++)a=s[i],t.name===a.department&&e.name===a.unit&&r.push(a);return r}.call(this),this.set("seatList",n)):t?(n=function(){var e,i,n,s;for(n=this.patientStayObject.seatList,s=[],e=0,i=n.length;e<i;e++)a=n[e],t.name===a.department&&s.push(a);return s}.call(this),this.set("seatList",n)):(this.set("seatList",this.patientStayObject.seatList),this.$$("#seatList").fire("iron-resize"))},fillTapped:function(t){var e,i,a,n,s;for(n=this.seatList,i=e=0,a=n.length;e<a;i=++e)s=n[i],s.patientSerial===this.patient.serial&&(this.set("seatList."+i+".patientSerial",null),this.set("seatList."+i+".location",""));return this.set("seatList."+t.model.index+".patientSerial",this.patient.serial),this.set("seatList."+t.model.index+".location","Nil"),this.savePatientStayObject()},dischargeTapped:function(t){return this.set("seatList."+t.model.index+".patientSerial",null),this.set("seatList."+t.model.index+".location",""),this.unshift("patientStay.data.currentLocation",{datetimeStamp:lib.datetime.now(),location:"Discharged"}),this.patientDischarged=!0,this.set("selectedView",1),this.patientStay.data.dischargedByDoctorName=this.user.name},addOverflow:function(){var t;return t={department:this.department.name,unit:this.unit.name,ward:this.ward.name},t.patientSerial=this.patient.serial,t.name="Overflow Seat",t.uid=this.patientStayObject.seatSeed++,t.isOverflow=!0,this.push("seatList",t)},admissionTypeChanged:function(t){switch(this.patientStay.data.admissionType){case"Out patient/ Discharged with advice":case"Seen in emergency/ Discharged with advice":return this.advisedAdmission=!1;case"Out patient/ Advised admission":case"Seen in emergency/ Advised admission":return this.advisedAdmission=!0;default:return this.showAdmission=!0}},customLocationAdded:function(t){var e,i,a,n,s,r,o,d;if(13===t.keyCode){for(d=t.target.value,t.target.value="",this.push("patientStayObject.locations",d),e=this.$$("#locationRadioGroup"),e.selected=d,s=this.seatList,r=[],a=i=0,n=s.length;i<n;a=++i)o=s[a],o.patientSerial===this.patient.serial?r.push(this.set("seatList."+a+".location",d)):r.push(void 0);return r}},locationChanged:function(t){var e,i,a,n,s,r;for(n=this.seatList,s=[],i=e=0,a=n.length;e<a;i=++e){if(r=n[i],r.patientSerial===this.patient.serial){this.set("seatList."+i+".location",this.selectedLocation),this.unshift("patientStay.data.currentLocation",{datetimeStamp:lib.datetime.now(),location:this.selectedLocation});break}s.push(void 0)}return s},dischargeReasonChanged:function(t){var e,i,a;return e=t.target.checked,a=t.target.name,e?this.push("patientStay.data.dischargeReason",a):(i=this.patientStay.data.dischargeReason.indexOf(a))>-1?this.splice("patientStay.data.dischargeReason",i,1):void 0},customDischargeReasonAdded:function(t){var e;if(13===t.keyCode)return e=t.target.value,t.target.value="",this.push("patientStay.data.dischargeReason",e)},dischargedToChanged:function(t){var e,i,a;return e=t.target.checked,a=t.target.name,e?this.push("patientStay.data.dischargeTo",a):(i=this.patientStay.data.dischargeTo.indexOf(a))>-1?this.splice("patientStay.data.dischargeTo",i,1):void 0},customDischargeToAdded:function(t){var e;if(13===t.keyCode)return e=t.target.value,t.target.value="",this.push("patientStay.data.dischargeTo",e)},$findCreator:function(t){return"me"},_makeNewPatientStay:function(){var t;return t={serial:null,lastModifiedDatetimeStamp:0,createdDatetimeStamp:lib.datetime.now(),lastSyncedDatetimeStamp:0,createdByUserSerial:this.user.serial,visitSerial:null,patientSerial:this.patient.serial,adviseOnly:!1,data:{referredByDoctorName:"",admittedByDoctorName:this.user.name,admissionDateTimeStamp:this.$mkDate(new Date),admissionType:"",advise:"",locationHospitalName:"",locationDepartment:"",locationUnit:"",locationWard:"",locationBed:"",currentLocation:["Out Patient"],dischargedByDoctorName:"",dischargeDatetimeStamp:null,dischargeReason:[],dischargeTo:[]}},this.set("patientStay",t),this.isPatientStayValid=!0},arrowBackButtonPressed:function(t){return this.domHost.navigateToPreviousPage()},$of:function(t,e){return e in t||(t[e]=null),t[e]},_sortByDate:function(t,e){return e.datetimeStamp-t.datetimeStamp},addCustomDischargedPressed:function(t){var e;if(13===t.which)return e=t.target.value,t.target.value="",this.patientStay.data.dischargeCustomCheckedMap[e]=!1,this.push("patientStay.data.dischargeCustomList",e)},patientStayDischargeChanged:function(t){var e,i;return e=t.model.item,i=!this.get("patientStay.data.dischargeCustomCheckedMap."+e),this.set("patientStay.data.dischargeCustomCheckedMap."+e,i)},_saveBedInfo:function(){var t,e,i,a,n;for(a=this.seatList,n=[],t=0,i=a.length;t<i;t++){if(e=a[t],e.patientSerial===this.patient.serial){this.patientStay.data.locationHospitalName=this.organizationsIBelongToList[this.selectedOrganizationIndex].name,this.patientStay.data.locationDepartment=e.department,this.patientStay.data.locationUnit=e.unit,this.patientStay.data.locationWard=e.ward,this.patientStay.data.locationBed=e.name;break}n.push(void 0)}return n},_validatePatientStayData:function(t){if(this.patientDischarged){if(!t.data.dischargeDatetimeStamp)return this.domHost.showToast("Discharge Date is required"),!1;if(!t.data.dischargeReason.length)return this.domHost.showToast("Please specify a discharge reason"),!1}else if(this.advisedAdmission){if(!t.data.admissionDateTimeStamp)return this.domHost.showToast("Admission Date is required"),!1}else if(!t.data.advise)return this.domHost.showToast("Specify Advise to patient"),!1;return!0},savePatientStayPressed:function(){if(this._validatePatientStayData(this.patientStay))return this.advisedAdmission?this._savePatientStay():this._savePatientStayAdviseOnly()},savePatientStayObject:function(t){var e;return e={apiKey:this.user.apiKey,organizationId:this.organization.idOnServer,patientStayObject:this.patientStayObject},this.callApi("/bdemr-organization-patient-stay-set-object",e,function(e){return function(i,a){return a.hasError?e.domHost.showModalDialog(a.error.message):t?t():void 0}}(this))},_savePatientStay:function(){var t;return null===this.visit.patientStaySerial&&null===this.patientStay.serial&&(this.patientStay.serial=this.generateSerialForPatientStay(),this.patientStay.createdDatetimeStamp=lib.datetime.now(),this.visit.patientStaySerial=this.patientStay.serial,this._saveVisit()),this._saveBedInfo(),this.patientStay.organizationQueryParameters={selectedOrganizationIndex:this.selectedOrganizationIndex,selectedDepartmentIndex:this.selectedDepartmentIndex,selectedUnitIndex:this.selectedUnitIndex,selectedWardIndex:this.selectedWardIndex},this.patientStay.data.admissionDateTimeStamp=new Date(this.patientStay.data.admissionDateTimeStamp).getTime(),this.patientDischarged&&(this.patientStay.data.dischargeDatetimeStamp=new Date(this.patientStay.data.dischargeDatetimeStamp).getTime()),this.organization.idOnServer?this.savePatientStayObject(function(t){return function(){return t.patientStay.lastModifiedDatetimeStamp=lib.datetime.now(),app.db.upsert("visit-patient-stay",t.patientStay,function(e){var i;return i=e.serial,t.patientStay.serial===i}),t.domHost.showToast("Patient Stay Saved!")}}(this)):(this.patientStay.lastModifiedDatetimeStamp=lib.datetime.now(),app.db.upsert("visit-patient-stay",this.patientStay,function(t){return function(e){var i;return i=e.serial,t.patientStay.serial===i}}(this)),this.domHost.showToast("Patient Stay Saved!")),t=this.patientStay,this.set("patientStay",{}),this.set("patientStay",t),this.selectedVisitPageIndex=0},_savePatientStayAdviseOnly:function(){var t;return null===this.visit.patientStaySerial&&null===this.patientStay.serial&&(this.patientStay.serial=this.generateSerialForPatientStay(),this.patientStay.createdDatetimeStamp=lib.datetime.now(),this.visit.patientStaySerial=this.patientStay.serial,this._saveVisit()),this.patientStay.lastModifiedDatetimeStamp=lib.datetime.now(),this.patientStay.adviseOnly=!0,app.db.upsert("visit-patient-stay",this.patientStay,function(t){return function(e){var i;return i=e.serial,t.patientStay.serial===i}}(this)),this.domHost.showToast("Patient Stay Saved!"),t=this.patientStay,this.set("patientStay",{}),this.set("patientStay",t),this.selectedVisitPageIndex=0},_notifyInvalidPatientStay:function(){return this.isVisitValid=!1,this.domHost.showModalDialog("Invalid Patient Stay Provided")},calculateLengthOfStay:function(t,e){var i;return i=lib.datetime.diff(new Date(e),new Date(t)),i/864e5},navigatedOut:function(){return this.patientStay={},this.isPatientStayValid=!0,this.selectedView=0,this.patientStay=null,this.patientStayObject=null,this.organizationsIBelongToList=[],this.selectedOrganizationIndex=null,this.selectedDepartmentIndex=null,this.selectedUnitIndex=null,this.selectedWardIndex=null,this.seatList=[],this.patientDischarged=!1,this.advisedAdmission=null}}}).call(this);
//# sourceMappingURL=mixin-patient-stay.coffee-compiled.js.map</script>
  <script>(function(){Polymer({is:"page-medicine-dispension",behaviors:[app.behaviors.commonComputes,app.behaviors.dbUsing,app.behaviors.pageLike,app.behaviors.translating,app.behaviors.apiCalling],properties:{user:{type:Object,notify:!0,value:null},patient:{type:Object,notify:!0,value:null},organization:{type:Object,value:function(){return null}},selectedSeatsPageIndex:{type:Number,notify:!0,value:0},matchingMedicationList:{type:Array,notify:!0,value:[]},patientStayObject:{type:Object,notify:!0,value:function(){return null}},organizationsIBelongToList:{type:Array,value:function(){return[]}},selectedOrganizationIndex:{type:Number,value:function(){return null}},selectedDepartmentIndex:{type:Number,value:function(){return null}},selectedUnitIndex:{type:Number,value:function(){return null}},selectedWardIndex:{type:Number,value:function(){return null}},seatList:{type:Array,value:function(){return[]}}},navigatedIn:function(){return this._loadUser(),this._loadOrganizationsIBelongTo()},navigatedOut:function(){},$notUndefined:function(t){return null!=t},_loadUser:function(){var t;if(t=app.db.find("user"),1===t.length)return this.user=t[0]},_returnSerial:function(t){return t+1},_sortByDate:function(t,e){return t.date<e.date?1:t.date>e.date?-1:void 0},arrowBackButtonPressed:function(t){return this.domHost.navigateToPreviousPage()},$findCreator:function(t){return"me"},_isEmptyString:function(t){return null===t||"undefined"===t||""===t},_compareFn:function(t,e,n){return"<"===e?t<n:">"===e?t>n:"=="===e?t===n:">="===e?t>=n:"<="===e?t<=n:void 0},_isEmptyArray:function(t){return 0===t.length},_computeTotalDaysCount:function(t,e){var n,i,a;return t?(i=864e5,e=new Date(e),n=t-e,a=Math.round(n/i),this.$TRANSLATE_NUMBER(a,this.LANG)):this.$TRANSLATE("As Needed",this.LANG)},_loadPatientStayObject:function(t,e){var n;return n={apiKey:this.user.apiKey,organizationId:t},this.callApi("/bdemr-organization-patient-stay-get-object",n,function(t){return function(n,i){return i.hasError?t.domHost.showModalDialog(i.error.message):(t.set("patientStayObject",i.data.patientStayObject),e?e():void 0)}}(this))},_loadOrganizationsIBelongTo:function(t){var e;return e={apiKey:this.user.apiKey},this.callApi("/bdemr-organization-list-those-user-belongs-to",e,function(e){return function(n,i){return i.hasError?e.domHost.showModalDialog(i.error.message):(e.set("organizationsIBelongToList",i.data.organizationObjectList),t?t():void 0)}}(this))},organizationSelected:function(t){return this.set("organization",this.organizationsIBelongToList[this.selectedOrganizationIndex]),this._loadPatientStayObject(this.organization.idOnServer,function(t){return function(){return t.selectedDepartmentIndex=null,t.selectedUnitIndex=null,t.selectedWardIndex=null}}(this))},departmentSelected:function(t){return this.department=this.patientStayObject.departmentList[this.selectedDepartmentIndex],this.set("unitList",this.department.unitList),this.selectedUnitIndex=null,this.selectedWardIndex=null},unitSelected:function(t){return this.unit=this.department.unitList[this.selectedUnitIndex],this.set("wardList",this.unit.wardList),this.selectedWardIndex=null},wardSelected:function(t){var e,n,i,a,r;for(this.ward=this.unit.wardList[this.selectedWardIndex],r=[],i=this.patientStayObject.seatList,e=0,n=i.length;e<n;e++)a=i[e],this.department.name===a.department&&this.unit.name===a.unit&&this.ward.name===a.ward&&null!==a.patientSerial&&r.push(a);return this._getPatientMedication(r,function(t){return function(e){return e.length?t.set("matchingMedicationList",e):t.domHost.showToast("No Data Yet")}}(this))},_getPatientMedication:function(t,e){var n;return this.isLoading=!0,n={apiKey:this.user.apiKey,seatList:t},this.callApi("bdemr-get-patient-medications",n,function(t){return function(n,i){return n?n:i.hasError?(t.domHost.showModalDialog(i.error.message),void(t.isLoading=!1)):(t.isLoading=!1,e(i.data))}}(this))},_getFirstDoseDateTime:function(t){var e;return 0!==t.length?(e=t[0],this.$formatDateTime(e)):"Never Taken"},_getLastDoseDateTime:function(t){var e;return 0!==t.length?(e=t[t.length-1],this.$formatDateTime(e)):"Never Taken"},_getNextDoseDateTime:function(t,e){var n;return 0!==t.length?(n=e,this.$formatDateTime(n)):"Taken Immediately"},_getItemDose:function(t){switch(!1){case.25!==t:return"1/4";case.5!==t:return"1/2";default:return this.$TRANSLATE_NUMBER(t,this.LANG)}},_getDosesLeft:function(t,e){var n;return n=t-e,n>0?n:0},deleteMedicationClicked:function(t){var e,n,i;return i=t.model,e=i.index,n=i.item,this.domHost.showModalPrompt("Are you sure to delete this medication",function(t){return function(i){if(i)return app.db.remove("patient-medications",n._id),app.db.insert("patient-medications--deleted",{serial:n.serial}),"continue"===n.data.status?t.splice("medicationList",e,1):t.splice("stoppedMedicationList",e,1)}}(this))},tookDoseClicked:function(t){var e,n,i,a,r;return r=t.model,e=r.index,i=r.medicine,t.model.push("medicine.data.intakeDateTimeStampList",(new Date).getTime()),n=t.model.get(["medicine.data.intakeDateTimeStampList",i.data.intakeDateTimeStampList.length-1]),a=new Date(n),a.setHours(a.getHours()+t.model.get("medicine.data.intervalInHours")),t.model.set("medicine.data.nextDoseDateTimeStamp",a.getTime()),this._updateMedicationData(i)},refillDoseButtonClicked:function(t){var e;return e=t.model.item,t.model.set("item.data.quantityPerPrescription",e.data.quantityPerPrescription+10),this._updateMedicationData(e)},isMedicineOverdue:function(t){return t<lib.datetime.now()},_updateMedicationData:function(t){var e;return t.lastModifiedDatetimeStamp=lib.datetime.now(),e={apiKey:this.user.apiKey,prescription:t},this.callApi("bdemr-update-patient-medication-data",e,function(t){return function(e,n){return n.hasError?t.domHost.showModalDialog(n.error.message):t.domHost.showToast("Updated Successfully")}}(this))}})}).call(this);
//# sourceMappingURL=page-medicine-dispension.coffee-compiled.js.map</script>
</dom-module>