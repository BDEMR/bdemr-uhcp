<!-- style --><!-- behavior --><!-- custom-elements --><!-- element --><div hidden="" by-polymer-bundler=""><link rel="import" href="../html-block/html-block.html"></div><dom-module id="page-print-record">
  <template>

    <!-- style -->

    <style is="custom-style" include="common-style">
    .limiting-container {
      margin-top: 10px;
    }
    
    .limiting-container {
      max-width: 210mm;
      min-height: 230mm;
      /*min-height: 297mm;*/
    }
    
    .document {
      font-family: 'Times New Roman';
      background: white;
    }
    
    .document-title {
      font-size: 20px;
      font-weight: bold;
    }
    
    @media print {
      .limiting-container {
        /*margin-top: -60px;*/
        /*border: 1px solid black;*/
      }
    }
    
    .collection {
      color: red;
      background: grey;
    }
    
    .document-header {
      padding-left: 10px;
      padding-right: 10px;
    }
    
    .document-header .logo {
      max-width: 128px;
      max-height: 128px;
    }
    
    .horiline {
      width: 100%;
      height: 0px;
      /*background: black;*/
      border: 1px solid black;
      margin-bottom: 6px;
    }
    
    .leftSide {
      margin-left: 6px;
    }
    
    .leftSideLine1 {
      font-size: 24px;
    }
    
    .rightSideLine1 {
      font-size: 22px;
    }
    .item{
      padding: 10px;
      border: 1px solid grey;
    }
    </style>

    <!-- local DOM -->

    <div class="master-container">

      <div class="limiting-container document">
        <template is="dom-if" if="[[shouldRender]]">

          <div class="document-header horizontal layout center">

            <template is="dom-if" if="[[settings.printDecoration.logoDataUri]]">
              <img class="logo" src="[[settings.printDecoration.logoDataUri]]" alt="">
            </template>

            <div class="leftSide vertical layout">
              <div class="leftSideLine1">[[settings.printDecoration.leftSideLine1]]</div>
              <div class="leftSideLine2">[[settings.printDecoration.leftSideLine2]]</div>
              <div class="leftSideLine3">[[settings.printDecoration.leftSideLine3]]</div>
            </div>
            <div class="flex"></div>
            <div class="rightSide vertical layout end">
              <div class="rightSideLine1">[[settings.printDecoration.rightSideLine1]]</div>
              <div class="rightSideLine2">[[settings.printDecoration.rightSideLine2]]</div>
              <div class="rightSideLine3">[[settings.printDecoration.rightSideLine3]]</div>
            </div>
          </div>



          <div class="horiline"></div>

          <div class="document-header horizontal layout center">
            <template is="dom-if" if="[[!patient.isForOrganizationOnly]]">
              Name: {{patient.name}} <br>
              Age :[[_computeAge(patient.dob)]] years <br>
              Allergy : <br>
              Blood Group : <br>
            </template>
            <template is="dom-if" if="[[patient.isForOrganizationOnly]]">
              Name: REDACTED FOR CONFIDENTIALITY <br>
              Age : REDACTED FOR CONFIDENTIALITY  <br>
              Allergy : <br>
              Blood Group : <br>
            </template>
          </div>

<!-- Prescription - start -->
        <paper-card class="m-top-16" heading="Prescription">
          <paper-listbox>
            <template is="dom-repeat" items="{{medications}}">
              <div class="item">
                <div class="type body flex">
                  <div><span>#[[_indexIncrement(index)]].</span>
                    <span class="document-title">{{item.data.brandName}}</span>
                    <span>({{item.data.genericName}})</span>
                    <span class="type caption bg-gray">{{item.data.manufacturer}}</span>
                  </div>
                </div>
                <div>
                  <span>{{item.data.strength}}</span> ,
                  <span>{{item.data.quantityPerPrescription}} {{item.data.form}}</span> ,
                  <span>{{item.data.route}}</span> ,
                  <span>{{item.data.direction}}</span> ,
                  <span><div class="type caption m-horizontal-4">[[$TRANSLATE_NUMBER(item.data.dose, LANG)]] [[$TRANSLATE(item.data.form, LANG)]] 
                    
                    <span hidden="[[!item.data.doseDirection]]">
                          [[$TRANSLATE_NUMBER(item.data.doseDirection, LANG)]]</span> for [[_computeTotalDaysCount(item.data.endDateTimeStamp,item.data.startDateTimeStamp)]] <span hidden$="[[!item.data.endDateTimeStamp]]">[[$TRANSLATE('Days',LANG)]]</span></div></span>
                </div>
              </div>
            </template>
          </paper-listbox>

        </paper-card></template>

      </div>
      

      <div class="sp-2"></div>
      <div class="horizontal layout center center-justified p-horizontal-16">
        <div class="type body italic"><strong>printed by: </strong>[[user.name]]</div>
      </div>
    </div>

  </template>
  <script>(function(){Polymer({is:"page-print-record",behaviors:[app.behaviors.commonComputes,app.behaviors.dbUsing,app.behaviors.translating,app.behaviors.pageLike],properties:{isPrescriptionValid:{type:Boolean,notify:!1,value:!0},isPatientValid:{type:Boolean,notify:!1,value:!0},prescription:{type:Object,notify:!0,value:null},medications:{type:Array,notify:!0,value:[]},matchingCurrentMedicineList:{type:Array,notify:!0,value:[]},matchingFavMedicineList:{type:Array,notify:!0,value:[]},patient:{type:Object,notify:!0,value:null},medicine:{type:Object,notify:!0,value:null},settings:{type:Object,notify:!0},computedEndDate:{type:String,computed:"_showComputedEndDate(duplicateMedicineEditablePart.endDateTimeStamp)"}},_makeSettings:function(){var t;return t={serial:"only",isSyncEnabled:!1,printDecoration:{leftSideLine1:"My Institution",leftSideLine2:"My Institution Address",leftSideLine3:"My Institution Contact",rightSideLine1:"My Name",rightSideLine2:"My Degrees",rightSideLine3:"My Contact",footerLine:"A simple message on the bottom",logoDataUri:null},billingTargetEmailAddress:"",nsqipTargetEmailAddress:"",monetaryUnit:"BDT"}},_getSettings:function(){var t,e;return t=app.db.find("settings"),e=0===t.length?this._makeSettings():t[0]},_computeAge:function(t){var e,i,n,r;return r=new Date,i=new Date(t),e=r.getFullYear()-i.getFullYear(),n=r.getMonth()-i.getMonth(),(n<0||0===n&&r.getDate()<i.getDate())&&e--,e},printButtonPressed:function(t){return window.print()},arrowBackButtonPressed:function(t){return this.domHost.navigateToPreviousPage()},_getRecord:function(t,e){var i;return i=app.db.find(e,function(e){var i;return i=e.serial,i===t}),1===i.length?i[0]:null},_getPatient:function(t){var e;return e=app.db.find("patient-list",function(e){var i;return i=e.serial,i===t}),1===e.length?e[0]:null},navigatedIn:function(){var t;return t=this.domHost.getPageParams(),t.prescription?(this.record=this._getRecord(t.prescription,"visit-prescription"),this.record?(this.medications=app.db.find("patient-medications",function(t){return function(e){var i;return i=e.prescriptionSerial,i===t.record.serial}}(this)),this.patient=this._getPatient(t.patient),this.patient?(this.settings=this._getSettings(),this.shouldRender=!0):void this.domHost.showModalDialog("Invalid Patient Identifier")):void this.domHost.showModalDialog("Invalid prescription Identifier")):void this.domHost.showModalDialog("Missing prescription!")},navigatedOut:function(){return this.shouldRender=!1},_indexIncrement:function(t){return t+1},_computeTotalDaysCount:function(t,e){var i,n;return t?(n=864e5,e=new Date(e),t=new Date(t),i=t-e,Math.round(i/n)):"As Needed"}})}).call(this);
//# sourceMappingURL=page-print-record.coffee-compiled.js.map</script>
</dom-module>