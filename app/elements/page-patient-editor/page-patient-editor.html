<!-- style --><!-- behavior --><!-- custom-elements --><!-- element --><dom-module id="page-patient-editor">
  <template>

    <!-- style -->

    <style is="custom-style" include="common-style">
      .limiting-container {
        margin-top: 10px;
      }

      .patient-info-card-counter {
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
        color: #777777;
      }

      .patient-info-cards {
        @apply(--layout-vertical);
        /*@apply(--layout-center);*/
        margin-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
        padding-bottom: 20px;
      }

      .patient-info-cards .row {
        margin-left: 10px;
        /*margin-right: 10px;*/
        margin-top: 10px;
      }

      .patient-info-cards .hr {
        margin-left: 20px;
        margin-right: 20px;
        height: 1px;
        /*width: 100px;*/
        background: #dddddd;
      }

      .patient-info-cards .row .modifier {
        font-size: 14px;
        background: #000000;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
      }

      .patient-info-cards .row .modifier.online {
        background: #757575;
      }

      .patient-info-cards .row .modifier.local-only {
        background: #039BE5;
      }

      .patient-info-cards .row .modifier.locally-updated {
        background: #009688;
      }

      .patient-info-cards .row .modifier.imported {
        background: #4CAF50;
      }

      /*.info-row {
        margin-top: 10px;
      }*/

      .top-info-row {
        margin-top: 10px;
        margin-bottom: 10px;
      }

      .serial-number {
        background: #37474F;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: bold;
      }

      .address1 {
        margin-right: 10px;
      }

      .break-on-tablet {
        @apply(--layout-horizontal);
      }

      @media screen and (max-width: 740px) {
        .break-on-tablet {
          display: block;
        }
      }

      .val {
        text-decoration: underline;
      }

      .custom-input {
        width: calc(100% - 26px);
      }

      @media screen and (min-width: 656px) {
        .custom-input {
          width: calc(50% - 26px);
        }
      }

      @media screen and (min-width: 976px) {
        .custom-input {
          width: calc(33.33333% - 26px);
        }
      }

      .custom-checkbox {
        width: calc(100% - 34px);
      }

      @media screen and (min-width: 656px) {
        .custom-checkbox {
          width: calc(50% - 34px);
        }
      }

      @media screen and (min-width: 976px) {
        .custom-checkbox {
          width: calc(33.33333% - 34px);
        }
      }

      .paper-custom {
        background-color: #fff;
        border: 1px solid #dadada;
        border-radius: 6px;
        padding: 0px 8px 12px 8px;
        margin: 4px;
        min-width: calc(100% - 26px);
      }



      @media screen and (min-width: 656px) {
        .paper-custom {
          min-width: calc(50% - 26px);
        }
        .paper-custom.full {
          min-width: calc(100% - 26px);
        }
      }

      @media screen and (min-width: 976px) {
        .paper-custom {
          min-width: calc(33.33333% - 26px);
        }
        .paper-custom.full {
          min-width: calc(100% - 26px);
        }
      }

      paper-checkbox.custom-checkbox {
        background-color: #fff;
        border: 1px solid #dadada;
        border-radius: 6px;
        padding: 8px;
        margin: 4px;
      }

      /*Print Preview*/

      .document {
        font-family: 'Times New Roman';
        background: white;
      }

      .document-title {
        font-size: 20px;
        font-weight: bold;
      }

      .collection {
        color: red;
        background: grey;
      }

      .document-header {
        /*background-color: #fafafa;*/
        padding-left: 10px;
        padding-right: 10px;
        border-bottom: 1px solid #eee;
      }

      .document-header .logo {
        max-width: 128px;
        max-height: 128px;
      }

      .horiline {
        width: 100%;
        height: 0px;
        /*background: black;*/
        border: 1px solid black;
        margin-bottom: 6px;
      }

      .leftSide {
        margin-left: 6px;
      }

      .leftSideLine1 {
        font-size: 24px;
      }

      .rightSideLine1 {
        font-size: 22px;
      }


      .document-header2 .logo {
        max-width: 128px;
        max-height: 128px;
      }

      .patient-details {
        background-color: #009688;
        color: #fff;
      }

      .print-content {
        border-top: 1px solid #eee;
        @apply(--layout-horizontal);
      }

      .print-content .left {
        width: 34%;
        border-right: 1px solid #eee;
      }

      .print-content .right {
        width: 66%;
      }

      ol.order-list {
        margin: 4px 0;
        padding-left: 16px;
        list-style-type: lower-alpha;
      }

      ul.unorderd-list-custom {
        margin: 4px 0;
        padding-left: 16px;
      }

      ol.order-list li {
        margin: 4px 0;
      }

      .print-sub-header {
        font-size: bold;
        background-color: #fafafa;
        margin-bottom: 8px;
      }

      #printPreview {
        display: none !important;
      }

      @media print {

        #hideOnPrint {
          display: none !important;
        }

        #printPreview {
          display: block !important;
          background-color: transparent;
        }
      }

      @media print {
        app-header-layout #contentContainer {
          overflow-y: unset !important;
        }
      }

      .card-custom-header {
        padding: 8px;
        /*border-bottom: 1px solid var(--paper-grey-200);*/
        background-color: var(--paper-grey-50);
      }

      .deep {
        background-color: var(--paper-grey-200);
      }

      .card-custom-header .title {
        font-size: 20px;
        font-weight: 500;
        color: var(--brand-primary-color);
      }

      vaadin-combo-box ::content paper-input-container {
        padding: 8px 0;
      }


      .custom-label-2 {
        background-color: #fafafa;
        padding: 6px 12px;
        margin: 4px;
        width: calc(100% - 36px);
        border-radius: 6px;
        border: 2px solid #eee;
      }

      .custom-label-2 .type {
        font-weight: 500 !important;
      }

      .custom-label-2.normal {
        border-color: #43A047;
        color: #43A047 !important;
      }

      .custom-label-2.warning {
        border-color: #E65100;
        color: #E65100 !important;
      }

      .custom-label-2.danger {
        border-color: #E53935;
        color: #E53935 !important;
      }

      @media screen and (min-width: 656px) {
        .custom-label-2 {
          width: calc(50% - 36px);
        }
      }

      @media screen and (min-width: 976px) {
        .custom-label-2 {
          width: calc(33.33333% - 36px);
        }
      }

      .custom-radio-button-group.full-width {
        width: calc(100% - 26px) !important;
      }

      .custom-label.full-width {
        width: calc(100% - 26px) !important;
      }


      .custom-radio-button-group,
      .custom-label {
        background-color: #fff;
        border: 1px solid #dadada;
        border-radius: 6px;
        padding: 8px;
        margin: 4px;
        width: calc(100% - 26px);
      }

      @media screen and (min-width: 656px) {
        .custom-radio-button-group,
        .custom-label {
          width: calc(50% - 26px);
        }
      }

      @media screen and (min-width: 976px) {
        .custom-radio-button-group,
        .custom-label {
          width: calc(33.33333% - 26px);
        }
      }

      paper-tab {
        text-transform: uppercase;
      }

      .btn-add {
        min-width: 3em;
      }

      .custom-item {
        padding: 6px 12px;
        border-radius: 6px;
        margin: 6px 4px;
        border: 1px solid #dadada;
        background-color: #fff
      }

      .custom-label.full-width {
        width: calc(100% - 26px) !important;
      }
    </style>

    <!-- local DOM -->

    <div id="hideOnPrint">
      <div class="tabs-container">
        <paper-tabs selected="{{selectedPatientInfoPage}}" noink="true" scrollable="">
          <paper-tab>General</paper-tab>
          <paper-tab>Visit Type</paper-tab>
          <paper-tab>Additonal</paper-tab>
          <paper-tab>Diabetes Info</paper-tab>
          <paper-tab>Lifestyle</paper-tab>
          <paper-tab>Medication</paper-tab>
        </paper-tabs>
      </div>

      <div class="master-container">

        <div class="limiting-container">

          <iron-pages selected="{{selectedPatientInfoPage}}">
            <!-- Page - Required Information - START -->
            <section>
              <paper-card heading="General">
                <div class="p-8">
                  <div class="horizontal layout">
                    <paper-input class="flex paper-custom" value="{{patient.name}}" label="Patient Full Name" required="" auto-validate="" error-message="Patient Name is Required!"></paper-input>
                  </div>

                  <div class="info-row">
                    <paper-input class=" paper-custom" type="number" value="{{patient.nationalIdCardNumber}}" label="National ID"></paper-input>
                  </div>
                  

                  <template is="dom-if" if="[[!EDIT_MODE_ON]]">
                    <div class="horizontal layout">
                      <paper-input type="text" class="flex paper-custom" value="{{patient.phone}}" label="Phone Number*" pattern="^[0-9]{11,11}(-[0-9]*){0,1}$" required="" auto-validate="" error-message="Phone Number Must Contain 11 Digit or Further with Extention. Sample: 01712345678 or 01712345678-12" char-counter="" minlength="11" maxlength="14">
                        <div prefix="">+88</div>
                      </paper-input>
                    </div>
                  </template>

                  <div class="horizontal layout">
                    <paper-input class="flex paper-custom" value="{{patient.email}}" label="Email Address" pattern="^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$" auto-validate="" error-message="Valid Email Address Required"></paper-input>
                  </div>

                  <!-- <div class="horizontal layout">
                    <paper-input type="number" class="flex paper-custom" value="{{patient.additionalPhoneNumber}}" label="Additional Phone Number"
                      pattern="^[0-9]{11,11}(-[0-9]*){0,1}$" auto-validate error-message="Enter a Valid Phone Number!"></paper-input>
                  </div> -->

                  <div class="horizontal layout">
                    <paper-input type="number" class="flex paper-custom" value="{{patient.numberOfFamilyMember}}" label="Number of Family Member"></paper-input>
                  </div>


                  <div class="layout horizontal wrap">
                    <vaadin-date-picker required="" auto-validate="" error-message="Date of Birth is Required!" class="flex paper-custom" type="date" value="{{patient.dateOfBirth}}" label="Date of Birth (mm/dd/yyyy)" on-value-changed="calculateAge"></vaadin-date-picker>
                    
                    <paper-input class="flex m-left-8 paper-custom" label="Age" type="number" value="{{ageInYears}}" on-change="makeDOBFromYears">
                      <div class="type secondary" suffix="">Years</div>
                    </paper-input>
                    
                    
                  </div>

                  <div class="horizontal layout wrap">
                    <paper-dropdown-menu class="flex paper-custom" label="Gender" value="{{patient.diabeticRecord.gender}}">
                      <paper-menu class="dropdown-content">
                        <paper-item>[[$TRANSLATE('Male', LANG)]]</paper-item>
                        <paper-item>[[$TRANSLATE('Female',LANG)]]</paper-item>
                        <paper-item>[[$TRANSLATE('Other',LANG)]]</paper-item>
                      </paper-menu>
                    </paper-dropdown-menu>
                    <vaadin-combo-box class="flex paper-custom" label="Marital Status" items="{{maritalStatusList}}" allow-custom-value="true" value="{{patient.maritalStatus}}"></vaadin-combo-box>
                  </div>

                  <div class="horizontal layout">
                    <paper-input class="flex paper-custom" value="{{patient.effectiveRegion}}" label="Country"></paper-input>
                  </div>
                  
                  <template is="dom-if" if="[[!EDIT_MODE_ON]]">
                    <div class="horizontal layout">
                      <paper-input class="flex paper-custom" min="6" value="{{patient.password}}" label="Password" pattern="^.{6,}$" required="" auto-validate="" error-message="Password Must be 6 characters long!"></paper-input>
                    </div>

                    <div class="horizontal layout">
                      <paper-input class="flex paper-custom" value="{{patient.doctorAccessPin}}" label="Doctor Access Pin Code" max="4"></paper-input>
                    </div>
                    <div class="horizontal layout" hidden="">
                      <paper-input class="flex paper-custom" value="{{patient.belongOrganizationList.0.patientIdbyOrganization}}" label="Patient Organization Id/Hospital Id"></paper-input>
                    </div>
                  </template>
                </div>
              </paper-card>
            </section>
            <!-- Page - Required Information - END -->

            <!-- page - visit types - start -->
            <section>
              <paper-card>
                <div class="p-8">
                  <paper-dropdown-menu class="flex paper-custom" label="Visit Type" placeholder="Type/Select Reason" value="{{patient.diabeticRecord.visitType}}" vertical-align="top" horizontal-align="left">
                    <paper-menu class="dropdown-content">
                      <template is="dom-repeat" items="[[visitTypeList]]">
                        <paper-item>{{item}}</paper-item>
                      </template>
                    </paper-menu>
                  </paper-dropdown-menu>
                </div>
              </paper-card>
            </section>
            <!-- page - visit types - end -->
            
            <!-- Page - Personal Information - START -->
            <section>
              <paper-card heading="Personal">
                <div class="p-8">
                
                  <div class="info-row break-on-tablet">
                    <paper-dropdown-menu class="paper-custom" label="Blood Group" value="{{patient.bloodGroup}}">
                      <paper-menu class="dropdown-content">
                        <paper-item>A+</paper-item>
                        <paper-item>A-</paper-item>
                        <paper-item>B+</paper-item>
                        <paper-item>B-</paper-item>
                        <paper-item>O+</paper-item>
                        <paper-item>O-</paper-item>
                        <paper-item>AB+</paper-item>
                        <paper-item>AB-</paper-item>
                      </paper-menu>
                    </paper-dropdown-menu>
                    <paper-input type="text" class="flex paper-custom" value="{{patient.allergy}}" label="Allergy"></paper-input>
                  </div>

                  <div class="horizontal layout wrap">
                    <paper-input type="text" class="flex paper-custom" value="{{patient.patientSpouseName}}" label="Spouse Name"></paper-input>
                    <paper-input type="text" class="flex paper-custom" value="{{patient.patientFatherName}}" label="Father's Name"></paper-input>
                    <paper-input type="text" class="flex paper-custom" value="{{patient.patientMotherName}}" label="Mother's Name"></paper-input>
                  </div>

                  <div class="info-row break-on-tablet">

                    <vaadin-combo-box class="flex paper-custom" label="Monthly Expenditure" items="{{expenditureList}}" allow-custom-value="true" value="{{patient.expenditure}}"></vaadin-combo-box>
                    <vaadin-combo-box class="flex paper-custom" label="Profession" items="{{professionList}}" allow-custom-value="true" value="{{patient.profession}}"></vaadin-combo-box>
                    
                  </div>

                  <vaadin-combo-box class="flex paper-custom" label="Education" items="{{educationTypeList}}" allow-custom-value="true" value="{{patient.education}}"></vaadin-combo-box>
                  
                </div> 
              </paper-card>

              <paper-card heading="Contact Address" class="m-top-8">
                <div class="p-8">
                  <div class="horizontal layout">
                    <paper-input class="flex paper-custom" value="{{patient.addressList.0.addressLine1}}" label="Address Line 1"></paper-input>
                  </div>
                  <div class="horizontal layout">
                    <paper-input class="flex paper-custom" value="{{patient.addressList.0.addressLine2}}" label="Address Line 2"></paper-input>
                  </div>

                  <div class="horizontal layout wrap">
                    <!-- <paper-input class="flex paper-custom" value="{{patient.addressList.0.addressDivision}}" label="Division"></paper-input> -->

                    <paper-dropdown-menu class="paper-custom" label="Division" value="{{patient.addressList.0.addressDivision}}">
                      <paper-menu class="dropdown-content" on-iron-select="onDivisionChange" selected="{{divisionIndex}}">
                        <template is="dom-repeat" items="[[divisionList]]">
                          <paper-item>{{item.divisionName}}</paper-item>
                        </template>
                      </paper-menu>
                    </paper-dropdown-menu>

                    <template is="dom-if" if="[[!_isEmpty(districtList.length)]]">
                      <paper-dropdown-menu class="paper-custom" label="District" value="{{patient.addressList.0.addressDistrict}}">
                        <paper-menu class="dropdown-content" selected="[[districtIndex]]">
                          <template is="dom-repeat" items="[[districtList]]">
                            <paper-item>{{item}}</paper-item>
                          </template>
                        </paper-menu>
                      </paper-dropdown-menu>
                    </template>

                    <!-- <paper-input class="flex paper-custom" value="{{patient.addressList.0.addressDistrict}}" label="Disctrict"></paper-input> -->
                    <paper-input class="flex paper-custom" value="{{patient.addressList.0.subdistrictName}}" label="Thana/Sub Disctrict"></paper-input>
                    
                  </div>
                  <div class="horizontal layout end-justified p-8">
                    <paper-toggle-button class="m-left-16" checked="{{hideMoreAddressInput}}">More Address options</paper-toggle-button>
                  </div>

                  <div class="horizontal layout wrap" hidden$="[[!hideMoreAddressInput]]">
                    <paper-input class="flex paper-custom" value="{{patient.addressList.0.addressAreaName}}" label="Area"></paper-input>
                    <paper-input class="flex paper-custom" value="{{patient.addressList.0.flat}}" label="Flat"></paper-input>
                    <paper-input class="flex paper-custom" value="{{patient.addressList.0.floor}}" label="Floor"></paper-input>
                    <paper-input class="flex paper-custom" value="{{patient.addressList.0.plot}}" label="Plot"></paper-input>
                  </div>

                  <div class="horizontal layout wrap" hidden$="[[!hideMoreAddressInput]]">
                    <paper-input class="flex paper-custom" value="{{patient.addressList.0.block}}" label="Block"></paper-input>
                    <paper-input class="flex paper-custom" value="{{patient.addressList.0.road}}" label="Road"></paper-input>
                    <paper-input class="flex paper-custom" value="{{patient.addressList.0.village}}" label="Village"></paper-input>
                  </div>
                  <div class="horizontal layout wrap" hidden$="[[!hideMoreAddressInput]]">
                    <paper-input class="flex paper-custom" value="{{patient.addressList.0.addressUnion}}" label="Union"></paper-input>

                    <paper-input type="number" class="flex paper-custom" value="{{patient.addressList.0.addressPostalOrZipCode}}" label="Postal/Zip Code"></paper-input>
                    <paper-input class="flex paper-custom" value="{{patient.addressList.0.addressCityOrTown}}" label="City/Town"></paper-input>

                    <paper-input class="flex paper-custom" value="{{patient.addressList.0.stateOrProvince}}" label="State/Province"></paper-input>
                  </div>

                  <paper-input readonly="true" class=" paper-custom" value="{{patient.addressList.0.addressCountry}}" label="Country"></paper-input>
                </div>
              </paper-card>
            </section>
            <!-- Page - Additional Information - END -->

            <!-- Page - Diabetics Registration - START -->
            <section>

              <!-- Diabetcs Status - start -->
              <paper-card heading="Diabetes Info">
                <div class="p-8 horizontal layout wrap">
                  <paper-input class="custom-input paper-custom" label="Patient Book No." value="{{patient.diabeticRecord.diabeticsInfo.patientBookSerial}}"></paper-input>
                  <paper-dropdown-menu class="custom-input paper-custom" label="DM Status" value="{{patient.diabeticRecord.diabeticsInfo.dmStatus}}">
                    <paper-menu class="dropdown-content" selected="0">
                      <template is="dom-repeat" items="{{dmStatusList}}">
                        <paper-item>[[item]]</paper-item>
                      </template>
                    </paper-menu>
                  </paper-dropdown-menu>
                  <paper-dropdown-menu class="custom-input paper-custom" label="Type of Diabetics" value="{{patient.diabeticRecord.diabeticsInfo.typeOfDiabetics}}">
                    <paper-menu class="dropdown-content" selected="0">
                      <paper-item>Type 1</paper-item>
                      <paper-item>Type 2</paper-item>
                      <paper-item>Gestational Diabetes</paper-item>
                      <paper-item>Others</paper-item>
                    </paper-menu>
                  </paper-dropdown-menu>
                  <paper-input type="number" class="custom-input paper-custom" label="Diabetics Duration" value="{{patient.diabeticRecord.diabeticsInfo.diabeticsDuration}}"></paper-input>
                </div>
              </paper-card>
              <!-- Diabetcs Status - end -->

              <!-- Cinical - start -->
              <paper-card heading="Cinical" class="m-top-8">
                <div class="p-8 horizontal layout wrap">
                  <template is="dom-repeat" items="[[patient.diabeticRecord.clinicalInfoList]]">
                    <template is="dom-if" if="[[!_compareFn(item.type, '==', 'waist-hip-ratio')]]">
                      <paper-input type="{{item.inputType}}" class="custom-input paper-custom" label="{{item.name}}" value="{{item.value}}" on-value-changed="computeWaistHipRatio">
                        <div suffix="">{{item.unit}}</div>
                      </paper-input>
                    </template>

                    <template is="dom-if" if="[[_compareFn(item.type, '==', 'waist-hip-ratio')]]">
                      <paper-input type="{{item.inputType}}" class="custom-input paper-custom" label="{{item.name}}" value="{{waistHipRatio}}">
                      <div suffix="">{{item.unit}}</div>
                    </paper-input></template>

                  </template>
                </div>
              </paper-card>
              <!-- Cinical - end -->

              <!-- Laboratory - start -->
              <paper-card heading="" class="m-top-8">

                <div class="card-custom-header">
                  <div class="layout horizontal center">
                    <div class="title flex">Laboratory</div>
                    <paper-dropdown-menu label="Type">
                    <paper-menu class="dropdown-content" selected="0">
                      <paper-item>Free</paper-item>
                      <paper-item>Paid</paper-item>
                      <paper-item>Others</paper-item>
                    </paper-menu>
                  </paper-dropdown-menu>
                  </div>
                </div>

                <div class="p-8">
                  <div class="horizontal layout wrap">
                    <template is="dom-repeat" id="lab-test-list-repeater" items="[[patient.diabeticRecord.laboratoryTestList]]">

                      <template is="dom-if" if="[[!$equals(item.name, 'ECG')]]">
                        <div class="horizontal layout custom-label">
                          <paper-input type="{{item.inputType}}" class="flex" label="{{item.name}}" value="{{item.value}}">
                            <div suffix="">{{item.unit}}</div>
                          </paper-input>
                          <template is="dom-if" if="[[item.isCustomTest]]">
                            <div class="horizontal layout center">
                              <paper-icon-button class="m-left-8" icon="delete" on-tap="deleteCustomTest"></paper-icon-button>
                            </div>
                          </template>
                        </div>
                      </template>

                      <template is="dom-if" if="[[$equals(item.name, 'ECG')]]">
                        <div class="custom-radio-button-group">
                          <div id="grpVaccination">
                            <strong>{{item.name}}:</strong>
                          </div>
                          <paper-radio-group selected="{{item.type}}">
                            <paper-radio-button name="normal">Normal</paper-radio-button>
                            <paper-radio-button name="abnormal">Abnormal</paper-radio-button>
                          </paper-radio-group>
                          <template is="dom-if" if="[[$equals(item.type, 'abnormal')]]">
                            <vaadin-combo-box class="flex" label="Select" items="{{ecgTypeList}}" allow-custom-value="true" value="{{item.value}}"></vaadin-combo-box>
                          </template>
                        </div>
                      </template>

                    </template>
                  </div>
                
                  <div class="custom-label horizontal layout center wrap flex" style="width: calc(100% - 26px);">
                    <paper-input class="flex m-horizontal-8" value="{{customTest.name}}" label="Test Name">
                    </paper-input>
                    <paper-input class="m-horizontal-8" value="{{customTest.unit}}" label="Unit">
                    </paper-input>
                    <paper-button class="btn-add colored" on-tap="addCustomTest" raised=""><iron-icon icon="add" class="m-right-8"></iron-icon>Add</paper-button>
                  </div>

                </div>
              </paper-card>
              <!-- Laboratory - end -->

              <!-- Complication - start -->
              <paper-card heading="Complication" class="m-top-8">
                <div class="p-8">
                  <div class="horizontal layout wrap">
                    <template is="dom-repeat" items="[[patient.diabeticRecord.complicationList]]">
                      <paper-checkbox class="custom-checkbox m-8" checked="{{item.isSelected}}">{{item.name}}</paper-checkbox>
                    </template>
                    <div class="custom-label horizontal layout center wrap">
                      <paper-input class="flex" value="{{customComplication}}" label="Other Complication"></paper-input>
                      <paper-button class="btn-add colored" on-tap="addCustomComplication" raised=""><iron-icon icon="add" class="m-right-8"></iron-icon>Add</paper-button>
                    </div>
                  </div>
                </div>
              </paper-card>
              <!-- Complication - end -->

              <!-- card - Personal Habit(s) - start -->
              <paper-card class="m-top-8">
                <div class="card-custom-header">
                  <div class="layout horizontal center">
                    <div class="title flex">Personal Habit(s)</div>
                  </div>
                </div>

                <div class="p-8">

                  <div class="horizontal layout wrap">
                    <template is="dom-repeat" items="[[patient.diabeticRecord.medicalInfo.drugAddictionList]]">
                      <div class="custom-radio-button-group">
                        <div id="grpVaccination">
                          <strong>{{item.type}}:</strong>
                        </div>
                        <paper-radio-group aria-labelledby="grpVaccination" selected="{{item.isYes}}">
                          <paper-radio-button name="yes">Yes</paper-radio-button>
                          <paper-radio-button name="no">No</paper-radio-button>
                        </paper-radio-group>
                        <template is="dom-if" if="[[$equals(item.isYes, 'yes')]]">
                          <paper-input label="Amount" value="{{item.amount}}"></paper-input>
                        </template>
                      </div>
                    </template>
                  </div>

                </div>
              </paper-card>
              <!-- card - Personal Habit(s) - end -->

              <!-- card - Family History - start -->
              <paper-card class="m-top-8">
                <div class="card-custom-header">
                  <div class="layout horizontal center">
                    <div class="title flex">Family History</div>
                  </div>
                </div>

                <div class="p-8">

                  <div class="horizontal layout wrap">
                    <template is="dom-repeat" items="[[patient.diabeticRecord.medicalInfo.familyHistoryList]]">
                      <div class="custom-radio-button-group">
                        <div id="{{item.disease}}">
                          <span class="type caption secondary m-right-8">[[_returnSerial(index)]]</span>
                          <strong>{{item.disease}}:</strong>
                        </div>
                        <paper-radio-group aria-labelledby="{{item.disease}}" selected="{{item.value}}">
                          <paper-radio-button name="yes">Yes</paper-radio-button>
                          <paper-radio-button name="no">No</paper-radio-button>
                          <paper-radio-button name="unknown">Unknown</paper-radio-button>
                        </paper-radio-group>
                      </div>
                    </template>

                    <div class="horizontal layout center wrap">
                      <paper-input class="paper-custom" value="{{otherFamilyHistoryDisease.disease}}" label="Other">
                        <div class="type secondary" suffix=""></div>
                      </paper-input>
                      <div>
                        <paper-button class="btn-add colored" on-tap="addFamilyHistoryDisease" raised="">
                          <iron-icon icon="add" class="m-right-8"></iron-icon>Add</paper-button>
                      </div>
                    </div>

                  </div>

                </div>
              </paper-card>
              <!-- card - Family History - end -->

              <!-- Current Treatment - start -->
              <paper-card heading="Current Treatment" class="m-top-8">
                <div class="p-8">
                  <vaadin-combo-box class="flex paper-custom" label="Type Of Treatment" placeholder="Type/Select Treatment Name" items="{{typeOfTreatmentList}}" allow-custom-value="true" value="{{patient.diabeticRecord.currentTreatment.typeOfTreatment}}"></vaadin-combo-box>
                </div>
              </paper-card>
              
            </section>
            <!-- Page - Diabetics Registration - END -->

            <!-- Page - Diet - start -->
            <section>

              <!-- card - Dietary history - start -->
              <paper-card>
                <div class="card-custom-header">
                  <div class="layout horizontal center">
                    <div class="title flex">Dietary history</div>
                  </div>
                </div>
                <div class="custom-label full-width horizontal layout center">

                  <vaadin-combo-box class="flex m-right-8" label="Add Food Item" items="{{foodItemPreList}}" allow-custom-value="true" value="{{otherDietItem.type}}"></vaadin-combo-box>
                  <paper-button class="btn-add colored" on-tap="addDietItem" raised=""><iron-icon icon="add" class="m-right-8"></iron-icon>Add</paper-button>
                  
                </div>

                <div>
                  <template id="dietary-list-repeater" is="dom-repeat" items="[[patient.diabeticRecord.medicalInfo.dietaryHistoryList]]" as="dietItem">
                    <div class="layout horizontal center wrap custom-item">
                      <div class="type caption secondary m-right-8">[[_returnSerial(index)]]</div>
                      <div class="type body flex m-right-16">{{dietItem.type}}</div>
                      <template is="dom-repeat" items="[[dietItem.consumeAmount]]">
                        <paper-input class="m-horizontal-8" label="{{item.time}}" value="{{item.value}}" on-change="onDietaryItemValue">
                          <div class="type secondary" suffix="">{{item.unit}}</div>
                        </paper-input>
                      </template>
                      <paper-icon-button icon="delete" on-tap="deleteDietItem"></paper-icon-button>
                    </div>
                  </template>
                </div>

                

                
              </paper-card>
              <!-- card - Dietary history - end -->

              <!-- card - Type of cooking oil - start -->
              <paper-card class="m-top-8">
                <div class="card-custom-header">
                  <div class="layout horizontal center">
                    <div class="title flex">Type of cooking oil</div>
                  </div>
                </div>

                <div class="p-8">

                  <div class="horizontal layout wrap">
                    <template is="dom-repeat" items="[[patient.diabeticRecord.medicalInfo.typeOfCookingOilList]]">
                      <div class="custom-radio-button-group">
                        <div id="grpVaccination">
                          <strong>{{item.type}}:</strong>
                        </div>
                        <paper-radio-group aria-labelledby="grpVaccination" selected="{{item.isYes}}">
                          <paper-radio-button name="yes">Yes</paper-radio-button>
                          <paper-radio-button name="no">No</paper-radio-button>
                        </paper-radio-group>
                        <template is="dom-if" if="[[$equals(item.isYes, 'yes')]]">
                          <paper-input label="Amount" value="{{item.amount}}">
                            <div class="type secondary" suffix="">{{item.unit}}/{{item.duration}}</div>
                          </paper-input>
                        </template>
                      </div>
                    </template>
                    <div class="custom-label full-width horizontal layout center wrap">
                      <paper-input class="flex" value="{{otherTypeOfCookingOil.type}}" label="Other">
                        <div class="type secondary" suffix=""></div>
                      </paper-input>
                      <paper-button class="btn-add colored" on-tap="addCookingOil" raised=""><iron-icon icon="add" class="m-right-8"></iron-icon>Add</paper-button>
                    </div>
                  </div>

                </div>
              </paper-card>
              <!-- card - Type of cooking oil - end -->

              <!-- card - physical activity - start -->
              <paper-card class="m-top-8">
                <div class="card-custom-header">
                  <div class="layout horizontal center wrap">
                    <div class="title flex">Physical activity</div>

                    <paper-radio-group selected="{{showPhysicalActivity}}">
                      <paper-radio-button name="yes">Yes</paper-radio-button>
                      <paper-radio-button name="no">No</paper-radio-button>
                    </paper-radio-group>

                  </div>

                </div>

                <div class="p-8" hidden$="{{!$equals(showPhysicalActivity, 'yes')}}">

                  <div class="horizontal layout center wrap">
                    <vaadin-combo-box class="flex paper-custom" label="Physical Activity" placeholder="Type/Select Activiy" items="[[physicalActivityPreList]]" allow-custom-value="true" value="{{physicalActivityObj.name}}"></vaadin-combo-box>
                    <paper-input type="number" class="paper-custom" value="{{physicalActivityObj.duration}}" label="Duration">
                      <div class="type secondary" suffix="">{{physicalActivityObj.unit}}</div>
                    </paper-input>
                    <div>
                      <paper-button class="btn-add colored" on-tap="addPhysicalActivity" raised="">
                        <iron-icon icon="add" class="m-right-8"></iron-icon>Add</paper-button>
                    </div>
                  </div>

                  <div class="horizontal layout wrap">
                    <template is="dom-repeat" items="[[patient.diabeticRecord.physicalActivityList]]">
                      <div class="custom-label horizontal layout center">

                        <div class="flex">
                          <strong>{{item.name}}: </strong>
                          <span>{{item.duration}} {{item.unit}}</span>
                        </div>

                        <paper-icon-button icon="delete" on-tap="deletePhysicalActivity"></paper-icon-button>
                      </div>
                    </template>
                  </div>

                </div>
              </paper-card>
              <!-- card - physical activity - end -->

            </section>
            <!-- Page - Diet - end -->

            <!-- Page - Medicaton - start -->
            <section>
              <paper-card>
                <div class="card-custom-header">
                  <div class="layout horizontal center">
                    <div class="title flex">OAD</div>
                    <paper-dropdown-menu class="" label="OGLD Usage" value="{{patient.diabeticRecord.currentTreatment.ogld.ogldUsage}}">
                    <paper-menu class="dropdown-content" selected="0">
                      <paper-item>No</paper-item>
                      <paper-item>Yes</paper-item>
                    </paper-menu>
                  </paper-dropdown-menu>
                  </div>
                </div>
                <div class="p-8">

                  <template is="dom-repeat" items="{{patient.diabeticRecord.currentTreatment.ogld.ogldDrugList}}">
                    <div class="horizontal layout center wrap">
                      <paper-input class="flex paper-custom" label="Drug" value="{{item.ogldDrugName}}"></paper-input>
                      <paper-input class="paper-custom" label="Dosage" value="{{item.drugDosage}}"></paper-input>
                      <paper-icon-button icon="delete" on-tap="deleteSelectedOgldDrug"></paper-icon-button>
                    </div>
                  </template>
      
                </div>
                <div class="card-actions">
                  <paper-button raised="" on-tap="addOgldDrug">Add Another OGLD Drug</paper-button>
                </div>
              </paper-card>
              <!-- Current Treatment - end -->

              <!-- Insulin - start -->
              <paper-card class="m-top-8">
                <div class="card-custom-header">
                  <div class="layout horizontal center">
                    <div class="title flex">Insulin</div>
                    <paper-dropdown-menu class="" label="Insulin Usage" value="{{patient.diabeticRecord.insulin.insulinUsage}}">
                    <paper-menu class="dropdown-content" selected="0">
                      <paper-item>No</paper-item>
                      <paper-item>Yes</paper-item>
                    </paper-menu>
                  </paper-dropdown-menu>
                  </div>
                </div>

                <div class="p-8">
                  <vaadin-combo-box class="flex paper-custom" label="Insuline Type" placeholder="Type/Select Insulin type" items="{{insulinTypeList}}" allow-custom-value="true" value="{{patient.diabeticRecord.insulin.insulinType}}"></vaadin-combo-box>

                  <div style="padding: 4px;" class="type body caption-2 secondary"><strong>Insulin</strong></div>

                  <div class="custom-label full-width horizontal layout center wrap">
                    <vaadin-combo-box style="min-width: 210px;" class="flex" label="{{patient.diabeticRecord.insulin.insulinTherapyList.0.therapyType}}" placeholder="Type/Select Drug" items="{{basalDrugList}}" allow-custom-value="true" value="{{patient.diabeticRecord.insulin.insulinTherapyList.0.drugName}}"></vaadin-combo-box>
                    <template is="dom-repeat" items="[[patient.diabeticRecord.insulin.insulinTherapyList.0.dosageList]]" as="dose">
                      <paper-input class="m-horizontal-8" label="{{dose.time}}" value="{{dose.value}}"></paper-input>
                    </template>
                  </div>

                  <div class="custom-label full-width horizontal layout center wrap">
                    <vaadin-combo-box style="min-width: 210px;" class="flex" label="{{patient.diabeticRecord.insulin.insulinTherapyList.1.therapyType}}" placeholder="Type/Select Drug" items="{{bolusDrugList}}" allow-custom-value="true" value="{{patient.diabeticRecord.insulin.insulinTherapyList.1.drugName}}"></vaadin-combo-box>
                    <template is="dom-repeat" items="[[patient.diabeticRecord.insulin.insulinTherapyList.1.dosageList]]" as="dose">
                      <paper-input class="m-horizontal-8" label="{{dose.time}}" value="{{dose.value}}"></paper-input>
                    </template>
                  </div>

                  <div class="custom-label full-width horizontal layout center wrap">
                    <vaadin-combo-box style="min-width: 210px;" class="flex" label="{{patient.diabeticRecord.insulin.insulinTherapyList.1.therapyType}}" placeholder="Type/Select Drug" items="{{bolusDrugList}}" allow-custom-value="true" value="{{patient.diabeticRecord.insulin.insulinTherapyList.1.drugName}}"></vaadin-combo-box>
                    <template is="dom-repeat" items="[[patient.diabeticRecord.insulin.insulinTherapyList.1.dosageList]]" as="dose">
                      <paper-input class="m-horizontal-8" label="{{dose.time}}" value="{{dose.value}}"></paper-input>
                    </template>
                  </div>

                  <div class="custom-label full-width horizontal layout center wrap">
                    <vaadin-combo-box style="min-width: 210px;" class="flex" label="{{patient.diabeticRecord.insulin.insulinTherapyList.2.therapyType}}" placeholder="Type/Select Drug" items="{{premixDrugList}}" allow-custom-value="true" value="{{patient.diabeticRecord.insulin.insulinTherapyList.2.drugName}}"></vaadin-combo-box>
                    <template is="dom-repeat" items="[[patient.diabeticRecord.insulin.insulinTherapyList.2.dosageList]]" as="dose">
                      <paper-input class="m-horizontal-8" label="{{dose.time}}" value="{{dose.value}}"></paper-input>
                    </template>
                  </div>

                  <div class="custom-label full-width horizontal layout center wrap">
                    <vaadin-combo-box style="min-width: 210px;" class="flex" label="{{patient.diabeticRecord.insulin.insulinTherapyList.3.therapyType}}" placeholder="Type/Select Drug" items="{{otherInsulinDrugList}}" allow-custom-value="true" value="{{patient.diabeticRecord.insulin.insulinTherapyList.3.drugName}}"></vaadin-combo-box>
                    <template is="dom-repeat" items="[[patient.diabeticRecord.insulin.insulinTherapyList.3.dosageList]]" as="dose">
                      <paper-input class="m-horizontal-8" label="{{dose.time}}" value="{{dose.value}}"></paper-input>
                    </template>
                  </div>
                </div>
              </paper-card>
              <!-- Insulin - end -->

              <!-- card - Other Medication - start -->
              <paper-card class="m-top-8">
                <div class="card-custom-header">
                  <div class="layout horizontal center">
                    <div class="title flex">Other Medication</div>
                  </div>
                </div>

                <div class="p-8">

                  <div class="horizontal layout wrap">
                    <template is="dom-repeat" items="[[patient.diabeticRecord.otherMedicationList]]">
                      <div class="custom-radio-button-group full-width">
                        <div class="horizontal layout center">
                          <div>
                            <strong>{{item.name}}:</strong>
                          </div>
                          <paper-radio-group selected="{{item.isYes}}">
                            <paper-radio-button name="yes">Yes</paper-radio-button>
                            <paper-radio-button name="no">No</paper-radio-button>
                          </paper-radio-group>

                        </div>
                        <div hidden$="[[!$equals(item.isYes, 'yes')]]">

                          <div>
                            <template is="dom-repeat" items="[[item.medicineList]]" as="medicine" index-as="medicineIndex">
                              <div class="horizontal layout center">
                                <div class="m-right-8 type caption secondary">{{_returnSerial(medicineIndex)}}.</div>
                                <paper-input class="flex m-horizontal-8" label="Name" value="{{medicine.name}}"></paper-input>
                                <paper-input type="number" class="m-horizontal-8" label="Dose" value="{{medicine.dose}}">
                                  <div class="type secondary" suffix="">{{medicine.unit}}</div>
                                </paper-input>
                              </div>
                            </template>
                          </div>
                          <div class="horizontal layout end-justified">
                            <paper-button raised="" class="btn-add default" on-tap="addMedicine">Add Another Medicine</paper-button>
                          </div>
                          
                        
                        </div>
                      </div>
                    </template>
                  </div>

                </div>
              </paper-card>
              <!-- card - Addiction - end -->
            </section>
            <!-- Page - Medicaton - end -->

            
          </iron-pages>            

        </div>
        <template is="dom-if" if="[[!EDIT_MODE_ON]]">
          <paper-button class="colored" raised="" on-tap="standardPatientSignupPressed">Signup</paper-button>
        </template>

        <template is="dom-if" if="[[EDIT_MODE_ON]]">
          <paper-button class="colored" raised="" on-tap="updatePatientDetails">UPDATE</paper-button>
        </template>

      </div>
    </div>

  </template>
  <script>(function(){Polymer({is:"page-patient-editor",behaviors:[app.behaviors.commonComputes,app.behaviors.dbUsing,app.behaviors.translating,app.behaviors.pageLike,app.behaviors.apiCalling],properties:{EDIT_MODE_ON:{type:Boolean,notify:!0,value:!1},showPhysicalActivity:{type:String,notify:!0,value:"no"},user:{type:Object,notify:!0,value:null},isPatientValid:{type:Boolean,notify:!0,value:!1},patient:{type:Object,notify:!0,value:null},patientSignupData:{type:Object,notify:!0,value:null},patientAddress:{type:Object,notify:!0,value:null},settings:{type:Object,notify:!0,value:null},selectedPatientInfoPage:{type:Number,notify:!0,value:0},sexSelectedIndex:{type:Number,value:0},genderList:{type:Array,value:function(){return["Male","Female","Other"]}},divisionIndex:{type:Number,value:-1,notify:!0},districtIndex:{type:Number,value:-1,notify:!0},districtList:{type:Array,value:function(){return[]},notify:!0},divisionList:{type:Array,value:function(){return[{divisionName:"Barisal",districtList:["Barguna","Barisal","Bhola","Jhalokati","Patuakhal","Pirojpur"]},{divisionName:"Chittagong",districtList:["Bandarban","Brahmanbaria","Chandpur","Chittagong","Comilla","Cox's Bazar","Feni","Khagrachhari","Lakshmipur","Noakhali","Rangamati"]},{divisionName:"Dhaka",districtList:["Dhaka","Faridpur","Gazipur","Gopalganj","Kishoreganj","Madaripur","Manikganj","Munshiganj","Narayanganj","Narsingdi","Rajbari","Shariatpur","Tangail "]},{divisionName:"Khulna",districtList:["Bagerhat","Chuadanga","Jessore","Jhenaidah","Khulna","Kushtia","Magura","Meherpur","Narail","Satkhira"]},{divisionName:"Mymensingh",districtList:["Jamalpur","Mymensingh","Netrakona","Sherpur"]},{divisionName:"Rajshahi",districtList:["Bogra","Joypurhat","Naogaon","Natore","Nawabganj","Pabna","Rajshahi","Sirajganj"]},{divisionName:"Rangpur",districtList:["Dinajpur","Gaibandha","Kurigram","Lalmonirhat","Nilphamari","Panchagarh","Rangpur","Thakurgaon"]},{divisionName:"Sylhet",districtList:["Habiganj","Moulvibazar","Sunamganj","Sylhet"]}]}},organization:{type:Object,notify:!0,value:null},dmStatusList:{type:Array,value:function(){return["New patient/diabetes","<1 year/diabetes","<1-5 year","6-10 years","11-15 years","16-20 years",">20 years"]}},typeOfTreatmentList:{type:Array,value:function(){return[{label:"Diet",value:"Diet"},{label:"Diet & OGLD",value:"Diet & OGLD"},{label:"Diet, OGLD & insulin",value:"Diet, OGLD & insulin"},{label:"Insulin only",value:"Insulin only"},{label:"Other",value:"Other"}]}},insulinTypeList:{type:Array,value:function(){return[{label:"Bolus (Mealtime Insulin)",value:"Bolus (Mealtime Insulin)"},{label:"Premix",value:"Premix"},{label:"Split Mix",value:"Split Mix"},{label:"Basal & Bolus",value:"Basal & Bolus"},{label:"Basal Plus",value:"Basal Plus"},{label:"Basal Only",value:"Basal Only"}]}},basalDrugList:{type:Array,value:function(){return[{label:"Insulatard 100 IU Vial",value:"Insulatard 100 IU Vial"},{label:"Insulatard Penfill",value:"Insulatard Penfill"},{label:"Levemir",value:"Levemir"},{label:"Tresiba",value:"Tresiba"},{label:"Victoza",value:"Victoza"},{label:"Insulatard Flexpen",value:"Insulatard Flexpen"}]}},bolusDrugList:{type:Array,value:function(){return[{label:"Actrapid Penfill",value:"Actrapid Penfill"},{label:"NovoRapid FlexPen",value:"NovoRapid FlexPen"},{label:"NovoRapid Penfill",value:"NovoRapid Penfill"},{label:"Actrapid 100 IU Vial",value:"Actrapid 100 IU Vial"},{label:"Actrapid FlexPen-Humean Insulin",value:"Actrapid FlexPen-Humean Insulin"}]}},premixDrugList:{type:Array,value:[{label:"Mixtard 30 100 IU Vial",value:"Mixtard 30 100 IU Vial"},{label:"Mixtard 30 Penfill",value:"Mixtard 30 Penfill"},{label:"Mixtard 50 Penfill",value:"Mixtard 50 Penfill"},{label:"NovoMix 30 FlexPen",value:"NovoMix 30 FlexPen"},{label:"Ryzodeg",value:"Ryzodeg"},{label:"NovoMix 30 Penfill",value:"NovoMix 30 Penfill"},{label:"Mixtard 30 FlexPen",value:"Mixtard 30 FlexPen"}]},otherInsulinDrugList:{type:Array,value:function(){return["Maxsuline N","Maxsuline 50/50","Maxsuline R","Maxsuline 30/70","Vibrenta","Glycet Mix","Ansulin N","Ansulin 50/50","Ansulin R","Ansulin 30/70","DIASULIN N","DIASULIN-50/50","DIASULIN-R","DIASULIN-30/70","GLARINE","ACILOG","ACILOG MIX","INSULET N","ISULET 50/50","INSULET-R","INSULET 30/70","INSULET GN","INSULET ASP","INSULET ASP MIX","INSUL N","INSUL-50/50","INSUL R","INSUL 30/70","INSUL GLARGINE","INSUL LISPRO","HUMULIN N","HUMULIN-R","HUMULIN 70/30","HUMALOG-MIX 25","HUMALOG-MIX-50","HUMALOG-KWIKPEN","INSUMAN-COMB","INSUMAN-BASAL","INSUMAN-RAPID","LANTUS","APIDRA","Actrapid FlexPen"]}},waistHipRatio:{type:Number,value:0,notify:!0},professionList:{type:Array,value:function(){return["Govt. employee","Non Govt. employye","Self employed","Student","House wife","Retired","Unemployed","Others"]}},expenditureList:{type:Array,value:function(){return["bellow 10,000","10,000-20,000","20,000-30,000","30,000-40,000","40,000-50,000","50,000 & Above"]}},maritalStatusList:{type:Array,value:function(){return["Married","Unmarried","Divorced","Widowed","Widower","Separated"]}},educationTypeList:{type:Array,value:function(){return["No Education","Primary","Secondary","College","Undergraduate","Post-Graduate"]}},ecgTypeList:{type:Array,value:function(){return["RBBB","LBBB","LVH","MI"]}},physicalActivityPreList:{type:Array,value:function(){return["Aerobic dance","Walking","Running","Cycling","Treadmill","Stair climbing","Swimming","Jogging","Other","none"]}},physicalActivityObj:{type:Object,value:function(){return{name:null,duration:null,unit:"min/day"}}},foodItemPreList:{type:Array,value:function(){return["Rice","Ruti","Chapati","Fish","Meat","Green Vegetable","Fruits","Soft drinks","Table Salt","Sweets","Fast Foods","Ghee/butter","Hotel Food"]}},customTest:{type:Object,value:{}},customComplication:{type:String,value:null},otherFamilyHistoryDisease:{type:Object,value:function(){return{disease:"",value:"yes"}}},historyDisease:{type:Object,value:function(){return{disease:"",value:"yes"}}},otherTypeOfCookingOil:{type:Object,value:function(){return{type:"",isYes:"yes",amount:"",unit:"Litres",duration:"Month"}}},otherDietItem:{type:Object,value:function(){return{type:"",consumeAmount:[{time:"daily",value:null,unit:""},{time:"weekly",value:null,unit:""},{time:"monthly",value:null,unit:""}]}}},antiHTNList:{type:Array,value:function(){return["BB (Beta Blocker)","CCB (Calcium Channel Blocker)","ACE-1 (Angiotensin-converting Enzyme Inhibitors)","ARB (Angiotensis Receptor Blocker"," - Blocker","Diuretics","2 Drugs","3 Drugs","Other"]}},antiLipidsList:{type:Array,value:function(){return["Statin","Fibrate","Ezetimibe","Others"]}},visitTypeList:{type:Array,value:function(){return["At time of diagnosis","At 5 years of diagnosis","After 5 years of diagnosis","Recruitment","Visit 1","Visit 2","Visit 3","Visit 4","Visit 5","Visit 6","Visit 7","Visit 8","Visit 9","Visit 10","Visit 11","Visit 12","Visit 13","Visit 14","Visit 15","Other"]}}},_compareFn:function(e,t,i){return"<"===t?e<i:">"===t?e>i:"=="===t?e===i:">="===t?e>=i:"<="===t?e<=i:"!="===t?e!==i:void 0},_showComputedWestHipRatio:function(e,t){return e/t},_returnSerial:function(e){return e+1},_isEmpty:function(e){return 0===e},_loadUser:function(){var e;if(e=app.db.find("user"),1===e.length)return this.user=e[0]},arrowBackButtonPressed:function(e){return this.domHost.navigateToPreviousPage()},saveButtonPressed:function(e){var t;return t=this.domHost.getPageParams(),null!==this.patient.serial&&"new"!==t.patient||(this.patient.serial=this.generateSerialForPatient()),this.patient.lastModifiedDatetimeStamp=lib.datetime.now(),app.db.upsert("patient-list",this.patient,function(e){return function(t){var i;return i=t.serial,e.patient.serial===i}}(this)),this.domHost.showToast("Patient Saved"),this.domHost.__patientView__oneTimeSearchFilter=this.patient.serial,this.arrowBackButtonPressed()},$findCreator:function(e){return"me"},_computeAge:function(e){var t,i,a,n;return n=new Date,i=new Date(e),t=n.getFullYear()-i.getFullYear(),a=n.getMonth()-i.getMonth(),(a<0||0===a&&n.getDate()<i.getDate())&&t--,t},_makeDiabeticRecord:function(){var e;return e={visitType:null,diabeticsInfo:{patientBookSerial:null,dmStatus:null,typeOfDiabetics:null,diabeticsDuration:null},clinicalInfoList:[{type:"height",name:"Height",value:null,unit:"cm",inputType:"number"},{type:"weight",name:"Weight",value:null,unit:"kg",inputType:"number"},{type:"bmi",name:"BMI",value:null,unit:"km/m2",inputType:"number"},{type:"waist",name:"Waist",value:0,unit:"cm",inputType:"number"},{type:"hip",name:"Hip",value:0,unit:"cm",inputType:"number"},{type:"waist-hip-ratio",name:"Waist Hip Ratio",value:0,unit:"",inputType:"number"},{type:"sbp",name:"SBP",value:null,unit:"mmHg",inputType:"number"},{type:"dbp",name:"DBP",value:null,unit:"mmHg",inputType:"number"}],laboratoryTestList:[{name:"hbA1c",value:null,unit:"%",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"FPG",value:null,unit:"mmol",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"2hPG",value:null,unit:"mmol",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"Post Meal",value:null,unit:"mmol",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"Urine Acetone",value:null,unit:"+",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"Urine Albumine",value:null,unit:"",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"S. Creatinine",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"SGPT",value:null,unit:"Units per liter",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"HB",value:null,unit:"%",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"ECG",value:null,unit:"",type:"",isSelected:"",costType:"free",inputType:"mixed",isCustomTest:!1},{name:"CHOL",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"LDL-C",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"HDL-C",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"Triglycerides",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1}],complicationList:[{name:"Heart Disease",isSelected:!1},{name:"HHNS",isSelected:!1},{name:"Stroke",isSelected:!1},{name:"Foot Complication",isSelected:!1},{name:"Nuropathy",isSelected:!1},{name:"PVD",isSelected:!1},{name:"Retinopathy",isSelected:!1},{name:"Skin Disease",isSelected:!1},{name:"CKD",isSelected:!1},{name:"Gastro Complication",isSelected:!1},{name:"DKA",isSelected:!1},{name:"Hypoglycemia",isSelected:!1},{name:"HTN (Hypertension)",isSelected:!1},{name:"Lipid Disorder",isSelected:!1}],physicalActivityList:[],medicalInfo:{drugAddictionList:[{type:"Cigarette",isYes:"",amount:""},{type:"Bidi",isYes:"",amount:""},{type:"Chewing Tobacco",isYes:"",amount:""},{type:"Tobacco Powder",isYes:"",amount:""},{type:"Betal Leaf/Betal Nut (Shupari)",isYes:"",amount:""},{type:"Alcohol",isYes:"",amount:""},{type:"Others",isYes:"",amount:""}],dietaryHistoryList:[],typeOfCookingOilList:[{type:"Soyebean oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Mustard oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Palm oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Olive oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Rice bran oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Other",isYes:"",amount:"",unit:"Litres",duration:"Month"}],historyOfDeseaseList:[{diseaseName:"Diabetes",value:""},{diseaseName:"Pregnancy diabetes",value:""},{diseaseName:"Hypertension",value:""},{diseaseName:"Heart disease",value:""},{diseaseName:"Asthma",value:""},{diseaseName:"Tuberculosis",value:""},{diseaseName:"Mental disorder",value:""},{diseaseName:"Abortion",value:""},{diseaseName:"Preeclampsia",value:""},{diseaseName:"Eclampsia",value:""},{diseaseName:"Still-Birth",value:""},{diseaseName:"Macrosomia (Large Baby >4kg)",value:""},{diseaseName:"LBW (Small Baby <2.5kg)",value:""},{diseaseName:"Pre-term ( less than 37 weeks )",value:""},{diseaseName:"IUD",value:""}],historyOfMedicationList:[{name:"On Insulin",value:"",type:"",typeOfDevice:"",forVisitReasonIdList:[]},{name:"OADs",value:"",type:"",forVisitReasonIdList:["002","003","005"]},{name:"Anti HTN",value:"",type:"",forVisitReasonIdList:[]},{name:"Anti lipids",value:"",type:"",forVisitReasonIdList:[]},{name:"Cardiac Medication",value:"",type:"",forVisitReasonIdList:[]}],familyHistoryList:[{disease:"Diabetes",value:""},{disease:"Hypertension",value:""},{disease:"Coronary Artery Disease",value:""},{disease:"Cerebro-Vascular Disease",value:""}]},currentTreatment:{typeOfTreatment:"",ogld:{ogldUsage:"no",ogldDrugList:[{ogldDrugName:"",drugDosage:""}]}},insulin:{insulinUsage:"no",insulinType:"",insulinTherapyList:[{therapyType:"Basal",drugName:"",preListedDrugPath:"basalDrugList",dosageList:[{time:"Morning",value:"",unit:"unit"},{time:"Noon",value:"",unit:"unit"},{time:"Night",value:"",unit:"unit"}]},{therapyType:"Bolus",drugName:"",preListedDrugPath:"bolusDrugList",dosageList:[{time:"Morning",value:"",unit:"unit"},{time:"Noon",value:"",unit:"unit"},{time:"Night",value:"",unit:"unit"}]},{therapyType:"Premix",drugName:"",preListedDrugPath:"premixDrugList",dosageList:[{time:"Morning",value:"",unit:"unit"},{time:"Noon",value:"",unit:"unit"},{time:"Night",value:"",unit:"unit"}]},{therapyType:"Other",drugName:"",preListedDrugPath:"otherInsulinDrugList",dosageList:[{time:"Morning",value:"",unit:"unit"},{time:"Noon",value:"",unit:"unit"},{time:"Night",value:"",unit:"unit"}]}]},otherMedicationList:[{name:"Anti HTN",isYes:"",medicineList:[{name:"",dose:"",unit:""}]},{name:"Anti lipids",isYes:"",medicineList:[{name:"",dose:"",unit:""}]},{name:"Aspirin",isYes:"",medicineList:[{name:"",dose:"",unit:""}]},{name:"Anti-obesity",isYes:"",medicineList:[{name:"",dose:"",unit:""}]}]}},_makePatientSignUp:function(){return this.patient={name:"",password:"123456",email:"",phone:"",additionalPhoneNumber:null,dateOfBirth:lib.datetime.mkDate(lib.datetime.now()),effectiveRegion:"Bangladesh",doctorAccessPin:"0000",nationalIdCardNumber:null,addressList:[{addressTitle:"Personal",addressType:"personal",flat:null,floor:null,plot:null,block:null,road:null,village:null,addressUnion:null,subdistrictName:null,addressDistrict:null,addressPostalOrZipCode:null,addressCityOrTown:null,addressDivision:null,addressAreaName:null,addressLine1:null,addressLine2:null,stateOrProvince:null,addressCountry:"Bangladesh"}],gender:"",bloodGroup:"",allergy:"",expenditure:null,profession:null,patientSpouseName:"",patientFatherName:"",patientMotherName:"",maritalAge:"",maritalStatus:"",numberOfFamilyMember:"",numberOfChildren:"",education:null,belongOrganizationList:[{organizationId:null,patientIdbyOrganization:null}],diabeticRecord:{visitType:null,diabeticsInfo:{patientBookSerial:null,dmStatus:null,typeOfDiabetics:null,diabeticsDuration:null},clinicalInfoList:[{type:"height",name:"Height",value:null,unit:"cm",inputType:"number"},{type:"weight",name:"Weight",value:null,unit:"kg",inputType:"number"},{type:"bmi",name:"BMI",value:null,unit:"km/m2",inputType:"number"},{type:"waist",name:"Waist",value:0,unit:"cm",inputType:"number"},{type:"hip",name:"Hip",value:0,unit:"cm",inputType:"number"},{type:"waist-hip-ratio",name:"Waist Hip Ratio",value:0,unit:"",inputType:"number"},{type:"sbp",name:"SBP",value:null,unit:"mmHg",inputType:"number"},{type:"dbp",name:"DBP",value:null,unit:"mmHg",inputType:"number"}],laboratoryTestList:[{name:"hbA1c",value:null,unit:"%",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"FPG",value:null,unit:"mmol",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"2hPG",value:null,unit:"mmol",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"Post Meal",value:null,unit:"mmol",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"Urine Acetone",value:null,unit:"+",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"Urine Albumine",value:null,unit:"",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"S. Creatinine",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"SGPT",value:null,unit:"Units per liter",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"HB",value:null,unit:"%",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"ECG",value:null,unit:"",type:"",isSelected:"",costType:"free",inputType:"mixed",isCustomTest:!1},{name:"CHOL",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"LDL-C",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"HDL-C",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1},{name:"Triglycerides",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1}],complicationList:[{name:"Heart Disease",isSelected:!1},{name:"HHNS",isSelected:!1},{name:"Stroke",isSelected:!1},{name:"Foot Complication",isSelected:!1},{name:"Nuropathy",isSelected:!1},{name:"PVD",isSelected:!1},{name:"Retinopathy",isSelected:!1},{name:"Skin Disease",isSelected:!1},{name:"CKD",isSelected:!1},{name:"Gastro Complication",isSelected:!1},{name:"DKA",isSelected:!1},{name:"Hypoglycemia",isSelected:!1},{name:"HTN (Hypertension)",isSelected:!1},{name:"Lipid Disorder",isSelected:!1}],physicalActivityList:[],medicalInfo:{drugAddictionList:[{type:"Cigarette",isYes:"",amount:""},{type:"Bidi",isYes:"",amount:""},{type:"Chewing Tobacco",isYes:"",amount:""},{type:"Tobacco Powder",isYes:"",amount:""},{type:"Betal Leaf/Betal Nut (Shupari)",isYes:"",amount:""},{type:"Alcohol",isYes:"",amount:""},{type:"Others",isYes:"",amount:""}],dietaryHistoryList:[],typeOfCookingOilList:[{type:"Soyebean oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Mustard oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Palm oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Olive oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Rice bran oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Other",isYes:"",amount:"",unit:"Litres",duration:"Month"}],historyOfDeseaseList:[{diseaseName:"Diabetes",value:""},{diseaseName:"Pregnancy diabetes",value:""},{diseaseName:"Hypertension",value:""},{diseaseName:"Heart disease",value:""},{diseaseName:"Asthma",value:""},{diseaseName:"Tuberculosis",value:""},{diseaseName:"Mental disorder",value:""},{diseaseName:"Abortion",value:""},{diseaseName:"Preeclampsia",value:""},{diseaseName:"Eclampsia",value:""},{diseaseName:"Still-Birth",value:""},{diseaseName:"Macrosomia (Large Baby >4kg)",value:""},{diseaseName:"LBW (Small Baby <2.5kg)",value:""},{diseaseName:"Pre-term ( less than 37 weeks )",value:""},{diseaseName:"IUD",value:""}],historyOfMedicationList:[{name:"On Insulin",value:"",type:"",typeOfDevice:"",forVisitReasonIdList:[]},{name:"OADs",value:"",type:"",forVisitReasonIdList:["002","003","005"]},{name:"Anti HTN",value:"",type:"",forVisitReasonIdList:[]},{name:"Anti lipids",value:"",type:"",forVisitReasonIdList:[]},{name:"Cardiac Medication",value:"",type:"",forVisitReasonIdList:[]}],familyHistoryList:[{disease:"Diabetes",value:""},{disease:"Hypertension",value:""},{disease:"Coronary Artery Disease",value:""},{disease:"Cerebro-Vascular Disease",value:""}]},currentTreatment:{typeOfTreatment:"",ogld:{ogldUsage:"no",ogldDrugList:[{ogldDrugName:"",drugDosage:""}]}},insulin:{insulinUsage:"no",insulinType:"",insulinTherapyList:[{therapyType:"Basal",drugName:"",preListedDrugPath:"basalDrugList",dosageList:[{time:"Morning",value:"",unit:"unit"},{time:"Noon",value:"",unit:"unit"},{time:"Night",value:"",unit:"unit"}]},{therapyType:"Bolus",drugName:"",preListedDrugPath:"bolusDrugList",dosageList:[{time:"Morning",value:"",unit:"unit"},{time:"Noon",value:"",unit:"unit"},{time:"Night",value:"",unit:"unit"}]},{therapyType:"Premix",drugName:"",preListedDrugPath:"premixDrugList",dosageList:[{time:"Morning",value:"",unit:"unit"},{time:"Noon",value:"",unit:"unit"},{time:"Night",value:"",unit:"unit"}]},{therapyType:"Other",drugName:"",preListedDrugPath:"otherInsulinDrugList",dosageList:[{time:"Morning",value:"",unit:"unit"},{time:"Noon",value:"",unit:"unit"},{time:"Night",value:"",unit:"unit"}]}]},otherMedicationList:[{name:"Anti HTN",isYes:"",medicineList:[{name:"",dose:"",unit:""}]},{name:"Anti lipids",isYes:"",medicineList:[{name:"",dose:"",unit:""}]},{name:"Aspirin",isYes:"",medicineList:[{name:"",dose:"",unit:""}]},{name:"Anti-obesity",isYes:"",medicineList:[{name:"",dose:"",unit:""}]}]}}},onDivisionChange:function(e){var t;return this.set("districtIndex",-1),t=this.divisionList[this.divisionIndex].districtList,lib.util.delay(5,function(e){return function(){return e.set("districtList",t)}}(this))},computeWaistHipRatio:function(){var e,t,i,a,n,s;for(s=0,e=0,n=this.patient.diabeticRecord.clinicalInfoList,i=0,a=n.length;i<a;i++)t=n[i],"waist"===t.type?s=parseInt(t.value):"hip"===t.type&&(e=parseInt(t.value));return this.waistHipRatio=s/e},_loadPatient:function(e,t){var i,a;return i=app.db.find("patient-list",function(t){var i;return i=t.serial,i===e}),1===i.length?(this.isPatientValid=!0,a=i[0],a.name=this.$getFullName(a.name),this.patient=a):this._notifyInvalidPatient(),t()},_notifyInvalidPatient:function(){return this.isPatientValid=!1,this.domHost.showModalDialog("Invalid Patient Provided")},getDefaultPasswordForPatientSignup:function(){return"123456"},createOrganizationSerialForPatient:function(e,t){var i,a,n;return n=e,a=n.match(/\b(\w)/g),i=a.join(""),i+t},calculateAge:function(e){var t,i,a,n;return a=e.detail.value,n=new Date(a).getFullYear(),i=(new Date).getFullYear(),t=i-n,this.ageInYears=t},makeDOBFromYears:function(e){var t,i;return t=e.target.value,i=(new Date).getFullYear(),i-=parseInt(t),this.set("patient.dateOfBirth",i+"-01-01")},printButtonPressed:function(e){return window.print()},saveBPData:function(e){var t,i,a,n;for(t={serial:null,visitSerial:null,createdByUserSerial:null,patientSerial:null,createdDatetimeStamp:null,lastModifiedDatetimeStamp:null,lastSyncedDatetimeStamp:null,data:{systolic:"",diastolic:"",random:"",unit:"mm Hg",flags:{flagAsError:!1}}},a=0,n=e.length;a<n;a++)i=e[a],"sbp"===i.type?t.data.systolic=parseInt(i.value):"dbp"===i.type&&(t.data.diastolic=parseInt(i.value));return t.serial=this.generateSerialForVitals("BP-REG"),t.lastModifiedDatetimeStamp=lib.datetime.now(),t.createdByUserSerial=this.user.serial,t.patientSerial=this.patient.serial,t.createdDatetimeStamp=lib.datetime.now(),app.db.upsert("patient-vitals-blood-pressure",t,function(e){return function(e){var i;return i=e.serial,t.serial===i}}(this))},saveToOtherTest:function(e){var t;return t={serial:this.generateSerialForVitals("OT"),createdByUserSerial:this.user.serial,patientSerial:this.patient.serial,createdDatetimeStamp:lib.datetime.now(),lastModifiedDatetimeStamp:lib.datetime.now(),lastSyncedDatetimeStamp:0,data:{date:lib.datetime.mkDate(),name:e.name,institution:null,result:e.value,unit:e.unit,attachmentSerialList:[]}},app.db.upsert("patient-test-other",t,function(e){return function(e){var i;return i=e.serial,t.serial===i}}(this))},saveLabDataToOtherTest:function(e){var t,i,a,n;for(n=[],i=0,a=e.length;i<a;i++)t=e[i],t.value?n.push(this.saveToOtherTest(t)):n.push(void 0);return n},savePatientClinicalData:function(e,t){return this.saveBPData(e.clinicalInfoList),this.saveLabDataToOtherTest(e.laboratoryTestList),t()},addPhysicalActivity:function(){return this.physicalActivityObj.name&&this.physicalActivityObj.duration?(this.push("patient.diabeticRecord.physicalActivityList",this.physicalActivityObj),this.makeNewPhysicalActivityObj()):void this.domHost.showToast("Please Fill Up Name and Duration")},deletePhysicalActivity:function(e){var t;return t=e.model.index,this.splice("patient.diabeticRecord.physicalActivityList",t,1)},makeNewPhysicalActivityObj:function(){return this.physicalActivityObj={name:null,duration:null,unit:"min/day"}},addCustomTest:function(){return this.customTest.name&&this.physicalActivityObj.unit?(this.push("patient.diabeticRecord.laboratoryTestList",this.customTest),this.makeNewCustomTest()):void this.domHost.showToast("Test Name and Unit is Required!")},deleteCustomTest:function(e){var t,i,a;return t=this.locateParentNode(e.target,"PAPER-ICON-BUTTON"),t.opened=!1,a=this.$$("#lab-test-list-repeater"),i=a.indexForElement(t),this.splice("patient.diabeticRecord.laboratoryTestList",i,1)},makeNewCustomTest:function(){return this.customTest={name:null,value:null,unit:"",isSelected:"",costType:"free",inputType:"number",isCustomTest:!0}},addFamilyHistoryDisease:function(){return this.push("patient.diabeticRecord.medicalInfo.familyHistoryList",this.otherFamilyHistoryDisease)},addCustomComplication:function(){return this.push("patient.diabeticRecord.complicationList",{name:this.customComplication,isSelected:!0})},addHistoryDisease:function(){return this.push("patient.diabeticRecord.medicalInfo.historyOfDeseaseList",this.historyDisease)},addCookingOil:function(){return this.push("patient.diabeticRecord.medicalInfo.typeOfCookingOilList",this.otherTypeOfCookingOil)},addVaccine:function(){return this.push("patient.diabeticRecord.medicalInfo.vaccinationList",this.otherVaccine)},addDietItem:function(){return this.push("patient.diabeticRecord.medicalInfo.dietaryHistoryList",this.otherDietItem)},deleteDietItem:function(e){var t;return t=e.model.index,this.splice("patient.diabeticRecord.medicalInfo.dietaryHistoryList",t,1)},onDietaryItemValue:function(e){var t,i,a,n,s,r,l,u,o,d;a=this.locateParentNode(e.target,"PAPER-INPUT"),a.opened=!1,u=this.$$("#dietary-list-repeater"),n=u.indexForElement(a),s=e.model.index,t=0,o=1,r=2,0===s&&(i=this.patient.diabeticRecord.medicalInfo.dietaryHistoryList[n].consumeAmount[s].value,this.set("patient.diabeticRecord.medicalInfo.dietaryHistoryList."+n+".consumeAmount."+o+".value",parseInt((7*i).toString())),this.set("patient.diabeticRecord.medicalInfo.dietaryHistoryList."+n+".consumeAmount."+r+".value",parseInt((30*i).toString()))),1===s&&(d=this.patient.diabeticRecord.medicalInfo.dietaryHistoryList[n].consumeAmount[s].value,i=d/7,this.set("patient.diabeticRecord.medicalInfo.dietaryHistoryList."+n+".consumeAmount."+t+".value",parseInt(i.toString())),this.set("patient.diabeticRecord.medicalInfo.dietaryHistoryList."+n+".consumeAmount."+r+".value",parseInt((30*i).toString()))),2===s&&(l=this.patient.diabeticRecord.medicalInfo.dietaryHistoryList[n].consumeAmount[s].value,i=l/30,this.set("patient.diabeticRecord.medicalInfo.dietaryHistoryList."+n+".consumeAmount."+t+".value",0),this.set("patient.diabeticRecord.medicalInfo.dietaryHistoryList."+n+".consumeAmount."+o+".value",0))},addMedicine:function(e){var t,i;return t=e.model.index,i="patient.diabeticRecord.otherMedicationList."+t+".medicineList",this.push(i,{name:"",dose:"",unit:""})},navigatedIn:function(){var e;return this.selectedPatientInfoPage=0,e=this.domHost.getPageParams(),this.organization=this.getCurrentOrganization(),this.organization||this.domHost.navigateToPage("#/select-organization"),this._loadUser(),this.settings=this._getSettings(),"new"===e.patient?(this._makePatientSignUp(),this.isPatientValid=!0):this._loadPatient(e.patient,function(e){return function(){return e.set("EDIT_MODE_ON",!0)}}(this)),this.makeNewCustomTest()},addOgldDrug:function(e){var t;return t=e.model,this.push("patient.diabeticRecord.currentTreatment.ogld.ogldDrugList",{ogldDrugName:"",drugDosage:""})},deleteSelectedOgldDrug:function(e){var t,i;return i=this.patient.diabeticRecord.currentTreatment.ogld.ogldDrugList.length,1===i?this.domHost.showToast("Sorry! Add Another field & TRY AGAIN."):(t=e.model.index,this.splice("patient.diabeticRecord.currentTreatment.ogld.ogldDrugList",t,1))},standardPatientSignupPressed:function(e){var t;return this.patient.name&&this.patient.password&&this.patient.phone?(t=this.patient,t.name=this._makeNameObject(t.name),t.belongOrganizationList[0].organizationId=this.organization.idOnServer,this._callBDEMRPatientSignupApi(t)):void this.domHost.showToast("Please Fill Up Required Information")},_callBDEMRPatientSignupApi:function(e){var t;return t={patient:e,apiKey:this.user.apiKey},this.callApi("/bdemr-birdem-patient-registration",t,function(t){return function(i,a){return a.hasError?t.domHost.showModalDialog(a.error.message):(t.domHost.showModalDialog("Patient Created Successfully!"),t.domHost.navigateToPage("#/patient-manager/query:"+e.phone))}}(this))},updatePatientDetails:function(e){var t;return this.patient.name&&this.patient.dateOfBirth?(this.patient.gender=this.genderList[this.sexSelectedIndex],t=this.patient,t.name=this._makeNameObject(t.name),app.db.upsert("patient-list",t,function(e){return function(e){var i;return i=e.serial,t.serial===i}}(this)),this._callBDEMRPatientDetailsUpdateApi(t)):void this.domHost.showToast("Please Fill Up Required Information")},_importPatient:function(e,t,i){return this.callApi("/bdemr-patient-import-new",{serial:e,pin:t,doctorName:this.user.name,organizationId:this.organization.idOnServer},function(e){return function(t,a){var n,s,r,l;return a.hasError?e.domHost.showModalDialog(a.error.message):(l=a.data,1!==l.length?e.domHost.showModalDialog("Unknown error occurred."):(r=l[0],s=app.db.find("patient-list",function(e){var t;return t=e.serial,t===r.serial})[0]._id,s&&app.db.remove("patient-list",s),r.flags={isImported:!1,isLocalOnly:!1,isOnlineOnly:!1},r.flags.isImported=!0,e.domHost.setCurrentPatientsDetails(r),n=app.db.insert("patient-list",r),i(n)))}}(this))},_callBDEMRPatientDetailsUpdateApi:function(e){var t;return t={patient:e,apiKey:this.user.apiKey},this.callApi("/bdemr-birdem-patient-details-update",t,function(e){return function(t,i){i.hasError?e.domHost.showModalDialog(i.error.message):e.arrowBackButtonPressed()}}(this))},_makeSettings:function(){return this.settings={createdByUserSerial:this.user.serial,lastModifiedDatetimeStamp:0,createdDatetimeStamp:lib.datetime.now(),lastSyncedDatetimeStamp:null,serial:this.user.serial,printDecoration:{leftSideLine1:"My Institution",leftSideLine2:"My Institution Address",leftSideLine3:"My Institution Contact",rightSideLine1:"My Name",rightSideLine2:"My Degrees",rightSideLine3:"My Contact",fullVisitHeadline:"Print Full Visit/Discharge Certificate",footerLine:"A simple message on the bottom",logoDataUri:null},billingTargetEmailAddress:"",nsqipTargetEmailAddress:"",monetaryUnit:"BDT",otherSettings:{patientSignUpDefaultPassword:"123456"}}},_getSettings:function(){var e,t;return e=app.db.find("settings"),t=0===e.length?this._makeSettings():e[0]},_saveSettings:function(){return this.settings.lastModifiedDatetimeStamp=lib.datetime.now(),app.db.upsert("settings",this.settings,function(e){return function(t){var i;return i=t.serial,e.settings.serial===i}}(this))},_generateRandomString:function(){var e,t,i;for(i="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<255;)i+=t.charAt(Math.floor(Math.random()*t.length)),e++;return i},createOfflinePatient:function(e){var t;return t={},t={name:(e.name.first+" "+(e.name.middle||"")+" "+(e.name.last||"")).replace("  "," "),serial:e.serial,idOnServer:"Unregistered",source:"local",lastSyncedDatetimeStamp:0,lastModifiedDatetimeStamp:lib.datetime.mkDate(lib.datetime.now()),createdDatetimeStamp:lib.datetime.mkDate(lib.datetime.now()),createdByUserSerial:this.user.serial,email:e.phone,phone:e.email,address:{line1:e.addressList[0].addressLine1,line2:e.addressList[0].addressLine2,postalCode:e.addressList[0].addressPostalOrZipCode,cityOrTown:e.addressList[0].addressCityOrTown,stateOrProvince:e.addressList[0].stateOrProvince,country:e.addressList[0].addressCountry},dob:e.dateOfBirth,nIdOrSsn:""+(e.nationalIdCardNumber||""),doctorsPrivateNote:""+(e.doctorQuickNotes||""),hospitalNumber:""+(e.hospitalSerial||""),
initialVisitDate:""+(e.patientInitialVisitDate||""),lastVisitDate:""+(e.lastVisitDate||""),admissionDate:""+(e.admissionDate||"")},app.db.insert("patient-list",t)},_savePatientOfflineSignupDetails:function(e){return e.serial=this.generateSerialForPatient(),app.db.insert("unregsitered-patient-details",e),this.domHost.showModalDialog("Patient Registered Successfully Offline."),this.createOfflinePatient(e),this._makePatientSignUp(),this.domHost.navigateToPage("#/patient-manager/unregsiterd:"+e.phone)},networkCheck:function(){var e;return e=!!navigator.onLine},_makeNameObject:function(e){var t,i,a,n,s,r,l;return"string"==typeof e?(e=e.trim(),l=e.split("."),r=l.pop(),i=0===l.length?"":l.join(".").trim(),l=r.trim().split(" "),s={},l.length<=1?t=l[0]:(t=l.shift(),a=l.pop(),n=l.join(" "),""===n&&(n=null),""===a&&(a=null)),""===i&&(i=null),s.honorifics=i,s.first=t,s.middle=n,s.last=a,s):e},navigatedOut:function(){return this.patient=null,this.isPatientValid=!1,this.set("EDIT_MODE_ON",!1)}})}).call(this);
//# sourceMappingURL=page-patient-editor.coffee-compiled.js.map</script>
</dom-module>
