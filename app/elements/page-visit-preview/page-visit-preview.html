<!-- custom-elements --><!-- style --><!-- behavior --><!-- custom-elements --><!-- element --><div hidden="" by-polymer-bundler=""><link rel="import" href="../html-block/html-block.html"></div><dom-module id="page-visit-preview">
  <template>

    <style is="custom-style" include="common-style">
      .limiting-container {
        margin-top: 8px;
      }

      #printPreview {
        word-break: break-word;
      }

      .patient-details {
        background-color: #5c4575;
        color: #fff;
      }

      .print-content {
        border-top: 1px solid #eee;
        @apply(--layout-horizontal);
      }

      .print-content .left {
        width: 34%;
        border-right: 1px solid #eee;
      }

      .print-content .right {
        width: 66%;
      }

      ol.order-list {
        margin: 4px 0;
        padding-left: 16px;
        list-style-type: lower-alpha;
      }

      ul.unorderd-list-custom {
        margin: 4px 0;
        padding-left: 16px;
      }

      ol.order-list li {
        margin: 4px 0;
      }

      .print-sub-header {
        font-size: bold;
        background-color: #fafafa;
        margin-bottom: 8px;
      }

      .profile-image {
        height: 78px;
        width: 78px;
        border-radius: 50%;
        border: 2px solid #f7f7f7;
      }

      .table {
        width: 100%;
        border-collapse: collapse;
      }

      .table th {
        text-align: left;
      }

      .table thead * {
        border-bottom: 1px solid #ccc;
        background-color: #f5f5f5;
        padding: 5px;
      }

      .table tbody th,
      .table tbody td {
        padding: 5px;
        border-bottom: 1px solid #eee;
        vertical-align: middle;
      }

      .table tfoot * {
        background-color: #f5f5f5;
        padding: 5px;
      }

      .table th,
      td {
        font-size: 14px;
      }


      .print {
        min-width: calc(210mm - 20.32mm);
        max-width: calc(210mm - 20.32mm);
        /*text-align: center;*/
        background: #fff;
      }

      .header {
        /*font-size: 36px;*/
      }

      .footer {
        /*font-size: 36px;*/
      }


      .ideal {
        min-width: calc(210mm - 20.32mm);
        max-width: calc(210mm - 20.32mm);
        min-height: calc(297mm - 20.32mm);
        max-height: calc(297mm - 20.32mm);
        border: 1px solid black;
      }

      /*.page {
        border: 1px solid black;
        min-width: 21cm;
        max-width: 21cm;
      }*/

      /*@media print {
        .page {
          page-break-after: always;
        }
      }*/

      .logo-area {
        margin: 10px 0 40px 0;
      }

      .print-header-logo-title {
        padding: 0;
        margin: 0;
        font-size: 21px;
      }

      .print-header-logo-subtitle {
        padding: 0;
        margin: 0;
        font-size: 12px;
        font-weight: normal;
      }

      @media print {
        app-header-layout #contentContainer {
          overflow-y: unset !important;
        }
      }
    </style>

    <!-- print - start -->
    <div class="print">

      <!-- print - header - start -->
      <div class="header vertical layout center">

        <div class="layout horizontal logo-area">

          <div class="m-right-16">
            <img style="max-width: 42px; height: auto;" class="logo" src="./../../assets/img/partners/uhcp.jpg" alt="UHCP Logo">
          </div>
          <div>
            <h2 class="print-header-logo-title">Universal Health Coverage Plan (UHCP)</h2>
            <h6 class="print-header-logo-subtitle type text-center">A Project of the Diabetic Association of Bangladesh (BADAS)</h6>
          </div>

          <div class="m-left-16">
            <img style="max-width: 42px; height: auto;" class="logo" src="./../../assets/img/partners/badas.jpg" alt="BADAS Logo">
          </div>

        </div>

      </div>
      <!-- print- header - end -->

      <!-- print - content - start -->
      <div class="content">

        <div class="">
          <table class="table">
            <tbody><tr>
              <th>Consultation Site:</th>
              <td>[[visit.hospitalName]]</td>
              <th>Patient Id / Policy Id:</th>
              <td>
                <template is="dom-if" if="[[patient.policyList.length]]">
                  <template is="dom-repeat" items="[[patient.policyList]]" as="policy">
                    <span class="">[[policy.number]]</span>
                  </template>
                </template>
              </td>
            </tr>
            <tr>
              <th>Consultant Name:</th>
              <td>[[visit.doctorName]]</td>
              <th>Patient Name:</th>
              <td>{{$getFullName(patient.name)}}</td>
            </tr>
            <tr>
              <th>Consultant Grade</th>
              <td>[[visit.doctorSpeciality]]</td>
              <th></th>
              <td></td>
            </tr>
            <tr>
              <th>Factory name:</th>
              <td>
                <template is="dom-if" if="[[patient.employmentDetailsList.length]]">
                  <template is="dom-repeat" items="[[patient.employmentDetailsList]]" as="factory">
                    [[factory.institutionName]]
                  </template>
                </template>
              </td>
              <th>Age/Sex:</th>
              <td>[[_computeAge(patient.dateOfBirth)]] years / {{patient.gender}}</td>
            </tr>
            <tr>
              <th>Prescription Id:</th>
              <td>[[visit.serial]]</td>
              <th>Blood Group</th>
              <td>[[patient.bloodGroup]]</td>
            </tr>
            <tr>
              <th>Date &amp; Time:</th>
              <td>[[$mkDateTime(visit.createdDatetimeStamp)]]</td>
              <th>Allergies</th>
              <td>[[patient.allergy]]</td>
            </tr>
          </tbody></table>
        </div>




        <div class="p-16 horizontal layout center center-justified" hidden$="{{!printPrescriptionOnly}}">
          <div class="type headline">{{visit.recordTitle}}</div>
        </div>

        <!-- Print - Prescription - start -->
        <template is="dom-if" if="[[!_isEmpty(matchingPrescribedMedicineList.length)]]">
          <div class="horizontal layout center print-sub-header">
            <div class="type body bold">Prescription</div>
          </div>

          <template is="dom-repeat" items="[[matchingPrescribedMedicineList]]">
            <div class="m-vertical-8 horizontal layout center">
              <div class="type caption secondary m-right-8">[[_returnSerial(index)]].</div>
              <div>
                <div>
                  <span class="type caption-2 text-bold">{{item.data.brandName}}</span>
                  <span class="type caption bg-gray">[[item.data.manufacturer]]</span>
                  <span class="type caption italic">{{item.data.genericName}} {{item.data.strength}}</span>
                </div>


                <div class="type caption">
                  <strong>Instruction: </strong>
                  <span>[[$TRANSLATE_NUMBER(item.data.doseDirection, LANG)]] [[$TRANSLATE('for', LANG)]] [[_computeTotalDaysCount(item.data.endDateTimeStamp,item.data.startDateTimeStamp)]]
                    <span hidden$="[[!item.data.endDateTimeStamp]]">[[$TRANSLATE('Days',LANG)]]</span>
                  </span>
                  <span>[[$TRANSLATE('By', LANG)]] </span>
                  <span>[[$TRANSLATE(item.data.route, LANG)]]</span>
                  <span>[[$TRANSLATE(item.data.direction, LANG)]] </span>
                </div>
                <div class="type caption">[[item.data.comments]]</div>
              </div>
            </div>
          </template>
        </template>
        <!-- Print - Prescription - end -->

        <!-- Print - Symptoms - start -->
        <template is="dom-if" if="[[!_isEmpty(addedIdentifiedSymptomsList.length)]]">
          <div class="horizontal layout center print-sub-header">
            <div class="type body bold">Symptoms</div>
          </div>
          <template is="dom-repeat" items="[[addedIdentifiedSymptomsList]]">
            <div class="type caption-2">
              <span class="type secondary">[[_returnSerial(index)]]. </span>
              <span>{{item.name}}</span>
              <template is="dom-if" if="[[_compareFn(item.possibleValueList.length, '>', 0)]]">
                (
                <template is="dom-repeat" items="[[item.possibleValueList]]">
                  <span>{{item}}, </span>
                </template>)
              </template>
            </div>
          </template>
          <div class="b-top m-top-8"></div>
        </template>
        <!-- Print - Symptoms - end -->

        <!-- Print - Examination - start -->
        <template is="dom-if" if="[[!_isEmpty(addedExaminationList.length)]]">
          <div class="horizontal layout center print-sub-header">
            <div class="type body bold">Examination</div>
          </div>
          <template is="dom-repeat" items="[[addedExaminationList]]" as="examination">
            <div class="type caption-2">
              <span class="type secondary">[[_returnSerial(index)]]. </span>
              <span>{{examination.name}}</span>
              (
              <template is="dom-repeat" items="[[examination.examinationValueList]]" as="examItem">
                <span hidden$="{{!examItem.checked}}">{{examItem.value}}, </span>
              </template>)
            </div>
          </template>
          <div class="b-top m-top-8 "></div>
        </template>
        <!-- Print - Examination - end -->

        <!-- Print - Vitals - start -->
        <template is="dom-if" if="[[!_isEmpty(addedVitalList.length)]]">
          <div class="horizontal layout center print-sub-header">
            <div class="type body bold">Vitals</div>
          </div>
          <template is="dom-repeat" items="[[addedVitalList]]">
            <div class="type caption-2">
              <strong>{{item.vitalType}}: </strong>
              <span>[[_pritifyVitalData(item)]]</span>
            </div>
          </template>
          <div class="b-top m-top-8"></div>
        </template>
        <!-- Print - Vitals - end -->

        <!-- Print - Test Advised - start -->
        <template is="dom-if" if="[[!_isEmpty(addedInvestigationList.length)]]">
          <div class="horizontal layout center print-sub-header">
            <div class="type body bold">Advised Test</div>
          </div>
          <template is="dom-repeat" items="[[addedInvestigationList]]">
            <div class="type caption-2 layout horizontal">
              <div class="type secondary m-right-8">[[_returnSerial(index)]]. </div>
              <div class="flex vertical layout">
                <div>{{item.investigationName}}</div>
                <!-- <template is="dom-if" if="[[_compareFn(item.testList.length, '==', 1)]]">
                  <ol class="order-list">
                    <li>{{item.testList.0.name}}</li>
                  </ol>
                </template> -->
                <template is="dom-if" if="[[_compareFn(item.testList.length, '>', 1)]]">
                  <ol class="order-list">
                    <template is="dom-repeat" items="[[item.testList]]">
                      <li>{{item.name}}</li>
                    </template>
                  </ol>
                </template>
              </div>
              <template is="dom-if" if="[[item.suggestedInstitutionName]]">
                <div class="type caption secondary m-left-16">
                  <strong>Suggested Institution: </strong>
                  <span class="flex">{{item.suggestedInstitutionName}}</span>
                </div>
              </template>
            </div>
          </template>
          <div class="b-top"></div>
        </template>
        <!-- Print - Test Advised - end -->

        <!-- Print - Diagnosis - start -->
        <template is="dom-if" if="[[!_isEmpty(diagnosis.data.diagnosisList.length)]]">
          <div class="horizontal layout center print-sub-header">
            <div class="type body bold">Diagnosis</div>
          </div>

          <template is="dom-repeat" items="[[diagnosis.data.diagnosisList]]">
            <div class="type caption-2">
              <span class="type secondary">[[_returnSerial(index)]]. </span>
              <span>{{item.name}}</span>
              <template is="dom-if" if="[[_compareFn(item.possibleValueList.length, '>', 0)]]">
                (
                <template is="dom-repeat" items="[[item.possibleValueList]]">
                  <span>{{item}}, </span>
                </template>)
              </template>
            </div>
          </template>
          <div class="b-top m-top-8"></div>
        </template>
        <!-- Print - Diagnosis - end -->

        <!-- Print - Notes - start -->
        <template is="dom-if" if="{{!_isEmpty(doctorNotes.data.messageList.length)}}">
          <div class="horizontal layout center print-sub-header">
            <div class="type body bold">Doctor Advised/Notes</div>
          </div>
          <ul class="unorderd-list-custom">
            <template is="dom-repeat" items="[[doctorNotes.data.messageList]]">
              <li class="type caption-2" style="word-break: break-word; margin-right: 4px;">{{item}}</li>
            </template>
          </ul>
          <div class="b-top m-top-8"></div>
        </template>
        <!-- Print - Notes - end -->

        <!-- Print - Next Visit - start -->
        <template is="dom-if" if="[[isNextVisitValid]]">
          <div class="horizontal layout center print-sub-header">
            <div class="type body bold">Next Visit</div>
          </div>
          <div class="type caption-2">
            <div>
              <strong>Date: </strong>
              <span>[[$formatDate(nextVisit.data.nextVisitDateTimestamp)]]</span>
            </div>
            <div>{{nextVisit.data.priorityType}}</div>
          </div>
          <div class="b-top m-top-8"></div>
        </template>
        <!-- Print - Next Visit - end -->

        <!-- Print - Referral - start -->
        <template is="dom-if" if="[[!_isEmptyString(referral.data.doctorName)]]">
          <div class="horizontal layout center print-sub-header">
            <div class="type body bold">Referral</div>
          </div>
          <div class="type caption-2">
            <div>
              <strong>Referred To: </strong>
              <span>[[referral.data.doctorName]]</span>
            </div>
            <div>
              <strong>Speciality: </strong>
              <span>[[referral.data.speciality]]</span>
            </div>
          </div>
          <div class="b-top m-top-8"></div>
        </template>

        <!-- Print - Referral - end -->

        <!-- Print - History And Physical - start -->
        <template is="dom-if" if="[[shouldRender]]">
          <div class="horizontal layout center">
            <div class="type body print-sub-header">[[recordPartTitle]]</div>
          </div>
          <div class="p-horizontal-16">
            <html-block html="[[recordPartHtmlContent]]"></html-block>
          </div>
          <div class="b-top m-top-8"></div>
        </template>
        <!-- Print - History And Physical - end -->

        <!-- Patient Discharge Note -->
        <div class="horizontal layout center print-sub-header">
          <div class="type body bold">Patient Discharge Note</div>
        </div>
        <div class="">
          <div>
            <span class="type">Type: </span> [[visit.dischargeNote.dischargeType]]
          </div>
          <div hidden="[[_isEmptyString(visit.dischargeNote.advise)]]">
            <span class="type">Advice: </span> [[visit.dischargeNote.advise]]
          </div>
          <template is="dom-if" if="[[$equals(visit.dischargeNote.dischargeType, 'IPD')]]">
            <div class="layout horizontal">
              <span class="type bold"> Admission Date: </span>
              <span>&nbsp;[[$mkDate(visit.dischargeNote.admissionDateTimeStamp)]]</span>
            </div>
            <div>
              <span class="type">Admitted To</span>
              <span>[[visit.dischargeNote.admittedToOrganization.name]]</span>
            </div>
            <div>
              <span class="type">Referred By: </span> [[visit.dischargeNote.referredByDoctorName]]
            </div>
            <div>
              <span class="type">Admitted By: </span> [[visit.dischargeNote.admittedByDoctorName]]
            </div>
          </template>

        </div>
        <!-- Patient Stay Preview End -->
      </div>
      <!-- print - content - end -->

      <!-- print - footer - start -->
      <div class="footer">
        <div class="horizontal layout end-justified center">
          <template is="dom-if" if="[[settings.printDecoration.signatureDataUri]]">
            <img height="96" width="128" class="logo" src="[[settings.printDecoration.signatureDataUri]]" alt="signature">
          </template>
        </div>

        <template is="dom-if" if="[[settings.flags.showUserNameOnPrintPreview]]">
          <div class="type caption secondary" style="text-align: center; padding: 8px;">
            <div>
              <i>
                <div class="type caption p-8">
                  <strong>Printed By: </strong>[[user.name]],
                  <strong>Printed On: </strong>[[getPrintedOnTime()]]
                </div>
              </i>
            </div>
          </div>
        </template>

        <!-- <div class="b-top">
          <div class="type caption secondary">Address: Dhaka: Ibrahim General Hospital, 27-28 Commercial Plot, main road-01, Section-06, Mirpur, Dhaka. Contact
            No. : 01712222222, from 9.00 AM to 5.00 PM (Sat- Thu)
            <br> Narayangonj: Narayangonj Diabetic Hospital, Dewbogh, Nagbari, Narayangonj. Contact No : 01712222222, from 9.00
            AM to 5.00 PM (Sat- Thu)</div>
        </div> -->
      </div>
      <!-- print - footer - end -->

      <!-- do not delete/modify this area - start -->
      <div class="ideal">
      </div>
      <div class="output">
      </div>
      <!-- do not delete/modify this area - end -->

    </div>
    <!-- print - end -->

    <!-- local DOM -->
  </template>
  <script>(function(){Polymer({is:"page-visit-preview",behaviors:[app.behaviors.commonComputes,app.behaviors.dbUsing,app.behaviors.pageLike,app.behaviors.translating,app.behaviors.apiCalling],properties:{comboBoxSymptomsInputValue:{type:String,notify:!0,value:null},walletBalance:{type:Number,value:-1},currentOrganization:{type:Object,notify:!0,value:null},selectedMedicinePage:{type:Number,notify:!1,value:0},printPrescriptionOnly:{type:Boolean,notify:!0,value:!0},isBPAdded:{type:Boolean,notify:!0,value:!1},isHRAdded:{type:Boolean,notify:!0,value:!1},isBMIAdded:{type:Boolean,notify:!0,value:!1},isSpO2Added:{type:Boolean,notify:!0,value:!1},isRRAdded:{type:Boolean,notify:!0,value:!1},isTempAdded:{type:Boolean,notify:!0,value:!1},isThatNewVisit:{type:Boolean,notify:!0,value:!0},visitHeaderTitleList:{type:Array,notify:!1,value:["Complete Visit","Discharge Note"]},insulineMedicineList:{type:Array,notify:!0,value:function(){return[]}},visitHeaderTitleSelectedIndex:{type:Number,notify:!1,value:0},isVisitValid:{type:Boolean,notify:!1,value:!1},selectedVisitPageIndex:{type:Number,notify:!1,value:!1},isPrescriptionValid:{type:Boolean,notify:!1,value:!1},isNoteValid:{type:Boolean,notify:!1,value:!1},isNextVisitValid:{type:Boolean,notify:!0,value:!1},isInvoiceValid:{type:Boolean,notify:!1,value:!1},isTestAdvisedValid:{type:Boolean,notify:!1,value:!1},isPatientValid:{type:Boolean,notify:!1,value:!1},isFullVisitValid:{type:Boolean,notify:!1,value:!1},user:{type:Object,notify:!0,value:null},patient:{type:Object,notify:!0,value:null},visit:{type:Object,notify:!0,value:null},doctorNotes:{type:Object,notify:!0,value:null},doctorNotesMessage:{type:String,notify:!0,value:""},nextVisit:{type:Object,notify:!0,value:null},testAdvised:{type:Object,notify:!0,value:null},invoice:{type:Object,notify:!0,value:null},matchingPrescribedMedicineList:{type:Array,notify:!0,value:[]},doctorInstitutionList:{type:Array,notify:!0,value:[]},doctorSpecialityList:{type:Array,notify:!0,value:[]},doctorInstitutionSelectedIndex:{type:Number,notify:!0,value:0},doctorSpecialitySelectedIndex:{type:Number,notify:!0,value:0},hasTestResults:{type:Boolean,notify:!0,value:!1},historyAndPhysicalRecord:{type:Object,notify:!0,value:null},matchingRecordList:{type:Object,notify:!0,value:null},diagnosis:{type:Object,notify:!0,value:null},isDiagnosisValid:{type:Boolean,value:!1},diagnosisListArray:{type:Array,notify:!0,value:[]},selectedDiagnosisListArray:{type:Array,notify:!0,value:[]},prescription:{type:Object,notify:!0,value:null},matchingPrescribedMedicineList:{type:Array,notify:!0,value:[]},matchingCurrentMedicineList:{type:Array,notify:!0,value:[]},matchingFavoriteMedicineList:{type:Array,notify:!0,value:[]},duplicateMedicineEditablePart:{type:Object,notify:!0,value:null},favoriteMedicineShownIndex:{type:Number,value:0},isMedicineValid:{type:Boolean,notify:!1,value:!0},isThatNewMedicine:{type:Boolean,notify:!1,value:!0},medicine:{type:Object,notify:!0,value:{}},strengthList:{type:Array,value:[]},continueMedicineEndsOnDate:{type:String,value:null},doseList:{type:Array,value:function(){return["1+1+1","1+0+1","0+0+1","1+0+0","1+1+1+1","2+2+2","2+0+2","0+0+2","2+0+0","1/2+1/2+1/2","1/2+0+1/2","0+0+1/2","1/2+0+0","1/4+1/4+1/4","1/4+0+1/4","0+0+1/4","1/4+0+0","1/4+1/4+1/4+1/4"]}},medicineFormList:{type:Array,value:["Tablet","Injection","Syrup","Drop","Capsule","Suspension","I.V Injection","I.M injection","S/C Injection","PR (Per Rectal)","Suppository","Solution","Ointment","Cream","Skin Patch","Custom"]},doseUnitList:{type:Array,value:["Custom"]},endDateTimeTypeList:{type:Array,value:["As Needed","0 Weeks","1 Week","2 Weeks","3 Weeks","Custom"]},endDateTimeTypeArgument2List:{type:Array,value:["0 Day","1 Day","2 Days","3 Days","4 Days","5 Days","6 Days"]},directionList:{type:Array,value:["Anytime","Before Meal","After Meal","Full Stomach","Empty Stomach"]},routeList:{type:Array,value:["Oral","I.V injection","I.M injection","PR (Per Rectal)","S/L","S/C","Nebulizer","Inhaler","Topical application skin","Topical application ear","Topical application eye","Intravaginal","Transdermal","Custom"]},intervalInDays:{type:Number,value:1},medicineFormSelectedIndex:{type:Number,value:0},doseUnitSelectedIndex:{type:Number,value:0},directionSelectedIndex:{type:Number,value:0},routeSelectedIndex:{type:Number,value:0},endDateTimeTypeSelectedIndex:{type:Number,value:0},endDateTimeTypeArgument2SelectedIndex:{type:Number,value:0},strengthSelectedIndex:{type:Number,value:0,notify:!0},matchingMedicineList:{type:Array,value:[]},doseGuidelineList:{type:Array},activeDoseGuideline:{type:Object,value:null},guidelineIndicationSelectedIndex:{type:Number,value:null},guidelineAgeSelectedIndex:{type:Number,value:null},guidelineIndicationList:{type:Array,value:function(){return[]}},guidelineAgeList:{type:Array,value:function(){return[]}},insulinMedicine:{type:Object,value:function(){return null}},medicineCompositionList:{type:Array,value:[]},brandNameSourceDataList:{type:Array,value:[]},brandNameSelectedObjectList:{type:Array,value:[]},genericNameSourceDataList:{type:Array,value:[]},showDetailedForm:{type:Boolean,value:!1},showGuidelineDisclaimer:{type:Boolean,value:!0,notify:!0},selectedCurrentMedicineData:{type:Object,value:null},symptomsDataList:{type:Array,notify:!0,value:[]},addedIdentifiedSymptomsList:{type:Array,notify:!0,value:[]},customSymptomsObject:{type:Object,notify:!0,value:{}},examinationDataList:{type:Array,notify:!0,value:[]},addedExaminationList:{type:Array,notify:!0,value:[]},addedExaminationList2:{type:Array,notify:!0,value:function(){return[]}},examinationObject:{type:Object,notify:!0,value:{}},favoriteInvestigaitonList:{type:Array,notify:!0,value:[]},investigationMemberValue:{type:String,notify:!0,value:""},investigationDataList:{type:Array,notify:!0,value:[]},addedInvestigationList:{type:Array,notify:!0,value:[]},testAdvisedObject:{type:Object,notify:!0,value:{}},suggestedInstitutionValue:{type:String,value:"",notify:!0},machingUserAddedInstitutionList:{type:Array,value:[],notify:!0},addedInvestigationNameIndex:{type:Number,value:0},customInvestigationObject:{type:Object,notify:!0,value:{}},customInvestigationUnitValue:{type:String,value:"",notify:!0},customInvestigationUnitList:{type:Array,value:[],notify:!0},selectedVitalIndex:{type:Number,value:-1,notify:!0},heightUnitSelectedIndex:{type:Number,value:0,notify:!0},weightUnitSelectedIndex:{type:Number,value:0,notify:!0},tempUnitSelectedIndex:{type:Number,value:0,notify:!0},bloodPressure:{type:Object,notify:!0,value:{}},pulseRate:{type:Object,notify:!0,value:{}},bmi:{type:Object,notify:!0,value:{}},respiratoryRate:{type:Object,notify:!0,rpm:{}},oxygenSaturation:{type:Object,notify:!0,value:{}},temperature:{type:Object,notify:!0,value:{}},addedVitalList:{type:Array,value:function(){return[]}},priorityTypeList:{type:Array,value:["As Necessary","Others"]},nextVisitDurationTypeList:{type:Array,value:["0 Day","1 Day","2 Days","3 Days","4 Days","5 Days","6 Days","7 Days","8 Days","9 Days","10 Days","11 Days","12 Days","13 Days","14 Days","15 Days","1 Week","2 Weeks","3 Weeks","4 Weeks","1 month","2 months","3 months","4 months","5 months","6 months","7 months","8 months","9 months","11 month","1 year","2 years","3 years","Custom"]},nextVisitDurationTypeSelectedIndex:{type:Number,notify:!0,value:0},nextVisitPriorityTypeSelectedIndex:{type:Number,notify:!0,value:0},isCustomDateTypeSelected:{type:Boolean,notify:!0,value:!1},insulinTypeList:{type:Array,value:function(){return[{label:"Bolus (Mealtime Insulin)",value:"Bolus (Mealtime Insulin)"},{label:"Premix",value:"Premix"},{label:"Split Mix",value:"Split Mix"},{label:"Basal & Bolus",value:"Basal & Bolus"},{label:"Basal Plus",value:"Basal Plus"},{label:"Basal Only",value:"Basal Only"}]}},insulinDrugList:{type:Array,value:function(){return[{label:"Insulatard 100 IU Vial",value:"Insulatard 100 IU Vial"},{label:"Insulatard Penfill",value:"Insulatard Penfill"},{label:"Levemir",value:"Levemir"},{label:"Tresiba",value:"Tresiba"},{label:"Victoza",value:"Victoza"},{label:"Insulatard Flexpen",value:"Insulatard Flexpen"},{label:"Actrapid Penfill",value:"Actrapid Penfill"},{label:"NovoRapid FlexPen",value:"NovoRapid FlexPen"},{label:"NovoRapid Penfill",value:"NovoRapid Penfill"},{label:"Actrapid 100 IU Vial",value:"Actrapid 100 IU Vial"},{label:"Actrapid FlexPen-Humean Insulin",value:"Actrapid FlexPen-Humean Insulin"},{label:"Mixtard 30 100 IU Vial",value:"Mixtard 30 100 IU Vial"},{label:"Mixtard 30 Penfill",value:"Mixtard 30 Penfill"},{label:"Mixtard 50 Penfill",value:"Mixtard 50 Penfill"},{label:"NovoMix 30 FlexPen",value:"NovoMix 30 FlexPen"},{label:"Ryzodeg",value:"Ryzodeg"},{label:"NovoMix 30 Penfill",value:"NovoMix 30 Penfill"},{label:"Mixtard 30 FlexPen",value:"Mixtard 30 FlexPen"}]}},settings:{type:Object,notify:!0},record:{type:Object,notify:!0,value:null},patient:{type:Object,notify:!0,value:null},recordDatabaseCollectionName:{type:String,value:null},recordPartName:{type:String,value:null},recordPartData:{type:Object,value:null},recordPartDef:{type:Object,value:null},recordPartTitle:{type:String,value:null},recordPartHtmlContent:{type:String,value:null},shouldRender:{type:Boolean,value:!1},delayRendering:{type:Boolean,value:!1}},$of:function(t,e){return e in t||(t[e]=null),t[e]},_isEmpty:function(t){return!t},_isEmptyArray:function(t){return 0===t.length},_isEmptyString:function(t){return null===t||""===t||"undefined"===t},_compareFn:function(t,e,i){return"<"===e?t<i:">"===e?t>i:"=="===e?t===i:">="===e?t>=i:"<="===e?t<=i:"!="===e?t!==i:void 0},_sortByDate:function(t,e){return t.lastModifiedDatetimeStamp<e.lastModifiedDatetimeStamp?1:t.lastModifiedDatetimeStamp>e.lastModifiedDatetimeStamp?-1:void 0},_computeTotalDaysCount:function(t,e){var i,n;return t?(n=864e5,e=new Date(e),t=new Date(t),i=t-e,this.$TRANSLATE(Math.round(i/n),this.LANG)):this.$TRANSLATE("As Needed",this.LANG)},_returnSerial:function(t){return t+1},_computeAge:function(t){var e,i,n,a;return a=new Date,i=new Date(t),e=a.getFullYear()-i.getFullYear(),n=a.getMonth()-i.getMonth(),(n<0||0===n&&a.getDate()<i.getDate())&&e--,e},_loadUser:function(t){var e;return e=app.db.find("user"),1===e.length?(this.user=e[0],this._getEmploymentList(this.user),this._getSpecializationList(this.user)):this.domHost.showModalDialog("Invalid User!"),t()},_getEmploymentList:function(t){var e,i,n,a,r;if(t.employmentDetailsList.length>0){for(a=t.employmentDetailsList,r=[],i=0,n=a.length;i<n;i++)e=a[i],r.push(this.push("doctorInstitutionList",null!=e?e.institutionName:void 0));return r}return this.doctorInstitutionList=[]},_getSpecializationList:function(t){var e,i,n,a,r;if(t.specializationList.length>0){for(n=t.specializationList,a=[],e=0,i=n.length;e<i;e++)r=n[e],a.push(this.push("doctorSpecialityList",r.specializationTitle));return a}return this.doctorSpecialityList=[]},_loadPatient:function(t,e){var i;return i=app.db.find("patient-list",function(e){var i;return i=e.serial,i===t}),1===i.length?(this.isPatientValid=!0,this.patient=i[0]):this._notifyInvalidPatient(),e()},_listPrescribedMedications:function(t){var e,i;return i=app.db.find("patient-medications",function(e){return function(e){var i;return i=e.prescriptionSerial,t===i}}(this)),e=[].concat(i),e.sort(function(t,e){return t.createdDatetimeStamp<e.createdDatetimeStamp?-1:t.createdDatetimeStamp>e.createdDatetimeStamp?1:0}),this.matchingPrescribedMedicineList=e},_loadPrescription:function(t){var e;return e=app.db.find("visit-prescription",function(e){var i;return i=e.serial,i===t}),1===e.length?(this.isPrescriptionValid=!0,this.set("prescription",{}),this.set("prescription",e[0]),this._listPrescribedMedications(this.prescription.serial),!0):(this._notifyInvalidPrescription(),!1)},_loadIdentifiedSymptoms:function(t){var e;return e=app.db.find("visit-identified-symptoms",function(e){var i;return i=e.serial,i===t}),1===e.length?(this.isIdentifiedSymptomsValid=!0,this.set("identifiedSymptomsObject",{}),this.set("identifiedSymptomsObject",e[0]),this.addedIdentifiedSymptomsList=e[0].data.symptomsList,!0):(this._notifyInvalidIdentifeidSymptoms(),!1)},_loadExamination:function(t){var e;return e=app.db.find("visit-examination",function(e){var i;return i=e.serial,i===t}),1===e.length?(this.isExaminationValid=!0,this.set("examinationObject",{}),this.set("examinationObject",e[0]),this.addedExaminationList=e[0].data.examinationValueList,!0):(this._notifyInvalidExamination(),!1)},_loadAdvisedTest:function(t){var e;return e=app.db.find("visit-advised-test",function(e){var i;return i=e.serial,i===t}),1===e.length?(this.isTestAdvisedValid=!0,this.set("testAdvisedObject",{}),this.set("testAdvisedObject",e[0]),this.addedInvestigationList=e[0].data.testAdvisedList,!0):(this._notifyInvalidTestAdvised(),!1)},_pritifyVitalData:function(t){var e,i;return"Blood Pressure"===t.vitalType?t.vitalObject.data.systolic+"/"+t.vitalObject.data.diastolic:"Heart Rate"===t.vitalType?t.vitalObject.data.bpm+" "+t.vitalObject.data.unit:"BMI"===t.vitalType?(e="ft/inch"===t.vitalObject.data.heightUnit?t.vitalObject.data.heightInFt+"'"+t.vitalObject.data.heightInInch+"'' "+t.vitalObject.data.heightUnit:t.vitalObject.data.height+" "+t.vitalObject.data.heightUnit,i=t.vitalObject.data.weight+t.vitalObject.data.weightUnit,t.vitalObject.data.calculatedBMI+", Height: "+e+", Weight: "+i):"Respirtory Rate"===t.vitalType?t.vitalObject.data.respiratoryRate+t.vitalObject.data.unit:"SpO2"===t.vitalType?t.vitalObject.data.spO2Percentage+t.vitalObject.data.unit:"Temperature"===t.vitalType?t.vitalObject.data.temperature+t.vitalObject.data.unit:void 0},_notifyInvalidPatient:function(){return this.isPatientValid=!1,this.domHost.showModalDialog("Invalid Patient Provided")},_notifyInvalidVisit:function(){return this.isVisitValid=!1,this.domHost.showModalDialog("Invalid Visit Provided")},_loadVisit:function(t,e){var i;return i=app.db.find("doctor-visit",function(e){var i;return i=e.serial,i===t}),1!==i.length?void this._notifyInvalidVisit():(this.isVisitValid=!0,this.set("visit",{}),this.set("visit",i[0]),e())},_loadVitalsForVisit:function(t,e){return"Blood Pressure"===e?(this.loadIdentifiedVitalData(t,e,"patient-vitals-blood-pressure"),this.isBPAdded=!0):"Heart Rate"===e?(this.loadIdentifiedVitalData(t,e,"patient-vitals-pulse-rate"),this.isHRAdded=!0):"BMI"===e?(this.loadIdentifiedVitalData(t,e,"patient-vitals-bmi"),this.isBMIAdded=!0):"Respirtory Rate"===e?(this.loadIdentifiedVitalData(t,e,"patient-vitals-respiratory-rate"),this.isRRAdded=!0):"Spo2"===e?(this.loadIdentifiedVitalData(t,e,"patient-vitals-spo2"),this.isSpO2Added=!0):"Temperature"===e?(this.loadIdentifiedVitalData(t,e,"patient-vitals-temperature"),this.isTempAdded=!0):void 0},loadIdentifiedVitalData:function(t,e,i){var n,a;return n=app.db.find(i,function(e){return function(e){var i;return i=e.serial,i===t}}(this)),1===n.length&&(a=n[0],this._addToVitalList(a,e),!0)},_addToVitalList:function(t,e){return lib.util.delay(5,function(i){return function(){return i.push("addedVitalList",{vitalType:e,vitalObject:t})}}(this))},_formatDateTime:function(t){return lib.datetime.format(new Date(t),"mmm d, yyyy h:MMTT")},getPrintedOnTime:function(){return lib.datetime.format(new Date,"mmm d, yyyy h:MMTT")},_loadVisitPrescription:function(t){var e;return e=app.db.find("visit-prescription",function(e){var i;return i=e.serial,i===t}),1===e.length?(this.isPrescriptionValid=!0,this.isFullVisitValid=!0,this.set("prescription",{}),this.set("prescription",e[0]),this._listPrescribedMedications(this.prescription.serial),!0):(this.isPrescriptionValid=!1,!1)},_loadVisitNote:function(t){var e;return e=app.db.find("visit-note",function(e){var i;return i=e.serial,i===t}),1===e.length?(this.isNoteValid=!0,this.isFullVisitValid=!0,this.set("doctorNotes",{}),this.set("doctorNotes",e[0]),!0):(this.isNoteValid=!1,!1)},_loadNextVisit:function(t){var e;return e=app.db.find("visit-next-visit",function(e){var i;return i=e.serial,i===t}),1===e.length?(this.isNextVisitValid=!0,this.isFullVisitValid=!0,this.set("nextVisit",{}),this.set("nextVisit",e[0]),!0):(this.isNextVisitValid=!1,!1)},_loadReferral:function(t){var e;if(e=app.db.find("referral-record",function(e){var i;return i=e.serial,i===t}),e.length)return this.referral={},this.referral=e[0]},_getRecord:function(t,e){var i;return i=app.db.find(e,function(e){var i;return i=e.serial,i===t}),1===i.length?i[0]:null},generateHtmlContent:function(t,e){var i;return i=this.handle_type(t,e.data),i=this.filterHtmlContent(i)},filterHtmlContent:function(t){return t=t.replace(/@VALUE@/g,"")},printOutStyleSheet:function(){return"<style>\n  \n  .default-category {\n    /* font-size: 20px; \n    font-weight: bold; */\n    text-align: center; \n  }\n  .default-collection {\n    /* font-size: 16px; \n    font-weight: bold; */\n  }\n  .default-group {\n    /* text-decoration: overline; */\n  }\n  .default-card {\n    /* text-decoration: underline; */\n  }\n  span {\n    font-size: 14px;\n  }\n  .unprocessed {\n    color: red;\n  }\n</style>"},handle_children:function(t,e){var i,n,a,r,l,s,o;if(r="","childMap"in e&&"childList"in t&&null!==t.childList)for(o=t.childList,a=l=0,s=o.length;l<s;a=++l)i=o[a],i.key in e.childMap&&(n=this.handle_type(i,e.childMap[i.key]),n&&";"!==n&&":;"!==n&&": ;"!==n&&(n=this.sanitizeOutput(n),r+=n));return r},handle_type:function(t,e){return"print"in t||(t.print={}),"systemRoot"===t.type?(this.flattenStyle(t),this.type_systemRoot(t,e)):"category"===t.type?("boldLabel"in t.print||(t.print.boldLabel=!0),"fontSize"in t.print||(t.print.fontSize=18),this.flattenStyle(t),this.type_category(t,e)):"collection"===t.type?("boldLabel"in t.print||(t.print.boldLabel=!0),"fontSize"in t.print||(t.print.fontSize=16),this.flattenStyle(t),this.type_collection(t,e)):"group"===t.type?("passThrough"in t.print||(t.print.passThrough=!0),"fontSize"in t.print||(t.print.fontSize=14),this.flattenStyle(t),this.type_group(t,e)):"card"===t.type?("boldLabel"in t.print||(t.print.boldLabel=!0),"fontSize"in t.print||(t.print.fontSize=14),this.flattenStyle(t),this.type_card(t,e)):"checkbox"===t.type?(this.flattenStyle(t),this.type_checkbox(t,e)):"toggleableContainer"===t.type?(this.flattenStyle(t),this.type_toggleableContainer(t,e)):"label"===t.type?(this.flattenStyle(t),this.type_label(t,e)):"autocomplete"===t.type?("selectionType"in t&&"label"===t.selectionType&&("separatorString"in t.print||(t.print.separatorString=", ")),this.flattenStyle(t),this.type_autocomplete(t,e)):"container"===t.type?(this.flattenStyle(t),this.type_container(t,e)):"checkList"===t.type?("separatorString"in t.print||(t.print.separatorString=", "),this.flattenStyle(t),this.type_checkList(t,e)):"radioList"===t.type?("separatorString"in t.print||(t.print.separatorString=", "),this.flattenStyle(t),this.type_radioList(t,e)):"input"===t.type?(this.flattenStyle(t),this.type_input(t,e)):"singleSelectDropdown"===t.type?(this.flattenStyle(t),this.type_singleSelectDropdown(t,e)):"incrementalCounter"===t.type?(this.flattenStyle(t),this.type_incrementalCounter(t,e)):'<span class="unprocessed">UNPROCESSED '+t.type+" - "+t.key+"</span>"},flattenStyle:function(t){if("passThrough"in t.print&&("hideLabel"in t.print||(t.print.hideLabel=!0),"noColonAfterThis"in t.print||(t.print.noColonAfterThis=!0),"noSemicolonAfterThis"in t.print||(t.print.noSemicolonAfterThis=!1)),"newLineBeforeThis"in t.print&&("boolean"==typeof t.print.newLineBeforeThis?t.print.newLineBeforeThis=t.print.newLineBeforeThis===!0?1:0:t.print.newLineBeforeThis=parseInt(t.print.newLineBeforeThis)),"newLineAfterThis"in t.print&&("boolean"==typeof t.print.newLineAfterThis?t.print.newLineAfterThis=t.print.newLineAfterThis===!0?1:0:t.print.newLineAfterThis=parseInt(t.print.newLineAfterThis)),"newLineAfterThisAndChildren"in t.print&&("boolean"==typeof t.print.newLineAfterThisAndChildren?t.print.newLineAfterThisAndChildren=t.print.newLineAfterThisAndChildren===!0?1:0:t.print.newLineAfterThisAndChildren=parseInt(t.print.newLineAfterThisAndChildren)),"newLineAfterEachValue"in t.print)return"boolean"==typeof t.print.newLineAfterEachValue?t.print.newLineAfterEachValue=t.print.newLineAfterEachValue===!0?1:0:t.print.newLineAfterEachValue=parseInt(t.print.newLineAfterEachValue)},sanitizeOutput:function(t){var e,i;for(e=i=0;i<=2;e=++i)t=t.replace(/\;;/g,";"),t=t.replace(/\;;/g,";"),t=t.replace(/\; ;/g,";"),t=t.replace(/\: ;/g,";"),t=t.replace(/\: :/g,":"),t=t.replace(/\, ;/g,";"),t=t.replace(/\; ,/g,";"),t=t.replace(/\,;/g,";"),t=t.replace(/<\/span style=""><\/span>/g,""),t=t.replace(/<\/span>;<\/span>/g,"</span></span>"),t=t.replace(/<\/span>; <\/span>/g,"</span></span>"),t=t.replace(/<\/span> ,<\/span>/g,"</span></span>");return t},_computeElementStyle:function(t){var e;return e="",t.print.fontSize&&(e+="font-size: "+t.print.fontSize+"px;"),t.print.hide&&(e+="display: none;"),e},_computeTitleOrLabelStyle:function(t){var e;return e="",t.print.boldLabel&&(e+="font-weight: bold;"),e},type_systemRoot:function(t,e){var i;return i=this.handle_children(t,e),this.printOutStyleSheet()+i},type_category:function(t,e){var i,n,a,r;return i=this.handle_children(t,e),0===i.length?"":(a=this._computeTitleOrLabelStyle(t),r='<span style="'+a+'">'+t.label+"</span>",a=this._computeElementStyle(t),n='<div class="default-category" style="'+a+'">'+r+"</div>"+i)},type_collection:function(t,e){var i,n,a,r;return 0===Object.keys(e.childMap).length?"":(i=t.defaultGroup&&!e.isDefaultGroupDismissed?this.handle_type(t.defaultGroup,e.childMap[t.defaultGroup.key]):this.handle_children(t,e),a=this._computeTitleOrLabelStyle(t),r='<br><span style="'+a+'">'+t.label+"</span><br>",a=this._computeElementStyle(t),n='<span class="default-collection" style="'+a+'">'+r+"</span>: "+i+"<br>")},type_group:function(t,e){var i,n,a,r;return i=this.handle_children(t,e),a=this._computeTitleOrLabelStyle(t),r='<span style="'+a+'">'+t.label+"</span>",t.print.passThrough?n=i+";":(a=this._computeElementStyle(t),n='<span class="default-group" style="'+a+'">'+r+"</span>: "+i+"; "),n},_makePrintableContent:function(t,e,i,n,a){var r,l,s,o,d,u,p,c,y,h,f,v,m,b,g;if(0===e.length&&0===i.length&&"label"!==n.type)return"";if(y=n.print,c="",l="",g="",y.hide)return"";if(t.length>0&&(y.hideLabel||(b="",y.boldLabel&&(b+="font-weight: bold;"),y.fontSize&&(b+="font-size:"+y.fontSize+"px;"),c='<span style="'+b+'">'+t+"</span>")),i.length>0&&(y.hideValue||(b="",y.boldValue&&(b+="font-weight: bold;"),y.fontSize&&(b+="font-size:"+y.fontSize+"px;"),g='<span style="'+b+'">'+i+"</span>")),e.length>0&&(y.hideChildren||(b="",y.boldChildren&&(b+="font-weight: bold;"),l='<span style="'+b+'">'+e+"</span>")),0===(c+l+g).length)return"";if("newLineBeforeThis"in y)for(o=d=0,h=y.newLineBeforeThis;0<=h?d<h:d>h;o=0<=h?++d:--d)c="<br>"+c;if("newLineAfterThis"in y)for(o=u=0,f=y.newLineAfterThis;0<=f?u<f:u>f;o=0<=f?++u:--u)c+="<br>";if(r="noColonAfterThis"in y&&y.noColonAfterThis||0===c.length?"":": ",m="noSemicolonAfterThis"in y&&y.noSemicolonAfterThis?"":"; ",s=c+r+l+g+m,"newLineAfterThisAndChildren"in y)for(o=p=0,v=y.newLineAfterThisAndChildren;0<=v?p<v:p>v;o=0<=v?++p:--p)s+="<br>";return s},type_card:function(t,e){var i,n,a;return i=this.handle_children(t,e),n=t.label,a=null,this._makePrintableContent(n||"",i||"",a||"",t,e)},type_checkbox:function(t,e){var i,n,a;return i=null,n=null,a=e.isChecked?t.label:"",this._makePrintableContent(n||"",i||"",a||"",t,e)},type_label:function(t,e){var i,n,a;return i=null,n=e.label||t.label||t.defaultLabel,a=null,this._makePrintableContent(n||"",i||"",a||"",t,e)},type_toggleableContainer:function(t,e){var i,n,a;return e.isChecked?(i=this.handle_children(t,e),n=t.label,a=null,this._makePrintableContent(n||"",i||"",a||"",t,e)):""},type_container:function(t,e){var i,n,a;return i=this.handle_children(t,e),n=e.label||t.defaultLabel,a=null,this._makePrintableContent(n||"",i||"",a||"",t,e)},type_checkList:function(t,e){var i,n,a,r,l,s,o,d,u,p,c,y,h;for(d=t.print,y=[],u=e.checkedValueList,r=0,o=u.length;r<o;r++)a=u[r],y.push(a);if(c=d.separatorString,"newLineAfterEachValue"in d)for(n=l=0,p=d.newLineAfterEachValue;0<=p?l<p:l>p;n=0<=p?++l:--l)c+="<br>";return h=y.join(c),s=null,i=null,this._makePrintableContent(s||"",i||"",h||"",t,e)},type_radioList:function(t,e){var i,n,a;return a=e.selectedValue,n=null,i=null,this._makePrintableContent(n||"",i||"",a||"",t,e)},type_singleSelectDropdown:function(t,e){var i,n,a;return a=t.possibleValueList[e.selectedIndex],n=null,i=null,this._makePrintableContent(n||"",i||"",a||"",t,e)},type_input:function(t,e){var i,n,a,r;return i=e.value,t.unitDetails&&(a=t.unitDetails.unitList[e.selectedUnitIndex]),r=i,n=t.label,i=null,this._makePrintableContent(n||"",i||"",r||"",t,e)},type_autocomplete:function(t,e){var i,n,a,r,l,s,o,d,u,p,c,y,h,f,v;if(o=t.print,"label"===t.selectionType){y=[],d=e.virtualChildMap;for(l in d)f=d[l],h=l.split("_"),h.pop(),h.shift(),h=h.join("_"),y.push(h);if(c=o.separatorString,"newLineAfterEachValue"in o)for(a=r=0,u=o.newLineAfterEachValue;0<=u?r<u:r>u;a=0<=u?++r:--r)c+="<br>";return f=y.join(c),s=t.label,n=null,this._makePrintableContent(s||"",n||"",f||"",t,e)}n="",p=e.virtualChildMap;for(l in p)f=p[l],h=l.split("_"),h.pop(),h.shift(),h=h.join("_"),v={type:"container",defaultLabel:h,key:l,childList:t.childListForEachContainer},i=this.handle_type(v,f)+", ",n+=i;return f=null,s=t.label,this._makePrintableContent(s||"",n||"",f||"",t,e)},type_incrementalCounter:function(t,e){var i,n,a,r,l,s,o,d,u;i="",l=e.virtualChildMap;for(a in l)return d=l[a],o=a.replace("item",""),s=parseInt(o),u={type:"container",defaultLabel:function(){try{return t.unit.singular}catch(e){return n=e,"unit"}}()+" #"+(s+1),key:a,childList:t.childListForEachContainer},i+=this.handle_type(u,d)+";",d=null,r=t.label,this._makePrintableContent(r||"",i||"",d||"",t,e)},should_boldLabel:function(t){return"print"in t&&"boldLabel"in t.print&&t.print.boldLabel},should_passThrough:function(t){return"print"in t&&"passThrough"in t.print&&t.print.passThrough},should_newLineBeforeThis:function(t){return"print"in t&&"newLineBeforeThis"in t.print&&t.print.newLineBeforeThis},inject_passThrough_special_card:function(t,e){var i;if(t.key===t.label&&("Details"===(i=t.key)||"Default"===i))return t.print||(t.print={}),t.print.passThrough=!0},inject_passThrough_special_group:function(t,e){var i;if(t.key===t.label&&("List"===(i=t.key)||"Default"===i))return t.print||(t.print={}),t.print.passThrough=!0},__debug_print:function(t,e){var i,n;i="print"in t?Object.keys(t.print):[],n=lib.array.minus(i,e),n.length>0},checkForPrintPreviewType:function(){var t,e,i,n,a,r,l,s,o,d,u,p,c;return(null==(t=this.visit)||!t.historyAndPhysicalRecordSerial)&&((null==(e=this.visit)||!e.identifiedSymptomsSerial)&&((null==(r=this.visit)||!r.examinationSerial)&&((null==(l=this.visit)||!l.vitalSerial.bp)&&((null==(s=this.visit)||!s.vitalSerial.hr)&&((null==(o=this.visit)||!o.vitalSerial.bmi)&&((null==(d=this.visit)||!d.vitalSerial.rr)&&((null==(u=this.visit)||!u.vitalSerial.spo2)&&((null==(p=this.visit)||!p.vitalSerial.temp)&&((null==(c=this.visit)||!c.advisedTestSerial)&&((null==(i=this.visit)||!i.diagnosisSerial)&&((null==(n=this.visit)||!n.doctorNotesSerial)&&(null!=(a=this.visit)?!a.nextVisitSerial:!0))))))))))))},printButtonPressed:function(t){return this.printPrescriptionOnly=this.checkForPrintPreviewType(),window.print()},_getSettings:function(t){var e;return e=app.db.find("settings"),this.set("settings",{}),this.set("settings",e[0]),t()},generatePrintPagination:function(){return lib.util.delay(100,function(t){return function(){var e,i,n,a,r,l,s,o,d,u,p,c,y;for(y=t.$$(".print"),n=t.$$(".print .header"),i=t.$$(".print .footer"),e=t.$$(".print .content"),p=t.$$(".print .output"),a=t.$$(".print .ideal").offsetHeight,u=e.childNodes,c=document.createElement("div"),c.className="page",c.setAttribute("style","page-break-after: always; border: 1px solid white;"),p.appendChild(c),c.appendChild(n.cloneNode(!0)),r=0,l=u.length;r<l;r++)d=u[r],d.offsetHeight+c.offsetHeight+i.offsetHeight>a&&(s=a-(c.offsetHeight+i.offsetHeight),o=i.cloneNode(!0),o.setAttribute("style","margin-top: "+s+"px;"),c.appendChild(o),c=document.createElement("div"),c.className="page",c.setAttribute("style","page-break-after: always; border: 1px solid white;"),p.appendChild(c),c.appendChild(n.cloneNode(!0))),c.appendChild(d.cloneNode(!0));return s=a-(c.offsetHeight+i.offsetHeight),o=i.cloneNode(!0),o.setAttribute("style","margin-top: "+s+"px;"),c.appendChild(o),y.removeChild(n),y.removeChild(i),y.removeChild(e),y.removeChild(t.$$(".print .ideal"))}}(this))},navigatedIn:function(){return this.currentOrganization=this.getCurrentOrganization(),this.currentOrganization||this.domHost.navigateToPage("#/select-organization"),this._loadUser(function(t){return function(){var e;return e=t.domHost.getPageParams(),t._getSettings(function(){return e.patient?t._loadPatient(e.patient,function(){return e.visit?t._loadVisit(e.visit,function(){return t.visit.historyAndPhysicalRecordSerial?(t.historyAndPhysical_navigatedIn(),t.set("recordPartName","history-and-physical-record"),t.recordDatabaseCollectionName="history-and-physical-record",t.record=t._getRecord(t.visit.historyAndPhysicalRecordSerial,t.recordDatabaseCollectionName),t.recordPartData=t.record,t.recordPartTitle="History and Physical Record",t.domHost.getStaticData("dynamicElementDefinitionPreoperativeAssessment",function(e){if(t.recordPartDef=e,t.recordPartHtmlContent=t.generateHtmlContent(t.recordPartDef,t.recordPartData),!t.delayRendering)return t.shouldRender=!0})):(t.visit.historyAndPhysicalRecordSerial=null,t.historyAndPhysicalRecord={}),t.visit.prescriptionSerial&&t._loadPrescription(t.visit.prescriptionSerial),t.visit.identifiedSymptomsSerial&&t._loadIdentifiedSymptoms(t.visit.identifiedSymptomsSerial),t.visit.examinationSerial&&t._loadExamination(t.visit.examinationSerial),t.set("addedVitalList",[]),t.visit.vitalSerial.bp&&t._loadVitalsForVisit(t.visit.vitalSerial.bp,"Blood Pressure"),t.visit.vitalSerial.hr&&t._loadVitalsForVisit(t.visit.vitalSerial.hr,"Heart Rate"),t.visit.vitalSerial.bmi&&t._loadVitalsForVisit(t.visit.vitalSerial.bmi,"BMI"),t.visit.vitalSerial.rr&&t._loadVitalsForVisit(t.visit.vitalSerial.rr,"Respirtory Rate"),t.visit.vitalSerial.spo2&&t._loadVitalsForVisit(t.visit.vitalSerial.spo2,"Spo2"),t.visit.vitalSerial.temp&&t._loadVitalsForVisit(t.visit.vitalSerial.temp,"Temperature"),t.visit.advisedTestSerial&&t._loadAdvisedTest(t.visit.advisedTestSerial),t.visit.diagnosisSerial&&t._loadDiagnosis(t.visit.diagnosisSerial),t.visit.doctorNotesSerial&&t._loadVisitNote(t.visit.doctorNotesSerial),t.visit.nextVisitSerial&&t._loadNextVisit(t.visit.nextVisitSerial),t.visit.referralSerial&&t._loadReferral(t.visit.referralSerial),t.generatePrintPagination()}):void t._notifyInvalidVisit()}):void t._notifyInvalidPatient()})}}(this))},navigatedOut:function(){return this.set("visit",null)},historyAndPhysical_navigatedIn:function(){return this._loadHistoryAndPhysicalRecord(),this._loadRecordInClipboard()},_loadHistoryAndPhysicalRecord:function(){var t,e;return t=this.visit.serial,e=app.db.find("history-and-physical-record",function(e){return function(e){var i;return i=e.visitSerial,i===t}}(this)),1===e.length?this.set("historyAndPhysicalRecord",e[0]):this.set("historyAndPhysicalRecord",null)},_loadDiagnosis:function(t){return lib.util.delay(5,function(e){return function(){var i;return i=app.db.find("diagnosis-record",function(e){var i;return i=e.serial,i===t}),1===i.length?(e.isDiagnosisValid=!0,e.isFullVisitValid=!0,e.diagnosis=i[0],!0):(e.isDiagnosisValid=!1,!1)}}(this))},arrowBackButtonPressed:function(t){return this.domHost.navigateToPreviousPage()}})}).call(this);
//# sourceMappingURL=page-visit-preview.coffee-compiled.js.map</script>
</dom-module>