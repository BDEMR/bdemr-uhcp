<!-- iron-* --><!-- paper-* --><!-- 3rd party elements --><!-- Custom AutoComplete --><!-- custom-elements --><!-- style --><!-- behavior --><!-- custom-elements --><!-- element --><div hidden="" by-polymer-bundler=""><link rel="import" href="../html-block/html-block.html"></div><dom-module id="page-visit-preview">
  <template>

    <style is="custom-style" include="common-style">
      .limiting-container {
        margin-top: 8px;
      }

      .external-card-title {
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
        color: #777777;
      }

      .b-radius paper-listbox {
        border-radius: 6px;
      }

      .info-card {
        @apply(--layout-vertical);
        /*@apply(--layout-center);*/
        margin-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
        padding-bottom: 20px;
      }

      .info-card .row {
        margin-left: 10px;
        /*margin-right: 10px;*/
        margin-top: 10px;
      }

      .info-card .hr {
        margin-left: 20px;
        margin-right: 20px;
        height: 1px;
        /*width: 100px;*/
        background: #dddddd;
      }

      .info-card .row .modifier {
        font-size: 14px;
        background: #000000;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
      }

      .info-card .row .modifier.online {
        background: #757575;
      }

      .info-card .row .modifier.local-only {
        background: #039BE5;
      }

      .info-card .row .modifier.locally-updated {
        background: #009688;
      }

      .info-card .row .modifier.imported {
        background: #4CAF50;
      }

      .info-row {
        margin-top: 10px;
      }

      .top-info-row {
        margin-top: 10px;
        margin-bottom: 10px;
      }

      .serial-number {
        background: #37474F;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: bold;
        display: inline-block;
        font-size: 14px;
      }

      .address1 {
        margin-right: 10px;
      }

      .name {
        margin-left: 5px;
        font-size: 24px;
      }

      .email {
        margin-left: 5px;
        font-size: 14px;
      }

      .phone {
        margin-left: 5px;
      }

      .val {
        text-decoration: underline;
      }

      .account-box {
        --iron-icon-width: 96px;
        --iron-icon-height: 96px;
      }

      .list-item {
        margin-top: 8px;
        margin-bottom: 8px;
      }

      .copy-button {
        background-color: #1FAE0B;
      }

      .paste-button {
        background-color: #f44336;
        color: white;
      }

      .table {
        width: 100%;
      }

      .table th {
        text-align: left;
      }



      .item-action {
        border-top: 1px solid #e8e8e8;
        padding: 5px 16px;
        position: relative;
        padding: 15px;
        text-align: right;
      }

      paper-dropdown-menu {
        width: 100%;
      }


      paper-checkbox.remind {
        padding: 15px 25px;
      }

      paper-checkbox.guideline-checkbox {
        --paper-checkbox-size: 14px;
      }

      .guideline {
        margin-left: 10px;
        margin-top: 70px;
        height: 90%;
        overflow: auto;
      }

      .guideline h1 {
        text-align: left;
        padding: 10px 0;
        border-bottom: 1px solid var(--paper-green-500);
        color: var(--brand-primary-color);
      }

      .guideline .dose {
        margin: 10px 0;
        padding: 10px;
      }

      .guideline .subDose {
        padding: 10px;
        margin: 5px 0;
        border: 1px solid #e0e0e0;
        border-radius: 3px;
        /*background-color: var(--paper-grey-50);*/
      }

      .guideline .age-group {
        border-bottom: 1px solid #ccc;
      }

      .disclaimer p {
        color: red;
      }

      app-drawer {
        --app-drawer-width: 400px;
        --app-drawer-scrim-background: rgba(0, 0, 0, 0.1);
        --app-drawer-content-container: {
          border-left: 1px solid #ccc;
          padding-left: 10px;
        }
        text-align: left;
      }

      paper-material {
        border: 1px solid var(--paper-grey-200);
      }

      paper-fab {
        float: right;
        margin-right: 10px;
        margin-top: 30px;
      }

      .indication-group {
        border: 1px solid var(--paper-blue-grey-100);
        padding: 15px;
        border-radius: 3px;
      }

      .indication-group paper-dropdown-menu {
        --paper-input-container-color: var(--paper-orange-500);
      }

      .card-custom-header {
        padding: 15px;
        border-bottom: 1px solid var(--paper-grey-200);
        background-color: var(--paper-grey-50);
      }

      .card-custom-header .title {
        font-size: 20px;
        font-weight: 500;
        color: var(--brand-primary-color);
      }

      @media screen and (max-width: 480px) {
        app-drawer {
          --app-drawer-width: 95%;
        }

        .btn-add.m-vert {
          margin: 0.29em;
        }
      }

      .card-item-2 {
        border-radius: 2px;
        margin: 8px 4px;
        border: 2px solid #eee;
        background-color: #fff;
      }

      .card-item {
        border-radius: 6px;
        border: 1px solid #eee;
        margin: 3px;
      }

      .custom-card-content {
        background-color: #f7f7f7;
      }



      .card-item div {
        background-color: #fafafa;
        /*border-right: 1px solid #eee;*/
      }

      paper-checkbox {
        margin: 8px;
      }

      .btn-custom {
        background-color: #fafafa !important;
        border: 1px solid #eee;
        margin: 3px;
      }

      .btn-custom-2 {
        background-color: #fafafa !important;
        border-radius-top-left: 0;
        border-radius-bottom-left: 0;
        margin: 0 !important;
      }

      .combobox-custom {
        padding: 8px 16px;
        background-color: #f7f7f7;
        border-bottom: 1px solid #eee;
      }

      /*Full Visit Preview - start*/

      .document {
        font-family: 'Times New Roman';
        background: white;
      }

      .document-title {
        font-size: 16px;
        text-decoration: underline;
        font-weight: bold;
        @apply(--layout-vertical);
        @apply(--layout-center);
      }



      .external-card-title {
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
        color: #777777;
      }

      .info-card {
        @apply(--layout-vertical);
        /*@apply(--layout-center);*/
        margin-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
        padding-bottom: 20px;
      }

      .info-card .row {
        margin-left: 10px;
        /*margin-right: 10px;*/
        margin-top: 10px;
      }

      .info-card .hr {
        margin-left: 20px;
        margin-right: 20px;
        height: 1px;
        /*width: 100px;*/
        background: #dddddd;
      }

      .info-card .row .modifier {
        font-size: 14px;
        background: #000000;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
      }

      .info-card .row .modifier.online {
        background: #757575;
      }

      .info-card .row .modifier.local-only {
        background: #039BE5;
      }

      .info-card .row .modifier.locally-updated {
        background: #009688;
      }

      .info-card .row .modifier.imported {
        background: #4CAF50;
      }

      .info-row {
        margin-top: 10px;
      }

      .top-info-row {
        margin-top: 10px;
        margin-bottom: 10px;
      }

      .serial-number {
        background: #37474F;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: bold;
        display: inline-block;
        font-size: 14px;
      }

      .address1 {
        margin-right: 10px;
      }

      .name {
        margin-left: 5px;
        font-size: 24px;
      }

      .email {
        margin-left: 5px;
        font-size: 14px;
      }

      .phone {
        margin-left: 5px;
      }

      .val {
        text-decoration: underline;
      }

      .account-box {
        --iron-icon-width: 96px;
        --iron-icon-height: 96px;
      }

      .document {
        font-family: 'Times New Roman';
        background: white;
      }

      .document-title {
        font-size: 20px;
        font-weight: bold;
      }

      .collection {
        color: red;
        background: grey;
      }

      .document-header {
        /*background-color: #fafafa;*/
        padding-left: 10px;
        padding-right: 10px;
        border-bottom: 1px solid #eee;
      }

      .document-header .logo {
        max-width: 128px;
        max-height: 128px;
      }

      .horiline {
        width: 100%;
        height: 0px;
        /*background: black;*/
        border: 1px solid black;
        margin-bottom: 6px;
      }

      .leftSide {
        margin-left: 6px;
      }

      .leftSideLine1 {
        font-size: 24px;
      }

      .rightSideLine1 {
        font-size: 22px;
      }


      .document-header2 .logo {
        max-width: 128px;
        max-height: 128px;
      }


      .item {
        padding: 10px;
        border: 1px solid grey;
      }

      #printPreview {
        word-break: break-word;
        /*display: none !important;*/
      }

      @media print {

        #hideOnPrint {
          display: none !important;
        }

        #printPreview {
          display: block !important;
          background-color: transparent;
        }
      }

      @media print {
        app-header-layout #contentContainer {
          overflow-y: unset !important;
        }
      }

      .preview-title {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        padding-left: 12px;
        padding-right: 8px;
        background-color: #fff;
        min-height: 60px;
        /*border-bottom: 1px solid #eee;*/
      }

      .custom-content {
        @apply(--layout-horizontal);
        @apply(--layout-wrap);
        @apply(--layout-center);
        padding-left: 12px;
        padding-right: 8px;
      }

      .b-top {
        border-top: 1px solid #eee;
      }

      /*.content {
        padding-top: 8px;
      }*/

      .content.top {}

      .content.left {
        width: 40%;
        /*padding-right: 8px;*/
      }

      .content.right {
        width: 60%;
      }

      @media screen and (max-width: 639px) {
        .content.left {
          /*margin-top: 8px;*/
          width: 100%;
          /*padding: 0;*/
        }

        .content.right {
          width: 100%;
          /*padding: 0;*/
          /*margin-top: 8px;*/
        }
      }

      .tabColor {
        background-color: teal !important;
      }

      vaadin-combo-box.combobox-custom-style {
        padding: 2px;
      }

      vaadin-combo-box.combobox-custom-style ::content paper-input-container {
        padding: 4px 0;
      }

      vaadin-combo-box.combobox-custom-style ::content label {
        font-size: 18px !important;
        /*color: rgba(0, 0, 0, .87) !important;*/
      }

      /*vaadin-combo-box.combobox-custom-style ::content .unfocused-line {
        border-bottom: none;
      }*/

      vaadin-combo-box.combobox-custom-style ::content input {
        font-size: 18px !important;
        color: rgba(0, 0, 0, .87) !important;
      }

      .paper-input-custom ::content input {
        font-size: 18px !important;
        color: rgba(0, 0, 0, .87) !important;
      }

      .paper-input-custom ::content label {
        font-size: 18px !important;
        color: #737373 !important;
      }


      paper-textarea.textarea-custom-style ::content label {
        font-size: 18px !important;
      }

      paper-textarea.textarea-custom-style ::content iron-autogrow-textarea {
        font-size: 18px !important;
      }

      /*paper-textarea ::content .unfocused-line{
        border-bottom: none;
      }*/

      .type.title-2 {
        font-size: 18px;
        line-height: 50px;
      }

      vaadin-date-picker.date-picker-custom-style ::content paper-input-container {
        padding: 0;
      }

      /*vaadin-date-picker.date-picker-custom-style ::content .unfocused-line {
        border-bottom: none;
      }*/

      vaadin-date-picker.date-picker-custom-style ::content label {
        font-size: 18px !important;
      }

      vaadin-date-picker.date-picker-custom-style ::content input {
        font-size: 18px !important;
      }

      vaadin-date-picker.date-picker-custom-style ::content .floated-label-placeholder {
        display: none;
      }

      vaadin-date-picker.date-picker-custom-style {
        padding: 8px 8px 8px 0;
      }

      paper-dropdown-menu.dropdown-menu-custom-style ::content label {
        font-size: 18px !important;
      }

      paper-dropdown-menu.dropdown-menu-custom-style ::content input {
        font-size: 18px !important;
      }

      .border-top {
        border-top: 1px solid #eee;
      }

      .action-area {
        padding: 5px 0 5px 8px;
      }

      .btn-add {
        min-width: 0;
        padding-top: 0.5em;
        padding-bottom: 0.5em;
        background-color: #eceff1;
        color: rgba(0, 0, 0, .87);
      }

      .btn-add.small {
        margin: 3px;
        font-size: 14px;
      }


      paper-tabs.custom-tabs {
        background-color: #f7f7f7;
        height: 56px;
      }

      /*Print Preview*/

      .patient-details {
        background-color: #5c4575;
        color: #fff;
      }

      .print-content {
        border-top: 1px solid #eee;
        @apply(--layout-horizontal);
      }

      .print-content .left {
        width: 34%;
        border-right: 1px solid #eee;
      }

      .print-content .right {
        width: 66%;
      }

      ol.order-list {
        margin: 4px 0;
        padding-left: 16px;
        list-style-type: lower-alpha;
      }

      ul.unorderd-list-custom {
        margin: 4px 0;
        padding-left: 16px;
      }

      ol.order-list li {
        margin: 4px 0;
      }

      .print-sub-header {
        font-size: bold;
        background-color: #fafafa;
        margin-bottom: 8px;
      }

      .profile-image {
        height: 78px;
        width: 78px;
        border-radius: 50%;
        border: 2px solid #f7f7f7;
      }

      .table {
        width: 100%;
        border-collapse: collapse;
      }

      .table th {
        text-align: left;
      }

      .table thead * {
        border-bottom: 1px solid #ccc;
        background-color: #f5f5f5;
        padding: 5px;
      }

      .table tbody th,
      .table tbody td {
        padding: 5px;
        border-bottom: 1px solid #eee;
        vertical-align: middle;
      }

      .table tfoot * {
        background-color: #f5f5f5;
        padding: 5px;
      }
    </style>

    <!-- local DOM -->
    <!-- <template is="dom-if" if="{{!isVisitValid}}">
      Visit invalid
    </template>

    <template is="dom-if" if="{{!isPatientValid}}">
      Patient invalid
    </template> -->

    <div class="master-container">
      <div class="limiting-container">
        <!-- Print Preview Area - start -->
        <paper-card id="printPreview" elevation="0">

          <div class="print-header horizontal layout center center-justified">
            <h1>[[settings.printDecoration.headerLine]]</h1>
          </div>

          <div class="print-header horizontal layout center">
            <template is="dom-if" if="[[settings.printDecoration.logoDataUri]]">
              <div class="m-right-16">
                <img style="max-width: 42px; height: auto;" class="logo" src="[[settings.printDecoration.logoDataUri]]" alt="">
              </div>
            </template>
            <h1>[[settings.printDecoration.headerLine]]</h1>
          </div>

          <!-- Print Header - Main - start -->
          <div class="">
            <table class="table">
              <tbody><tr>
                <th>Consultation Site:</th>
                <td>[[visit.hospitalName]]</td>
              </tr>
              <tr>
                <th>Consultant Name:</th>
                <td>[[visit.doctorName]]</td>
              </tr>
              <tr>
                <th>Consultant Grade</th>
                <td>[[visit.doctorSpeciality]]</td>
              </tr>
              <tr>
                <th>Patient Id / Policy Id:</th>
                <td>
                  <template is="dom-if" if="[[patient.policyList.length]]">
                    <template is="dom-repeat" items="[[patient.policyList]]" as="policy">
                      <span class="">[[policy.number]]</span>
                    </template>
                  </template>
                </td>
              </tr>
              <tr>
                <th>Patient Name:</th>
                <td>{{$getFullName(patient.name)}}</td>
              </tr>
              <tr>
                <th>Age/Sex:</th>
                <td>[[_computeAge(patient.dateOfBirth)]] years / {{patient.gender}}</td>
              </tr>
              <tr>
                <th>Blood Group</th>
                <td>[[patient.bloodGroup]]</td>
              </tr>
              <tr>
                <th>Allergies</th>
                <td>[[patient.allergy]]</td>
              </tr>
              <tr>
                <th>Factory name:</th>
                <td>
                  <template is="dom-if" if="[[patient.employmentDetailsList.length]]">
                    <template is="dom-repeat" items="[[patient.employmentDetailsList]]" as="factory">
                      [[factory.institutionName]]
                    </template>
                  </template>
                </td>
              </tr>
              <tr>
                <th>Prescription Id:</th>
                <td>[[visit.serial]]</td>
              </tr>
              <tr>
                <th>Date &amp; Time:</th>
                <td>[[$mkDateTime(visit.createdDatetimeStamp)]]</td>
              </tr>
            </tbody></table>
          </div>
          <!-- Print Header - Main - end -->

          <!-- Print Header - record Title - start -->
          <div class="p-16 horizontal layout center center-justified" hidden$="{{!printPrescriptionOnly}}">
            <div class="type headline">{{visit.recordTitle}}</div>
          </div>
          <!-- Print Header - record Title - end -->

          <!-- Print Content [FULL] - start -->
          <div class="print-content">
            <!-- Print Content - Left - start -->
            <div class="left">

              <!-- Print - Symptoms - start -->
              <template is="dom-if" if="[[!_isEmpty(addedIdentifiedSymptomsList.length)]]">
                <div class="horizontal layout center print-sub-header">
                  <div class="type body">Symptoms</div>
                </div>
                <template is="dom-repeat" items="[[addedIdentifiedSymptomsList]]">
                  <div class="type caption-2">
                    <span class="type secondary">[[_returnSerial(index)]]. </span>
                    <span>{{item.name}}</span>
                    <template is="dom-if" if="[[_compareFn(item.possibleValueList.length, '>', 0)]]">
                      (
                      <template is="dom-repeat" items="[[item.possibleValueList]]">
                        <span>{{item}}, </span>
                      </template>)
                    </template>
                  </div>
                </template>
                <div class="b-top m-top-8"></div>
              </template>
              <!-- Print - Symptoms - end -->

              <!-- Print - Examination - start -->
              <template is="dom-if" if="[[!_isEmpty(addedExaminationList.length)]]">
                <div class="horizontal layout center print-sub-header">
                  <div class="type body">Examination</div>
                </div>
                <template is="dom-repeat" items="[[addedExaminationList]]" as="examination">
                  <div class="type caption-2">
                    <span class="type secondary">[[_returnSerial(index)]]. </span>
                    <span>{{examination.name}}</span>
                    (
                    <template is="dom-repeat" items="[[examination.examinationValueList]]" as="examItem">
                      <span hidden$="{{!examItem.checked}}">{{examItem.value}}, </span>
                    </template>)
                  </div>
                </template>
                <div class="b-top m-top-8 "></div>
              </template>
              <!-- Print - Examination - end -->

              <!-- Print - Vitals - start -->
              <template is="dom-if" if="[[!_isEmpty(addedVitalList.length)]]">
                <div class="horizontal layout center print-sub-header">
                  <div class="type body">Vitals</div>
                </div>
                <template is="dom-repeat" items="[[addedVitalList]]">
                  <div class="type caption-2">
                    <strong>{{item.vitalType}}: </strong>
                    <span>[[_pritifyVitalData(item)]]</span>
                  </div>
                </template>
                <div class="b-top m-top-8"></div>
              </template>
              <!-- Print - Vitals - end -->

              <!-- Print - Test Advised - start -->
              <template is="dom-if" if="[[!_isEmpty(addedInvestigationList.length)]]">
                <div class="horizontal layout center print-sub-header">
                  <div class="type body">Advised Test</div>
                </div>
                <template is="dom-repeat" items="[[addedInvestigationList]]">
                  <div class="type caption-2 layout horizontal">
                    <div class="type secondary m-right-8">[[_returnSerial(index)]]. </div>
                    <div class="flex vertical layout">
                      <div>{{item.investigationName}}</div>
                      <template is="dom-if" if="[[_compareFn(item.testList.length, '==', 1)]]">
                        <ol class="order-list">
                          <li>{{item.testList.0.name}}</li>
                        </ol>
                      </template>
                      <template is="dom-if" if="[[_compareFn(item.testList.length, '>', 1)]]">
                        <ol class="order-list">
                          <template is="dom-repeat" items="[[item.testList]]">
                            <li>{{item.name}}</li>
                          </template>
                        </ol>
                      </template>
                    </div>
                    <template is="dom-if" if="[[item.suggestedInstitutionName]]">
                      <div class="type caption secondary m-left-16">
                        <strong>Suggested Institution: </strong>
                        <span class="flex">{{item.suggestedInstitutionName}}</span>
                      </div>
                    </template>
                  </div>
                </template>
                <div class="b-top"></div>
              </template>
              <!-- Print - Test Advised - end -->

              <!-- Print - Diagnosis - start -->
              <template is="dom-if" if="{{!_isEmpty(diagnosis.data.diagnosisList.length)}}">
                <div class="horizontal layout center print-sub-header">
                  <div class="type body">Diagnosis</div>
                </div>
                <template is="dom-repeat" items="[[diagnosis.data.diagnosisList]]">
                  <div class="type caption-2">
                    <span class="type secondary">[[_returnSerial(index)]]. </span>
                    <span>{{item.name}}</span>
                    <template is="dom-if" if="[[_compareFn(item.possibleValueList.length, '>', 0)]]">
                      (
                      <template is="dom-repeat" items="[[item.possibleValueList]]">
                        <span>{{item}}, </span>
                      </template>)
                    </template>
                  </div>
                </template>
                <div class="b-top m-top-8"></div>
              </template>
              <!-- Print - Diagnosis - end -->

              <!-- Print - Notes - start -->
              <template is="dom-if" if="{{!_isEmpty(doctorNotes.data.messageList.length)}}">
                <div class="horizontal layout center print-sub-header">
                  <div class="type body">Doctor Advised/Notes</div>
                </div>
                <ul class="unorderd-list-custom">
                  <template is="dom-repeat" items="[[doctorNotes.data.messageList]]">
                    <li class="type caption-2" style="word-break: break-word; margin-right: 4px;">{{item}}</li>
                  </template>
                </ul>
                <div class="b-top m-top-8"></div>
              </template>
              <!-- Print - Notes - end -->

              <!-- Print - Next Visit - start -->
              <template is="dom-if" if="[[!_isEmptyString(nextVisit.data.nextVisitDateTimestamp)]]">
                <div class="horizontal layout center print-sub-header">
                  <div class="type body">Next Visit</div>
                </div>
                <div class="type caption-2">
                  <div>
                    <strong>Date: </strong>
                    <span>[[$mkDate(nextVisit.data.nextVisitDateTimestamp)]]</span>
                  </div>
                  <div>{{nextVisit.data.priorityType}}</div>
                </div>
                <div class="b-top m-top-8"></div>
              </template>
              <!-- Print - Next Visit - end -->
            </div>
            <!-- Print Content - Left - end -->

            <!-- Print Content - right - start -->
            <div class="right">

              <!-- Print - History And Physical - start -->
              <template is="dom-if" if="[[shouldRender]]">
                <div class="horizontal layout center">
                  <div class="type body print-sub-header">[[recordPartTitle]]</div>
                </div>
                <div class="p-horizontal-16">
                  <html-block html="[[recordPartHtmlContent]]"></html-block>
                </div>
                <div class="b-top m-top-8"></div>
              </template>
              <!-- Print - History And Physical - end -->

              <br>
              <br>

              <!-- Print - Prescription - start -->
              <template is="dom-if" if="[[!_isEmpty(matchingPrescribedMedicineList.length)]]">
                <div class="horizontal layout center print-sub-header">
                  <div class="type body p-left-16">Prescription</div>
                </div>

                <template is="dom-repeat" items="[[matchingPrescribedMedicineList]]">
                  <div class="m-vertical-8 p-left-16 horizontal layout center">
                    <div class="type caption secondary m-right-8">[[_returnSerial(index)]].</div>
                    <div>
                      <div>
                        <span class="type caption-2 text-bold">{{item.data.brandName}}</span>
                        <span class="type caption bg-gray">[[item.data.manufacturer]]</span>
                        <span class="type caption italic">{{item.data.genericName}} {{item.data.strength}}</span>
                      </div>


                      <div class="type caption">
                        <strong>Instruction: </strong>
                        <span>[[$TRANSLATE_NUMBER(item.data.doseDirection, LANG)]] [[$TRANSLATE('for', LANG)]] [[_computeTotalDaysCount(item.data.endDateTimeStamp,item.data.startDateTimeStamp)]]
                          <span hidden$="[[!item.data.endDateTimeStamp]]">[[$TRANSLATE('Days',LANG)]]</span>
                        </span>
                        <span>[[$TRANSLATE('By', LANG)]] </span>
                        <span>[[$TRANSLATE(item.data.route, LANG)]]</span>
                        <span>[[$TRANSLATE(item.data.direction, LANG)]] </span>
                      </div>
                      <div class="type caption">[[item.data.comments]]</div>
                    </div>
                  </div>
                </template>

              </template>
              <!-- Print - Prescription - end -->
              <br>
              <!-- Patient Stay Preview -->
              <template is="dom-if" if="[[patientStay.serial]]">
                <div class="horizontal layout center print-sub-header">
                  <div class="type body p-left-16">Patient Stay</div>
                </div>
                <div class="p-horizontal-16">
                  <div class="layout horizontal">
                    <span class="type bold"> Admission Date: </span>
                    <span>&nbsp;[[$mkDate(patientStay.data.admissionDateTimeStamp)]]</span>
                  </div>
                  <div>
                    <span class="type bold">Type: </span> [[patientStay.data.admissionType]]
                  </div>
                  <template is="dom-if" if="[[patientStay.adviseOnly]]">
                    <div>
                      <span class="type bold">Advice: </span> [[patientStay.data.advise]]
                    </div>
                  </template>
                  <template is="dom-if" if="[[!patientStay.adviseOnly]]">
                    <div>
                      <span class="type bold">Referred By: </span> [[patientStay.data.referredByDoctorName]]
                    </div>
                    <div>
                      <span class="type bold">Admitted By: </span> [[patientStay.data.admittedByDoctorName]]
                    </div>
                    <div class="type italic">
                      <span>[[patientStay.data.locationHospitalName]]</span> &gt;
                      <span>[[patientStay.data.locationDepartment]]</span> &gt;
                      <span>[[patientStay.data.locationUnit]]</span> &gt;
                      <span>[[patientStay.data.locationWard]]</span> &gt;
                      <span>[[patientStay.data.locationBed]]</span>
                    </div>
                  </template>
                  <template is="dom-if" if="[[patientStay.data.currentLocation.length]]">
                    <div>
                      <span class="type bold"> Current Location:</span>
                      <span>[[patientStay.data.currentLocation.0.location]]</span>
                    </div>
                  </template>
                  <template is="dom-if" if="[[patientStay.data.dischargeDatetimeStamp]]">
                    <div>
                      <span class="type bold"> Discharge Date:</span>
                      <span>[[$mkDate(patientStay.data.dischargeDatetimeStamp)]]</span>
                    </div>
                    <div>
                      <span class="type bold">Discharged By: </span> [[patientStay.data.dischargedByDoctorName]]
                    </div>
                    <div>
                      <span class="type bold"> Length of Stay:</span>
                      <span>[[calculateLengthOfStay(patientStay.data.admissionDateTimeStamp, patientStay.data.dischargeDatetimeStamp)]]
                        Days
                      </span>
                    </div>
                  </template>
                  <template is="dom-if" if="[[patientStay.data.dischargeReason.length]]">
                    <div>
                      <span class="type bold">Discharge Reason: </span> [[patientStay.data.dischargeReason]]</div>
                  </template>
                  <template is="dom-if" if="[[patientStay.data.dischargeTo.length]]">
                    <div>
                      <span class="type bold"> Discharged To:</span> [[patientStay.data.dischargeTo]]</div>
                  </template>
                </div>
              </template>
              <!-- Patient Stay Preview End -->
            </div>
            <!-- Print Content - right - end -->
          </div>
          <!-- Print Content [FULL] - end -->

          <div>
            <div class="horizontal layout end-justified center">
              <template is="dom-if" if="[[settings.printDecoration.signatureDataUri]]">
                <img height="96" width="128" class="logo" src="[[settings.printDecoration.signatureDataUri]]" alt="signature">
              </template>
            </div>

            <template is="dom-if" if="[[settings.flags.showUserNameOnPrintPreview]]">
              <div class="type caption secondary" style="text-align: center; padding: 8px;">
                <div>
                  <i>
                    <div class="type caption p-8">
                      <strong>Printed By: </strong>[[user.name]],
                      <strong>Printed On: </strong>[[getPrintedOnTime()]]
                    </div>
                  </i>
                </div>
              </div>
            </template>

            <template is="dom-if" if="[[settings.flags.showFooterLine]]">
              <div class="b-top">
                <div class="type caption secondary">[[settings.printDecoration.footerLine]]</div>
              </div>
            </template>
          </div>
        </paper-card>
        <!-- Print Preview Area - end -->
      </div>
    </div>




    <!-- local DOM -->
  </template>
  <script>(function(){Polymer({is:"page-visit-preview",behaviors:[app.behaviors.commonComputes,app.behaviors.dbUsing,app.behaviors.pageLike,app.behaviors.translating,app.behaviors.apiCalling],properties:{comboBoxSymptomsInputValue:{type:String,notify:!0,value:null},walletBalance:{type:Number,value:-1},currentOrganization:{type:Object,notify:!0,value:null},selectedMedicinePage:{type:Number,notify:!1,value:0},printPrescriptionOnly:{type:Boolean,notify:!0,value:!0},isBPAdded:{type:Boolean,notify:!0,value:!1},isHRAdded:{type:Boolean,notify:!0,value:!1},isBMIAdded:{type:Boolean,notify:!0,value:!1},isSpO2Added:{type:Boolean,notify:!0,value:!1},isRRAdded:{type:Boolean,notify:!0,value:!1},isTempAdded:{type:Boolean,notify:!0,value:!1},isThatNewVisit:{type:Boolean,notify:!0,value:!0},visitHeaderTitleList:{type:Array,notify:!1,value:["Complete Visit","Discharge Note"]},insulineMedicineList:{type:Array,notify:!0,value:function(){return[]}},visitHeaderTitleSelectedIndex:{type:Number,notify:!1,value:0},isVisitValid:{type:Boolean,notify:!1,value:!1},selectedVisitPageIndex:{type:Number,notify:!1,value:!1},isPrescriptionValid:{type:Boolean,notify:!1,value:!1},isNoteValid:{type:Boolean,notify:!1,value:!1},isNextVisitValid:{type:Boolean,notify:!0,value:!1},isInvoiceValid:{type:Boolean,notify:!1,value:!1},isTestAdvisedValid:{type:Boolean,notify:!1,value:!1},isPatientValid:{type:Boolean,notify:!1,value:!1},isFullVisitValid:{type:Boolean,notify:!1,value:!1},user:{type:Object,notify:!0,value:null},patient:{type:Object,notify:!0,value:null},visit:{type:Object,notify:!0,value:null},doctorNotes:{type:Object,notify:!0,value:null},doctorNotesMessage:{type:String,notify:!0,value:""},nextVisit:{type:Object,notify:!0,value:null},testAdvised:{type:Object,notify:!0,value:null},invoice:{type:Object,notify:!0,value:null},matchingPrescribedMedicineList:{type:Array,notify:!0,value:[]},doctorInstitutionList:{type:Array,notify:!0,value:[]},doctorSpecialityList:{type:Array,notify:!0,value:[]},doctorInstitutionSelectedIndex:{type:Number,notify:!0,value:0},doctorSpecialitySelectedIndex:{type:Number,notify:!0,value:0},hasTestResults:{type:Boolean,notify:!0,value:!1},historyAndPhysicalRecord:{type:Object,notify:!0,value:null},matchingRecordList:{type:Object,notify:!0,value:null},diagnosis:{type:Object,notify:!0,value:null},isDiagnosisValid:{type:Boolean,value:!1},diagnosisListArray:{type:Array,notify:!0,value:[]},selectedDiagnosisListArray:{type:Array,notify:!0,value:[]},prescription:{type:Object,notify:!0,value:null},matchingPrescribedMedicineList:{type:Array,notify:!0,value:[]},matchingCurrentMedicineList:{type:Array,notify:!0,value:[]},matchingFavoriteMedicineList:{type:Array,notify:!0,value:[]},duplicateMedicineEditablePart:{type:Object,notify:!0,value:null},favoriteMedicineShownIndex:{type:Number,value:0},isMedicineValid:{type:Boolean,notify:!1,value:!0},isThatNewMedicine:{type:Boolean,notify:!1,value:!0},medicine:{type:Object,notify:!0,value:{}},strengthList:{type:Array,value:[]},continueMedicineEndsOnDate:{type:String,value:null},doseList:{type:Array,value:function(){return["1+1+1","1+0+1","0+0+1","1+0+0","1+1+1+1","2+2+2","2+0+2","0+0+2","2+0+0","1/2+1/2+1/2","1/2+0+1/2","0+0+1/2","1/2+0+0","1/4+1/4+1/4","1/4+0+1/4","0+0+1/4","1/4+0+0","1/4+1/4+1/4+1/4"]}},medicineFormList:{type:Array,value:["Tablet","Injection","Syrup","Drop","Capsule","Suspension","I.V Injection","I.M injection","S/C Injection","PR (Per Rectal)","Suppository","Solution","Ointment","Cream","Skin Patch","Custom"]},doseUnitList:{type:Array,value:["Custom"]},endDateTimeTypeList:{type:Array,value:["As Needed","0 Weeks","1 Week","2 Weeks","3 Weeks","Custom"]},endDateTimeTypeArgument2List:{type:Array,value:["0 Day","1 Day","2 Days","3 Days","4 Days","5 Days","6 Days"]},directionList:{type:Array,value:["Anytime","Before Meal","After Meal","Full Stomach","Empty Stomach"]},routeList:{type:Array,value:["Oral","I.V injection","I.M injection","PR (Per Rectal)","S/L","S/C","Nebulizer","Inhaler","Topical application skin","Topical application ear","Topical application eye","Intravaginal","Transdermal","Custom"]},intervalInDays:{type:Number,value:1},medicineFormSelectedIndex:{type:Number,value:0},doseUnitSelectedIndex:{type:Number,value:0},directionSelectedIndex:{type:Number,value:0},routeSelectedIndex:{type:Number,value:0},endDateTimeTypeSelectedIndex:{type:Number,value:0},endDateTimeTypeArgument2SelectedIndex:{type:Number,value:0},strengthSelectedIndex:{type:Number,value:0,notify:!0},matchingMedicineList:{type:Array,value:[]},doseGuidelineList:{type:Array},activeDoseGuideline:{type:Object,value:null},guidelineIndicationSelectedIndex:{type:Number,value:null},guidelineAgeSelectedIndex:{type:Number,value:null},guidelineIndicationList:{type:Array,value:function(){return[]}},guidelineAgeList:{type:Array,value:function(){return[]}},insulinMedicine:{type:Object,value:function(){return null}},medicineCompositionList:{type:Array,value:[]},brandNameSourceDataList:{type:Array,value:[]},brandNameSelectedObjectList:{type:Array,value:[]},genericNameSourceDataList:{type:Array,value:[]},showDetailedForm:{type:Boolean,value:!1},showGuidelineDisclaimer:{type:Boolean,value:!0,notify:!0},selectedCurrentMedicineData:{type:Object,value:null},symptomsDataList:{type:Array,notify:!0,value:[]},addedIdentifiedSymptomsList:{type:Array,notify:!0,value:[]},customSymptomsObject:{type:Object,notify:!0,value:{}},examinationDataList:{type:Array,notify:!0,value:[]},addedExaminationList:{type:Array,notify:!0,value:[]},addedExaminationList2:{type:Array,notify:!0,value:function(){return[]}},examinationObject:{type:Object,notify:!0,value:{}},favoriteInvestigaitonList:{type:Array,notify:!0,value:[]},investigationMemberValue:{type:String,notify:!0,value:""},investigationDataList:{type:Array,notify:!0,value:[]},addedInvestigationList:{type:Array,notify:!0,value:[]},testAdvisedObject:{type:Object,notify:!0,value:{}},suggestedInstitutionValue:{type:String,value:"",notify:!0},machingUserAddedInstitutionList:{type:Array,value:[],notify:!0},addedInvestigationNameIndex:{type:Number,value:0},customInvestigationObject:{type:Object,notify:!0,value:{}},customInvestigationUnitValue:{type:String,value:"",notify:!0},customInvestigationUnitList:{type:Array,value:[],notify:!0},selectedVitalIndex:{type:Number,value:-1,notify:!0},heightUnitSelectedIndex:{type:Number,value:0,notify:!0},weightUnitSelectedIndex:{type:Number,value:0,notify:!0},tempUnitSelectedIndex:{type:Number,value:0,notify:!0},bloodPressure:{type:Object,notify:!0,value:{}},pulseRate:{type:Object,notify:!0,value:{}},bmi:{type:Object,notify:!0,value:{}},respiratoryRate:{type:Object,notify:!0,rpm:{}},oxygenSaturation:{type:Object,notify:!0,value:{}},temperature:{type:Object,notify:!0,value:{}},addedVitalList:{type:Array,value:[]},priorityTypeList:{type:Array,value:["As Necessary","Others"]},nextVisitDurationTypeList:{type:Array,value:["0 Day","1 Day","2 Days","3 Days","4 Days","5 Days","6 Days","7 Days","8 Days","9 Days","10 Days","11 Days","12 Days","13 Days","14 Days","15 Days","1 Week","2 Weeks","3 Weeks","4 Weeks","1 month","2 months","3 months","4 months","5 months","6 months","7 months","8 months","9 months","11 month","1 year","2 years","3 years","Custom"]},nextVisitDurationTypeSelectedIndex:{type:Number,notify:!0,value:0},nextVisitPriorityTypeSelectedIndex:{type:Number,notify:!0,value:0},isCustomDateTypeSelected:{type:Boolean,notify:!0,value:!1},insulinTypeList:{type:Array,value:function(){return[{label:"Bolus (Mealtime Insulin)",value:"Bolus (Mealtime Insulin)"},{label:"Premix",value:"Premix"},{label:"Split Mix",value:"Split Mix"},{label:"Basal & Bolus",value:"Basal & Bolus"},{label:"Basal Plus",value:"Basal Plus"},{label:"Basal Only",value:"Basal Only"}]}},insulinDrugList:{type:Array,value:function(){return[{label:"Insulatard 100 IU Vial",value:"Insulatard 100 IU Vial"},{label:"Insulatard Penfill",value:"Insulatard Penfill"},{label:"Levemir",value:"Levemir"},{label:"Tresiba",value:"Tresiba"},{label:"Victoza",value:"Victoza"},{label:"Insulatard Flexpen",value:"Insulatard Flexpen"},{label:"Actrapid Penfill",value:"Actrapid Penfill"},{label:"NovoRapid FlexPen",value:"NovoRapid FlexPen"},{label:"NovoRapid Penfill",value:"NovoRapid Penfill"},{label:"Actrapid 100 IU Vial",value:"Actrapid 100 IU Vial"},{label:"Actrapid FlexPen-Humean Insulin",value:"Actrapid FlexPen-Humean Insulin"},{label:"Mixtard 30 100 IU Vial",value:"Mixtard 30 100 IU Vial"},{label:"Mixtard 30 Penfill",value:"Mixtard 30 Penfill"},{label:"Mixtard 50 Penfill",value:"Mixtard 50 Penfill"},{label:"NovoMix 30 FlexPen",value:"NovoMix 30 FlexPen"},{label:"Ryzodeg",value:"Ryzodeg"},{label:"NovoMix 30 Penfill",value:"NovoMix 30 Penfill"},{label:"Mixtard 30 FlexPen",value:"Mixtard 30 FlexPen"}]}},settings:{type:Object,notify:!0},record:{type:Object,notify:!0,value:null},patient:{type:Object,notify:!0,value:null},recordDatabaseCollectionName:{type:String,value:null},recordPartName:{type:String,value:null},recordPartData:{type:Object,value:null},recordPartDef:{type:Object,value:null},recordPartTitle:{type:String,value:null},recordPartHtmlContent:{type:String,value:null},shouldRender:{type:Boolean,value:!1},delayRendering:{type:Boolean,value:!1}},$of:function(t,i){return i in t||(t[i]=null),t[i]},_isEmpty:function(t){return 0===t},_isEmptyArray:function(t){return 0===t.length},_isEmptyString:function(t){return null===t||""===t||"undefined"===t},_compareFn:function(t,i,e){return"<"===i?t<e:">"===i?t>e:"=="===i?t===e:">="===i?t>=e:"<="===i?t<=e:"!="===i?t!==e:void 0},_sortByDate:function(t,i){return t.lastModifiedDatetimeStamp<i.lastModifiedDatetimeStamp?1:t.lastModifiedDatetimeStamp>i.lastModifiedDatetimeStamp?-1:void 0},_computeTotalDaysCount:function(t,i){var e,n;return t?(n=864e5,i=new Date(i),t=new Date(t),e=t-i,this.$TRANSLATE(Math.round(e/n),this.LANG)):this.$TRANSLATE("As Needed",this.LANG)},_returnSerial:function(t){return t+1},_computeAge:function(t){var i,e,n,a;return a=new Date,e=new Date(t),i=a.getFullYear()-e.getFullYear(),n=a.getMonth()-e.getMonth(),(n<0||0===n&&a.getDate()<e.getDate())&&i--,i},_loadUser:function(t){var i;return i=app.db.find("user"),1===i.length?(this.user=i[0],this._getEmploymentList(this.user),this._getSpecializationList(this.user)):this.domHost.showModalDialog("Invalid User!"),t()},_getEmploymentList:function(t){var i,e,n,a,r;if(t.employmentDetailsList.length>0){for(a=t.employmentDetailsList,r=[],e=0,n=a.length;e<n;e++)i=a[e],r.push(this.push("doctorInstitutionList",null!=i?i.institutionName:void 0));return r}return this.doctorInstitutionList=[]},_getSpecializationList:function(t){var i,e,n,a,r;if(t.specializationList.length>0){for(n=t.specializationList,a=[],i=0,e=n.length;i<e;i++)r=n[i],a.push(this.push("doctorSpecialityList",r.specializationTitle));return a}return this.doctorSpecialityList=[]},_loadPatient:function(t,i){var e;return e=app.db.find("patient-list",function(i){var e;return e=i.serial,e===t}),1===e.length?(this.isPatientValid=!0,this.patient=e[0]):this._notifyInvalidPatient(),i()},_listPrescribedMedications:function(t){var i,e;e=app.db.find("patient-medications",function(i){return function(i){var e;return e=i.prescriptionSerial,t===e}}(this)),i=[].concat(e),i.sort(function(t,i){return t.createdDatetimeStamp<i.createdDatetimeStamp?-1:t.createdDatetimeStamp>i.createdDatetimeStamp?1:0}),this.matchingPrescribedMedicineList=i},_loadPrescription:function(t){var i;return i=app.db.find("visit-prescription",function(i){var e;return e=i.serial,e===t}),1===i.length?(this.isPrescriptionValid=!0,this.prescription=i[0],this._listPrescribedMedications(this.prescription.serial),!0):(this._notifyInvalidPrescription(),!1)},_loadIdentifiedSymptoms:function(t){var i;return i=app.db.find("visit-identified-symptoms",function(i){var e;return e=i.serial,e===t}),1===i.length?(this.isIdentifiedSymptomsValid=!0,this.identifiedSymptomsObject=i[0],this.addedIdentifiedSymptomsList=i[0].data.symptomsList,!0):(this._notifyInvalidIdentifeidSymptoms(),!1)},_loadExamination:function(t){var i;return i=app.db.find("visit-examination",function(i){var e;return e=i.serial,e===t}),1===i.length?(this.isExaminationValid=!0,this.examinationObject=i[0],this.addedExaminationList=i[0].data.examinationValueList,!0):(this._notifyInvalidExamination(),!1)},_loadAdvisedTest:function(t){var i;return i=app.db.find("visit-advised-test",function(i){var e;return e=i.serial,e===t}),1===i.length?(this.isTestAdvisedValid=!0,this.testAdvisedObject=i[0],this.addedInvestigationList=i[0].data.testAdvisedList,!0):(this._notifyInvalidTestAdvised(),!1)},_pritifyVitalData:function(t){var i,e;return"Blood Pressure"===t.vitalType?t.vitalObject.data.systolic+"/"+t.vitalObject.data.diastolic:"Heart Rate"===t.vitalType?t.vitalObject.data.bpm+" "+t.vitalObject.data.unit:"BMI"===t.vitalType?(i="ft/inch"===t.vitalObject.data.heightUnit?t.vitalObject.data.heightInFt+"'"+t.vitalObject.data.heightInInch+"'' "+t.vitalObject.data.heightUnit:t.vitalObject.data.height+" "+t.vitalObject.data.heightUnit,e=t.vitalObject.data.weight+t.vitalObject.data.weightUnit,t.vitalObject.data.calculatedBMI+", Height: "+i+", Weight: "+e):"Respirtory Rate"===t.vitalType?t.vitalObject.data.respiratoryRate+t.vitalObject.data.unit:"SpO2"===t.vitalType?t.vitalObject.data.spO2Percentage+t.vitalObject.data.unit:"Temperature"===t.vitalType?t.vitalObject.data.temperature+t.vitalObject.data.unit:void 0},_notifyInvalidPatient:function(){return this.isPatientValid=!1,this.domHost.showModalDialog("Invalid Patient Provided")},_notifyInvalidVisit:function(){return this.isVisitValid=!1,this.domHost.showModalDialog("Invalid Visit Provided")},_loadVisit:function(t,i){var e;return e=app.db.find("doctor-visit",function(i){var e;return e=i.serial,e===t}),1!==e.length?void this._notifyInvalidVisit():(this.isVisitValid=!0,this.visit=e[0],i())},_loadVitalsForVisit:function(t,i){return"Blood Pressure"===i?(this.loadIdentifiedVitalData(t,i,"patient-vitals-blood-pressure"),this.isBPAdded=!0):"Heart Rate"===i?(this.loadIdentifiedVitalData(t,i,"patient-vitals-pulse-rate"),this.isHRAdded=!0):"BMI"===i?(this.loadIdentifiedVitalData(t,i,"patient-vitals-bmi"),this.isBMIAdded=!0):"Respirtory Rate"===i?(this.loadIdentifiedVitalData(t,i,"patient-vitals-respiratory-rate"),this.isRRAdded=!0):"Spo2"===i?(this.loadIdentifiedVitalData(t,i,"patient-vitals-spo2"),this.isSpO2Added=!0):"Temperature"===i?(this.loadIdentifiedVitalData(t,i,"patient-vitals-temperature"),this.isTempAdded=!0):void 0},loadIdentifiedVitalData:function(t,i,e){var n,a;return n=app.db.find(e,function(i){return function(i){var e;return e=i.serial,e===t}}(this)),1===n.length&&(a=n[0],this._addToVitalList(a,i),!0)},_addToVitalList:function(t,i){return lib.util.delay(5,function(e){return function(){return e.push("addedVitalList",{vitalType:i,vitalObject:t})}}(this))},_formatDateTime:function(t){return lib.datetime.format(new Date(t),"mmm d, yyyy h:MMTT")},getPrintedOnTime:function(){return lib.datetime.format(new Date,"mmm d, yyyy h:MMTT")},_loadVisitPrescription:function(t){var i;return i=app.db.find("visit-prescription",function(i){var e;return e=i.serial,e===t}),1===i.length?(this.isPrescriptionValid=!0,this.isFullVisitValid=!0,this.prescription=i[0],this._listPrescribedMedications(this.prescription.serial),!0):(this.isPrescriptionValid=!1,!1)},_loadVisitNote:function(t){var i;return i=app.db.find("visit-note",function(i){var e;return e=i.serial,e===t}),1===i.length?(this.isNoteValid=!0,this.isFullVisitValid=!0,this.doctorNotes=i[0],!0):(this.isNoteValid=!1,!1)},_loadNextVisit:function(t){var i;return i=app.db.find("visit-next-visit",function(i){var e;return e=i.serial,e===t}),1===i.length?(this.isNextVisitValid=!0,this.isFullVisitValid=!0,this.nextVisit=i[0],!0):(this.isNextVisitValid=!1,!1)},_getRecord:function(t,i){var e;return e=app.db.find(i,function(i){var e;return e=i.serial,e===t}),1===e.length?e[0]:null},generateHtmlContent:function(t,i){var e;return e=this.handle_type(t,i.data),e=this.filterHtmlContent(e)},filterHtmlContent:function(t){return t=t.replace(/@VALUE@/g,"")},printOutStyleSheet:function(){return"<style>\n  \n  .default-category {\n    /* font-size: 20px; \n    font-weight: bold; */\n    text-align: center; \n  }\n  .default-collection {\n    /* font-size: 16px; \n    font-weight: bold; */\n  }\n  .default-group {\n    /* text-decoration: overline; */\n  }\n  .default-card {\n    /* text-decoration: underline; */\n  }\n  span {\n    font-size: 14px;\n  }\n  .unprocessed {\n    color: red;\n  }\n</style>"},handle_children:function(t,i){var e,n,a,r,s,l,o;if(r="","childMap"in i&&"childList"in t&&null!==t.childList)for(o=t.childList,a=s=0,l=o.length;s<l;a=++s)e=o[a],e.key in i.childMap&&(n=this.handle_type(e,i.childMap[e.key]),n&&";"!==n&&":;"!==n&&": ;"!==n&&(n=this.sanitizeOutput(n),r+=n));return r},handle_type:function(t,i){return"print"in t||(t.print={}),"systemRoot"===t.type?(this.flattenStyle(t),this.type_systemRoot(t,i)):"category"===t.type?("boldLabel"in t.print||(t.print.boldLabel=!0),"fontSize"in t.print||(t.print.fontSize=18),this.flattenStyle(t),this.type_category(t,i)):"collection"===t.type?("boldLabel"in t.print||(t.print.boldLabel=!0),"fontSize"in t.print||(t.print.fontSize=16),this.flattenStyle(t),this.type_collection(t,i)):"group"===t.type?("passThrough"in t.print||(t.print.passThrough=!0),"fontSize"in t.print||(t.print.fontSize=14),this.flattenStyle(t),this.type_group(t,i)):"card"===t.type?("boldLabel"in t.print||(t.print.boldLabel=!0),"fontSize"in t.print||(t.print.fontSize=14),this.flattenStyle(t),this.type_card(t,i)):"checkbox"===t.type?(this.flattenStyle(t),this.type_checkbox(t,i)):"toggleableContainer"===t.type?(this.flattenStyle(t),this.type_toggleableContainer(t,i)):"label"===t.type?(this.flattenStyle(t),this.type_label(t,i)):"autocomplete"===t.type?("selectionType"in t&&"label"===t.selectionType&&("separatorString"in t.print||(t.print.separatorString=", ")),this.flattenStyle(t),this.type_autocomplete(t,i)):"container"===t.type?(this.flattenStyle(t),this.type_container(t,i)):"checkList"===t.type?("separatorString"in t.print||(t.print.separatorString=", "),this.flattenStyle(t),this.type_checkList(t,i)):"radioList"===t.type?("separatorString"in t.print||(t.print.separatorString=", "),this.flattenStyle(t),this.type_radioList(t,i)):"input"===t.type?(this.flattenStyle(t),this.type_input(t,i)):"singleSelectDropdown"===t.type?(this.flattenStyle(t),this.type_singleSelectDropdown(t,i)):"incrementalCounter"===t.type?(this.flattenStyle(t),this.type_incrementalCounter(t,i)):'<span class="unprocessed">UNPROCESSED '+t.type+" - "+t.key+"</span>"},flattenStyle:function(t){if("passThrough"in t.print&&("hideLabel"in t.print||(t.print.hideLabel=!0),"noColonAfterThis"in t.print||(t.print.noColonAfterThis=!0),"noSemicolonAfterThis"in t.print||(t.print.noSemicolonAfterThis=!1)),"newLineBeforeThis"in t.print&&("boolean"==typeof t.print.newLineBeforeThis?t.print.newLineBeforeThis=t.print.newLineBeforeThis===!0?1:0:t.print.newLineBeforeThis=parseInt(t.print.newLineBeforeThis)),"newLineAfterThis"in t.print&&("boolean"==typeof t.print.newLineAfterThis?t.print.newLineAfterThis=t.print.newLineAfterThis===!0?1:0:t.print.newLineAfterThis=parseInt(t.print.newLineAfterThis)),"newLineAfterThisAndChildren"in t.print&&("boolean"==typeof t.print.newLineAfterThisAndChildren?t.print.newLineAfterThisAndChildren=t.print.newLineAfterThisAndChildren===!0?1:0:t.print.newLineAfterThisAndChildren=parseInt(t.print.newLineAfterThisAndChildren)),"newLineAfterEachValue"in t.print)return"boolean"==typeof t.print.newLineAfterEachValue?t.print.newLineAfterEachValue=t.print.newLineAfterEachValue===!0?1:0:t.print.newLineAfterEachValue=parseInt(t.print.newLineAfterEachValue)},sanitizeOutput:function(t){var i,e;for(i=e=0;e<=2;i=++e)t=t.replace(/\;;/g,";"),t=t.replace(/\;;/g,";"),t=t.replace(/\; ;/g,";"),t=t.replace(/\: ;/g,";"),t=t.replace(/\: :/g,":"),t=t.replace(/\, ;/g,";"),t=t.replace(/\; ,/g,";"),t=t.replace(/\,;/g,";"),t=t.replace(/<\/span style=""><\/span>/g,""),t=t.replace(/<\/span>;<\/span>/g,"</span></span>"),t=t.replace(/<\/span>; <\/span>/g,"</span></span>"),t=t.replace(/<\/span> ,<\/span>/g,"</span></span>");return t},_computeElementStyle:function(t){var i;return i="",t.print.fontSize&&(i+="font-size: "+t.print.fontSize+"px;"),t.print.hide&&(i+="display: none;"),i},_computeTitleOrLabelStyle:function(t){var i;return i="",t.print.boldLabel&&(i+="font-weight: bold;"),i},type_systemRoot:function(t,i){var e;return e=this.handle_children(t,i),this.printOutStyleSheet()+e},type_category:function(t,i){var e,n,a,r;return e=this.handle_children(t,i),0===e.length?"":(a=this._computeTitleOrLabelStyle(t),r='<span style="'+a+'">'+t.label+"</span>",a=this._computeElementStyle(t),n='<div class="default-category" style="'+a+'">'+r+"</div>"+e)},type_collection:function(t,i){var e,n,a,r;return 0===Object.keys(i.childMap).length?"":(e=t.defaultGroup&&!i.isDefaultGroupDismissed?this.handle_type(t.defaultGroup,i.childMap[t.defaultGroup.key]):this.handle_children(t,i),a=this._computeTitleOrLabelStyle(t),r='<br><span style="'+a+'">'+t.label+"</span><br>",a=this._computeElementStyle(t),n='<span class="default-collection" style="'+a+'">'+r+"</span>: "+e+"<br>")},type_group:function(t,i){var e,n,a,r;return e=this.handle_children(t,i),a=this._computeTitleOrLabelStyle(t),r='<span style="'+a+'">'+t.label+"</span>",t.print.passThrough?n=e+";":(a=this._computeElementStyle(t),n='<span class="default-group" style="'+a+'">'+r+"</span>: "+e+"; "),n},_makePrintableContent:function(t,i,e,n,a){var r,s,l,o,d,u,c,p,h,y,v,f,m,g,b;if(0===i.length&&0===e.length&&"label"!==n.type)return"";if(h=n.print,p="",s="",b="",h.hide)return"";if(t.length>0&&(h.hideLabel||(g="",h.boldLabel&&(g+="font-weight: bold;"),h.fontSize&&(g+="font-size:"+h.fontSize+"px;"),p='<span style="'+g+'">'+t+"</span>")),e.length>0&&(h.hideValue||(g="",h.boldValue&&(g+="font-weight: bold;"),h.fontSize&&(g+="font-size:"+h.fontSize+"px;"),b='<span style="'+g+'">'+e+"</span>")),i.length>0&&(h.hideChildren||(g="",h.boldChildren&&(g+="font-weight: bold;"),s='<span style="'+g+'">'+i+"</span>")),0===(p+s+b).length)return"";if("newLineBeforeThis"in h)for(o=d=0,y=h.newLineBeforeThis;0<=y?d<y:d>y;o=0<=y?++d:--d)p="<br>"+p;if("newLineAfterThis"in h)for(o=u=0,v=h.newLineAfterThis;0<=v?u<v:u>v;o=0<=v?++u:--u)p+="<br>";if(r="noColonAfterThis"in h&&h.noColonAfterThis||0===p.length?"":": ",m="noSemicolonAfterThis"in h&&h.noSemicolonAfterThis?"":"; ",l=p+r+s+b+m,"newLineAfterThisAndChildren"in h)for(o=c=0,f=h.newLineAfterThisAndChildren;0<=f?c<f:c>f;o=0<=f?++c:--c)l+="<br>";return l},type_card:function(t,i){var e,n,a;return e=this.handle_children(t,i),n=t.label,a=null,this._makePrintableContent(n||"",e||"",a||"",t,i)},type_checkbox:function(t,i){var e,n,a;return e=null,n=null,a=i.isChecked?t.label:"",this._makePrintableContent(n||"",e||"",a||"",t,i)},type_label:function(t,i){var e,n,a;return e=null,n=i.label||t.label||t.defaultLabel,a=null,this._makePrintableContent(n||"",e||"",a||"",t,i)},type_toggleableContainer:function(t,i){var e,n,a;return i.isChecked?(e=this.handle_children(t,i),n=t.label,a=null,this._makePrintableContent(n||"",e||"",a||"",t,i)):""},type_container:function(t,i){var e,n,a;return e=this.handle_children(t,i),n=i.label||t.defaultLabel,a=null,this._makePrintableContent(n||"",e||"",a||"",t,i)},type_checkList:function(t,i){var e,n,a,r,s,l,o,d,u,c,p,h,y;for(d=t.print,h=[],u=i.checkedValueList,r=0,o=u.length;r<o;r++)a=u[r],h.push(a);if(p=d.separatorString,"newLineAfterEachValue"in d)for(n=s=0,c=d.newLineAfterEachValue;0<=c?s<c:s>c;n=0<=c?++s:--s)p+="<br>";return y=h.join(p),l=null,e=null,this._makePrintableContent(l||"",e||"",y||"",t,i)},type_radioList:function(t,i){var e,n,a;return a=i.selectedValue,n=null,e=null,this._makePrintableContent(n||"",e||"",a||"",t,i)},type_singleSelectDropdown:function(t,i){var e,n,a;return a=t.possibleValueList[i.selectedIndex],n=null,e=null,this._makePrintableContent(n||"",e||"",a||"",t,i)},type_input:function(t,i){var e,n,a,r;return e=i.value,t.unitDetails&&(a=t.unitDetails.unitList[i.selectedUnitIndex]),r=e,n=t.label,e=null,this._makePrintableContent(n||"",e||"",r||"",t,i)},type_autocomplete:function(t,i){var e,n,a,r,s,l,o,d,u,c,p,h,y,v,f;if(o=t.print,"label"===t.selectionType){h=[],d=i.virtualChildMap;for(s in d)v=d[s],y=s.split("_"),y.pop(),y.shift(),y=y.join("_"),h.push(y);if(p=o.separatorString,"newLineAfterEachValue"in o)for(a=r=0,u=o.newLineAfterEachValue;0<=u?r<u:r>u;a=0<=u?++r:--r)p+="<br>";return v=h.join(p),l=t.label,n=null,this._makePrintableContent(l||"",n||"",v||"",t,i)}n="",c=i.virtualChildMap;for(s in c)v=c[s],y=s.split("_"),y.pop(),y.shift(),y=y.join("_"),f={type:"container",defaultLabel:y,key:s,childList:t.childListForEachContainer},e=this.handle_type(f,v)+", ",n+=e;return v=null,l=t.label,this._makePrintableContent(l||"",n||"",v||"",t,i)},type_incrementalCounter:function(t,i){var e,n,a,r,s,l,o,d,u;e="",s=i.virtualChildMap;for(a in s)return d=s[a],o=a.replace("item",""),l=parseInt(o),u={type:"container",defaultLabel:function(){try{return t.unit.singular}catch(i){return n=i,"unit"}}()+" #"+(l+1),key:a,childList:t.childListForEachContainer},e+=this.handle_type(u,d)+";",d=null,r=t.label,this._makePrintableContent(r||"",e||"",d||"",t,i)},should_boldLabel:function(t){return"print"in t&&"boldLabel"in t.print&&t.print.boldLabel},should_passThrough:function(t){return"print"in t&&"passThrough"in t.print&&t.print.passThrough},should_newLineBeforeThis:function(t){return"print"in t&&"newLineBeforeThis"in t.print&&t.print.newLineBeforeThis},inject_passThrough_special_card:function(t,i){var e;if(t.key===t.label&&("Details"===(e=t.key)||"Default"===e))return t.print||(t.print={}),t.print.passThrough=!0},inject_passThrough_special_group:function(t,i){var e;if(t.key===t.label&&("List"===(e=t.key)||"Default"===e))return t.print||(t.print={}),t.print.passThrough=!0},__debug_print:function(t,i){var e,n;e="print"in t?Object.keys(t.print):[],n=lib.array.minus(e,i),n.length>0},checkForPrintPreviewType:function(){var t,i,e,n,a,r,s,l,o,d,u,c,p;return(null==(t=this.visit)||!t.historyAndPhysicalRecordSerial)&&((null==(i=this.visit)||!i.identifiedSymptomsSerial)&&((null==(r=this.visit)||!r.examinationSerial)&&((null==(s=this.visit)||!s.vitalSerial.bp)&&((null==(l=this.visit)||!l.vitalSerial.hr)&&((null==(o=this.visit)||!o.vitalSerial.bmi)&&((null==(d=this.visit)||!d.vitalSerial.rr)&&((null==(u=this.visit)||!u.vitalSerial.spo2)&&((null==(c=this.visit)||!c.vitalSerial.temp)&&((null==(p=this.visit)||!p.advisedTestSerial)&&((null==(e=this.visit)||!e.diagnosisSerial)&&((null==(n=this.visit)||!n.doctorNotesSerial)&&(null!=(a=this.visit)?!a.nextVisitSerial:!0))))))))))))},printButtonPressed:function(t){return this.printPrescriptionOnly=this.checkForPrintPreviewType(),window.print()},_getSettings:function(t){var i;return i=app.db.find("settings"),this.settings=i[0],t()},navigatedIn:function(){return this.currentOrganization=this.getCurrentOrganization(),this.currentOrganization||this.domHost.navigateToPage("#/select-organization"),this._loadUser(function(t){return function(){var i;return i=t.domHost.getPageParams(),t._getSettings(function(){return i.patient?t._loadPatient(i.patient,function(){return i.visit?t._loadVisit(i.visit,function(){if(t.visit.historyAndPhysicalRecordSerial?(t.historyAndPhysical_navigatedIn(),t.set("recordPartName","history-and-physical-record"),t.recordDatabaseCollectionName="history-and-physical-record",t.record=t._getRecord(t.visit.historyAndPhysicalRecordSerial,t.recordDatabaseCollectionName),t.recordPartData=t.record,t.recordPartTitle="History and Physical Record",t.domHost.getStaticData("dynamicElementDefinitionPreoperativeAssessment",function(i){if(t.recordPartDef=i,t.recordPartHtmlContent=t.generateHtmlContent(t.recordPartDef,t.recordPartData),!t.delayRendering)return t.shouldRender=!0})):(t.visit.historyAndPhysicalRecordSerial=null,t.historyAndPhysicalRecord={}),t.visit.prescriptionSerial&&t._loadPrescription(t.visit.prescriptionSerial),t.visit.identifiedSymptomsSerial&&t._loadIdentifiedSymptoms(t.visit.identifiedSymptomsSerial),t.visit.examinationSerial&&t._loadExamination(t.visit.examinationSerial),t.visit.vitalSerial.bp&&t._loadVitalsForVisit(t.visit.vitalSerial.bp,"Blood Pressure"),t.visit.vitalSerial.hr&&t._loadVitalsForVisit(t.visit.vitalSerial.hr,"Heart Rate"),t.visit.vitalSerial.bmi&&t._loadVitalsForVisit(t.visit.vitalSerial.bmi,"BMI"),t.visit.vitalSerial.rr&&t._loadVitalsForVisit(t.visit.vitalSerial.rr,"Respirtory Rate"),t.visit.vitalSerial.spo2&&t._loadVitalsForVisit(t.visit.vitalSerial.spo2,"Spo2"),t.visit.vitalSerial.temp&&t._loadVitalsForVisit(t.visit.vitalSerial.temp,"Temperature"),t.visit.advisedTestSerial&&t._loadAdvisedTest(t.visit.advisedTestSerial),t.visit.diagnosisSerial&&t._loadDiagnosis(t.visit.diagnosisSerial),t.visit.doctorNotesSerial&&t._loadVisitNote(t.visit.doctorNotesSerial),t.visit.nextVisitSerial)return t._loadNextVisit(t.visit.nextVisitSerial)}):void t._notifyInvalidVisit()}):void t._notifyInvalidPatient()})}}(this))},navigatedOut:function(){},historyAndPhysical_navigatedIn:function(){return this._loadHistoryAndPhysicalRecord(),this._loadRecordInClipboard()},historyAndPhysicalRecordCreate:function(t){var i;return i=this.domHost.getPageParams(),"new"===i.visit&&this._saveVisit(),this.historyAndPhysicalRecord={lastModifiedDatetimeStamp:lib.datetime.now(),createdDatetimeStamp:lib.datetime.now(),lastSyncedDatetimeStamp:0,createdByUserSerial:this.user.serial,serial:this.generateSerialForHistoryAndPhysical(),patientSerial:this.patient.serial,visitSerial:this.visit.serial,availableToPatient:!0},this.visit.historyAndPhysicalRecordSerial=this.historyAndPhysicalRecord.serial,this.visit.lastModifiedDatetimeStamp=lib.datetime.now(),app.db.upsert("doctor-visit",this.visit,function(t){return function(i){var e;return e=i.serial,t.visit.serial===e}}(this)),this._saveHistoryAndPhysicalRecord(),this._loadHistoryAndPhysicalRecord(),this.domHost.navigateToPage("#/record-history-and-physical/record:"+this.historyAndPhysicalRecord.serial),window.location.reload()},_loadRecordInClipboard:function(){var t;return t=sessionStorage.getItem("HISTORY-AND-PHYSICAL-IN-CLIPBOARD"),t&&(t=JSON.parse(t)),this.recordInClipboard=t},historyAndPhysicalRecordCopy:function(t){var i;return i=this.historyAndPhysicalRecord,sessionStorage.setItem("HISTORY-AND-PHYSICAL-IN-CLIPBOARD",JSON.stringify(i)),this.domHost.showModalDialog("This record has been copied to clipboard"),this._loadRecordInClipboard()},pasteRecordPressed:function(t){var i;return i=this.domHost.getPageParams(),"new"===i.visit&&this._saveVisit(),this.recordInClipboard.patientSerial=this.patient.serial,this.recordInClipboard.visitSerial=this.visit.serial,this.recordInClipboard.lastChangedDatetimeStamp=lib.datetime.now(),this.recordInClipboard.serial=this.generateSerialForRecord(),this.visit.historyAndPhysicalRecordSerial=this.recordInClipboard.serial,this.historyAndPhysicalRecord=this.recordInClipboard,app.db.upsert("doctor-visit",this.visit,function(t){return function(i){var e;return e=i.serial,t.visit.serial===e}}(this)),this._saveHistoryAndPhysicalRecord(),this._loadHistoryAndPhysicalRecord(),this.recordInClipboard=null,sessionStorage.removeItem("HISTORY-AND-PHYSICAL-IN-CLIPBOARD"),this.domHost.showModalDialog("Successfully Imported. Reloading Interface."),this.domHost.navigateToPage("#/record-history-and-physical/record:"+this.historyAndPhysicalRecord.serial),window.location.reload()},_updateVisitForHistoryAndPhysicalRecord:function(t){},historyAndPhysicalRecordPrint:function(t){return this.domHost.navigateToPage("#/print-history-and-physical-record/record:"+this.historyAndPhysicalRecord.serial)},historyAndPhysicalRecordEdit:function(t){return this.domHost.navigateToPage("#/record-history-and-physical/record:"+this.historyAndPhysicalRecord.serial)},historyAndPhysicalRecordRemove:function(t){return this.domHost.showModalPrompt("Are you sure?",function(t){return function(i){if(i)return app.db.remove("history-and-physical-record",t.historyAndPhysicalRecord._id),
t._loadHistoryAndPhysicalRecord()}}(this))},_loadHistoryAndPhysicalRecord:function(){var t,i;t=this.visit.serial,i=app.db.find("history-and-physical-record",function(i){return function(i){var e;return e=i.visitSerial,e===t}}(this)),1===i.length?this.set("historyAndPhysicalRecord",i[0]):this.set("historyAndPhysicalRecord",null)},_saveVisitPrescription:function(){return app.db.upsert("visit-prescription",this.prescription,function(t){return function(i){var e;return e=i.serial,t.prescription.serial===e}}(this)),this.domHost.showToast("Record Saved")},_saveVisitTestAdvised:function(){return app.db.upsert("visit-advised-test",this.testAdvised,function(t){return function(i){var e;return e=i.serial,t.testAdvised.serial===e}}(this)),this.domHost.showToast("Record Saved")},_saveHistoryAndPhysicalRecord:function(){return app.db.upsert("history-and-physical-record",this.historyAndPhysicalRecord,function(t){return function(i){var e;return e=i.serial,t.historyAndPhysicalRecord.serial===e}}(this)),this.domHost.showToast("Record Saved")},_updatePatientSerialSyncByCollection:function(t,i,e){var n,a,r,s,l,o,d,u;if(o=app.db.find("filterd-patient-serial-list-for-sync",function(i){var e;return e=i.collectionName,e===t}),1===o.length)for(r=o[0],d={},u=r.patientSerialList,n=s=0,l=u.length;s<l;n=++s)if(a=u[n],a.patientSerial===i)return r.patientSerialList[n].isSync=e,app.db.upsert("filterd-patient-serial-list-for-sync",r,function(t){return function(t){var i;return i=t._id,r._id===i}}(this)),!0},historyAndPhysicalSyncCheckboxChanged:function(t){var i,e;return i=this.domHost.getPageParams(),i.patient&&(e=i.patient),t.target.checked?this._updatePatientSerialSyncByCollection("history-and-physical-record",e,!0):this._updatePatientSerialSyncByCollection("history-and-physical-record",e,!1)},historyAndPhysicalAvailableToPatientCheckBoxChanged:function(t){if(this.historyAndPhysicalRecord)return t.target.checked?(this.historyAndPhysicalRecord.availableToPatient=!0,this._saveHistoryAndPhysicalRecord()):(this.historyAndPhysicalRecord.availableToPatient=!1,this._saveHistoryAndPhysicalRecord())},prescriptionAvailableToPatientCheckBoxChanged:function(t){if(this.prescription)return t.target.checked?(this.prescription.availableToPatient=!0,this._saveVisitPrescription()):(this.prescription.availableToPatient=!1,this._saveVisitPrescription())},testAdvisedAvailableToPatientCheckBoxChanged:function(t){if(this.testAdvised)return t.target.checked?(this.testAdvised.availableToPatient=!0,this._saveVisitTestAdvised()):(this.testAdvised.availableToPatient=!1,this._saveVisitTestAdvised())},_loadDiagnosis:function(t){return lib.util.delay(5,function(i){return function(){var e;return e=app.db.find("diagnosis-record",function(i){var e;return e=i.serial,e===t}),1===e.length?(i.isDiagnosisValid=!0,i.isFullVisitValid=!0,i.diagnosis=e[0],!0):(i.isDiagnosisValid=!1,!1)}}(this))},_makeNewDiagnosis:function(){return this.diagnosis={serial:null,lastModifiedDatetimeStamp:lib.datetime.now(),createdDatetimeStamp:lib.datetime.now(),lastSyncedDatetimeStamp:0,createdByUserSerial:this.user.serial,visitSerial:null,patientSerial:this.patient.serial,doctorName:this.visit.doctorName,doctorSpeciality:this.visit.doctorSpeciality,organizationId:this.currentOrganization.idOnServer,data:{diagnosisList:[]}}},_saveDiagnosis:function(){return null===this.visit.serial&&(this._saveVisit(),this.diagnosis.visitSerial=this.visit.serial),null===this.diagnosis.serial&&(this.diagnosis.serial=this.generateSerialForDiagnosis(),this.visit.diagnosisSerial=this.diagnosis.serial,this.diagnosis.visitSerial=this.visit.serial,this._saveVisit()),this.diagnosis.lastModifiedDatetimeStamp=lib.datetime.now(),app.db.upsert("diagnosis-record",this.diagnosis,function(t){return function(i){var e;return e=i.serial,t.diagnosis.serial===e}}(this)),this.comboBoxDiagnosisInputValue=""},arrowBackButtonPressed:function(t){return this.domHost.navigateToPreviousPage()},loadDiagnosisListData:function(){return this.domHost.getStaticData("diagnosisList",function(t){return function(i){var e,n;return n=function(){var t,n,a;for(a=[],t=0,n=i.length;t<n;t++)e=i[t],e.name&&a.push({label:e.name,value:e.name});return a}(),t.set("diagnosisListArray",n)}}(this))},comboBoxKeyUpRecordTitleValueChanged:function(t){if((""!==this.visit.recordTitle||null!==this.visit.recordTitle)&&13===t.which)return this._saveVisit()},recordTitleValueChanged:function(){if(""!==this.visit.recordTitle||null!==this.visit.recordTitle)return this._saveVisit()},openVisitSettingsDialog:function(t){return this.$$("#dialogVisitSettings").toggle()},comboBoxKeyUpDiagnosisValueChanged:function(t){var i;if(""!==this.comboBoxDiagnosisInputValue&&13===t.which)return i="",i="object"==typeof this.comboBoxDiagnosisInputValue?this.comboBoxDiagnosisInputValue.name:this.comboBoxDiagnosisInputValue,this.push("diagnosis.data.diagnosisList",{name:i}),this._saveDiagnosis(),this.domHost.showToast("Diagnosis Added!"),this.comboBoxDiagnosisInputValue=""},addDiagnosis:function(){var t;if(""!==this.comboBoxDiagnosisInputValue)return t="",t="object"==typeof this.comboBoxDiagnosisInputValue?this.comboBoxDiagnosisInputValue.name:this.comboBoxDiagnosisInputValue,this.push("diagnosis.data.diagnosisList",{name:t}),this._saveDiagnosis(),this.domHost.showToast("Diagnosis Added!"),this.comboBoxDiagnosisInputValue=""},_deleteSelectedDiagnosisButtonPressed:function(t){var i;return i=t.model.index,this.splice("diagnosis.data.diagnosisList",i,1),this._saveDiagnosis(),this.domHost.showToast("Diagnosis Deleted!")},_getServiceRendered:function(t){var i;return i=["Doctor Visit","2nd Visit","Online Phone Consultation","In Patient (Hospital/Clinic Visits)","Report Assessment","Custom"],5===t?this.invoice.customServiceRendered:i[t]},createInvoicePressed:function(){var t;return t=this.domHost.getPageParams(),"new"===t.visit&&(this.visit.serial=this.generateSerialForVisit(),this.visit.lastModifiedDatetimeStamp=lib.datetime.now(),app.db.upsert("doctor-visit",this.visit,function(t){return function(i){var e;return e=i.serial,t.visit.serial===e}}(this))),this.domHost.navigateToPage("#/visit-invoice/visit:"+this.visit.serial+"/patient:"+this.patient.serial+"/invoice:new")},editInvoicePressed:function(t){return this.domHost.navigateToPage("#/visit-invoice/visit:"+this.visit.serial+"/patient:"+this.patient.serial+"/invoice:"+this.invoice.serial)},printInvoicePressed:function(){var t;if(t=this.domHost.getPageParams(),"new"!==t["visit-invoice"])return this.domHost.navigateToPage("#/print-invoice/visit:"+this.visit.serial+"/patient:"+this.patient.serial+"/invoice:"+this.invoice.serial)}})}).call(this);
//# sourceMappingURL=page-visit-preview.coffee-compiled.js.map</script>
</dom-module>