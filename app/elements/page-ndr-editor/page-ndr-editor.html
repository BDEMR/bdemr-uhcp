<!-- style --><!-- behavior --><!-- custom-elements --><!-- element --><dom-module id="page-ndr-editor">
  <template>

    <!-- style -->

    <style is="custom-style" include="common-style">
      .limiting-container {
        margin-top: 10px;
      }

      .patient-info-card-counter {
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
        color: #777777;
      }

      .patient-info-cards {
        @apply(--layout-vertical);
        /*@apply(--layout-center);*/
        margin-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
        padding-bottom: 20px;
      }

      .patient-info-cards .row {
        margin-left: 10px;
        /*margin-right: 10px;*/
        margin-top: 10px;
      }

      .patient-info-cards .hr {
        margin-left: 20px;
        margin-right: 20px;
        height: 1px;
        /*width: 100px;*/
        background: #dddddd;
      }

      .patient-info-cards .row .modifier {
        font-size: 14px;
        background: #000000;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
      }

      .patient-info-cards .row .modifier.online {
        background: #757575;
      }

      .patient-info-cards .row .modifier.local-only {
        background: #039BE5;
      }

      .patient-info-cards .row .modifier.locally-updated {
        background: #009688;
      }

      .patient-info-cards .row .modifier.imported {
        background: #4CAF50;
      }

      /*.info-row {
        margin-top: 10px;
      }*/

      .top-info-row {
        margin-top: 10px;
        margin-bottom: 10px;
      }

      .serial-number {
        background: #37474F;
        color: #ffffff;
        margin-left: 5px;
        padding-top: 2px;
        padding-bottom: 2px;
        padding-left: 4px;
        padding-right: 4px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: bold;
      }

      .address1 {
        margin-right: 10px;
      }

      .break-on-tablet {
        @apply(--layout-horizontal);
      }

      @media screen and (max-width: 740px) {
        .break-on-tablet {
          display: block;
        }
      }

      .val {
        text-decoration: underline;
      }

      .custom-input{
        margin-left: 8px;
        margin-right: 8px;
        width: calc(100% - 16px);
      }

      @media screen and (min-width: 656px) {
        .custom-input{
          width: calc(50% - 16px);
        }
      }

      @media screen and (min-width: 976px) {
        .custom-input{
          width: calc(33.33333% - 16px);
        }
      }

      .custom-checkbox {
        width: calc(100% - 16px);
        margin-left: 8px;
        margin-right: 8px;
      }

      @media screen and (min-width: 656px) {
        .custom-checkbox {
          width: calc(50% - 16px);
        }
      }

      @media screen and (min-width: 976px) {
        .custom-checkbox {
          width: calc(33.33333% - 16px);
        }
      }

      .card-custom-header {
        padding: 8px;
        /*border-bottom: 1px solid var(--paper-grey-200);*/
        background-color: var(--paper-grey-50);
      }

      .deep {
        background-color: var(--paper-grey-200);
      }

      .card-custom-header .title {
        font-size: 20px;
        font-weight: 500;
        color: var(--brand-primary-color);
      }

      vaadin-combo-box ::content paper-input-container {
        padding: 8px 0;
      }

      .custom-radio-button-group {
        margin: 8px;
        width: calc(100% - 16px);
      }

      @media screen and (min-width: 656px) {
        .custom-radio-button-group {
          width: calc(50% - 16px);
        }
      }

      @media screen and (min-width: 976px) {
        .custom-radio-button-group {
          width: calc(33.33333% - 16px);
        }
      }

      .btn-add {
        min-width: 3em;
      }

      .custom-item {
        padding: 6px 12px;
        border-radius: 6px;
        margin: 6px 4px;
        border: 1px solid #dadada;
        background-color: #fff
      }

      .full-width {
        width: calc(100% - 16px) !important;
      }
      .full {
        width: calc(100% - 26px) !important;
      }

      .profile-image {
        height: 78px;
        width: 78px;
        border-radius: 50%;
        border: 2px solid #f7f7f7;
      }
      .card-item {
        border-radius: 6px;
        margin: 4px;
        border: 1px solid #eee;
        background-color: #fff;
      }
      .btn-add {
        min-width: 0;
        padding-top: 0.5em;
        padding-bottom: 0.5em;
        background-color: #eceff1;
        color: rgba(0, 0, 0, .87);
      }

      .btn-add.small {
        margin: 3px;
        font-size: 14px;
      }

      .custom-label {
        padding: 4px 8px;
        border: 1px solid #dadada;
        border-radius: 6px;
        margin: 8px;
        /*background-color: #f7f7f7;*/
        width: calc(100% - 26px);
      }

      @media screen and (min-width: 656px) {
        .custom-label {
          width: calc(50% - 26px);
        }
      }

      @media screen and (min-width: 976px) {
        .custom-label {
          width: calc(33.33333% - 26px);
        }
      }

      .bg-gray {
        padding: 3px 6px;
        display: table;
      }

      .custom-input ::content paper-input-container [suffix] {
        color: rgba(0,0,0, .54) !important;
      }
    </style>

    <!-- local DOM -->

    <div class="master-container">

      <div class="limiting-container">
        <!-- Page :: New Visit - Start -->
        <paper-card>

          <!-- headline - start -->
          <div class="card-item p-8">
            <div class="horizontal layout center">
              <iron-image class="profile-image m-right-8" src="../../assets/img/partners/badas.jpg" preload="" sizing="cover"></iron-image>
              <div class="flex">
                <div class="p-horizontal-4 type headline">Nationwide Diabetic Registry</div>
                <div class="horizontal layout wrap type caption-2">
                  <template is="dom-if" if="{{ndr.serial}}">
                    <div class="m-horizontal-4">
                      Record: {{ndr.serial}}
                    </div>
                  </template>
                  <template is="dom-if" if="{{!ndr.serial}}">
                    <div class="m-horizontal-4">
                      Record: New
                    </div>
                  </template>
                  
                  <div class="m-horizontal-4">
                    Created on: {{$mkDateTime(ndr.createdDatetimeStamp)}}
                  </div>
                  <div class="m-horizontal-4">
                    Created by: {{ndr.createdByUserName}}
                  </div>
                  <div class="m-horizontal-4">
                    Last Modified on: {{$mkDateTime(ndr.lastModifiedDatetimeStamp)}}
                  </div>
                </div>
              </div>
            </div>
            <div class="horizontal layout center end-justified m-top-16">
              <paper-button class="btn-add" on-tap="printBtnPressed"><iron-icon icon="icons:print" class="m-right-8"></iron-icon>Print</paper-button>
              <paper-button raised="" class="btn-add colored" on-tap="saveBtnPressed"><iron-icon icon="icons:save" class="m-right-8"></iron-icon>Save</paper-button>
            </div>
          </div>
          <!-- headline - end -->

          <!-- patient details - start -->
          <div class="card-item p-8">
            <div class="type body-lead primary m-horizontal-4">Patient Details</div>
            <div class="horizontal layout wrap center m-top-16">
              <iron-image class="profile-image m-right-8" src="../../images/avatar.png" preload="" sizing="cover"></iron-image>

              <div class="flex">
                <div class="m-horizontal-4 horizontal layout center wrap">
                  <div class="type body-lead capitalize">{{$getFullName(patient.name)}}</div>
                  <div class="m-left-8 type caption bg-gray">{{patient.serial}}</div>
                </div>
                <div class="horizontal layout wrap type caption-2">

                  <template is="dom-if" if="[[!patient.isForOrganizationOnly]]">

                    <div class="m-horizontal-4">
                      <span>Sex: </span>
                      <span>{{patient.gender}}</span>
                    </div>
                    <div class="m-horizontal-4">
                      <span>Age: </span>
                      <span>[[_computeAge(patient.dateOfBirth)]] years </span>
                    </div>
                    <div class="m-horizontal-4">
                      <span>Blood Group: </span>
                      <span> [[patient.bloodGroup]]</span>
                    </div>
                    <div class="m-horizontal-4">
                      <span>Allergy: </span>
                      <span>[[patient.allergy]] </span>
                    </div>
                  </template>

                  <template is="dom-if" if="[[patient.isForOrganizationOnly]]">
                    <div class="m-horizontal-4">
                      <span>Patient Name: </span>
                      <i>REDACTED FOR CONFIDENTIALITY</i>
                    </div>
                    <div class="m-horizontal-4">
                      <span>Age: </span>
                      <i>REDACTED FOR CONFIDENTIALITY</i>
                    </div>
                    <div class="m-horizontal-4">
                      <span>Blood Group: </span>
                      <span>[[patient.bloodGroup]]</span>
                    </div>
                    <div class="m-horizontal-4">
                      <span>Allergy: </span>
                      <span>[[patient.allergy]]</span>
                    </div>
                  </template>
                </div>
              </div>
            </div>
          </div>
          <!-- patient details - end -->

          <!-- visit reason - start -->
          <div class="card-item p-8">
            <div class="type body-lead primary m-horizontal-4">
              <span>Visit Reason</span>
              <template is="dom-if" if="[[EDIT_MODE_ON]]">
                <span>: {{ndr.data.visitType}}</span>
              </template>
            </div>
            <template is="dom-if" if="[[!EDIT_MODE_ON]]">
              <paper-dropdown-menu class="flex full-width" label="Visit Type" placeholder="Type/Select Reason" value="{{ndr.data.visitType}}" vertical-align="top" horizontal-align="left">
                <paper-menu class="dropdown-content" selected="{{visitTypeIndex}}">
                  <template is="dom-repeat" items="[[visitTypeList]]">
                    <paper-item>{{item}}</paper-item>
                  </template>
                </paper-menu>
              </paper-dropdown-menu>
            </template>
          </div>
          <!-- visit reason - end -->


          <!-- Diabetcs Status - start -->
          <div class="card-item p-8">
            <div class="type body-lead primary m-horizontal-4">Diabetes Status</div>
            <div class="horizontal layout wrap">
              <paper-input class="custom-input" label="Registration Centre" value="{{ndr.data.registeredCenter.name}}"></paper-input>
              <paper-input class="custom-input" label="Patient Guide Book No." value="{{ndr.data.diabeticsInfo.patientBookSerial}}"></paper-input>
              <paper-dropdown-menu class="custom-input" label="Diabetes Duration" value="{{ndr.data.diabeticsInfo.duration}}">
                <paper-menu class="dropdown-content" selected="0">
                  <template is="dom-repeat" items="{{dmStatusList}}">
                    <paper-item>[[item]]</paper-item>
                  </template>
                </paper-menu>
              </paper-dropdown-menu>
              <paper-dropdown-menu class="custom-input" label="Type of Diabetics" value="{{ndr.data.diabeticsInfo.typeOfDiabetics}}">
                <paper-menu class="dropdown-content" selected="0">
                  <paper-item>Type 1</paper-item>
                  <paper-item>Type 2</paper-item>
                  <paper-item>Gestational Diabetes</paper-item>
                  <paper-item>Others</paper-item>
                </paper-menu>
              </paper-dropdown-menu>
              <!-- <paper-input type="number" class="custom-input" label="Diabetics Duration" value="{{ndr.data.diabeticsInfo.diabeticsDuration}}"></paper-input> -->
            </div>
          </div>
          <!-- Diabetcs Status - end -->

          <!-- Cinical - start -->
          <div class="card-item p-8">
            <div class="type body-lead primary m-horizontal-4">Cinical</div>
            <div class="horizontal layout wrap">
              <template is="dom-repeat" items="[[ndr.data.clinicalInfoList]]">
                <template is="dom-if" if="[[!_compareFn(item.type, '==', 'waist-hip-ratio')]]">
                  <paper-input type="{{item.inputType}}" class="custom-input" label="{{item.name}}" value="{{item.value}}" on-value-changed="computeWaistHipRatio">
                    <div suffix="">{{item.unit}}</div>
                  </paper-input>
                </template>

                <template is="dom-if" if="[[_compareFn(item.type, '==', 'waist-hip-ratio')]]">
                  <paper-input type="{{item.inputType}}" class="custom-input" label="{{item.name}}" value="{{waistHipRatio}}">
                    <div suffix="">{{item.unit}}</div>
                  </paper-input>
                </template>

              </template>
            </div>
          </div>
          <!-- Cinical - end -->

          <!-- Laboratory - start -->

          <div class="card-item p-8">
            <div class="horizontal layout center wrap">
              <div class="type body-lead primary m-horizontal-4">Laboratory</div>
              <div class="flex"></div>
              <paper-dropdown-menu class="custom-input" label="Type">
                <paper-menu class="dropdown-content" selected="0">
                  <paper-item>Social Welfare</paper-item>
                  <paper-item>Paid</paper-item>
                  <paper-item>Others</paper-item>
                </paper-menu>
              </paper-dropdown-menu>
            </div>

            <div class="custom-label m-4 full horizontal layout center wrap">
              <paper-input class="flex custom-input" value="{{customTest.name}}" label="Add Custom Test">
              </paper-input>
              <paper-input class="custom-input" value="{{customTest.unit}}" label="Unit">
              </paper-input>
              <paper-button class="btn-add" on-tap="addCustomTest">Add New</paper-button>
            </div>

            <div class="horizontal layout wrap">
              <template is="dom-repeat" id="lab-test-list-repeater" items="[[laboratoryTestList]]">

                <template is="dom-if" if="[[!$equals(item.name, 'ECG')]]">
                  <div class="horizontal layout custom-label m-4">
                    <paper-input type="{{item.inputType}}" class="flex" label="{{item.name}}" value="{{item.value}}">
                      <div suffix="">{{item.unit}}</div>
                    </paper-input>
                    <template is="dom-if" if="[[item.isCustomTest]]">
                      <div class="horizontal layout center">
                        <paper-icon-button class="m-left-8" icon="delete" on-tap="deleteCustomTest"></paper-icon-button>
                      </div>
                    </template>
                  </div>
                </template>

                <template is="dom-if" if="[[$equals(item.name, 'ECG')]]">
                  <div class="custom-label m-4">
                    <div>
                      <div>{{item.name}}:</div>
                    </div>
                    <paper-radio-group selected="{{item.type}}">
                      <paper-radio-button name="normal">Normal</paper-radio-button>
                      <paper-radio-button name="abnormal">Abnormal</paper-radio-button>
                    </paper-radio-group>
                    <template is="dom-if" if="[[$equals(item.type, 'abnormal')]]">
                      <vaadin-combo-box class="custom-input full-width" label="Select ECG Type" items="{{ecgTypeList}}" allow-custom-value="true" value="{{item.value}}"></vaadin-combo-box>
                    </template>
                  </div>                  
                </template>

                

              </template>
            </div>
          
          </div>
          <!-- Laboratory - end -->

          <!-- Complication  - start -->
          <div class="card-item p-8">
            <div class="horizontal layout center wrap">
              <div class="type body-lead primary m-horizontal-4 flex">Complication</div>
              <paper-button class="btn-add" on-tap="addCustomComplication">Add New</paper-button>
            </div>
            
            <paper-input class="custom-input full-width" value="{{customComplication}}" label="Other Complication"></paper-input>
              
            <div class="horizontal layout wrap m-top-16">
              <template is="dom-repeat" items="[[complicationList]]">
                <paper-checkbox class="custom-checkbox m-8" checked="{{item.isSelected}}">{{item.name}}</paper-checkbox>
              </template>
            </div>
          </div>
          <!-- Complication - end -->

          <!-- Assosiate Complication  - start -->
          <div class="card-item p-8">
            <div class="horizontal layout center wrap">
              <div class="type body-lead primary m-horizontal-4 flex">Associate Complication</div>
              <!-- <paper-button class="btn-add" on-tap="addCustomComplication" >Add New</paper-button> -->
            </div>
            
            <!-- <paper-input class="custom-input full-width" value="{{customComplication}}" label="Other Complication"></paper-input> -->
              
            <div class="horizontal layout wrap m-top-16">
              <template is="dom-repeat" items="[[ndr.data.associateComplicationList]]">
                <paper-checkbox class="custom-checkbox m-8" checked="{{item.isSelected}}">{{item.name}}</paper-checkbox>
              </template>
            </div>
          </div>
          <!-- Assosiate Complication - end -->

          <!-- Personal Habit(s) - start -->
          <div class="card-item p-8">
            <div class="type body-lead primary m-horizontal-4"></div>
            <div class="horizontal layout center">
              <div class="type body-lead primary m-horizontal-4 flex">Personal Habit(s)</div>
              <paper-button class="btn-add" on-tap="addAddiction">add new</paper-button>
            </div>

            <paper-input class="custom-input full-width" value="{{otherAddiction.type}}" label="Add Other Personal habits"></paper-input>

            <div class="horizontal layout wrap m-top-16">
              <template is="dom-repeat" items="[[ndr.data.medicalInfo.drugAddictionList]]">
                <div class="custom-radio-button-group">
                  <div id="grpVaccination">
                    <div>{{item.type}}:</div>
                  </div>
                  <paper-radio-group aria-labelledby="grpVaccination" selected="{{item.isYes}}">
                    <paper-radio-button name="yes">Yes</paper-radio-button>
                    <paper-radio-button name="no">No</paper-radio-button>
                  </paper-radio-group>
                  <template is="dom-if" if="[[$equals(item.isYes, 'yes')]]">
                    <paper-input label="Amount" value="{{item.amount}}"></paper-input>
                  </template>
                </div>
              </template>
            </div>

          </div>
          <!-- Personal Habit(s) - end -->

          <!-- Family History - start -->
          <div class="card-item p-8">

            <div class="horizontal layout center">
              <div class="type body-lead primary m-horizontal-4 flex">Family History</div>
              <paper-button class="btn-add" on-tap="addFamilyHistoryDisease">add new</paper-button>
            </div>

            <paper-input class="custom-input full-width" value="{{otherFamilyHistoryDisease.disease}}" label="Other"></paper-input>

            <div class="horizontal layout wrap m-top-16">
              <template is="dom-repeat" items="[[ndr.data.medicalInfo.familyHistoryList]]">
                <div class="custom-radio-button-group">
                  <div id="{{item.disease}}">
                    <!-- <span class="type caption secondary m-right-8">[[_returnSerial(index)]]</span> -->
                    <span>{{item.disease}}:</span>
                  </div>
                  <paper-radio-group aria-labelledby="{{item.disease}}" selected="{{item.value}}">
                    <paper-radio-button name="yes">Yes</paper-radio-button>
                    <paper-radio-button name="no">No</paper-radio-button>
                    <paper-radio-button name="unknown">Unknown</paper-radio-button>
                  </paper-radio-group>
                </div>
              </template>

            </div>
          </div>
          <!-- Family History - end -->

          <!-- Dietary history - start -->
          <div class="card-item p-8">
            <div class="horizontal layout center">
              <div class="type body-lead primary m-horizontal-4">Dietary History</div>
              <paper-radio-group class="flex" selected="{{showDietaryHistory2}}">
                <paper-radio-button name="yes">Yes</paper-radio-button>
                <paper-radio-button name="no">No</paper-radio-button>
              </paper-radio-group>
              <div class="flex"></div>
              <paper-button hidden$="{{!$equals(showDietaryHistory2, 'yes')}}" class="btn-add" on-tap="addDietItem2">add</paper-button>
            </div>
       
            <vaadin-combo-box hidden$="{{!$equals(showDietaryHistory2, 'yes')}}" class="flex custom-input full-width" label="Add Food Item" items="{{foodItemPreList}}" allow-custom-value="true" value="{{otherDietItem2.type}}"></vaadin-combo-box>
          
            <div hidden$="{{!$equals(showDietaryHistory2, 'yes')}}">
              <template id="dietary-list-repeater-2" is="dom-repeat" items="[[ndr.data.medicalInfo.dietaryHistoryList2]]" as="dietItem">
                <div class="layout horizontal center wrap custom-item">
                  <div class="type caption secondary m-right-8">[[_returnSerial(index)]]</div>
                  <div class="type body flex m-right-16">{{dietItem.type}}</div>
                  <template is="dom-repeat" items="[[dietItem.consumeAmount]]">
                    <paper-input class="m-horizontal-8" label="{{item.time}}" value="{{item.value}}" on-change="onDietaryItemValue">
                      <div class="type secondary" suffix="">{{item.unit}}</div>
                    </paper-input>
                  </template>
                  <paper-icon-button icon="delete" on-tap="deleteDietItem2"></paper-icon-button>
                </div>
              </template>
            </div>        
          </div>
          <!-- Dietary history - end -->

          <!--  Type of cooking oil - start -->
          <div class="card-item p-8">
            <div class="horizontal layout wrap center">
              <div class="type body-lead primary m-horizontal-4">Type of cooking oil</div>
              <paper-radio-group class="flex" selected="{{showCookingOil2}}">
                <paper-radio-button name="yes">Yes</paper-radio-button>
                <paper-radio-button name="no">No</paper-radio-button>
              </paper-radio-group>
              <div class="flex"></div>
              <paper-button hidden$="{{!$equals(showCookingOil2, 'yes')}}" class="btn-add" on-tap="addCookingOil2">add new</paper-button>
            </div>

            <paper-input hidden$="{{!$equals(showCookingOil2, 'yes')}}" class="custom-input full-width" value="{{otherTypeOfCookingOil2.type}}" label="Add Custom Oil Name"></paper-input>
            
            <div class="horizontal layout wrap" hidden$="{{!$equals(showCookingOil2, 'yes')}}">
              <template is="dom-repeat" items="[[ndr.data.medicalInfo.typeOfCookingOilList2]]">
                <div class="custom-radio-button-group">
                  <div id="grpVaccination">
                    <div>{{item.type}}:</div>
                  </div>
                  <paper-radio-group selected="{{item.isYes}}">
                    <paper-radio-button name="yes">Yes</paper-radio-button>
                    <paper-radio-button name="no">No</paper-radio-button>
                  </paper-radio-group>
                  <template is="dom-if" if="[[$equals(item.isYes, 'yes')]]">
                    <paper-input label="Amount" value="{{item.amount}}">
                      <div class="type secondary" suffix="">{{item.unit}}/{{item.duration}}</div>
                    </paper-input>
                  </template>
                </div>
              </template>
            </div>
          </div>
          <!-- Type of cooking oil - end -->

          <!-- Physical activity - start -->
          <div class="card-item p-8">
            <div class="layout horizontal center wrap">
              <div class="type body-lead primary p-horizontal-4">Physical Activity</div>
              <paper-radio-group class="flex" selected="{{showPhysicalActivity2}}">
                <paper-radio-button name="yes">Yes</paper-radio-button>
                <paper-radio-button name="no">No</paper-radio-button>
              </paper-radio-group>
              <paper-button hidden$="{{!$equals(showPhysicalActivity2, 'yes')}}" class="btn-add" on-tap="addPhysicalActivity2">add</paper-button>
            </div>

            <div hidden$="{{!$equals(showPhysicalActivity2, 'yes')}}">

              <div class="horizontal layout center wrap">
                <vaadin-combo-box class="flex m-right-16" label="Physical Activity" placeholder="Type/Select Activtiy" items="[[physicalActivityPreList]]" allow-custom-value="true" value="{{physicalActivityObj2.name}}"></vaadin-combo-box>
                <paper-input type="number" class="" value="{{physicalActivityObj2.duration}}" label="Duration">
                  <div class="type secondary" suffix="">{{physicalActivityObj2.unit}}</div>
                </paper-input>
              </div>

              <div class="horizontal layout wrap">
                <template is="dom-repeat" items="[[ndr.data.physicalActivityList2]]">
                  <div class="custom-label horizontal layout center">

                    <div class="flex">
                      <div>{{item.name}}: </div>
                      <span>{{item.duration}} {{item.unit}}</span>
                    </div>

                    <paper-icon-button icon="delete" on-tap="deletePhysicalActivity2"></paper-icon-button>
                  </div>
                </template>
              </div>
            </div>
          </div>
          <!-- Physical activity - end -->

          <div class="p-8">
            <div class="type headline text-center">Management</div>
          </div>

          <!-- Dietary history - start -->
          <div class="card-item p-8">
            <div class="horizontal layout center">
              <div class="type body-lead primary m-horizontal-4">Dietary History</div>
              <paper-radio-group class="flex" selected="{{showDietaryHistory}}">
                <paper-radio-button name="yes">Yes</paper-radio-button>
                <paper-radio-button name="no">No</paper-radio-button>
              </paper-radio-group>
              <div class="flex"></div>
              <paper-button hidden$="{{!$equals(showDietaryHistory, 'yes')}}" class="btn-add" on-tap="addDietItem">add</paper-button>
            </div>
       
            <vaadin-combo-box hidden$="{{!$equals(showDietaryHistory, 'yes')}}" class="flex custom-input full-width" label="Add Food Item" items="{{foodItemPreList}}" allow-custom-value="true" value="{{otherDietItem.type}}"></vaadin-combo-box>
          
            <div hidden$="{{!$equals(showDietaryHistory, 'yes')}}">
              <template id="dietary-list-repeater" is="dom-repeat" items="[[ndr.data.medicalInfo.dietaryHistoryList]]" as="dietItem">
                <div class="layout horizontal center wrap custom-item">
                  <div class="type caption secondary m-right-8">[[_returnSerial(index)]]</div>
                  <div class="type body flex m-right-16">{{dietItem.type}}</div>
                  <template is="dom-repeat" items="[[dietItem.consumeAmount]]">
                    <paper-input class="m-horizontal-8" label="{{item.time}}" value="{{item.value}}" on-change="onDietaryItemValue">
                      <div class="type secondary" suffix="">{{item.unit}}</div>
                    </paper-input>
                  </template>
                  <paper-icon-button icon="delete" on-tap="deleteDietItem"></paper-icon-button>
                </div>
              </template>
            </div>        
          </div>
          <!-- Dietary history - end -->

          <!--  Type of cooking oil - start -->
          <div class="card-item p-8">
            <div class="horizontal layout wrap center">
              <div class="type body-lead primary m-horizontal-4">Type of cooking oil</div>
              <paper-radio-group class="flex" selected="{{showCookingOil}}">
                <paper-radio-button name="yes">Yes</paper-radio-button>
                <paper-radio-button name="no">No</paper-radio-button>
              </paper-radio-group>
              <div class="flex"></div>
              <paper-button hidden$="{{!$equals(showCookingOil, 'yes')}}" class="btn-add" on-tap="addCookingOil">add new</paper-button>
            </div>

            <paper-input hidden$="{{!$equals(showCookingOil, 'yes')}}" class="custom-input full-width" value="{{otherTypeOfCookingOil.type}}" label="Add Custom Oil Name"></paper-input>
            
            <div class="horizontal layout wrap" hidden$="{{!$equals(showCookingOil, 'yes')}}">
              <template is="dom-repeat" items="[[ndr.data.medicalInfo.typeOfCookingOilList]]">
                <div class="custom-radio-button-group">
                  <div id="grpVaccination">
                    <div>{{item.type}}:</div>
                  </div>
                  <paper-radio-group aria-labelledby="grpVaccination" selected="{{item.isYes}}">
                    <paper-radio-button name="yes">Yes</paper-radio-button>
                    <paper-radio-button name="no">No</paper-radio-button>
                  </paper-radio-group>
                  <template is="dom-if" if="[[$equals(item.isYes, 'yes')]]">
                    <paper-input label="Amount" value="{{item.amount}}">
                      <div class="type secondary" suffix="">{{item.unit}}/{{item.duration}}</div>
                    </paper-input>
                  </template>
                </div>
              </template>
            </div>
          </div>
          <!-- Type of cooking oil - end -->

          <!-- Physical activity - start -->
          <div class="card-item p-8">
            <div class="layout horizontal center wrap">
              <div class="type body-lead primary p-horizontal-4">Physical Activity</div>
              <paper-radio-group class="flex" selected="{{showPhysicalActivity}}">
                <paper-radio-button name="yes">Yes</paper-radio-button>
                <paper-radio-button name="no">No</paper-radio-button>
              </paper-radio-group>
              <paper-button hidden$="{{!$equals(showPhysicalActivity, 'yes')}}" class="btn-add" on-tap="addPhysicalActivity">add</paper-button>
            </div>

            <div hidden$="{{!$equals(showPhysicalActivity, 'yes')}}">

              <div class="horizontal layout center wrap">
                <vaadin-combo-box class="flex m-right-16" label="Physical Activity" placeholder="Type/Select Activtiy" items="[[physicalActivityPreList]]" allow-custom-value="true" value="{{physicalActivityObj.name}}"></vaadin-combo-box>
                <paper-input type="number" class="" value="{{physicalActivityObj.duration}}" label="Duration">
                  <div class="type secondary" suffix="">{{physicalActivityObj.unit}}</div>
                </paper-input>
              </div>

              <div class="horizontal layout wrap">
                <template is="dom-repeat" items="[[ndr.data.physicalActivityList]]">
                  <div class="custom-label horizontal layout center">

                    <div class="flex">
                      <div>{{item.name}}: </div>
                      <span>{{item.duration}} {{item.unit}}</span>
                    </div>

                    <paper-icon-button icon="delete" on-tap="deletePhysicalActivity"></paper-icon-button>
                  </div>
                </template>
              </div>
            </div>
          </div>
          <!-- Physical activity - end -->

          <!-- Previous Treatment - start -->
          <div class="card-item p-8">
            <div class="layout horizontal center">
              <div class="type body-lead primary flex p-horizontal-4">Medication</div>
              <paper-button class="btn-add" on-tap="addOgldDrug">add another</paper-button>
            </div>

            <div>
              <template is="dom-repeat" items="{{ndr.data.currentTreatment.ogld.ogldDrugList}}">
                <div class="custom-item horizontal layout center wrap">
                  <div class="m-right-8 type caption secondary">{{_returnSerial(index)}}.</div>
                  <paper-input class="flex m-right-16" label="Add OAD Drug" value="{{item.ogldDrugName}}"></paper-input>
                  <paper-input label="Dosage" value="{{item.drugDosage}}"></paper-input>
                  <paper-icon-button icon="delete" on-tap="deleteSelectedOgldDrug"></paper-icon-button>
                </div>
              </template>
            </div>

            
          </div>
          <!-- Previous Treatment - end -->

          <!-- Insulin - start -->
          <div class="card-item p-8">

            <div class="layout horizontal center">
              <div class="type body-lead primary flex p-horizontal-4">Insulin</div>
              <paper-radio-group selected="{{showInsulin}}">
                <paper-radio-button name="yes">Yes</paper-radio-button>
                <paper-radio-button name="no">No</paper-radio-button>
              </paper-radio-group>
            </div>

            <div hidden$="{{!$equals(showInsulin, 'yes')}}">
              <vaadin-combo-box class="flex custom-input full-width" label="Insuline Type" placeholder="Type/Select Insulin type" items="{{insulinTypeList}}" allow-custom-value="true" value="{{ndr.data.insulin.insulinType}}"></vaadin-combo-box>

              <!-- <div style="padding: 4px;" class="type body caption-2 secondary"><div>Insulin</div></div> -->

              <div class="custom-item horizontal layout center wrap">
                <vaadin-combo-box style="min-width: 210px;" class="flex" label="{{ndr.data.insulin.insulinTherapyList.0.therapyType}}" placeholder="Type/Select Drug" items="{{basalDrugList}}" allow-custom-value="true" value="{{ndr.data.insulin.insulinTherapyList.0.drugName}}"></vaadin-combo-box>
                <template is="dom-repeat" items="[[ndr.data.insulin.insulinTherapyList.0.dosageList]]" as="dose">
                  <paper-input class="m-horizontal-8" label="{{dose.time}}" value="{{dose.value}}"></paper-input>
                </template>
              </div>

              <div class="custom-item horizontal layout center wrap">
                <vaadin-combo-box style="min-width: 210px;" class="flex" label="{{ndr.data.insulin.insulinTherapyList.1.therapyType}}" placeholder="Type/Select Drug" items="{{bolusDrugList}}" allow-custom-value="true" value="{{ndr.data.insulin.insulinTherapyList.1.drugName}}"></vaadin-combo-box>
                <template is="dom-repeat" items="[[ndr.data.insulin.insulinTherapyList.1.dosageList]]" as="dose">
                  <paper-input class="m-horizontal-8" label="{{dose.time}}" value="{{dose.value}}"></paper-input>
                </template>
              </div>

              <div class="custom-item horizontal layout center wrap">
                <vaadin-combo-box style="min-width: 210px;" class="flex" label="{{ndr.data.insulin.insulinTherapyList.1.therapyType}}" placeholder="Type/Select Drug" items="{{bolusDrugList}}" allow-custom-value="true" value="{{ndr.data.insulin.insulinTherapyList.1.drugName}}"></vaadin-combo-box>
                <template is="dom-repeat" items="[[ndr.data.insulin.insulinTherapyList.1.dosageList]]" as="dose">
                  <paper-input class="m-horizontal-8" label="{{dose.time}}" value="{{dose.value}}"></paper-input>
                </template>
              </div>

              <div class="custom-item horizontal layout center wrap">
                <vaadin-combo-box style="min-width: 210px;" class="flex" label="{{ndr.data.insulin.insulinTherapyList.2.therapyType}}" placeholder="Type/Select Drug" items="{{premixDrugList}}" allow-custom-value="true" value="{{ndr.data.insulin.insulinTherapyList.2.drugName}}"></vaadin-combo-box>
                <template is="dom-repeat" items="[[ndr.data.insulin.insulinTherapyList.2.dosageList]]" as="dose">
                  <paper-input class="m-horizontal-8" label="{{dose.time}}" value="{{dose.value}}"></paper-input>
                </template>
              </div>

              <div class="custom-item horizontal layout center wrap">
                <vaadin-combo-box style="min-width: 210px;" class="flex" label="{{ndr.data.insulin.insulinTherapyList.3.therapyType}}" placeholder="Type/Select Drug" items="{{otherInsulinDrugList}}" allow-custom-value="true" value="{{ndr.data.insulin.insulinTherapyList.3.drugName}}"></vaadin-combo-box>
                <template is="dom-repeat" items="[[ndr.data.insulin.insulinTherapyList.3.dosageList]]" as="dose">
                  <paper-input class="m-horizontal-8" label="{{dose.time}}" value="{{dose.value}}"></paper-input>
                </template>
              </div>
            </div>
          </div>
          <!-- Insulin - end -->

          <!-- Other Medication - start -->
          <div class="card-item p-8">
            <div class="layout horizontal center">
              <div class="type body-lead primary flex">Other Medication</div>
            </div>

            <div>

              <div class="horizontal layout wrap">
                <template is="dom-repeat" items="[[ndr.data.otherMedicationList]]">
                  <div class="custom-label p-8 full-width">
                    <div class="horizontal layout center">
                      <div>{{item.name}}:</div>
                      <paper-radio-group class="flex" selected="{{item.isYes}}">
                        <paper-radio-button name="yes">Yes</paper-radio-button>
                        <paper-radio-button name="no">No</paper-radio-button>
                      </paper-radio-group>
                      <paper-button hidden$="[[!$equals(item.isYes, 'yes')]]" class="btn-add" on-tap="addMedicine"><iron-icon icon="add"></iron-icon></paper-button>
                    </div>
                    <div hidden$="[[!$equals(item.isYes, 'yes')]]">
                      <div>
                        <template is="dom-repeat" items="[[item.medicineList]]" as="medicine" index-as="medicineIndex">
                          <div class="horizontal layout center">
                            <div class="m-right-8 type caption secondary">{{_returnSerial(medicineIndex)}}.</div>
                            <paper-input class="flex m-horizontal-8" label="Name" value="{{medicine.name}}"></paper-input>
                            <paper-input type="number" class="m-horizontal-8" label="Dose" value="{{medicine.dose}}">
                              <div class="type secondary" suffix="">{{medicine.unit}}</div>
                            </paper-input>
  
                          </div>
                        </template>
                      </div>
                    </div>
                  </div>
                </template>
              </div>

            </div>
          </div>
          <!-- Other Medication - end -->

        </paper-card>
        <!-- national diabetic form - end -->
                

      </div>


    </div>
    

  </template>
  <script>(function(){Polymer({is:"page-ndr-editor",behaviors:[app.behaviors.commonComputes,app.behaviors.dbUsing,app.behaviors.translating,app.behaviors.pageLike,app.behaviors.apiCalling],properties:{EDIT_MODE_ON:{type:Boolean,notify:!0,value:!1},visitTypeIndex:{type:Number,notify:!0,value:function(){return-1}},showPhysicalActivity:{type:String,notify:!0,value:"no"},showDietaryHistory:{type:String,notify:!0,value:"no"},showCookingOil:{type:String,notify:!0,value:"no"},showPhysicalActivity2:{type:String,notify:!0,value:"no"},showDietaryHistory2:{type:String,notify:!0,value:"no"},showCookingOil2:{type:String,notify:!0,value:"no"},showInsulin:{type:String,notify:!0,value:"no"},user:{type:Object,notify:!0,value:null},isPatientValid:{type:Boolean,notify:!0,value:!1},isRecordValid:{type:Boolean,notify:!0,value:!1},patient:{type:Object,notify:!0,value:null},organization:{type:Object,notify:!0,value:null},ndr:{type:Object,notify:!0,value:null},dmStatusList:{type:Array,value:function(){return["New patient/diabetes","<1 year/diabetes","<1-5 year","6-10 years","11-15 years","16-20 years",">20 years"]}},typeOfTreatmentList:{type:Array,value:function(){return[{label:"Diet",value:"Diet"},{label:"Diet & OGLD",value:"Diet & OGLD"},{label:"Diet, OGLD & insulin",value:"Diet, OGLD & insulin"},{label:"Insulin only",value:"Insulin only"},{label:"Other",value:"Other"}]}},insulinTypeList:{type:Array,value:function(){return[{label:"Bolus (Mealtime Insulin)",value:"Bolus (Mealtime Insulin)"},{label:"Premix",value:"Premix"},{label:"Split Mix",value:"Split Mix"},{label:"Basal & Bolus",value:"Basal & Bolus"},{label:"Basal Plus",value:"Basal Plus"},{label:"Basal Only",value:"Basal Only"}]}},basalDrugList:{type:Array,value:function(){return[{label:"Insulatard 100 IU Vial",value:"Insulatard 100 IU Vial"},{label:"Insulatard Penfill",value:"Insulatard Penfill"},{label:"Levemir",value:"Levemir"},{label:"Tresiba",value:"Tresiba"},{label:"Victoza",value:"Victoza"},{label:"Insulatard Flexpen",value:"Insulatard Flexpen"}]}},bolusDrugList:{type:Array,value:function(){return[{label:"Actrapid Penfill",value:"Actrapid Penfill"},{label:"NovoRapid FlexPen",value:"NovoRapid FlexPen"},{label:"NovoRapid Penfill",value:"NovoRapid Penfill"},{label:"Actrapid 100 IU Vial",value:"Actrapid 100 IU Vial"},{label:"Actrapid FlexPen-Humean Insulin",value:"Actrapid FlexPen-Humean Insulin"}]}},premixDrugList:{type:Array,value:[{label:"Mixtard 30 100 IU Vial",value:"Mixtard 30 100 IU Vial"},{label:"Mixtard 30 Penfill",value:"Mixtard 30 Penfill"},{label:"Mixtard 50 Penfill",value:"Mixtard 50 Penfill"},{label:"NovoMix 30 FlexPen",value:"NovoMix 30 FlexPen"},{label:"Ryzodeg",value:"Ryzodeg"},{label:"NovoMix 30 Penfill",value:"NovoMix 30 Penfill"},{label:"Mixtard 30 FlexPen",value:"Mixtard 30 FlexPen"}]},otherInsulinDrugList:{type:Array,value:function(){return["Maxsuline N","Maxsuline 50/50","Maxsuline R","Maxsuline 30/70","Vibrenta","Glycet Mix","Ansulin N","Ansulin 50/50","Ansulin R","Ansulin 30/70","DIASULIN N","DIASULIN-50/50","DIASULIN-R","DIASULIN-30/70","GLARINE","ACILOG","ACILOG MIX","INSULET N","ISULET 50/50","INSULET-R","INSULET 30/70","INSULET GN","INSULET ASP","INSULET ASP MIX","INSUL N","INSUL-50/50","INSUL R","INSUL 30/70","INSUL GLARGINE","INSUL LISPRO","HUMULIN N","HUMULIN-R","HUMULIN 70/30","HUMALOG-MIX 25","HUMALOG-MIX-50","HUMALOG-KWIKPEN","INSUMAN-COMB","INSUMAN-BASAL","INSUMAN-RAPID","LANTUS","APIDRA","Actrapid FlexPen"]}},waistHipRatio:{type:Number,value:0,notify:!0},ecgTypeList:{type:Array,value:function(){return["RBBB","LBBB","LVH","MI"]}},physicalActivityPreList:{type:Array,value:function(){return["Aerobic dance","Walking","Running","Cycling","Treadmill","Stair climbing","Swimming","Jogging","Other","none"]}},physicalActivityObj:{type:Object,value:function(){return{name:null,duration:null,unit:"min/day"}}},physicalActivityObj2:{type:Object,value:function(){return{name:null,duration:null,unit:"min/day"}}},foodItemPreList:{type:Array,value:function(){return["Rice","Ruti","Chapati","Fish","Meat","Green Vegetable","Fruits","Soft drinks","Table Salt","Sweets","Fast Foods","Ghee/butter","Hotel Food"]}},customTest:{type:Object,value:{}},customComplication:{type:String,value:null},otherFamilyHistoryDisease:{type:Object,value:function(){return{disease:"",value:"yes"}}},otherAddiction:{type:Object,value:function(){return{type:"",isYes:"yes",amount:""}}},historyDisease:{type:Object,value:function(){return{disease:"",value:"yes"}}},otherTypeOfCookingOil:{type:Object,value:function(){return{type:"",isYes:"yes",amount:"",unit:"Litres",duration:"Month"}}},otherTypeOfCookingOil2:{type:Object,value:function(){return{type:"",isYes:"yes",amount:"",unit:"Litres",duration:"Month"}}},otherDietItem:{type:Object,value:function(){return{type:"",consumeAmount:[{time:"daily",value:null,unit:""},{time:"weekly",value:null,unit:""},{time:"monthly",value:null,unit:""}]}}},otherDietItem2:{type:Object,value:function(){return{type:"",consumeAmount:[{time:"daily",value:null,unit:""},{time:"weekly",value:null,unit:""},{time:"monthly",value:null,unit:""}]}}},antiHTNList:{type:Array,value:function(){return["BB (Beta Blocker)","CCB (Calcium Channel Blocker)","ACE-1 (Angiotensin-converting Enzyme Inhibitors)","ARB (Angiotensis Receptor Blocker","α - Blocker","Diuretics","2 Drugs","3 Drugs","Other"]}},antiLipidsList:{type:Array,value:function(){return["Statin","Fibrate","Ezetimibe","Others"]}},visitTypeList:{type:Array,value:function(){return["Newly Diagnosed","At time of diagnosis","1 year after Diagnosis","5 years after Diagnosis","10 years after Diagnosis","15 years after Diagnosis","20 years after Diagnosis","Recruitment","Visit 1","Visit 2","Visit 3","Visit 4","Visit 5","Visit 6","Visit 7","Visit 8","Visit 9","Visit 10","Visit 11","Visit 12","Visit 13","Visit 14","Visit 15","Other"]}},laboratoryTestList:{type:Array,value:[]},complicationList:{type:Array,value:[]}},_makeComplicationList:function(e){return this.complicationList=[{name:"Hypogycemia",isSelected:!1,serial:null},{name:"DKA",isSelected:!1,serial:null},{name:"HHNS",isSelected:!1,serial:null},{name:"Retinopathy",isSelected:!1,serial:null},{name:"Nuropathy",isSelected:!1,serial:null},{name:"CKD/Nephropathy",isSelected:!1,serial:null},{name:"Heart Disease",isSelected:!1,serial:null},{name:"Stroke",isSelected:!1,serial:null},{name:"PVD",isSelected:!1,serial:null},{name:"Foot Complication",isSelected:!1,serial:null}],e()},_makeLaboratoryTestList:function(e){return this.laboratoryTestList=[{name:"hbA1c",value:null,unit:"%",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1,serial:null},{name:"FPG",value:null,unit:"mmol",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1,serial:null},{name:"2hPG",value:null,unit:"mmol",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1,serial:null},{name:"Post Meal",value:null,unit:"mmol",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1,serial:null},{name:"Urine Acetone",value:null,unit:"+",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1,serial:null},{name:"Urine Albumine",value:null,unit:"",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1,serial:null},{name:"S. Creatinine",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1,serial:null},{name:"SGPT",value:null,unit:"Units per liter",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1,serial:null},{name:"HB",value:null,unit:"%",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1,serial:null},{name:"ECG",value:null,unit:"",type:"",isSelected:"",costType:"free",inputType:"mixed",isCustomTest:!1,serial:null},{name:"CHOL",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1,serial:null},{name:"LDL-C",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1,serial:null},{name:"HDL-C",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1,serial:null},{name:"Triglycerides",value:null,unit:"mg/dl",isSelected:"",costType:"free",inputType:"number",isCustomTest:!1,serial:null}],e()},_compareFn:function(e,t,i){return"<"===t?e<i:">"===t?e>i:"=="===t?e===i:">="===t?e>=i:"<="===t?e<=i:"!="===t?e!==i:void 0},_showComputedWestHipRatio:function(e,t){return e/t},_returnSerial:function(e){return e+1},_isEmpty:function(e){return 0===e},_loadUser:function(e){var t;return t=app.db.find("user"),1===t.length&&(this.user=t[0]),e()},arrowBackButtonPressed:function(e){return this.domHost.navigateToPreviousPage()},$findCreator:function(e){return"me"},_computeAge:function(e){var t,i,a,n;return n=new Date,i=new Date(e),t=n.getFullYear()-i.getFullYear(),a=n.getMonth()-i.getMonth(),(a<0||0===a&&n.getDate()<i.getDate())&&t--,t},getDoctorSpeciality:function(){if(0!==this.user.specializationList.length)return this.user.specializationList[0].specializationTitle},_makeNdr:function(){return this.ndr={serial:null,lastModifiedDatetimeStamp:lib.datetime.now(),createdDatetimeStamp:lib.datetime.now(),lastSyncedDatetimeStamp:0,createdByUserSerial:this.user.serial,patientSerial:this.patient.serial,doctorName:this.$getFullName(this.user.name),doctorSpeciality:this.getDoctorSpeciality(),data:{visitType:null,registeredCenter:{name:null,id:null},diabeticsInfo:{patientBookSerial:null,duration:null,typeOfDiabetics:null,diabeticsDuration:null},clinicalInfoList:[{type:"height",name:"Height",value:null,unit:"cm",inputType:"number"},{type:"weight",name:"Weight",value:null,unit:"kg",inputType:"number"},{type:"bmi",name:"BMI",value:null,unit:"km/m2",inputType:"number"},{type:"waist",name:"Waist",value:null,unit:"cm",inputType:"number"},{type:"hip",name:"Hip",value:null,unit:"cm",inputType:"number"},{type:"waist-hip-ratio",name:"Waist Hip Ratio",value:null,unit:"",inputType:"number"},{type:"sbp",name:"SBP",value:null,unit:"mmHg",inputType:"number"},{type:"dbp",name:"DBP",value:null,unit:"mmHg",inputType:"number"}],complicationList:[{name:"Hypogycemia",isSelected:!1,serial:null},{name:"DKA",isSelected:!1,serial:null},{name:"HHNS",isSelected:!1,serial:null},{name:"Retinopathy",isSelected:!1,serial:null},{name:"Nuropathy",isSelected:!1,serial:null},{name:"CKD/Nephropathy",isSelected:!1,serial:null},{name:"Heart Disease",isSelected:!1,serial:null},{name:"Stroke",isSelected:!1,serial:null},{name:"PVD",isSelected:!1,serial:null},{name:"Foot Complication",isSelected:!1,serial:null}],associateComplicationList:[{name:"HTN (Hypertension)",isSelected:!1},{name:"Gastro Complication",isSelected:!1},{name:"Lipid Disorder",isSelected:!1}],physicalActivityList:[],physicalActivityList2:[],medicalInfo:{drugAddictionList:[{type:"Cigarette/Bidi",isYes:"",amount:""},{type:"Tobacco",isYes:"",amount:""},{type:"Betal Leaf/Betal Nut (Shupari)",isYes:"",amount:""},{type:"Alcohol",isYes:"",amount:""},{type:"Others",isYes:"",amount:""}],dietaryHistoryList:[],dietaryHistoryList2:[],typeOfCookingOilList:[{type:"Soyebean oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Mustard oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Palm oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Olive oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Rice bran oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Other",isYes:"",amount:"",unit:"Litres",duration:"Month"}],typeOfCookingOilList2:[{type:"Soyebean oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Mustard oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Palm oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Olive oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Rice bran oil",isYes:"",amount:"",unit:"Litres",duration:"Month"},{type:"Other",isYes:"",amount:"",unit:"Litres",duration:"Month"}],historyOfDeseaseList:[{diseaseName:"Diabetes",value:""},{diseaseName:"Pregnancy diabetes",value:""},{diseaseName:"Hypertension",value:""},{diseaseName:"Heart disease",value:""},{diseaseName:"Asthma",value:""},{diseaseName:"Tuberculosis",value:""},{diseaseName:"Mental disorder",value:""},{diseaseName:"Abortion",value:""},{diseaseName:"Preeclampsia",value:""},{diseaseName:"Eclampsia",value:""},{diseaseName:"Still-Birth",value:""},{diseaseName:"Macrosomia (Large Baby >4kg)",value:""},{diseaseName:"LBW (Small Baby <2.5kg)",value:""},{diseaseName:"Pre-term ( less than 37 weeks )",value:""},{diseaseName:"IUD",value:""}],historyOfMedicationList:[{name:"On Insulin",value:"",type:"",typeOfDevice:"",forVisitReasonIdList:[]},{name:"OADs",value:"",type:"",forVisitReasonIdList:["002","003","005"]},{name:"Anti HTN",value:"",type:"",forVisitReasonIdList:[]},{name:"Anti lipids",value:"",type:"",forVisitReasonIdList:[]},{name:"Cardiac Medication",value:"",type:"",forVisitReasonIdList:[]}],familyHistoryList:[{disease:"Diabetes",value:""},{disease:"Hypertension",value:""},{disease:"Coronary Artery Disease",value:""},{disease:"Cerebro-Vascular Disease",value:""}]},currentTreatment:{typeOfTreatment:"",ogld:{ogldUsage:"no",ogldDrugList:[{ogldDrugName:"",drugDosage:""}]}},insulin:{insulinUsage:"no",insulinType:"",insulinTherapyList:[{therapyType:"Basal",drugName:"",preListedDrugPath:"basalDrugList",dosageList:[{time:"Morning",value:"",unit:"unit"},{time:"Noon",value:"",unit:"unit"},{time:"Night",value:"",unit:"unit"}]},{therapyType:"Bolus",drugName:"",preListedDrugPath:"bolusDrugList",dosageList:[{time:"Morning",value:"",unit:"unit"},{time:"Noon",value:"",unit:"unit"},{time:"Night",value:"",unit:"unit"}]},{therapyType:"Premix",drugName:"",preListedDrugPath:"premixDrugList",dosageList:[{time:"Morning",value:"",unit:"unit"},{time:"Noon",value:"",unit:"unit"},{time:"Night",value:"",unit:"unit"}]},{therapyType:"Other",drugName:"",preListedDrugPath:"otherInsulinDrugList",dosageList:[{time:"Morning",value:"",unit:"unit"},{time:"Noon",value:"",unit:"unit"},{time:"Night",value:"",unit:"unit"}]}]},otherMedicationList:[{name:"Anti HTN",isYes:"",medicineList:[{name:"",dose:"",unit:""}]},{name:"Anti lipids",isYes:"",medicineList:[{name:"",dose:"",unit:""}]},{name:"Aspirin",isYes:"",medicineList:[{name:"",dose:"",unit:""}]},{name:"Anti-obesity",isYes:"",medicineList:[{name:"",dose:"",unit:""}]}]}}},loadNdr:function(e){var t;return t=app.db.find("ndr-records",function(t){var i;return i=t.serial,i===e}),1===t.length?(this.isRecordValid=!0,this.ndr=t[0],this.set("EDIT_MODE_ON",!0)):(this._notifyInvalidRecord(),this.set("EDIT_MODE_ON",!1))},computeWaistHipRatio:function(){var e,t,i,a,n,s;for(s=0,e=0,n=this.ndr.data.clinicalInfoList,t=0,a=n.length;t<a;t++)i=n[t],"waist"===i.type?s=parseInt(i.value):"hip"===i.type&&(e=parseInt(i.value));return this.waistHipRatio=s/e},_loadPatient:function(e,t){var i,a;return i=app.db.find("patient-list",function(t){var i;return i=t.serial,i===e}),1===i.length?(this.isPatientValid=!0,a=i[0],a.name=this.$getFullName(a.name),this.patient=a):this._notifyInvalidPatient(),t()},_notifyInvalidPatient:function(){return this.isPatientValid=!1,this.domHost.showModalDialog("Invalid/missing Patient!")},_notifyInvalidRecord:function(){return this.isRecordValid=!1,this.domHost.showModalDialog("Invalid/missing NDR Record!")},addPhysicalActivity:function(){return this.physicalActivityObj.name&&this.physicalActivityObj.duration?(this.push("ndr.data.physicalActivityList",this.physicalActivityObj),this.makeNewPhysicalActivityObj()):void this.domHost.showToast("Please Fill Up Name and Duration")},deletePhysicalActivity:function(e){var t;return t=e.model.index,this.splice("ndr.data.physicalActivityList",t,1)},makeNewPhysicalActivityObj:function(){return this.physicalActivityObj={name:null,duration:null,unit:"min/day"}},addPhysicalActivity2:function(){return this.physicalActivityObj2.name&&this.physicalActivityObj2.duration?(this.push("ndr.data.physicalActivityList2",this.physicalActivityObj2),this.makeNewPhysicalActivityObj2()):void this.domHost.showToast("Please Fill Up Name and Duration")},deletePhysicalActivity2:function(e){var t;return t=e.model.index,this.splice("ndr.data.physicalActivityList2",t,1)},makeNewPhysicalActivityObj2:function(){return this.physicalActivityObj2={name:null,duration:null,unit:"min/day"}},addCustomTest:function(){return this.customTest.name&&this.customTest.unit?(this.push("laboratoryTestList",this.customTest),this.makeNewCustomTest()):void this.domHost.showToast("Test Name and Unit is Required!")},deleteCustomTest:function(e){var t,i,a;return t=this.locateParentNode(e.target,"PAPER-ICON-BUTTON"),t.opened=!1,a=this.$$("#lab-test-list-repeater"),i=a.indexForElement(t),this.splice("laboratoryTestList",i,1)},makeNewCustomTest:function(){return this.customTest={name:null,value:null,unit:null,isSelected:"",costType:"free",inputType:"number",isCustomTest:!0,serial:null}},addFamilyHistoryDisease:function(){return this.push("ndr.data.medicalInfo.familyHistoryList",this.otherFamilyHistoryDisease)},addAddiction:function(){return this.push("ndr.data.medicalInfo.drugAddictionList",this.otherAddiction)},addCustomComplication:function(){return this.push("complicationList",{name:this.customComplication,isSelected:!0,serial:null})},addHistoryDisease:function(){return this.push("ndr.data.medicalInfo.historyOfDeseaseList",this.historyDisease)},addCookingOil:function(){return this.push("ndr.data.medicalInfo.typeOfCookingOilList",this.otherTypeOfCookingOil)},addCookingOil2:function(){return this.push("ndr.data.medicalInfo.typeOfCookingOilList2",this.otherTypeOfCookingOil2)},addVaccine:function(){return this.push("ndr.data.medicalInfo.vaccinationList",this.otherVaccine)},addDietItem:function(){return this.push("ndr.data.medicalInfo.dietaryHistoryList",this.otherDietItem)},deleteDietItem:function(e){var t;return t=e.model.index,this.splice("ndr.data.medicalInfo.dietaryHistoryList",t,1)},onDietaryItemValue:function(e){var t,i,a,n,s,r,l,o,u,d;a=this.locateParentNode(e.target,"PAPER-INPUT"),a.opened=!1,o=this.$$("#dietary-list-repeater"),n=o.indexForElement(a),s=e.model.index,t=0,u=1,r=2,0===s&&(i=this.ndr.data.medicalInfo.dietaryHistoryList[n].consumeAmount[s].value,this.set("ndr.data.medicalInfo.dietaryHistoryList."+n+".consumeAmount."+u+".value",parseInt((7*i).toString())),this.set("ndr.data.medicalInfo.dietaryHistoryList."+n+".consumeAmount."+r+".value",parseInt((30*i).toString()))),1===s&&(d=this.ndr.data.medicalInfo.dietaryHistoryList[n].consumeAmount[s].value,i=d/7,this.set("ndr.data.medicalInfo.dietaryHistoryList."+n+".consumeAmount."+t+".value",parseInt(i.toString())),this.set("ndr.data.medicalInfo.dietaryHistoryList."+n+".consumeAmount."+r+".value",parseInt((30*i).toString()))),2===s&&(l=this.ndr.data.medicalInfo.dietaryHistoryList[n].consumeAmount[s].value,i=l/30,this.set("ndr.data.medicalInfo.dietaryHistoryList."+n+".consumeAmount."+t+".value",0),this.set("ndr.data.medicalInfo.dietaryHistoryList."+n+".consumeAmount."+u+".value",0))},addDietItem2:function(){return this.push("ndr.data.medicalInfo.dietaryHistoryList2",this.otherDietItem2)},deleteDietItem2:function(e){var t;return t=e.model.index,this.splice("ndr.data.medicalInfo.dietaryHistoryList2",t,1)},onDietaryItemValue2:function(e){var t,i,a,n,s,r,l,o,u,d;a=this.locateParentNode(e.target,"PAPER-INPUT"),a.opened=!1,o=this.$$("#dietary-list-repeater-2"),n=o.indexForElement(a),s=e.model.index,t=0,u=1,r=2,0===s&&(i=this.ndr.data.medicalInfo.dietaryHistoryList2[n].consumeAmount[s].value,this.set("ndr.data.medicalInfo.dietaryHistoryList2."+n+".consumeAmount."+u+".value",parseInt((7*i).toString())),this.set("ndr.data.medicalInfo.dietaryHistoryList2."+n+".consumeAmount."+r+".value",parseInt((30*i).toString()))),1===s&&(d=this.ndr.data.medicalInfo.dietaryHistoryList2[n].consumeAmount[s].value,i=d/7,this.set("ndr.data.medicalInfo.dietaryHistoryList2."+n+".consumeAmount."+t+".value",parseInt(i.toString())),this.set("ndr.data.medicalInfo.dietaryHistoryList2."+n+".consumeAmount."+r+".value",parseInt((30*i).toString()))),2===s&&(l=this.ndr.data.medicalInfo.dietaryHistoryList2[n].consumeAmount[s].value,i=l/30,this.set("ndr.data.medicalInfo.dietaryHistoryList2."+n+".consumeAmount."+t+".value",0),this.set("ndr.data.medicalInfo.dietaryHistoryList2."+n+".consumeAmount."+u+".value",0))},addMedicine:function(e){var t,i;return t=e.model.index,i="ndr.data.otherMedicationList."+t+".medicineList",this.push(i,{name:"",dose:"",unit:""})},saveBtnPressed:function(){return this.ndr.data.visitType?(null===this.ndr.serial&&(this.ndr.serial=this.generateSerialForNdrRecord()),this.saveNdrData(this.ndr,function(e){return function(){return e.filterAndSaveNdrLaboratoryTestList(function(){return e.filterAndSaveNdrComplicationList(function(){return e.domHost.showToast("Record Saved!"),e.arrowBackButtonPressed()})})}}(this))):void this.domHost.showToast("Please Fill Up Visit type First!")},saveNdrData:function(e,t){return e.lastModifiedDatetimeStamp=lib.datetime.now(),app.db.upsert("ndr-records",e,function(t){return function(t){var i;return i=t.serial,e.serial===i}}(this)),t()},_makeOtherTest:function(e,t){var i;i={serial:e.serial,visitSerial:this.ndr.serial,visitType:"bdemr-ndr",createdByUserSerial:this.user.serial,patientSerial:this.patient.serial,createdDatetimeStamp:lib.datetime.now(),lastModifiedDatetimeStamp:lib.datetime.now(),lastSyncedDatetimeStamp:0,data:{date:lib.datetime.now(),name:e.name,institution:this.organization.name,institutionSerial:this.organization.idOnServer,result:e.value,unit:e.unit,attachmentSerialList:[]}},null===e.serial&&(i.serial=this.generateSerialForVitals("OT")),t(i)},_makeBloodSugar:function(e,t){var i;i={serial:e.serial,visitSerial:this.ndr.serial,visitType:"bdemr-ndr",createdByUserSerial:this.user.serial,patientSerial:this.patient.serial,createdDatetimeStamp:lib.datetime.now(),lastModifiedDatetimeStamp:lib.datetime.now(),lastSyncedDatetimeStamp:0,data:{type:e.name,value:e.value,unit:e.unit}},null===e.serial&&(i.serial=this.generateSerialForVitals("BS")),t(i)},upsertOtherTest:function(e){return e.lastModifiedDatetimeStamp=lib.datetime.now(),app.db.upsert("patient-test-other",e,function(t){return function(t){var i;return i=t.serial,e.serial===i}}(this))},upsertBloodSugar:function(e){return e.lastModifiedDatetimeStamp=lib.datetime.now(),app.db.upsert("patient-test-blood-sugar",e,function(t){return function(t){var i;return i=t.serial,e.serial===i}}(this))},filterAndSaveNdrLaboratoryTestList:function(e){var t,i,a,n;for(n=this.laboratoryTestList,t=0,a=n.length;t<a;t++)i=n[t],i.value&&("FPG"===i.name||"2hPG"===i.name||"Post Meal"===i.name?this._makeBloodSugar(i,function(e){return function(t){return e.upsertBloodSugar(t)}}(this)):this._makeOtherTest(i,function(e){return function(t){return e.upsertOtherTest(t)}}(this)));return e()},loadAndFilterNdrLaboratoryTestList:function(e){return this._makeLaboratoryTestList(function(t){return function(){var i,a,n,s,r,l,o;if(o=app.db.find("patient-test-other",function(t){var i;return i=t.visitSerial,i===e}),i=app.db.find("patient-test-blood-sugar",function(t){var i;return i=t.visitSerial,i===e}),o.length>0)for(a=0,r=o.length;a<r;a++)n=o[a],t.checkAndPushOtherTestAsLaboratoryData(n);if(i.length>0)for(s=0,l=i.length;s<l;s++)n=i[s],t.checkAndPushBloodSugarAsLaboratoryData(n)}}(this))},checkAndPushOtherTestAsLaboratoryData:function(e){var t,i,a,n,s;for(s=this.laboratoryTestList,i=t=0,n=s.length;t<n;i=++t)if(a=s[i],e.serial)return e.data.name===a.name?(this.set("laboratoryTestList."+i+".value",e.data.result),void this.set("laboratoryTestList."+i+".serial",e.serial)):void this.push("laboratoryTestList",{name:e.data.name,value:e.data.result,unit:e.data.unit,isSelected:"yes",costType:"free",inputType:"number",isCustomTest:!0,serial:e.serial})},checkAndPushBloodSugarAsLaboratoryData:function(e){var t,i,a,n,s;for(s=this.laboratoryTestList,i=t=0,n=s.length;t<n;i=++t)if(a=s[i],e.serial&&e.data.type===a.name)return this.set("laboratoryTestList."+i+".value",e.data.value),void this.set("laboratoryTestList."+i+".serial",e.serial)},_makeConfirmDiagnosis:function(e,t){var i;i={serial:e.serial,visitSerial:this.ndr.serial,visitType:"bdemr-ndr",createdByUserSerial:this.user.serial,patientSerial:this.patient.serial,createdDatetimeStamp:lib.datetime.now(),lastModifiedDatetimeStamp:lib.datetime.now(),lastSyncedDatetimeStamp:0,diagnosis:e.name},null===e.serial&&(i.serial=this.generateSerialForDiagnosis()),t(i)},upsertConfirmDiagnosis:function(e){return e.lastModifiedDatetimeStamp=lib.datetime.now(),app.db.upsert("visit-diagnosis",e,function(t){return function(t){var i;return i=t.serial,e.serial===i}}(this))},loadAndFilterNdrComplicationList:function(e){return this._makeComplicationList(function(t){return function(){var i,a,n,s,r;if(s=app.db.find("visit-diagnosis",function(t){var i;return i=t.visitSerial,i===e}),s.length>0){for(r=[],i=0,n=s.length;i<n;i++)a=s[i],r.push(t.formatDiagnosisDataToComplicationData(a));return r}}}(this))},formatDiagnosisDataToComplicationData:function(e){var t,i,a,n,s;for(s=this.complicationList,i=t=0,n=s.length;t<n;i=++t)if(a=s[i],e.serial)return e.diagnosis===a.name?(this.set("complicationList."+i+".isSelected",!0),void this.set("complicationList."+i+".serial",e.serial)):void this.push("complicationList",{name:e.diagnosis,isSelected:!0,serial:e.serial,isCustom:!0})},filterAndSaveNdrComplicationList:function(e){var t,i,a,n;for(n=this.complicationList,t=0,a=n.length;t<a;t++)i=n[t],i.isSelected?this._makeConfirmDiagnosis(i,function(e){return function(t){return e.upsertConfirmDiagnosis(t)}}(this)):this.deleteConfirmDiagnosisDataIfAvaialble(i.serial);return e()},deleteConfirmDiagnosisDataIfAvaialble:function(e){var t;if(e)return t=app.db.find("visit-diagnosis",function(t){var i;return i=t.serial,i===e})[0]._id,app.db.remove("visit-diagnosis",t)},printBtnPressed:function(){return window.print()},navigatedIn:function(){var e;return e=this.domHost.getPageParams(),this.organization=this.getCurrentOrganization(),this.organization||this.domHost.navigateToPage("#/select-organization"),this._loadUser(function(t){return function(){return e.patient?t._loadPatient(e.patient,function(){return"new"===e.record?(t._makeNdr(),t.isRecordValid=!0):t.loadNdr(e.record),t.loadAndFilterNdrLaboratoryTestList(e.record),t.loadAndFilterNdrComplicationList(e.record)}):t._notifyInvalidPatient()}}(this))},addOgldDrug:function(e){var t;return t=e.model,this.push("ndr.data.currentTreatment.ogld.ogldDrugList",{ogldDrugName:"",drugDosage:""})},deleteSelectedOgldDrug:function(e){var t,i;return i=this.ndr.data.currentTreatment.ogld.ogldDrugList.length,1===i?this.domHost.showToast("Sorry! Add Another field & TRY AGAIN."):(t=e.model.index,this.splice("ndr.data.currentTreatment.ogld.ogldDrugList",t,1))},navigatedOut:function(){return this.set("EDIT_MODE_ON",!1)}})}).call(this);
//# sourceMappingURL=page-ndr-editor.coffee-compiled.js.map</script>
</dom-module>
